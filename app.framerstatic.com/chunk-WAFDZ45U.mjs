var w=function(){return w=Object.assign||function(i){for(var t,e=1,s=arguments.length;e<s;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i},w.apply(this,arguments)};function N(i,t,e,s){return new(e||(e=Promise))(function(n,r){function o(l){try{u(s.next(l))}catch(a){r(a)}}function c(l){try{u(s.throw(l))}catch(a){r(a)}}function u(l){var a;l.done?n(l.value):(a=l.value,a instanceof e?a:new e(function(d){d(a)})).then(o,c)}u((s=s.apply(i,t||[])).next())})}function S(i,t){var e,s,n,r,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function c(u){return function(l){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,s&&(n=2&a[0]?s.return:a[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,a[1])).done)return n;switch(s=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,s=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(n=o.trys,!((n=n.length>0&&n[n.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!n||a[1]>n[0]&&a[1]<n[3])){o.label=a[1];break}if(a[0]===6&&o.label<n[1]){o.label=n[1],n=a;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(a);break}n[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(i,o)}catch(d){a=[6,d],s=0}finally{e=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([u,l])}}}var V=["Control","Option","Shift","CommandOrControl"];function X(i,t){var e=t.className,s=t.animationName;return N(this,void 0,void 0,function(){var n;return S(this,function(r){if(!i.parentNode)throw Error("Element is not in DOM");return n=new Promise(function(o){var c=function(u){u.target instanceof Node&&i.contains(u.target)&&u.animationName===s&&(i.removeEventListener("animationend",c),o())};i.addEventListener("animationend",c)}),i.classList.add(e),[2,n]})})}var g,L;(function(i){i[i.Immediate=0]="Immediate",i[i.Delayed=1]="Delayed",i[i.NoAnimation=2]="NoAnimation"})(g||(g={})),function(i){i[i.Initial=0]="Initial",i[i.Open=1]="Open",i[i.Closing=2]="Closing",i[i.Closed=3]="Closed"}(L||(L={}));var ee=function(){function i(t,e){var s=this,n=e.className,r=e.document,o=e.isDarkMode,c=e.maxItemsPerMenu,u=e.enableTranslate;this.handleKeyDown=function(l){s.state===L.Open&&(l.key!=="Escape"&&l.key!=="Esc"||(s.close(g.Immediate),l.stopPropagation()))},this.activePromise=null,this.activeLI=null,this.mouseDownTime=0,this.showTime=0,this.state=L.Initial,this.originalItems=t,this.items=t=Z(t),this.document=r||window.document,this.blocker=function(l){var a=l.createElement("div");return a.className="menu-fisso-menu-blocker",a}(this.document),this.menu=function(l){var a=l.document,d=l.className,m=l.items,v=l.isDarkMode,f=l.maxItemsPerMenu,h=l.enableTranslate,b=a.createElement("ul");return b.classList.add("menu-fisso"),b.classList.toggle("menu-fisso-dark",v),d&&d.split(" ").forEach(function(p){b.classList.add(p)}),m.forEach(function(p,k){var y=Q(a,[k],p,f,h).li;y&&(p.type!=="separator"&&p.checked&&p.visible!==!1&&b.classList.add("has-checked-item"),b.appendChild(y))}),b}({document:this.document,items:t,className:n,isDarkMode:o,maxItemsPerMenu:c,enableTranslate:u})}return i.prototype.close=function(t,e){return N(this,void 0,void 0,function(){var s,n,r;return S(this,function(o){switch(o.label){case 0:if(!this.blocker.parentNode||!this.menu.parentNode)return[2];if(this.state!==L.Open)throw Error("Menu not in Open state ("+this.state+")");if(n=(s=this).resolve,r=s.reject,!n||!r)throw Error("Invalid internal state");return this.state=L.Closing,this.document.body.removeChild(this.blocker),window.removeEventListener("keydown",this.handleKeyDown,{capture:!0}),t!==g.Immediate&&t!==g.Delayed?[3,2]:[4,this.fadeOut(t!==g.Delayed)];case 1:o.sent(),o.label=2;case 2:return this.state=L.Closed,this.document.body.removeChild(this.menu),n(e||null),[2]}})})},i.prototype.handleEvent=function(t){var e,s;switch(t.type){case"animationend":var n=t.animationName;n==="menu-active-item"&&this.setActiveLI(t.target instanceof HTMLLIElement?t.target:null),n==="menu-safe-area-timeout"&&J(t.target)&&t.target.classList.remove("enabled");break;case"contextmenu":t.preventDefault(),t.stopPropagation(),t.target===this.blocker&&Date.now()-this.showTime>500&&this.close(g.Immediate);break;case"mousedown":if(t.button!==0)break;this.mouseDownTime=Date.now(),t.target===this.blocker&&this.close(g.Immediate);break;case"mouseout":t.currentTarget===this.menu&&this.setActiveLI(null);break;case"mouseover":t.target instanceof HTMLLIElement&&this.setActiveLI(t.target);break;case"mouseup":if(Date.now()-this.showTime<500)break;if(t.target===this.blocker)this.close(g.Immediate);else{var r=t,o=r.altKey,c=r.ctrlKey,u=r.metaKey,l=r.shiftKey;this.pick({altKey:o,ctrlKey:c,metaKey:u,shiftKey:l})}break;case"mousemove":if(t.target!=this.activeLI)return;var a=(e=this.activeLI)===null||e===void 0?void 0:e.querySelector(":scope > .safearea");if(a instanceof HTMLElement){a.classList.add("enabled");var d=((s=this.activeLI)===null||s===void 0?void 0:s.querySelector(":scope > ul.expand-left"))===null,m=d?"100%":"0",v=a.getBoundingClientRect(),f=t,h=f.clientX,b=f.clientY,p=h-v.left+5*(d?1:-1),k=b-v.top;a.style.clipPath="polygon("+m+" 0, "+p+"px "+(k-5)+"px, "+p+"px "+(k+5)+"px, "+m+" 100%)"}}},i.prototype.isOpenWith=function(t){return this.activePromise!==null&&this.originalItems===t},i.prototype.position=function(t){var e=t.location,s=e.x,n=e.y,r=t.within,o=t.expandRight,c=o===void 0||o;if(!this.menu.parentNode)throw Error("Menu not in DOM");if(this.state!==L.Open)throw Error("Menu not in Open state ("+this.state+")");var u,l,a=r||this.document.body.getBoundingClientRect(),d=(l=5,{bottom:(u=a).bottom-l,left:u.left+l,right:u.right-l,top:u.top+l}),m=this.menu;m.style.left=a.left+s+2+"px",m.style.top=a.top+n+"px",m.style.setProperty("transform","none","important");var v=m.getBoundingClientRect();m.style.removeProperty("transform");var f=Y(v,d);m.style.left=f.left+"px",m.style.top=f.top+"px",Array.from(m.querySelectorAll("li.submenu > ul")).forEach(function(h){var b,p=(b=h.parentElement)===null||b===void 0?void 0:b.getBoundingClientRect();if(p){var k=h.getBoundingClientRect(),y=Y(k,d,p);1&y.flow?4&y.flow?h.classList.add("anchor-bottom"):h.classList.add("anchor-top"):4&y.flow&&h.classList.add("expand-up"),c?k.right>d.right&&(c=!1,h.classList.add("expand-left")):(h.classList.add("expand-left"),(k=h.getBoundingClientRect()).left<d.left&&(c=!0,h.classList.remove("expand-left")));var O=p.bottom-d.bottom,M=d.top-p.top;h.style.setProperty("--anchor-bottom-offset",O+"px"),h.style.setProperty("--anchor-top-offset",M+"px");var P=h.nextElementSibling;J(P)&&(P.style.height=k.height+"px",P.style.setProperty("--anchor-bottom-offset",O+"px"),P.style.setProperty("--anchor-top-offset",M+"px"))}})},i.prototype.show=function(t,e){var s=this;if(this.activePromise)throw Error("Menu already in DOM");if(this.state!==L.Initial)throw Error("Menu not in Initial state ("+this.state+")");this.onSelection=e,this.state=L.Open;var n=this.blocker,r=this.menu;return window.addEventListener("keydown",this.handleKeyDown,{capture:!0}),this.document.body.appendChild(n),n.addEventListener("animationend",this),n.addEventListener("contextmenu",this),n.addEventListener("mousedown",this),n.addEventListener("mouseup",this),this.document.body.appendChild(r),r.addEventListener("animationend",this),r.addEventListener("contextmenu",this),r.addEventListener("mousedown",this),r.addEventListener("mouseout",this),r.addEventListener("mouseover",this),r.addEventListener("mouseup",this),this.position(t),this.mouseDownTime=this.showTime=Date.now(),this.activePromise=new Promise(function(o,c){s.resolve=function(u){s.activePromise=null,o(u)},s.reject=function(){s.activePromise=null,c()}}),this.activePromise},i.prototype.wait=function(){return N(this,void 0,void 0,function(){return S(this,function(t){return this.activePromise?[2,this.activePromise]:[2,null]})})},i.prototype.fadeOut=function(t){return t===void 0&&(t=!1),N(this,void 0,void 0,function(){return S(this,function(e){return[2,X(this.menu,{className:t?"disappearing-immediate":"disappearing",animationName:"menu-disappearing"})]})})},i.prototype.pick=function(t){return N(this,void 0,void 0,function(){var e,s,n,r,o;return S(this,function(c){switch(c.label){case 0:if(!this.activeLI||(u=this.activeLI).classList.contains("disabled")||u.classList.contains("submenu"))return Date.now()-this.mouseDownTime>500&&this.close(g.Immediate),[2];if(e=this.activeLI.dataset,s=e.path,n=e.action,r=this.onSelection,!s)throw Error("Path missing in menu item");return o=w({path:s.split(",").map(function(l){return parseInt(l,10)}),action:n},t),r&&r(o),[4,X(this.activeLI,{className:"picked",animationName:"menu-picked"})];case 1:return c.sent(),[4,this.close(g.Delayed,o)];case 2:return c.sent(),[2]}var u})})},i.prototype.setActiveLI=function(t){this.activeLI&&(this.activeLI.classList.remove("hover"),this.activeLI.removeEventListener("mousemove",this)),t&&(t.classList.add("hover"),t.addEventListener("mousemove",this)),this.activeLI=t},i}();function Q(i,t,e,s,n){var r;if(e.visible===!1)return{li:null,indexOffset:e.virtual?0:1};var o=i.createElement("li"),c=i.createElement("div");if(c.classList.add("inner"),o.appendChild(c),e.type==="separator")return o.classList.add("separator"),{li:o,indexOffset:e.virtual?0:1};var u,l=e.disabled||e.submenu&&e.submenu.length===0;if(l&&o.classList.add("disabled"),e.submenu&&o.classList.add("submenu"),e.checked&&o.classList.add("checked"),l||e.virtual||(o.dataset.path=t.join(","),e.action&&(o.dataset.action=e.action)),e.label){var a=i.createElement("div");a.classList.add("row"),c.appendChild(a);var d=i.createElement("span");if(d.classList.add("label"),n&&d.classList.add("translate"),d.textContent=e.label,a.appendChild(d),e.badge&&!e.submenu){o.classList.add("has-badge");var m=i.createElement("span");m.classList.add("badge"),m.textContent=e.badge,e.badgeCustomClass&&m.classList.add(e.badgeCustomClass),c.appendChild(m)}else{var v=e.acceleratorLabelTokens;if(!v&&e.accelerator&&(v=(u=e.accelerator)?u.split("+").sort(function(x,D){var C=V.indexOf(x),I=V.indexOf(D);return C!==-1&&I!==-1?C-I:C!==-1?-1:I!==-1?1:0}).map(function(x){switch(x){case"Backspace":case"Delete":return"\u232B";case"CommandOrControl":return"\u2318";case"Control":return"\u2303";case"Down":return"\u2193";case"Enter":case"Return":return"\u21A9";case"Left":return"\u2190";case"-":return"\u2013";case"Option":return"\u2325";case"Plus":return"+";case"Right":return"\u2192";case"Shift":return"\u21E7";case"Up":return"\u2191"}return x}):[]),v){var f=i.createElement("span");f.classList.add("accelerator");var h=e.tokenDelimiter,b=v.length;v.forEach(function(x,D){var C=i.createElement("span");if(C.textContent=x,f.appendChild(C),h&&D<b-1){var I=i.createElement("span");I.classList.add("delimiter"),I.textContent=h,f.appendChild(I)}}),c.appendChild(f)}}if(e.icon){var p=i.createElement("span");if(p.classList.add("icon"),p.style.height=(e.icon.height||14)+"px",p.style.width=(e.icon.width||14)+"px",e.icon.inlineSVG){var k=new DOMParser().parseFromString(e.icon.src,"image/svg+xml").documentElement;p.appendChild(k)}else{var y=i.createElement("img");y.src=e.icon.src,e.icon.crossOrigin!=="disabled"&&(y.crossOrigin=(r=e.icon.crossOrigin)!==null&&r!==void 0?r:"anonymous"),p.appendChild(y)}a.prepend(p)}if(e.description){var O=i.createElement("span");O.classList.add("description"),n&&O.classList.add("translate"),O.textContent=e.description,d.appendChild(O)}}var M=0;if(e.submenu&&!l){for(var P=function(x,D){if(!D)return[1,x];x>D&&(x+=1);var C=Math.ceil(x/D),I=Math.max(Math.floor(x/C),1);return[C,I]}(e.submenu.length,s),z=P[0],K=P[1],T=[],E=0;E<z;E++){var H=E*K,_=E<z-1?H+K:void 0;T.push(e.submenu.slice(H,_))}for(E=0;E<z-1;E++)T[E].push({label:"More\u2026",submenu:T[E+1],virtual:!0});for(var A=i.createElement("ul"),U=!1,B=0,F=T[0];B<F.length;B++){var R=F[B],j=Array.from(t);R.type!=="separator"&&R.checked&&R.visible!==!1&&(U=!0),e.virtual?j[j.length-1]+=M:j.push(M);var q=Q(i,j,R,s,n),G=q.li,$=q.indexOffset;e.virtual?M+=$:M++,G&&A.appendChild(G)}A.classList.add(U?"has-checked-item":"reset-checked-padding"),o.appendChild(A);var W=i.createElement("div");W.classList.add("safearea"),o.appendChild(W)}return{li:o,indexOffset:e.virtual?M:1}}function Y(i,t,e){var s=i.right>t.right?t.right-i.width:i.left,n=Math.max(0,i.bottom-t.bottom);if(!n)return{left:s,top:i.top,flow:2};var r=e?e.bottom-i.height:t.bottom-i.height,o=Math.max(0,t.top-r);return o?o>n?{left:s,top:i.top,flow:3}:{left:s,top:r,flow:5}:{left:s,top:r,flow:4}}function J(i){return i instanceof HTMLElement&&i.classList.contains("safearea")}function Z(i){var t=!1,e=!1,s=i.map(function(n,r){if(n.visible===!1)return n;if(n.type!=="separator"){if(t=!0,e=!1,!n.submenu)return n;var o=Z(n.submenu);return w(w({},n),{submenu:o})}return r===0||r===i.length-1?w(w({},n),{visible:!1}):t?(t=!1,e=r,n):(t=!1,w(w({},n),{visible:!1}))});return e&&(s[e]=w(w({},s[e]),{visible:!1})),s}var te=function(){function i(){}return i.prototype.close=function(t){return t===void 0&&(t=g.Immediate),N(this,void 0,void 0,function(){return S(this,function(e){return this.active?[2,this.active.close(t)]:[2]})})},i.prototype.show=function(t,e){var s=e.className,n=e.location,r=e.within,o=e.isDarkMode,c=e.maxItemsPerMenu,u=e.enableTranslate,l=e.onSelection,a=e.expandRight;return N(this,void 0,void 0,function(){var d,m,v=this;return S(this,function(f){switch(f.label){case 0:return this.active?this.active.isOpenWith(t)?(this.active.position({location:n,within:r,expandRight:a}),[2,this.active.wait()]):[3,1]:[3,3];case 1:return[4,this.active.close(g.NoAnimation)];case 2:f.sent(),f.label=3;case 3:return d=new ee(t,{className:s,isDarkMode:o,maxItemsPerMenu:c,enableTranslate:u}),this.active=d,(m=d.show({location:n,within:r,expandRight:a},l)).finally(function(){v.active===d&&(v.active=void 0)}),[2,m]}})})},i}(),ne=new te;export{ne as a};
//# sourceMappingURL=https://app.framerstatic.com/chunk-WAFDZ45U.mjs.map
