import{a as u,c as y,d as O,j as $,k as M,l as b,m as C,n as k,s as A}from"https://app.framerstatic.com/chunk-KYPY4QS7.mjs";var S=["ol",0],R=["ul",0],v=["li",0],z={attrs:{order:{default:1,validate:"number"}},parseDOM:[{tag:"ol",getAttrs(l){return{order:l.hasAttribute("start")?+l.getAttribute("start"):1}}}],toDOM(l){return l.attrs.order==1?S:["ol",{start:l.attrs.order},0]}},V={parseDOM:[{tag:"ul"}],toDOM(){return R}},B={parseDOM:[{tag:"li"}],toDOM(){return v},defining:!0};function L(l,e){let n={};for(let r in l)n[r]=l[r];for(let r in e)n[r]=e[r];return n}function q(l,e,n){return l.append({ordered_list:L(z,{content:"list_item+",group:n}),bullet_list:L(V,{content:"list_item+",group:n}),list_item:L(B,{content:e})})}function H(l,e=null){return function(n,r){let{$from:t,$to:o}=n.selection,i=t.blockRange(o);if(!i)return!1;let f=r?n.tr:null;return _(f,i,l,e)?(r&&r(f.scrollIntoView()),!0):!1}}function _(l,e,n,r=null){let t=!1,o=e,i=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=i.resolve(e.start-2);o=new O(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new O(e.$from,i.resolve(e.$to.end(e.depth)),e.depth)),t=!0}let f=b(o,n,r,e);return f?(l&&P(l,e,f,t,n),!0):!1}function P(l,e,n,r,t){let o=u.empty;for(let s=n.length-1;s>=0;s--)o=u.from(n[s].type.create(n[s].attrs,o));l.step(new $(e.start-(r?2:0),e.end,e.start,e.end,new y(o,0,0),n.length,!0));let i=0;for(let s=0;s<n.length;s++)n[s].type==t&&(i=s+1);let f=n.length-i,d=e.start+n.length-(r?2:0),c=e.parent;for(let s=e.startIndex,p=e.endIndex,a=!0;s<p;s++,a=!1)!a&&C(l.doc,d,f)&&(l.split(d,f),d+=2*f),d+=c.child(s).nodeSize;return l}function F(l,e){return function(n,r){let{$from:t,$to:o,node:i}=n.selection;if(i&&i.isBlock||t.depth<2||!t.sameParent(o))return!1;let f=t.node(-1);if(f.type!=l)return!1;if(t.parent.content.size==0&&t.node(-1).childCount==t.indexAfter(-1)){if(t.depth==3||t.node(-3).type!=l||t.index(-2)!=t.node(-2).childCount-1)return!1;if(r){let p=u.empty,a=t.index(-1)?1:t.index(-2)?2:3;for(let x=t.depth-a;x>=t.depth-3;x--)p=u.from(t.node(x).copy(p));let m=t.indexAfter(-1)<t.node(-2).childCount?1:t.indexAfter(-2)<t.node(-3).childCount?2:3;p=p.append(u.from(l.createAndFill()));let I=t.before(t.depth-(a-1)),h=n.tr.replace(I,t.after(-m),new y(p,4-a,0)),w=-1;h.doc.nodesBetween(I,h.doc.content.size,(x,D)=>{if(w>-1)return!1;x.isTextblock&&x.content.size==0&&(w=D+1)}),w>-1&&h.setSelection(A.near(h.doc.resolve(w))),r(h.scrollIntoView())}return!0}let d=o.pos==t.end()?f.contentMatchAt(0).defaultType:null,c=n.tr.delete(t.pos,o.pos),s=d?[e?{type:l,attrs:e}:null,{type:d}]:void 0;return C(c.doc,t.pos,2,s)?(r&&r(c.split(t.pos,2,s).scrollIntoView()),!0):!1}}function Q(l,e){let n=F(l,e);return(r,t)=>n(r,t&&(o=>{let i=r.storedMarks||r.selection.$to.parentOffset&&r.selection.$from.marks();i&&o.ensureMarks(i),t(o)}))}function U(l){return function(e,n){let{$from:r,$to:t}=e.selection,o=r.blockRange(t,i=>i.childCount>0&&i.firstChild.type==l);return o?n?r.node(o.depth-1).type==l?J(e,n,l,o):N(e,n,o):!0:!1}}function J(l,e,n,r){let t=l.tr,o=r.end,i=r.$to.end(r.depth);o<i&&(t.step(new $(o-1,i,o,i,new y(u.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new O(t.doc.resolve(r.$from.pos),t.doc.resolve(i),r.depth));let f=M(r);if(f==null)return!1;t.lift(r,f);let d=t.mapping.map(o,-1)-1;return k(t.doc,d)&&t.join(d),e(t.scrollIntoView()),!0}function N(l,e,n){let r=l.tr,t=n.parent;for(let m=n.end,I=n.endIndex-1,h=n.startIndex;I>h;I--)m-=t.child(I).nodeSize,r.delete(m-1,m+1);let o=r.doc.resolve(n.start),i=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let f=n.startIndex==0,d=n.endIndex==t.childCount,c=o.node(-1),s=o.index(-1);if(!c.canReplace(s+(f?0:1),s+1,i.content.append(d?u.empty:u.from(t))))return!1;let p=o.pos,a=p+i.nodeSize;return r.step(new $(p-(f?1:0),a+(d?1:0),p+1,a-1,new y((f?u.empty:u.from(t.copy(u.empty))).append(d?u.empty:u.from(t.copy(u.empty))),f?0:1,d?0:1),f?0:1)),e(r.scrollIntoView()),!0}function X(l){return function(e,n){let{$from:r,$to:t}=e.selection,o=r.blockRange(t,c=>c.childCount>0&&c.firstChild.type==l);if(!o)return!1;let i=o.startIndex;if(i==0)return!1;let f=o.parent,d=f.child(i-1);if(d.type!=l)return!1;if(n){let c=d.lastChild&&d.lastChild.type==f.type,s=u.from(c?l.create():null),p=new y(u.from(l.create(null,u.from(f.type.create(null,s)))),c?3:1,0),a=o.start,m=o.end;n(e.tr.step(new $(a-(c?3:1),m,a,m,p,1,!0)).scrollIntoView())}return!0}}export{z as a,V as b,B as c,q as d,H as e,_ as f,F as g,Q as h,U as i,X as j};
//# sourceMappingURL=https://app.framerstatic.com/chunk-YE4QPCYK.mjs.map
