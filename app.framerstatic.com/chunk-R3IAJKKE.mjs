import{$ as W,ba as J}from"https://app.framerstatic.com/chunk-DHNXI6EU.mjs";import{f as Q}from"https://app.framerstatic.com/chunk-DXTSFT7O.mjs";import{p as D}from"https://app.framerstatic.com/chunk-65XKJBP2.mjs";import{f as $}from"https://app.framerstatic.com/chunk-ZQUNXESX.mjs";import{a as me}from"https://app.framerstatic.com/chunk-NIDOI5EE.mjs";import{l as H,o as B,s as g,v as E}from"https://app.framerstatic.com/chunk-PNIOO2GU.mjs";import{c as M,e as q,j as k}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var re=M(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.regionAPIs=void 0;I.regionAPIs=new Map([["us","https://api-iam.intercom.io"],["eu","https://api-iam.eu.intercom.io"],["ap","https://api-iam.au.intercom.io"]])});var se=M(y=>{"use strict";var Re=y&&y.__awaiter||function(e,r,n,t){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function c(f){try{h(t.next(f))}catch(l){i(l)}}function u(f){try{h(t.throw(f))}catch(l){i(l)}}function h(f){f.done?a(f.value):o(f.value).then(c,u)}h((t=t.apply(e,r||[])).next())})};Object.defineProperty(y,"__esModule",{value:!0});y.ref=y.init=void 0;var ne="_intercom_npm_loader",b=function(){b.loaderQueue(arguments)};b.q=[];b.loaderQueue=function(e){b.q.push(e)};var T=function(){var e,r,n=document;if(!n.getElementById(ne)){var t=n.createElement("script");t.type="text/javascript",t.async=!0,t.id=ne,t.src="https://widget.intercom.io/widget/"+((e=window.intercomSettings)===null||e===void 0?void 0:e.app_id);var o=n.getElementsByTagName("script")[0];(r=o.parentNode)===null||r===void 0||r.insertBefore(t,o)}},oe=()=>document.readyState==="complete"||document.readyState==="interactive",ke=()=>Re(void 0,void 0,void 0,function*(){var e=window,r=e.Intercom;e.intercomSettings&&(e.intercomSettings.installation_type="npm-package"),typeof r=="function"?(r("reattach_activator"),r("update",e.intercomSettings)):(e.Intercom=b,oe()?T():(document.addEventListener("readystatechange",function(){oe()&&T()}),e.attachEvent?e.attachEvent("onload",T):e.addEventListener("load",T,!1)))});y.init=ke;y.ref=void 0});var ae=M(s=>{"use strict";var Ee=s&&s.__rest||function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)r.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(n[t[o]]=e[t[o]]);return n};Object.defineProperty(s,"__esModule",{value:!0});s.onUserEmailSupplied=s.showConversation=s.showTicket=s.startChecklist=s.startSurvey=s.showNews=s.showArticle=s.startTour=s.getVisitorId=s.trackEvent=s.onUnreadCountChange=s.onShow=s.onHide=s.showNewMessage=s.showMessages=s.showSpace=s.show=s.hide=s.update=s.shutdown=s.boot=s.Intercom=void 0;var Oe=re(),ie=se(),d=(e,...r)=>{typeof window!==void 0&&window.Intercom?window.Intercom(e,...r):console.warn("Please ensure Intercom is setup and running on client-side!")},Ie=e=>{if(typeof e!="object"){console.warn("Intercom initialiser called with invalid parameters.");return}let{region:r="us"}=e,n=Ee(e,["region"]);typeof window<"u"&&!ie.ref&&(window.intercomSettings=Object.assign(Object.assign({},n),{api_base:Oe.regionAPIs.get(r)}),(0,ie.init)())};s.Intercom=Ie;s.default=s.Intercom;var Te=e=>d("boot",e);s.boot=Te;var Ce=()=>d("shutdown");s.shutdown=Ce;var xe=e=>d("update",e);s.update=xe;var Ae=()=>d("hide");s.hide=Ae;var Pe=()=>d("show");s.show=Pe;var _e=e=>d("showSpace",e);s.showSpace=_e;var je=()=>d("showMessages");s.showMessages=je;var Le=e=>d("showNewMessage",e);s.showNewMessage=Le;var Me=e=>d("onHide",e);s.onHide=Me;var We=e=>d("onShow",e);s.onShow=We;var Ue=e=>d("onUnreadCountChange",e);s.onUnreadCountChange=Ue;var Ve=(...e)=>d("trackEvent",...e);s.trackEvent=Ve;var Fe=()=>d("getVisitorId");s.getVisitorId=Fe;var Ne=e=>d("startTour",e);s.startTour=Ne;var qe=e=>d("showArticle",e);s.showArticle=qe;var He=e=>d("showNews",e);s.showNews=He;var Be=e=>d("startSurvey",e);s.startSurvey=Be;var $e=e=>d("startChecklist",e);s.startChecklist=$e;var De=e=>d("showTicket",e);s.showTicket=De;var Qe=e=>d("showConversation",e);s.showConversation=Qe;var Je=e=>d("onUserEmailSupplied",e);s.onUserEmailSupplied=Je});async function X(e,r){let n=e.getReader(),t;for(;!(t=await n.read()).done;)r(t.value)}function G(e){let r,n,t,o=!1;return function(i){r===void 0?(r=i,n=0,t=-1):r=we(r,i);let c=r.length,u=0;for(;n<c;){o&&(r[n]===10&&(u=++n),o=!1);let h=-1;for(;n<c&&h===-1;++n)switch(r[n]){case 58:t===-1&&(t=n-u);break;case 13:o=!0;case 10:h=n;break}if(h===-1)break;e(r.subarray(u,h),t),u=n,t=-1}u===c?r=void 0:u!==0&&(r=r.subarray(u),n-=u)}}function K(e,r,n){let t=z(),o=new TextDecoder;return function(i,c){if(i.length===0)n?.(t),t=z();else if(c>0){let u=o.decode(i.subarray(0,c)),h=c+(i[c+1]===32?2:1),f=o.decode(i.subarray(h));switch(u){case"data":t.data=t.data?t.data+`
`+f:f;break;case"event":t.event=f;break;case"id":e(t.id=f);break;case"retry":let l=parseInt(f,10);isNaN(l)||r(t.retry=l);break}}}}function we(e,r){let n=new Uint8Array(e.length+r.length);return n.set(e),n.set(r,e.length),n}function z(){return{data:"",event:"",id:"",retry:void 0}}var ye=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)r.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(n[t[o]]=e[t[o]]);return n},O="text/event-stream",ve=1e3,Y="last-event-id";function U(e,r){var{signal:n,headers:t,onopen:o,onmessage:a,onclose:i,onerror:c,openWhenHidden:u,fetch:h}=r,f=ye(r,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((l,le)=>{let v=Object.assign({},t);v.accept||(v.accept=O);let S;function F(){S.abort(),document.hidden||j()}u||document.addEventListener("visibilitychange",F);let N=ve,P=0;function _(){document.removeEventListener("visibilitychange",F),window.clearTimeout(P),S.abort()}n?.addEventListener("abort",()=>{_(),l()});let pe=h??window.fetch,ge=o??Se;async function j(){var L;S=new AbortController;try{let R=await pe(e,Object.assign(Object.assign({},f),{headers:v,signal:S.signal}));await ge(R),await X(R.body,G(K(w=>{w?v[Y]=w:delete v[Y]},w=>{N=w},a))),i?.(),_(),l()}catch(R){if(!S.signal.aborted)try{let w=(L=c?.(R))!==null&&L!==void 0?L:N;window.clearTimeout(P),P=window.setTimeout(j,w)}catch(w){_(),le(w)}}}j()})}function Se(e){let r=e.headers.get("content-type");if(!r?.startsWith(O))throw new Error(`Expected content-type to be ${O}, Actual: ${r}`)}var Z=q(me());async function be(){"serviceWorker"in navigator&&(await navigator.serviceWorker.register("/serviceWorker.js"),await te({type:"refreshApiServer",payload:{api:g().api}}))}async function ee(){te({type:"signOut"}),navigator.serviceWorker.getRegistrations().then(e=>{for(let r of e)r.unregister()})}async function te(e){"serviceWorker"in navigator&&(await navigator.serviceWorker.ready).active?.postMessage(e)}function ot(){Z.default.useEffect(()=>{be().catch(e=>{E("app:info").warn("Unable to register the service worker",e)})},[])}var p=q(ae()),ze=B.isProduction?"gmqktfjv":"iic8t2tp",V=!1,dt=(e,r)=>{V?(0,p.update)(ce(e)):((0,p.default)(ce(e)),(0,p.onShow)(()=>{r.isIntercomMessengerVisible=!0}),(0,p.onHide)(()=>{r.isIntercomMessengerVisible=!1})),(0,p.show)()},ft=()=>{(0,p.hide)()};function ce(e){return{app_id:ze,hide_default_launcher:!0,user_id:e.userId,user_hash:e.userIntercomHash,email:e.userEmail}}function ue(){V&&((0,p.shutdown)(),V=!1)}function de(e){Promise.all([e.stopAuthentication(),ee()]).catch(H).finally(()=>{ue(),window.location.href=D.isOn("newOnboarding")?`${g().api}/auth/v4/signout`:`${g().api}/auth/signout`})}var C=new J(g().api,{onInsufficientScopes:e=>de(e)});var m=Object.freeze({"X-Requested-By":"Framer"});var Xe=E("fetcher"),Ge=(e,r)=>{if(!r)return e;let n=new URL(e);for(let t in r){let o=r[t];if(o!==void 0){if($(o)){for(let a of o)a&&n.searchParams.append(`${t}[]`,a.toString());continue}n.searchParams.append(t,o.toString())}}return n.href},fe=e=>{throw new W({isTemporary:!0,message:"Connection error",code:-1e3,status:0,skipSentry:!0,cause:e})};function Ke(e){return e instanceof DOMException&&e.name==="AbortError"}async function he(e,r){if(e.ok)return{status:"success",response:e};let n=e.statusText,t,o,a;try{let{error:i,ref:c,data:u}=await e.json();typeof i?.message=="string"&&(n=i.message),typeof i?.code=="number"&&(t=i.code),typeof c=="string"&&(o=c),typeof u=="object"&&u&&(a=u)}catch{}return e.status===401&&(await C.discardAccessToken(!0),n.toLowerCase().includes("jwt expired")&&r<1)?(Xe.reportError(new Error("Sent an expired JWT to the backend. This shouldn't happen if AccessTokenRefresher works correctly.")),await C.getAccessToken(),{status:"retry"}):{status:"error",error:new W({data:a,message:n,status:e.status,ref:o,code:t})}}var A=class{constructor(r){this.baseURL=r;k(this,"activeRequestCount",0);k(this,"waitListeners",new Set);k(this,"readonly",!1)}debugSetReadOnly(r=!0){this.readonly=r}doWithListeners(r){this.activeRequestCount++;try{return r().finally(()=>{if(this.activeRequestCount--,this.activeRequestCount===0){let n=Array.from(this.waitListeners);this.waitListeners.clear();for(let t of n)try{t()}catch{}}})}catch(n){this.activeRequestCount--;let t=n instanceof Error?n.message:String(n);throw Q("application_error",{message:t,area:"fetch"}),n}}fetch(r,n,t=0){return this.doWithListeners(async()=>{let o=await this.accessTokenRefresher.withAuthorizationHeader(n||{}),a=await fetch(r,o).catch(c=>{throw Ke(c)?c:fe(c)}),i=await he(a,t);if(i.status==="error")throw i.error;return i.status==="retry"?this.fetch(r,n,t+1):i.response})}fetchStream(r,n={},t=0){return this.doWithListeners(async()=>{let{headers:o,onopen:a,onerror:i,...c}=n,u=await this.accessTokenRefresher.getAuthorizationHeaderValue(),h={...c,headers:u?{...o,authorization:u}:o,onopen:async f=>{let l=await he(f,t);if(l.status==="error"){i?.(l.error);return}if(l.status==="retry")return this.fetchStream(r,n,t+1);await a?.(l.response)}};return U(r,h).catch(fe)})}wait(r){if(this.activeRequestCount===0){r();return}this.waitListeners.add(r)}async getRaw(r,n,t){return await this.fetch(Ge(`${this.baseURL}${r}`,n),{credentials:"include",redirect:"error",signal:t})}async get(r,n,t){let o=await this.getRaw(r,n,t);return x(o)?o.json():o.text()}async postRaw(r,n,t,o){if(this.readonly)throw Error("apiFetcher is set to readonly");let i=typeof n<"u"&&t?{"Content-Type":t,...m}:m;return await this.fetch(`${this.baseURL}${r}`,{method:"POST",credentials:"include",redirect:"error",headers:i,body:n,signal:o})}async post(r,n,t){if(this.readonly)throw Error("apiFetcher is set to readonly");let o=await this.postRaw(r,JSON.stringify(n),"application/json",t);return x(o)?o.json():o.text()}postStream(r,n,t){if(this.readonly)throw Error("apiFetcher is set to readonly");let o=typeof t<"u",a=o?{"Content-Type":"application/json",...m}:m;return this.fetchStream(`${this.baseURL}${r}`,{...n,method:"POST",credentials:"include",headers:a,body:o?JSON.stringify(t):null})}async putRaw(r,n,t){if(this.readonly)throw Error("apiFetcher is set to readonly");let a=typeof n<"u"&&t?{"Content-Type":t,...m}:m;return await this.fetch(`${this.baseURL}${r}`,{method:"PUT",credentials:"include",headers:a,body:n})}async put(r,n){if(this.readonly)throw Error("apiFetcher is set to readonly");let t=await this.putRaw(r,JSON.stringify(n),"application/json");return x(t)?t.json():t.text()}async deleteRaw(r,n,t){if(this.readonly)throw Error("apiFetcher is set to readonly");let a=typeof n<"u"&&t?{"Content-Type":t,...m}:m;return await this.fetch(`${this.baseURL}${r}`,{method:"DELETE",credentials:"include",redirect:"error",body:n,headers:a})}async delete(r,n){if(this.readonly)throw Error("apiFetcher is set to readonly");let t=await this.deleteRaw(r,JSON.stringify(n),"application/json");return x(t)?t.json():t.text()}get accessTokenRefresher(){return C}};function x(e){return e.headers.get("Content-Type")?.toLowerCase().startsWith("application/json")??!1}var Wt=new A(g().api);export{ot as a,dt as b,ft as c,ue as d,de as e,C as f,m as g,Ke as h,Wt as i};
//# sourceMappingURL=https://app.framerstatic.com/chunk-R3IAJKKE.mjs.map
