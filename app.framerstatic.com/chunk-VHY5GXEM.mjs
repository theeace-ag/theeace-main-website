import{a as m}from"https://app.framerstatic.com/chunk-PABHF7FN.mjs";import{Ib as p}from"https://app.framerstatic.com/chunk-L7L7BWTW.mjs";import{i as c}from"https://app.framerstatic.com/chunk-PNIOO2GU.mjs";import{a as s}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{j as i}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var l="--";function I(d){return!d.includes(l)}function D(d,e){let t=d.indexOf(l);if(t<0)return e;let n=d.slice(t);return`${e}${n}`}function u(d,e){return`${d}${l}${e}`}function h(d,e,t,n){return I(d)&&n===0?d:u(d,`${e}-${t}`)}function C(d,e,t,n){return u(d,`${e}-${t}-${n}`)}function v(d){if(!d)return;let e=d.indexOf(l);return e<0?d:d.slice(0,e)}var f=class{constructor(e){this.environment=e;i(this,"dataByRenderId",new Map);i(this,"itemIdsByRenderId",new Map);i(this,"updatedDataByNodeId",new Map);i(this,"updatedItemIdsByRenderId",new Map)}set(e,t,n){if(s(this.environment==="sandbox","Setting data is only allowed in the sandbox."),t??=c(),this.dataByRenderId.get(e)===t)return;if(this.dataByRenderId.set(e,t),I(e)){let y=R(t,n);this.updatedDataByNodeId.set(e,y)}let o=t.map(m),a=this.itemIdsByRenderId.get(e);p(o,a)||(this.itemIdsByRenderId.set(e,o),this.updatedItemIdsByRenderId.set(e,o))}import(e){s(this.environment==="editor","Importing data is only allowed in the editor.");let{dataUpdates:t,itemIdsUpdates:n}=e,r=new Set;for(let{nodeId:o,data:a}of t)this.dataByRenderId.set(o,a),r.add(o);for(let{renderId:o,itemIds:a}of n)this.itemIdsByRenderId.set(o,a),r.add(o);return r}isEmpty(e){let t=this.dataByRenderId.get(e);return!t||t.length===0}getData(e){return this.dataByRenderId.get(e)}getItemIds(e){return this.itemIdsByRenderId.get(e)}export(){s(this.environment==="sandbox","No need to collect and send updates from within the editor.");let e=[];for(let[n,r]of this.updatedDataByNodeId)e.push({nodeId:n,data:r});this.updatedDataByNodeId.clear();let t=[];for(let[n,r]of this.updatedItemIdsByRenderId)t.push({renderId:n,itemIds:r});return this.updatedItemIdsByRenderId.clear(),{dataUpdates:e,itemIdsUpdates:t}}};function R(d,e){return d.map(t=>{let n={};for(let[r,o]of e)if(o)switch(o.type){case"vectorsetitem":n[r]=void 0;continue;case"richtext":n[r]=t[r]?"<p>Content</p>":null;continue;case"object":throw Error("Not currently handled in removeNonSerializableData");case"slot":throw Error("Should never be part of collection data");default:n[r]=t[r]}return n})}export{I as a,D as b,h as c,C as d,v as e,f};
//# sourceMappingURL=https://app.framerstatic.com/chunk-VHY5GXEM.mjs.map
