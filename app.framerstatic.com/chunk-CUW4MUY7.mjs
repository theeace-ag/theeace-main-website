import{a as H,b as V}from"https://app.framerstatic.com/chunk-6C6VSETA.mjs";import{s as te,u as re,y as ne,z as ie}from"https://app.framerstatic.com/chunk-KYPY4QS7.mjs";import{c as v,e as b}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var G=v((B,ae)=>{"use strict";var oe=typeof Reflect<"u"?Reflect.construct:void 0,I=Object.defineProperty,$=Error.captureStackTrace;$===void 0&&($=function(t){var r=new Error;I(t,"stack",{configurable:!0,get:function(){var i=r.stack;return I(this,"stack",{configurable:!0,value:i,writable:!0}),i},set:function(i){I(t,"stack",{configurable:!0,value:i,writable:!0})}})});function F(e){e!==void 0&&I(this,"message",{configurable:!0,value:e,writable:!0});var t=this.constructor.name;t!==void 0&&t!==this.name&&I(this,"name",{configurable:!0,value:t,writable:!0}),$(this,this.constructor)}F.prototype=Object.create(Error.prototype,{constructor:{configurable:!0,value:F,writable:!0}});var se=function(){function e(r,n){return I(r,"name",{configurable:!0,value:n})}try{var t=function(){};if(e(t,"foo"),t.name==="foo")return e}catch{}}();function Ye(e,t){if(t==null||t===Error)t=F;else if(typeof t!="function")throw new TypeError("super_ should be a function");var r;if(typeof e=="string")r=e,e=oe!==void 0?function(){return oe(t,arguments,this.constructor)}:function(){t.apply(this,arguments)},se!==void 0&&(se(e,r),r=void 0);else if(typeof e!="function")throw new TypeError("constructor should be either a string or a function");e.super_=e.super=t;var n={constructor:{configurable:!0,value:e,writable:!0}};return r!==void 0&&(n.name={configurable:!0,value:r,writable:!0}),e.prototype=Object.create(t.prototype,n),e}B=ae.exports=Ye;B.BaseError=F});var le=v((cr,fe)=>{"use strict";var Ze=function(t){return et(t)&&!tt(t)};function et(e){return!!e&&typeof e=="object"}function tt(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||it(e)}var rt=typeof Symbol=="function"&&Symbol.for,nt=rt?Symbol.for("react.element"):60103;function it(e){return e.$$typeof===nt}function ot(e){return Array.isArray(e)?[]:{}}function D(e,t){return t.clone!==!1&&t.isMergeableObject(e)?N(ot(e),e,t):e}function st(e,t,r){return e.concat(t).map(function(n){return D(n,r)})}function at(e,t){if(!t.customMerge)return N;var r=t.customMerge(e);return typeof r=="function"?r:N}function ct(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function ce(e){return Object.keys(e).concat(ct(e))}function ue(e,t){try{return t in e}catch{return!1}}function ut(e,t){return ue(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function ft(e,t,r){var n={};return r.isMergeableObject(e)&&ce(e).forEach(function(i){n[i]=D(e[i],r)}),ce(t).forEach(function(i){ut(e,i)||(ue(e,i)&&r.isMergeableObject(t[i])?n[i]=at(i,r)(e[i],t[i],r):n[i]=D(t[i],r))}),n}function N(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||st,r.isMergeableObject=r.isMergeableObject||Ze,r.cloneUnlessOtherwiseSpecified=D;var n=Array.isArray(t),i=Array.isArray(e),o=n===i;return o?n?r.arrayMerge(e,t,r):ft(e,t,r):D(t,r)}N.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,i){return N(n,i,r)},{})};var lt=N;fe.exports=lt});var pe=v((ur,de)=>{"use strict";de.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;i--!==0;){var s=o[i];if(!e(t[s],r[s]))return!1}return!0}return t!==t&&r!==r}});var W=v((fr,ge)=>{"use strict";ge.exports=function(t){return t!=null&&typeof t=="object"&&Array.isArray(t)===!1}});var _e=v((lr,me)=>{"use strict";var dt=W();function he(e){return dt(e)===!0&&Object.prototype.toString.call(e)==="[object Object]"}me.exports=function(t){var r,n;return!(he(t)===!1||(r=t.constructor,typeof r!="function")||(n=r.prototype,he(n)===!1)||n.hasOwnProperty("isPrototypeOf")===!1)}});var Re=v((dr,Ee)=>{"use strict";var pt=_e();Ee.exports=function(t){return pt(t)||typeof t=="function"||Array.isArray(t)}});var Oe=v((pr,ve)=>{"use strict";var gt=Re();ve.exports=function(t,r,n){if(!gt(t))return{};typeof r=="function"&&(n=r,r=[]),typeof r=="string"&&(r=[r]);for(var i=typeof n=="function",o=Object.keys(t),s={},a=0;a<o.length;a++){var l=o[a],d=t[l];(!r||r.indexOf(l)===-1&&(!i||n(d,l,t)))&&(s[l]=d)}return s}});var ye=v((gr,xe)=>{"use strict";var ht=W();xe.exports=function(t,r){if(!ht(t)&&typeof t!="function")return{};var n={};if(typeof r=="string")return r in t&&(n[r]=t[r]),n;for(var i=r.length,o=-1;++o<i;){var s=r[o];s in t&&(n[s]=t[s])}return n}});var Ie=v((Mr,Se)=>{"use strict";Se.exports=e=>{if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}});var mt=b(G(),1);var Qe="ProseMirror-selectednode",or=".".concat(Qe);var w="\0";var sr=Symbol.for("__remirror__");var u=(e=>(e.UNKNOWN="RMR0001",e.INVALID_COMMAND_ARGUMENTS="RMR0002",e.CUSTOM="RMR0003",e.CORE_HELPERS="RMR0004",e.MUTATION="RMR0005",e.INTERNAL="RMR0006",e.MISSING_REQUIRED_EXTENSION="RMR0007",e.MANAGER_PHASE_ERROR="RMR0008",e.INVALID_GET_EXTENSION="RMR0010",e.INVALID_MANAGER_ARGUMENTS="RMR0011",e.SCHEMA="RMR0012",e.HELPERS_CALLED_IN_OUTER_SCOPE="RMR0013",e.INVALID_MANAGER_EXTENSION="RMR0014",e.DUPLICATE_COMMAND_NAMES="RMR0016",e.DUPLICATE_HELPER_NAMES="RMR0017",e.NON_CHAINABLE_COMMAND="RMR0018",e.INVALID_EXTENSION="RMR0019",e.INVALID_CONTENT="RMR0021",e.INVALID_NAME="RMR0050",e.EXTENSION="RMR0100",e.EXTENSION_SPEC="RMR0101",e.EXTENSION_EXTRA_ATTRIBUTES="RMR0102",e.INVALID_SET_EXTENSION_OPTIONS="RMR0103",e.REACT_PROVIDER_CONTEXT="RMR0200",e.REACT_GET_ROOT_PROPS="RMR0201",e.REACT_EDITOR_VIEW="RMR0202",e.REACT_CONTROLLED="RMR0203",e.REACT_NODE_VIEW="RMR0204",e.REACT_GET_CONTEXT="RMR0205",e.REACT_COMPONENTS="RMR0206",e.REACT_HOOKS="RMR0207",e.I18N_CONTEXT="RMR0300",e))(u||{});var _t=b(le(),1),Et=b(pe(),1),Rt=b(G(),1),vt=b(Oe(),1),Ot=b(ye(),1);function L(e,t,r){return e.includes(t,r)}function M(e){return Object.assign(Object.create(null),e)}function xt(e){return Object.prototype.toString.call(e)}function yt(e){return xt(e).slice(8,-1)}function C(e,t){return r=>typeof r!==e?!1:t?t(r):!0}function X(e){return t=>yt(t)===e}var At=C("undefined"),_=C("string"),bt=C("number",e=>!Number.isNaN(e)),J=C("function");function wt(e){return e===null}var xr=C("symbol");function Mt(e){return wt(e)||At(e)}function Ae(e){return!Mt(e)&&(J(e)||C("object")(e))}var be=X("RegExp"),yr=X("Date"),Ar=X("Error");var we=Array.isArray;function K(e){return we(e)&&e.length===0}function Me(e,t,r=n=>!!n){t.lastIndex=0;let n=[],i=t.flags,o;i.includes("g")||(t=new RegExp(t.source,"g".concat(i)));do o=t.exec(e),o&&n.push(o);while(r(o));return t.lastIndex=0,n}function q(){let e=Date.now(),t=q.last||e;return q.last=e>t?e:t+1}q.last=0;function z(e,t){return[...e].map((r,n)=>({value:r,index:n})).sort((r,n)=>t(r.value,n.value)||r.index-n.index).map(({value:r})=>r)}function Te(e,t){let r=we(e)?e[0]:e;return bt(t)?r<=t?Array.from({length:t+1-r},(n,i)=>i+r):Array.from({length:r+1-t},(n,i)=>-1*i+r):Array.from({length:Math.abs(r)},(n,i)=>(r<0?-1:1)*i)}var br={[u.UNKNOWN]:"An error occurred but we're not quite sure why. \u{1F9D0}",[u.INVALID_COMMAND_ARGUMENTS]:"The arguments passed to the command method were invalid.",[u.CUSTOM]:"This is a custom error, possibly thrown by an external library.",[u.CORE_HELPERS]:"An error occurred in a function called from the `@remirror/core-helpers` library.",[u.MUTATION]:"Mutation of immutable value detected.",[u.INTERNAL]:"This is an error which should not occur and is internal to the remirror codebase.",[u.MISSING_REQUIRED_EXTENSION]:"Your editor is missing a required extension.",[u.MANAGER_PHASE_ERROR]:"This occurs when accessing a method or property before it is available.",[u.INVALID_GET_EXTENSION]:"The user requested an invalid extension from the getExtensions method. Please check the `createExtensions` return method is returning an extension with the defined constructor.",[u.INVALID_MANAGER_ARGUMENTS]:"Invalid value(s) passed into `Manager` constructor. Only `Presets` and `Extensions` are supported.",[u.SCHEMA]:"There is a problem with the schema or you are trying to access a node / mark that doesn't exists.",[u.HELPERS_CALLED_IN_OUTER_SCOPE]:"The `helpers` method which is passed into the ``create*` method should only be called within returned method since it relies on an active view (not present in the outer scope).",[u.INVALID_MANAGER_EXTENSION]:"You requested an invalid extension from the manager.",[u.DUPLICATE_COMMAND_NAMES]:"Command method names must be unique within the editor.",[u.DUPLICATE_HELPER_NAMES]:"Helper method names must be unique within the editor.",[u.NON_CHAINABLE_COMMAND]:"Attempted to chain a non chainable command.",[u.INVALID_EXTENSION]:"The provided extension is invalid.",[u.INVALID_CONTENT]:"The content provided to the editor is not supported.",[u.INVALID_NAME]:"An invalid name was used for the extension.",[u.EXTENSION]:"An error occurred within an extension. More details should be made available.",[u.EXTENSION_SPEC]:"The spec was defined without calling the `defaults`, `parse` or `dom` methods.",[u.EXTENSION_EXTRA_ATTRIBUTES]:"Extra attributes must either be a string or an object.",[u.INVALID_SET_EXTENSION_OPTIONS]:"A call to `extension.setOptions` was made with invalid keys.",[u.REACT_PROVIDER_CONTEXT]:"`useRemirrorContext` was called outside of the `remirror` context. It can only be used within an active remirror context created by the `<Remirror />`.",[u.REACT_GET_ROOT_PROPS]:"`getRootProps` has been attached to the DOM more than once. It should only be attached to the dom once per editor.",[u.REACT_EDITOR_VIEW]:"A problem occurred adding the editor view to the dom.",[u.REACT_CONTROLLED]:"There is a problem with your controlled editor setup.",[u.REACT_NODE_VIEW]:"Something went wrong with your custom ReactNodeView Component.",[u.REACT_GET_CONTEXT]:"You attempted to call `getContext` provided by the `useRemirror` prop during the first render of the editor. This is not possible and should only be after the editor first mounts.",[u.REACT_COMPONENTS]:"An error occurred within a remirror component.",[u.REACT_HOOKS]:"An error occurred within a remirror hook.",[u.I18N_CONTEXT]:"You called `useI18n()` outside of an `I18nProvider` context."};var Ve=b(Ie(),1);var Tt=Object.defineProperty,St=Object.defineProperties,It=Object.getOwnPropertyDescriptors,Ne=Object.getOwnPropertySymbols,Nt=Object.prototype.hasOwnProperty,Ct=Object.prototype.propertyIsEnumerable,ke=e=>{throw TypeError(e)},Y=(e,t,r)=>t in e?Tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,T=(e,t)=>{for(var r in t||(t={}))Nt.call(t,r)&&Y(e,r,t[r]);if(Ne)for(var r of Ne(t))Ct.call(t,r)&&Y(e,r,t[r]);return e},Pt=(e,t)=>St(e,It(t)),O=(e,t,r)=>Y(e,typeof t!="symbol"?t+"":t,r),Fe=(e,t,r)=>t.has(e)||ke("Cannot "+r),c=(e,t,r)=>(Fe(e,t,"read from private field"),r?r.call(e):t.get(e)),x=(e,t,r)=>t.has(e)?ke("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),f=(e,t,r,n)=>(Fe(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Ue=(e=>(e.End="exit-end",e.Removed="delete",e.Split="exit-split",e.InvalidSplit="invalid-exit-split",e.MoveEnd="move-end",e.MoveStart="move-start",e.JumpForward="jump-forward-exit",e.JumpBackward="jump-backward-exit",e.SelectionOutside="selection-outside",e))(Ue||{}),He=(e=>(e.Start="start",e.Text="change-character",e.SelectionInside="selection-inside",e.Move="move",e.JumpBackward="jump-backward-change",e.JumpForward="jump-forward-change",e))(He||{});function jt(e){return!!(e.prev&&e.next&&e.prev.text.full!==e.next.text.full)}function Dt(e){return!!(e.prev&&e.next&&e.prev.range.cursor!==e.next.range.cursor)}function Lt(e){return!!(!e.prev&&e.next)}function kt(e){return!!(e.prev&&!e.next)}function Ft(e){return!!(e.prev&&e.next&&e.prev.range.from!==e.next.range.from)}function jr(e){return _(e)&&Object.values(Ue).includes(e)}function Dr(e){return _(e)&&Object.values(He).includes(e)}var Ut=["move-end","move-start","selection-outside","jump-forward-exit","jump-backward-exit"];function Lr(e){return L(Ut,e)}var Ht=["jump-backward-change","jump-forward-change","move","selection-inside"];function kr(e){return L(Ht,e)}function Fr(e){return e==="exit-split"}function Vt(e){return e==="invalid-exit-split"}function Ur(e){return e==="delete"}var $t=["jump-backward-exit","jump-forward-exit"],Bt=["jump-backward-change","jump-forward-change"];function Gt(e){var t,r;return L($t,(t=e.exit)==null?void 0:t.exitReason)||L(Bt,(r=e.change)==null?void 0:r.changeReason)}function Ce(e){return!!(e&&e.query.full.length>=e.suggester.matchOffset)}function Hr(e){let{match:t,selection:r}=e;return!!t&&(r.from<t.range.from||r.from>t.range.to)}function Pe(e){return Ae(e)&&e instanceof re}function m(e){let{match:t,changeReason:r,exitReason:n}=e;return Pt(T({},t),{changeReason:r,exitReason:n})}function Wt(e,t){let{invalidPrefixCharacters:r,validPrefixCharacters:n}=t;return r?!new RegExp(Q(r)).test(e):new RegExp(Q(n)).test(e)}function qt(e){let{text:t,regexp:r,$pos:n,suggester:i}=e,o=n.start(),s;return Me(t,r).forEach(a=>{let l=a.input.slice(Math.max(0,a.index-1),a.index);if(Wt(l,i)){let d=a.index+o,g=a[0],R=a[1];if(!_(g)||!_(R))return;let S=d+g.length,Z=Math.min(S,n.pos),ee=Z-d;d<n.pos&&S>=n.pos&&(s={range:{from:d,to:S,cursor:Z},match:a,query:{partial:g.slice(R.length,ee),full:g.slice(R.length)},text:{partial:g.slice(0,ee),full:g},textAfter:n.doc.textBetween(S,n.end(),w,w),textBefore:n.doc.textBetween(o,d,w,w),suggester:i})}}),s}function $e(e){let{$pos:t,suggester:r}=e,{char:n,name:i,startOfLine:o,supportedCharacters:s,matchOffset:a,multiline:l,caseInsensitive:d,unicode:g}=r,R=rr({char:n,matchOffset:a,startOfLine:o,supportedCharacters:s,multiline:l,caseInsensitive:d,unicode:g}),S=t.doc.textBetween(t.before(),t.end(),w,w);return qt({suggester:r,text:S,regexp:R,$pos:t,char:n,name:i})}function Be(e){let{state:t,match:r}=e;try{return $e({$pos:t.doc.resolve(r.range.cursor),suggester:r.suggester})}catch{return}}function Ge(e){let{prev:t,next:r,state:n}=e;return!r&&t.range.from>=n.doc.nodeSize?{exit:m({match:t,exitReason:"delete"})}:!r||!t.query.partial?{exit:m({match:t,exitReason:"invalid-exit-split"})}:t.range.to===r.range.cursor?{exit:m({match:r,exitReason:"exit-end"})}:t.query.partial?{exit:m({match:r,exitReason:"exit-split"})}:{}}function Xt(e){let{prev:t,next:r,state:n}=e,i=M(),o=Be({state:n,match:t}),{exit:s}=o&&o.query.full!==t.query.full?Ge({prev:t,next:o,state:n}):i;return t.range.from<r.range.from?{exit:s??m({match:t,exitReason:"jump-forward-exit"}),change:m({match:r,changeReason:"jump-forward-change"})}:{exit:s??m({match:t,exitReason:"jump-backward-exit"}),change:m({match:r,changeReason:"jump-backward-change"})}}function Jt(e){let{match:t,state:r,$pos:n}=e,{selection:i}=r,o=Be({match:t,state:r});return!o||o.text.full!==t.text.full?Ge({prev:t,next:o,state:r}):!i.empty&&(i.from<=t.range.from||i.to>=t.range.to)?{exit:m({match:t,exitReason:"selection-outside"})}:n.pos>t.range.to?{exit:m({match:t,exitReason:"move-end"})}:n.pos<=t.range.from?{exit:m({match:t,exitReason:"move-start"})}:{}}function Kt(e){let{prev:t,next:r,state:n,$pos:i}=e,o=M();if(!t&&!r)return o;let s={prev:t,next:r};return Ft(s)?Xt({prev:s.prev,next:s.next,state:n}):Lt(s)?{change:m({match:s.next,changeReason:"start"})}:kt(s)?Jt({$pos:i,match:s.prev,state:n}):jt(s)?{change:m({match:s.next,changeReason:"change-character"})}:Dt(s)?{change:m({match:s.next,changeReason:n.selection.empty?"move":"selection-inside"})}:o}function je(e,t){for(let r=e.depth;r>0;r--){let n=e.node(r);if(t.includes(n.type.name))return!0}return!1}function zt(e,t){let{$from:r,$to:n}=e;return We(e,t)?!0:Te(r.pos,n.pos).some(i=>Yt(r.doc.resolve(i),t))}function We(e,t){var r;let{$from:n,$to:i}=e,o=new Set(((r=n.marksAcross(i))!=null?r:[]).map(s=>s.type.name));return t.some(s=>o.has(s))}function Yt(e,t){let r=new Set(e.marks().map(n=>n.type.name));return t.some(n=>r.has(n))}function Qt(e,t){let{$cursor:r}=t,{validMarks:n,validNodes:i,invalidMarks:o,invalidNodes:s}=e;return!n&&!i&&K(o)&&K(s)?!0:!(n&&!We(t,n)||i&&!je(r,i)||!n&&zt(t,o)||!i&&je(r,s))}function De(e){let{suggesters:t,$pos:r,selectionEmpty:n}=e;for(let i of t)if(!(i.emptySelectionsOnly&&!n))try{let o=$e({suggester:i,$pos:r});if(!o)continue;let s={$from:r.doc.resolve(o.range.from),$to:r.doc.resolve(o.range.to),$cursor:r};if(Qt(i,s)&&i.isValidPosition(s,o))return o}catch{}}function Q(e){return be(e)?e.source:e}function Zt(e){return e?"^":""}function er(e,t){return"(?:".concat(Q(e),"){").concat(t,",}")}function tr(e){return _(e)?new RegExp((0,Ve.default)(e)):e}function rr(e){let{char:t,matchOffset:r,startOfLine:n,supportedCharacters:i,captureChar:o=!0,caseInsensitive:s=!1,multiline:a=!1,unicode:l=!1}=e,d="g".concat(a?"m":"").concat(s?"i":"").concat(l?"u":""),g=tr(t).source;return o&&(g="(".concat(g,")")),new RegExp("".concat(Zt(n)).concat(g).concat(er(i,r)),d)}var qe={appendTransaction:!1,priority:50,ignoredTag:"span",matchOffset:0,disableDecorations:!1,startOfLine:!1,suggestClassName:"suggest",suggestTag:"span",supportedCharacters:/\w+/,validPrefixCharacters:/^[\s\0]?$/,invalidPrefixCharacters:null,ignoredClassName:null,invalidMarks:[],invalidNodes:[],validMarks:null,validNodes:null,isValidPosition:()=>!0,checkNextValidSelection:null,emptySelectionsOnly:!1,caseInsensitive:!1,multiline:!1,unicode:!1,captureChar:!0},Xe="__ignore_prosemirror_suggest_update__";function Br(e){return T(T({},qe),e)}var U,k,h,y,P,E,p,A,j,nr=class Je{constructor(t){x(this,U,!1),x(this,k,!1),x(this,h),x(this,y),x(this,P),x(this,E,M()),O(this,"view"),x(this,p,V.empty),x(this,A,!1),x(this,j,!1),O(this,"setMarkRemoved",()=>{f(this,A,!0)}),O(this,"findNextTextSelection",n=>{let i=n.$from.doc,o=Math.min(i.nodeSize-2,n.to+1),s=i.resolve(o),a=te.findFrom(s,1,!0);if(Pe(a))return a}),O(this,"ignoreNextExit",()=>{f(this,k,!0)}),O(this,"addIgnored",({from:n,name:i,specific:o=!1})=>{let s=c(this,h).find(R=>R.name===i);if(!s)throw new Error("No suggester exists for the name provided: ".concat(i));let a=_(s.char)?s.char.length:1,l=n+a,d=s.ignoredClassName?{class:s.ignoredClassName}:{},g=H.inline(n,l,T({nodeName:s.ignoredTag},d),{name:i,specific:o,char:s.char});f(this,p,c(this,p).add(this.view.state.doc,[g]))}),O(this,"removeIgnored",({from:n,name:i})=>{let o=c(this,h).find(l=>l.name===i);if(!o)throw new Error("No suggester exists for the name provided: ".concat(i));let s=_(o.char)?o.char.length:1,a=c(this,p).find(n,n+s)[0];!a||a.spec.name!==i||f(this,p,c(this,p).remove([a]))}),O(this,"clearIgnored",n=>{if(!n){f(this,p,V.empty);return}let o=c(this,p).find().filter(({spec:s})=>s.name===n);f(this,p,c(this,p).remove(o))}),O(this,"findMatchAtPosition",(n,i)=>{let o=i?c(this,h).filter(s=>s.name===i):c(this,h);return De({suggesters:o,$pos:n,docChanged:!1,selectionEmpty:!0})}),O(this,"setLastChangeFromAppend",()=>{f(this,j,!0)});let r=Le();f(this,h,t.map(r)),f(this,h,z(c(this,h),(n,i)=>i.priority-n.priority))}static create(t){return new Je(t)}get decorationSet(){return c(this,p)}get removed(){return c(this,A)}get match(){return c(this,y)?c(this,y):c(this,P)&&c(this,E).exit?c(this,P):void 0}init(t){return this.view=t,this}createProps(t){let{name:r,char:n}=t.suggester;return T({view:this.view,addIgnored:this.addIgnored,clearIgnored:this.clearIgnored,ignoreNextExit:this.ignoreNextExit,setMarkRemoved:this.setMarkRemoved,name:r,char:n},t)}shouldRunExit(){return c(this,k)?(f(this,k,!1),!1):!0}updateWithNextSelection(t){var r,n,i;let o=this.findNextTextSelection(t.selection);if(o)for(let s of c(this,h)){let a=(r=c(this,E).change)==null?void 0:r.suggester.name,l=(n=c(this,E).exit)==null?void 0:n.suggester.name;(i=s.checkNextValidSelection)==null||i.call(s,o.$from,t,{change:a,exit:l})}}changeHandler(t,r){let{change:n,exit:i}=c(this,E),o=this.match;if(!n&&!i||!Ce(o))return;let s=r===i?.suggester.appendTransaction&&this.shouldRunExit(),a=r===n?.suggester.appendTransaction;if(!(!s&&!a)){if(n&&i&&Gt({change:n,exit:i})){let l=this.createProps(i),d=this.createProps(n),g=i.range.from<n.range.from;s&&i.suggester.onChange(l,t),a&&n.suggester.onChange(d,t),s&&f(this,A,!1);return}n&&a&&n.suggester.onChange(this.createProps(n),t),i&&s&&(i.suggester.onChange(this.createProps(i),t),f(this,A,!1),Vt(i.exitReason)&&f(this,E,M()))}}mapIgnoredDecorations(t){let r=c(this,p).map(t.mapping,t.doc),i=r.find().filter(({from:o,to:s,spec:a})=>{let l=_(a.char)?a.char.length:1;return s-o!==l});f(this,p,r.remove(i))}shouldIgnoreMatch({range:t,suggester:{name:r}}){return c(this,p).find().some(({spec:o,from:s})=>s!==t.from?!1:o.specific?o.name===r:!0)}resetState(){f(this,E,M()),f(this,y,void 0),f(this,A,!1),f(this,j,!1)}updateReasons(t){let{$pos:r,state:n}=t,i=c(this,U),o=c(this,h),s=n.selection.empty,a=Pe(n.selection)?De({suggesters:o,$pos:r,docChanged:i,selectionEmpty:s}):void 0;f(this,y,a&&this.shouldIgnoreMatch(a)?void 0:a),f(this,E,Kt({next:c(this,y),prev:c(this,P),state:n,$pos:r}))}addSuggester(t){let r=c(this,h).find(i=>i.name===t.name),n=Le();if(r)f(this,h,c(this,h).map(i=>i===r?n(t):i));else{let i=[...c(this,h),n(t)];f(this,h,z(i,(o,s)=>s.priority-o.priority))}return()=>this.removeSuggester(t.name)}removeSuggester(t){let r=_(t)?t:t.name;f(this,h,c(this,h).filter(n=>n.name!==r)),this.clearIgnored(r)}toJSON(){return this.match}apply(t){let{exit:r,change:n}=c(this,E);if(c(this,j)&&(f(this,j,!1),!r?.suggester.appendTransaction&&!n?.suggester.appendTransaction))return this;let{tr:i,state:o}=t,s=i.docChanged||i.selectionSet;return i.getMeta(Xe)||!s&&!c(this,A)?this:(f(this,U,i.docChanged),this.mapIgnoredDecorations(i),r&&this.resetState(),f(this,P,c(this,y)),this.updateReasons({$pos:i.selection.$from,state:o}),this)}createDecorations(t){let r=this.match;if(!Ce(r))return c(this,p);let{disableDecorations:n}=r.suggester;if(J(n)?n(t,r):n)return c(this,p);let{range:o,suggester:s}=r,{name:a,suggestTag:l,suggestClassName:d}=s,{from:g,to:R}=o;return this.shouldIgnoreMatch(r)?c(this,p):c(this,p).add(t.doc,[H.inline(g,R,{nodeName:l,class:a?"".concat(d," suggest-").concat(a):d},{name:a})])}};U=new WeakMap;k=new WeakMap;h=new WeakMap;y=new WeakMap;P=new WeakMap;E=new WeakMap;p=new WeakMap;A=new WeakMap;j=new WeakMap;var ir=nr;function Le(){let e=new Set;return t=>{if(e.has(t.name))throw new Error("A suggester already exists with the name '".concat(t.name,"'. The name provided must be unique."));let r=T(T({},qe),t);return e.add(t.name),r}}var Ke=new ie("suggest");function ze(e){return Ke.getState(e)}function Gr(e,t){return ze(e).addSuggester(t)}function Wr(e){e.setMeta(Xe,!0)}function qr(e,t){return ze(e).removeSuggester(t)}function Xr(...e){let t=ir.create(e);return new ne({key:Ke,view:r=>(t.init(r),{update:n=>t.changeHandler(n.state.tr,!1)}),state:{init:()=>t,apply:(r,n,i,o)=>t.apply({tr:r,state:o})},appendTransaction:(r,n,i)=>{let o=i.tr;return t.updateWithNextSelection(o),t.changeHandler(o,!0),o.docChanged||o.steps.length>0||o.selectionSet||o.storedMarksSet?(t.setLastChangeFromAppend(),o):null},props:{decorations:r=>t.createDecorations(r)}})}export{Ue as a,He as b,jr as c,Dr as d,Lr as e,kr as f,Fr as g,Vt as h,Ur as i,Gt as j,Ce as k,Hr as l,zt as m,We as n,Yt as o,De as p,rr as q,qe as r,Xe as s,Br as t,ze as u,Gr as v,Wr as w,qr as x,Xr as y};
/*! Bundled license information:

isobject/index.js:
  (*!
   * isobject <https://github.com/jonschlinkert/isobject>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)

is-plain-object/index.js:
  (*!
   * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)

is-extendable/index.js:
  (*!
   * is-extendable <https://github.com/jonschlinkert/is-extendable>
   *
   * Copyright (c) 2015-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)

object.omit/index.js:
  (*!
   * object.omit <https://github.com/jonschlinkert/object.omit>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)

object.pick/index.js:
  (*!
   * object.pick <https://github.com/jonschlinkert/object.pick>
   *
   * Copyright (c) 2014-2015 Jon Schlinkert, contributors.
   * Licensed under the MIT License
   *)
*/
//# sourceMappingURL=https://app.framerstatic.com/chunk-CUW4MUY7.mjs.map
