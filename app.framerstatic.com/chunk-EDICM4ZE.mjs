import{l as h,n as m,y as x}from"https://app.framerstatic.com/chunk-KYPY4QS7.mjs";var c=class{constructor(l,e,n={}){this.match=l,this.match=l,this.handler=typeof e=="string"?$(e):e,this.undoable=n.undoable!==!1,this.inCode=n.inCode||!1}};function $(r){return function(l,e,n,u){let t=r;if(e[1]){let o=e[0].lastIndexOf(e[1]);t+=e[0].slice(o+e[1].length),n+=o;let i=n-u;i>0&&(t=e[0].slice(o-i,o)+t,n=u)}return l.tr.insertText(t,n,u)}}var b=500;function O({rules:r}){let l=new x({state:{init(){return null},apply(e,n){let u=e.getMeta(this);return u||(e.selectionSet||e.docChanged?null:n)}},props:{handleTextInput(e,n,u,t){return w(e,n,u,t,r,l)},handleDOMEvents:{compositionend:e=>{setTimeout(()=>{let{$cursor:n}=e.state.selection;n&&w(e,n.pos,n.pos,"",r,l)})}}},isInputRules:!0});return l}function w(r,l,e,n,u,t){if(r.composing)return!1;let o=r.state,i=o.doc.resolve(l),s=i.parent.textBetween(Math.max(0,i.parentOffset-b),i.parentOffset,null,"\uFFFC")+n;for(let f=0;f<u.length;f++){let p=u[f];if(i.parent.type.spec.code){if(!p.inCode)continue}else if(p.inCode==="only")continue;let a=p.match.exec(s),d=a&&p.handler(o,a,l-(a[0].length-n.length),e);if(d)return p.undoable&&d.setMeta(t,{transform:d,from:l,to:e,text:n}),r.dispatch(d),!0}return!1}var Q=(r,l)=>{let e=r.plugins;for(let n=0;n<e.length;n++){let u=e[n],t;if(u.spec.isInputRules&&(t=u.getState(r))){if(l){let o=r.tr,i=t.transform;for(let s=i.steps.length-1;s>=0;s--)o.step(i.steps[s].invert(i.docs[s]));if(t.text){let s=o.doc.resolve(t.from).marks();o.replaceWith(t.from,t.to,r.schema.text(t.text,s))}else o.delete(t.from,t.to);l(o)}return!0}}return!1},v=new c(/--$/,"\u2014"),B=new c(/\.\.\.$/,"\u2026"),C=new c(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201C"),R=new c(/"$/,"\u201D"),I=new c(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018"),M=new c(/'$/,"\u2019"),D=[C,R,I,M];function S(r,l,e=null,n){return new c(r,(u,t,o,i)=>{let s=e instanceof Function?e(t):e,f=u.tr.delete(o,i),p=f.doc.resolve(o),a=p.blockRange(),d=a&&h(a,l,s);if(!d)return null;f.wrap(a,d);let g=f.doc.resolve(o-1).nodeBefore;return g&&g.type==l&&m(f.doc,o-1)&&(!n||n(t,g))&&f.join(o-1),f})}function T(r,l,e=null){return new c(r,(n,u,t,o)=>{let i=n.doc.resolve(t),s=e instanceof Function?e(u):e;return i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),l)?n.tr.delete(t,o).setBlockType(t,t,l,s):null})}export{c as a,O as b,Q as c,v as d,B as e,C as f,R as g,I as h,M as i,D as j,S as k,T as l};
//# sourceMappingURL=https://app.framerstatic.com/chunk-EDICM4ZE.mjs.map
