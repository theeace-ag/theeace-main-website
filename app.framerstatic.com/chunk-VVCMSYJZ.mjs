import{a as ke,b as Te}from"https://app.framerstatic.com/chunk-KUH3GUUH.mjs";import{a as ve}from"https://app.framerstatic.com/chunk-R6TE5BZB.mjs";import{e as be}from"https://app.framerstatic.com/chunk-MVKO2TKJ.mjs";import{De as Se,lg as Le,ob as ye,uf as Ce}from"https://app.framerstatic.com/chunk-2GS7YNG7.mjs";import{Yc as Ie,Zc as he,ad as Pe}from"https://app.framerstatic.com/chunk-Z44G2RQ4.mjs";import{Ac as ae,Bc as se,Cc as k,Dc as T,Fk as z,Ic as le,Mb as re,Pk as W,Rk as $,Rl as ue,Te as me,Yk as de,gr as fe,hr as pe,jb as ne,jk as Y,ld as ce,tb as ie,tr as ge}from"https://app.framerstatic.com/chunk-L7L7BWTW.mjs";import{a as q,b as ee,i as te,l as oe}from"https://app.framerstatic.com/chunk-ZQUNXESX.mjs";import{a as X,b as Z}from"https://app.framerstatic.com/chunk-NIDOI5EE.mjs";import{A as J,v as G}from"https://app.framerstatic.com/chunk-PNIOO2GU.mjs";import{a as Q}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{e as _}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";function A(e,t,o){return e.replace(ie,(i,l)=>l===t.id?o.slug:`:${t.name.toLowerCase()}`)}function Ve(e,t,o,i="Home",l){let s=k(t)&&!l?ke(t):void 0,a=k(t)?Te(e,t):null;if(!t||!ae(t)||!a)return;let f="";if(o&&o!==ne){let n=e.root.getNonDefaultLocale(o);n?.slug&&(f="/"+n.slug)}if(a.id===e.root.homePageNodeId)return f?f+"/":i;let r=Pe(e,a);if(r){if(s?.identifier){let n=z(e,s.identifier);if(n){let c=W(e,o),d=$(n,c)[s.collectionItemId];if(d){let C=n.variables.find(Y);if(C){let g={id:s.collectionItemId,slug:d};return f+A(r,C,g)}}}return}if(me(a)&&a.dataIdentifier){let n=z(e,a.dataIdentifier);if(n&&!s){let c=W(e,o),u=$(n,c),d=n.variables.find(Y);if(d)return f+Ie(r,u,d)}}return f+r}}var D=_(X());var ze=G("usePreloadedScope");function Re(e,t){if(!t||!ee(e))return;let o=t.tree.get(e);!be(o)||o.isLoaded()||(ze.debug("Loading scope node",e),o.load())}function St(e){let t=pe();(0,D.useEffect)(()=>Re(e,t),[e])}function xe(e){let t=(0,D.useContext)(fe);(0,D.useEffect)(()=>Re(e,t),[e,t])}function We(e){xe(k(e)?e.webPageId:void 0)}var p=_(X());var De="clearButton_cjpnope";var B=_(Z()),Ke=/\W+/;function Qe(e){return new Set(e.split(Ke))}function Ge(e,t,o){return(0,p.useMemo)(()=>{let i=new Set;if(!e||!t)return i;for(let l of o.keys()){let s=t.get(l);!s||!ge(s).every(r=>{if(!r)return!1;for(let n of e)if(n.endsWith(r))return!0;return!1})||i.add(l)}return i},[e,t,o])}var Kt=({tree:e,link:t,localeId:o,hideSlugValues:i=!1,homePageName:l="Home",variableInfo:s,...a})=>{We(t);let f=de(e),r=e.getContentManagementNode(),n=W(e,o),c=f?.getWebPageIdToRawPathMap(e),u=e.root.getDataIdentifierByWebPageIdMap(),d=r?.getSlugVariableByIdentifierMap(),C=r?.getItemToSlugByIdentifierMap(n),g=le(t,c),I=se(t)?t.url:"",b=g?"":I,V=Ve(e,t,o,l,i)??b,P=s?.ids,m=Ge(P,c,u);return(0,B.jsx)(Je,{...a,link:t,readableLink:V,homePageName:l,variableInfo:s,hideSlugValues:i,webPageIdToRawPathMap:c,dataIdentifierByWebPageIdMap:u,slugVariableByIdentifierMap:d,itemToSlugByIdentifierMap:C,collectionPagesWithVariablesInScope:m,activeRouterLocale:n,selectedPageMissing:g})},Je=(0,p.memo)(function({id:t,link:o,onChange:i,constantChange:l,supportsPageLinks:s,hideSlugValues:a,supportsVariables:f,variableInfo:r,autoFocus:n,className:c,enabled:u,readOnly:d,tabIndex:C,onMouseDown:g,homePageName:I,onClear:b,menuOffset:V,menuWidth:P,menuClassName:m,onOpenChange:h,backdropEnabled:y,linkListStickySectionHeaders:L,hasError:v,webPageIdToRawPathMap:S,dataIdentifierByWebPageIdMap:R,slugVariableByIdentifierMap:M,itemToSlugByIdentifierMap:N,collectionPagesWithVariablesInScope:w,activeRouterLocale:E,readableLink:O,selectedPageMissing:Ne}){let K=Ne||!!v,[H,we]=(0,p.useState)(()=>Me(O)),F=(0,p.useMemo)(()=>Be({webPageIdToRawPathMap:S,dataIdentifierByWebPageIdMap:R,slugVariableByIdentifierMap:M,itemToSlugByIdentifierMap:N,collectionPagesWithVariablesInScope:w,activeRouterLocale:E,homePageName:I,variableInfo:r,collectionPageType:a?"noSlugInScope":"showSlugValues"}),[S,R,M,N,w,E,I,r,a]),j=(0,p.useMemo)(()=>Be({webPageIdToRawPathMap:S,dataIdentifierByWebPageIdMap:R,slugVariableByIdentifierMap:M,itemToSlugByIdentifierMap:N,collectionPagesWithVariablesInScope:w,activeRouterLocale:E,homePageName:I,variableInfo:r,collectionPageType:"slugInScope"}),[S,R,M,N,w,E,I,r]),Ee=(0,p.useCallback)((x,U)=>{if(U||l){if(x===O)return;let Ue=F.get(x)??j.get(x)??T({url:x});if(i(Ue,U),U)return}let He=Me(x);we(He)},[l,O,F,j,i]),Oe=(0,p.useMemo)(()=>et(F,j,H),[F,j,H]),Fe=!!r?.idOfMutableVariableProvider,je=f&&Fe,_e=(0,p.useContext)(Le)===null,[Ae]=(0,p.useState)(()=>(oe(o)||te(o)||ce(o))&&!je&&_e);return(0,B.jsx)(Ce,{id:t,clearSelectionOnEmptySearch:!0,autoCompleteEnabled:s,showAllWhenOpened:k(o),tabIndex:C,onMouseDown:g,searchItemValue:!!H,items:Oe,value:O,placeholder:Xe(o,K,s),constantChange:!0,onChange:Ee,autoFocus:q(n)?n:Ae,menuOffset:V,enabled:u,readOnly:d,hasError:K,getSearchTokens:Qe,wrapperClassName:c,rightSlot:b?(0,B.jsx)(Se,{variant:"clean",type:"button",className:De,onClick:b,title:"Remove Link",children:(0,B.jsx)(ye,{})}):void 0,onOpenChange:h,backdropEnabled:y,menuWidth:P,menuClassName:m,stickySectionHeaders:L,containOverscroll:!0})});function Xe(e,t,o){return t?"Missing":J(e)?"Multiple\u2026":o?"Page or URL\u2026":"URL\u2026"}function Ze(e,t){if(e.variableSourceIdentifiers)for(let o in e.variableSourceIdentifiers){if(e.variableSourceIdentifiers[o]===t)return o;for(let i of e.combined.get(o)||[])if(i.type==="collectionreference"&&i.dataIdentifier===t)return o}}function Be({webPageIdToRawPathMap:e,dataIdentifierByWebPageIdMap:t,slugVariableByIdentifierMap:o,itemToSlugByIdentifierMap:i,collectionPagesWithVariablesInScope:l,activeRouterLocale:s,variableInfo:a,homePageName:f,collectionPageType:r}){let n=new Map;if(!e||r==="slugInScope"&&l.size===0)return n;let c=s.slug?`/${s.slug}`:"";for(let[u,d]of e.entries()){if(d==="/"){if(r==="slugInScope")continue;let m=T({webPageId:u}),h=c?c+d:f??d;n.set(h,m);continue}let g=t.get(u);if(!g){if(r==="slugInScope")continue;let m=T({webPageId:u});n.set(c+d,m);continue}let I=o?.get(g);if(!I)continue;let b=I.id,V=b;if(a&&!a.ids.has(b)){for(let m of a.ids)if(ue(m,b)){V=m;break}}let P=i?.get(g);if(r==="slugInScope"||r==="noSlugInScope"){let m=l.has(u),h=he(d,I);if(r==="slugInScope"&&m){Q(a,"variableInfo should exist when inScope");let y=Ze(a,g),L=y?{[b]:re(V,y)}:void 0,v=T({webPageId:u,pathVariables:L});n.set(c+h,v)}else if(r==="noSlugInScope"&&!m){if(!P)continue;let y=ve(P);if(!y)continue;let[L,v]=y,S={identifier:g,collectionItemId:L,key:b,value:v},R=T({webPageId:u,pathVariables:{[b]:S}});n.set(c+h,R)}continue}if(P)for(let m of Object.keys(P)){let h=P[m];if(!h)continue;let L=A(d,I,{id:m,slug:h}),v={identifier:g,collectionItemId:m,key:b,value:h},S=T({webPageId:u,pathVariables:{[b]:v}});n.set(c+L,S)}}return n}function Me(e){let t=e.trim(),o=t.indexOf("/:");o!==-1&&(t=t.substring(o));let i=t.split("/").filter(Boolean);for(;i.length>0;){let l=i.join("/")+"/",s="/"+l;if(t.startsWith(s)||t.startsWith(l))return s;i.pop()}return null}var qe=/\/$/u;function et(e,t,o){let i=[],l=Array.from(e.keys()),s=Array.from(t.keys());if(o){let a=[];[...s,...l].forEach(n=>{if(!n.startsWith(o))return;let c=n.replace(o,".../");a.push({type:"option",value:n,title:c})});let r=o.replace(qe,"");return i.push({type:"section",value:r,title:r,items:a}),i}return s.length>0&&i.push({type:"section",value:"CMS",items:s.map(a=>({type:"option",value:a}))}),l.length>0&&i.push({type:"section",value:"Pages",items:l.map(a=>({type:"option",value:a}))}),i}export{Ve as a,St as b,We as c,Kt as d};
//# sourceMappingURL=https://app.framerstatic.com/chunk-VVCMSYJZ.mjs.map
