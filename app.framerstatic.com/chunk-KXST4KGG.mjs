import{a as eh,b as th,e as rh,f as oh,h as uh,i as ph,j as kh}from"https://app.framerstatic.com/chunk-2AHBAQI3.mjs";import{i as oa,s as $h}from"https://app.framerstatic.com/chunk-UVZ7CNUM.mjs";import{e as wl}from"https://app.framerstatic.com/chunk-KOQ7F52D.mjs";import{a as bh}from"https://app.framerstatic.com/chunk-PGNJ6YYR.mjs";import{a as vh}from"https://app.framerstatic.com/chunk-WAFDZ45U.mjs";import{a as Eh}from"https://app.framerstatic.com/chunk-YE25YANI.mjs";import{a as Gh}from"https://app.framerstatic.com/chunk-EWEZCJKH.mjs";import{b as QA,c as nh}from"https://app.framerstatic.com/chunk-5O3SN7LN.mjs";import{a as Ne}from"https://app.framerstatic.com/chunk-D7MEQ7Y3.mjs";import{i as Dl}from"https://app.framerstatic.com/chunk-R3IAJKKE.mjs";import{u as jh}from"https://app.framerstatic.com/chunk-DHNXI6EU.mjs";import{a as td,b as Bm,c as rd,e as ih,f as ah,g as cC,h as De,i as ch,k as dh,n as mh,q as yu,u as Sh}from"https://app.framerstatic.com/chunk-GCKJANXF.mjs";import{a as lh,d as _l,f as gh,g as Ih,h as Rh,k as Fh,l as yh,o as Vl}from"https://app.framerstatic.com/chunk-WW7ZRIP2.mjs";import{a as bt}from"https://app.framerstatic.com/chunk-FEKBOCM3.mjs";import{$a as dB,$c as TB,B as j$,C as e$,Dc as vl,De as HB,F as Mr,Fa as k$,Ff as Pl,G as t$,Gc as yB,Gd as xl,H as ml,Ha as bl,Hd as wB,I as sC,Ic as SB,Ie as JB,Ig as ea,J as a$,Jc as GB,Je as Do,Jg as ZB,K as s$,Ka as Mo,Ke as UB,Kg as Ml,Lc as bB,Le as QB,Mg as Ah,N as fl,O as Qd,Oa as Cl,Oe as zB,P as El,Qa as cu,Qc as CB,Qe as mu,Qf as $u,Ra as iB,Rb as dt,Rc as Lr,Rf as WB,Sa as aB,Sc as rr,Sf as ja,Ta as sB,Tf as Bu,Ue as _o,Uf as XB,Va as lB,Yc as qn,Yf as hu,Ze as fu,_ as Pn,_a as cB,_b as BB,_c as vB,a as So,ab as uB,ad as xB,ae as LB,bb as pB,bc as hB,bd as PB,cb as mB,cc as gB,cd as Vn,ce as qB,dc as IB,e as Od,eb as fB,ec as pu,ed as ku,ga as c$,gd as te,hb as du,hc as RB,ia as d$,ja as p$,jb as EB,ld as MB,le as VB,md as Tl,me as KB,mf as Eu,n as wi,pa as Hi,q as Ld,qd as DB,qf as No,r as qd,ra as Ji,rd as _B,s as Go,sa as $l,se as or,t as Vd,td as NB,te as Me,u as Kd,ud as OB,v as qi,vc as FB,w as Hd,x as Jd,y as Vi,yg as YB,z as vn,zb as uu}from"https://app.framerstatic.com/chunk-NBGN6U2B.mjs";import{e as yo,g as Oi,h as Nd,l as Aa,q as kB,u as $B,v as ut}from"https://app.framerstatic.com/chunk-MVKO2TKJ.mjs";import{a as lC,f as SA}from"https://app.framerstatic.com/chunk-DXTSFT7O.mjs";import{Je as gu}from"https://app.framerstatic.com/chunk-2GS7YNG7.mjs";import{a as gs,b as hm,c as Bh,d as Ll,e as ql,g as hh,h as Ij,i as Kl,l as Su,n as _e}from"https://app.framerstatic.com/chunk-PQ3FEGJN.mjs";import{a as ra,b as Nl,c as Ol,d as fh}from"https://app.framerstatic.com/chunk-OOVHNOCC.mjs";import{j as Ch}from"https://app.framerstatic.com/chunk-WIMTHTQW.mjs";import{$c as N$,$f as su,Ac as C$,Ae as Sl,Ai as nB,Bc as v$,Bd as vo,Be as z$,C as _r,Cd as H$,Ce as Gl,E as je,Eb as m$,Eg as Xe,F as Ki,Fb as Bl,Fc as T$,Gb as Xd,Gc as x$,Hb as f$,Jc as ct,K as Ud,Kc as eu,La as Nr,Lc as UA,Ld as J$,Le as pj,Ma as zd,Mb as E$,Mc as Il,Mf as Z$,Ob as hl,Oc as Nn,Pc as P$,Pf as AB,Qc as M$,R as r$,Rc as bo,Re as W$,Sc as D$,T as o$,Tc as Co,Tf as jB,U as n$,Uc as _$,V as i$,Ve as X$,Vf as au,Xd as Xi,Xf as eB,Yb as h$,Ze as ou,_b as Yd,a as ul,ab as l$,ac as Zd,ad as Or,b as ZE,bf as Y$,c as A$,cg as wn,ch as tB,e as Li,fa as $e,fd as On,g as wd,gc as g$,ic as ze,id as L$,jd as q$,je as Fl,jf as To,jh as rB,k as YA,ke as U$,kf as wr,l as Tn,lc as Au,ld as Rl,lh as Zi,mc as R$,nb as Wd,nc as Ui,nh as oB,ni as lu,o as pl,oc as Qi,p as kl,pc as zi,pd as V$,pf as nu,qc as F$,qg as ZA,r as Ar,rc as y$,rg as Ln,sc as S$,sg as Yi,tc as Wi,tg as tr,ua as jr,ub as ae,uc as ju,v as xn,vc as G$,vd as tu,vi as Po,wb as u$,wc as Mn,wf as ee,xc as Dn,xd as We,xf as iu,y as Dr,yc as _n,yd as K$,ye as Q$,yg as xo,zc as b$,zd as ru,ze as yl}from"https://app.framerstatic.com/chunk-Z44G2RQ4.mjs";import{c as er,e as O$,f as w$}from"https://app.framerstatic.com/chunk-GHX7JDAA.mjs";import{$b as Ym,$d as Cj,$e as Si,$i as bf,A as cd,Ac as Fe,Af as Bn,Ak as vd,Al as st,Au as VE,Av as QE,B as BA,Bc as vs,Bf as mf,Bl as br,Bu as Tr,C as Cm,Cb as hi,Cd as of,Cf as Ee,Ch as yf,Ck as wf,Cu as Ae,Dd as Ps,Df as Sr,Dh as Sf,Di as Fd,Dj as bd,Dk as Lf,Du as al,Dv as Pr,Ef as Vs,Eu as sl,F as Ss,Fb as po,Fd as nf,Ff as ff,Fh as Hs,Fk as Eo,Fu as xr,Fv as dl,Gb as Hm,Gc as wt,Gj as xf,Gl as Uf,Gm as Ys,Go as Di,Gp as oE,Gq as EE,H as vm,He as Rt,Hf as Ft,Hv as zE,I as AA,Ib as ot,Ie as Ir,If as xe,Ij as Pf,Im as Cr,Iv as WE,J as dd,Jc as Ts,Je as RA,Jf as Vt,Jh as hd,Ji as Gf,Jj as Us,Jt as Qe,Kb as Ot,Ke as dj,Kf as Ef,Km as Zs,Kv as XE,Lb as $A,Lc as Hj,Le as qt,Lf as Ks,Lj as Ut,Ll as In,Lo as Yt,Lq as $E,Lt as Ni,M as Bi,Ma as ud,Mb as Te,Mc as Ii,Me as at,Mf as Kt,Mj as Mf,Ml as Qf,Mt as nl,Nc as Jj,Nd as af,Ne as Ed,Nk as qf,Od as Ms,Of as yt,Oq as BE,Pb as Qm,Pe as Os,Pf as $f,Pi as yd,Pq as hE,Pt as Ro,Qe as dA,Qf as Bf,Qj as xi,Qq as gE,Re as Ej,Rf as Ht,Ri as WA,Rn as Zf,Rq as IE,Ru as KE,Sc as jf,Se as Je,Sf as hf,Si as hn,Sn as Xt,Sq as el,St as yA,Ta as _m,Tb as zm,Tc as ef,Te as Q,Tf as gf,Tq as tl,Tu as HE,U as oe,Ua as pd,Ub as Wm,Up as nE,Uq as RE,Va as kd,Vc as tf,Ve as Se,Vh as gd,Vn as ho,Vp as iE,Vv as YE,Wa as Nm,Wb as Xm,Wd as Ds,We as Lj,Wp as aE,Wu as bn,Wv as Fo,Xa as md,Xc as xs,Xd as ye,Xe as Rr,Xj as Df,Xp as sE,Xt as Gn,Yd as fn,Ye as yi,Yk as gn,Yp as lE,Z as Gs,Zd as Ri,Ze as uj,Zf as If,Zi as Sd,Zk as Xs,Zp as cE,Zt as ME,_d as sf,_e as nA,_j as Gr,_k as $o,_n as AE,_p as dE,_u as Cn,af as Fr,am as zf,ao as XA,be as Bj,bf as hj,bj as Cf,bo as _j,bv as JE,c as od,ce as DA,cf as Ge,cj as gj,co as Al,d as tt,de as lf,df as _A,dg as Rf,di as Jt,dj as Js,dn as Xf,do as Rn,dq as uE,e as nd,ee as cf,ef as Gi,ek as _f,em as Wf,en as Pi,ep as eE,et as Sn,fe as Fi,ff as yr,fr as Zt,fu as Gt,ga as Br,gl as Vf,gp as Fn,h as gm,hj as vi,hk as Nf,ho as Mi,hr as yE,ht as go,ib as Om,ic as Zm,ie as En,il as Kf,io as Ue,iq as pE,jb as wm,je as fe,jh as bi,jk as Qs,jo as Nj,jr as yn,k as Im,kd as ko,l as Y,ld as gr,lf as uf,li as St,ll as Hf,ln as Yf,lo as NA,lr as SE,ls as bE,m as JA,mb as fd,md as rf,mf as pf,mj as Ti,mk as zs,mp as jl,mt as Io,mu as DE,nb as Lm,nj as vf,nl as Jf,nm as zt,np as Pd,ns as ol,nt as CE,oj as fo,ol as oj,om as Wt,ot as vE,pc as Af,pe as df,pj as Tf,pl as jA,pr as GE,pt as lt,pu as _E,qc as mn,qd as Lt,qe as _s,qf as ws,qk as Ws,qp as tE,qt as TE,r as $i,re as It,ri as Id,rj as Gd,rl as Uj,ro as jE,rt as xE,ru as NE,rv as UE,s as id,sb as qm,sc as gi,sm as Fj,sp as Md,sr as rl,su as OE,sv as ll,tb as bs,tl as Zj,to as xd,tq as kE,tv as cl,ua as xm,ue as nt,uf as Ls,uh as Yj,uk as Qt,ul as g,um as xA,uu as il,vb as Vm,vd as mo,ve as it,vf as kf,vh as Ci,vk as Cd,vl as Bo,vm as Td,vt as PE,wb as Cs,we as Ns,wf as qs,wt as _i,wu as _d,xc as aj,xf as $n,xi as Rd,xq as mE,xu as wE,y as Dj,yh as Ff,yk as Of,yu as LE,yv as Pe,z as ld,zb as Km,zf as be,zp as rE,zu as qE}from"https://app.framerstatic.com/chunk-L7L7BWTW.mjs";import{f as fE}from"https://app.framerstatic.com/chunk-KYPY4QS7.mjs";import{a as Fu,b as ta}from"https://app.framerstatic.com/chunk-UKZHYWSM.mjs";import{N as Jm,P as Um,e as Fs,g as Rm,h as ad,i as Fm,m as ys,o as sd,s as ym,u as Sm,v as Gm,x as bm}from"https://app.framerstatic.com/chunk-INOXWMPK.mjs";import{a as I$}from"https://app.framerstatic.com/chunk-LH43QRIB.mjs";import{a as uo,b as Rs}from"https://app.framerstatic.com/chunk-4AQCMAAQ.mjs";import{a as sh,c as Iu,d as Ru}from"https://app.framerstatic.com/chunk-XGYAAWSK.mjs";import{a as Dd,d as FE}from"https://app.framerstatic.com/chunk-VL3ZLSFG.mjs";import{a as gl,b as $$,c as B$}from"https://app.framerstatic.com/chunk-R3NZHMAQ.mjs";import{b as Mj}from"https://app.framerstatic.com/chunk-AUNF3KWQ.mjs";import{b as $d,d as Bd,p as VA}from"https://app.framerstatic.com/chunk-65XKJBP2.mjs";import{a as hr,b as L,d as aA,e as ne,f as bj,g as Pm,i as mA,j as He,k as Mm,l as ie,o as rt,q as Dm}from"https://app.framerstatic.com/chunk-ZQUNXESX.mjs";import{Ic as Tm,a as Is,b as kn,ce as vr}from"https://app.framerstatic.com/chunk-NIDOI5EE.mjs";import{g as Re}from"https://app.framerstatic.com/chunk-PI2QROPJ.mjs";import{b as ed,d as $r,e as fm,f as Em,g as hs,h as Nt}from"https://app.framerstatic.com/chunk-AGVZOAU6.mjs";import{c as $m,d as pn}from"https://app.framerstatic.com/chunk-FWMM76SF.mjs";import{$ as gt,A as Ve,B as dm,C as et,D as fj,E as Pj,G as Ke,H as fs,I as Dt,J as Es,K as lo,L as cA,M as um,N as un,Q as $s,R as jd,S as pm,T as _t,U as km,V as mm,Y as HA,a as sm,da as Bs,e as Zc,ea as co,i as dn,l as LA,n as Ad,o as lm,p as Bt,r as cm,s as ht,v as CA,z as so}from"https://app.framerstatic.com/chunk-PNIOO2GU.mjs";import{a as B,b as EA}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{c as aC,d as am,e as Xj,j as y,k as kA,l as rj,m as OA,n as Ei,o as Yc}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var Bb=aC((XFA,$b)=>{"use strict";var Oc=Object.prototype.hasOwnProperty,Eb=Object.prototype.toString,db=Object.defineProperty,ub=Object.getOwnPropertyDescriptor,pb=function(j){return typeof Array.isArray=="function"?Array.isArray(j):Eb.call(j)==="[object Array]"},kb=function(j){if(!j||Eb.call(j)!=="[object Object]")return!1;var e=Oc.call(j,"constructor"),t=j.constructor&&j.constructor.prototype&&Oc.call(j.constructor.prototype,"isPrototypeOf");if(j.constructor&&!e&&!t)return!1;var r;for(r in j);return typeof r>"u"||Oc.call(j,r)},mb=function(j,e){db&&e.name==="__proto__"?db(j,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):j[e.name]=e.newValue},fb=function(j,e){if(e==="__proto__")if(Oc.call(j,e)){if(ub)return ub(j,e).value}else return;return j[e]};$b.exports=function A(){var j,e,t,r,o,n,i=arguments[0],a=1,s=arguments.length,l=!1;for(typeof i=="boolean"&&(l=i,i=arguments[1]||{},a=2),(i==null||typeof i!="object"&&typeof i!="function")&&(i={});a<s;++a)if(j=arguments[a],j!=null)for(e in j)t=fb(i,e),r=fb(j,e),i!==r&&(l&&r&&(kb(r)||(o=pb(r)))?(o?(o=!1,n=t&&pb(t)?t:[]):n=t&&kb(t)?t:{},mb(i,{name:e,newValue:A(l,n,r)})):typeof r<"u"&&mb(i,{name:e,newValue:r}));return i}});var xh=Xj(lC());var Ph=Xj(Is());var Zw=Ph.default.createContext("not-defined");var Th={store_internal:2,store_browse:2,store_use_installed:2},Gu={},Hl=new xh.FramerTracking({sourceName:"framer-x",trackingURL:ht().events+"/track",verbose:window.localStorage&&window.localStorage.getItem("debug-metrics")==="active",addContext:A=>{for(let j in Gu)A[j]===void 0&&(A[j]=Gu[j])}}),dC;(t=>(t.init=function(r){let{appVersion:o,projectId:n}=r;Object.assign(Gu,{appVersion:o,projectId:n}),Hl.setUserId(r.userId)},t.push=function(r){let{name:o,type:n,...i}=r;r.type==="store_internal"?(delete i.action,Hl.track({type:"track",event:o,version:2,...i})):Hl.track({type:"track",event:n,version:Th[n],name:o,...i})},t.pushEvent=function(r){let{event:o,...n}=r;Hl.track({...n,type:"track",event:o,version:Th[o]})}))(dC||={});var uC=new Set(hi({fillImageLocalized:!0,formInputPlaceholderLocalized:!0,htmlLocalized:!0,altAttributeLocalized:!0,titleLocalized:!0,descriptionLocalized:!0,linkLocalized:!0}));function bu(A){return uC.has(A)}function Jl(A){return A.map(j=>ne(j)?Ul(j):bj(j)?Jl(j):j)}function pC(A){return A.endsWith("Localized")}function Ul(A){let j={};for(let e in A){if(pC(e))continue;let t=A[e];ne(t)?j[e]=Ul(t):bj(t)?j[e]=Jl(t):j[e]=t}return j}function n8(A){let j={},e;for(e in A){if(bu(e))continue;if(!yd(e)){j[e]=A[e];continue}let t=A[e];ne(t)?j[e]=Ul(t):bj(t)?j[e]=Jl(t):j[e]=t}return j}function Mh(A){let j={};for(let e in A){if(bu(e))continue;if(!yd(e)){j[e]=A[e];continue}let t=A[e];ne(t)?j[e]=Ul(t):bj(t)?j[e]=Jl(t):j[e]=t}return j}var{onewayMethodTemplate:B8,voidMethodTemplate:Dh,valueMethodTemplate:Cu,streamMethodTemplate:h8}=hs,vu;(j=>j.service={id:"__ElectronWebRendering__",fingerprint:"55e7a2685b81eb6008c3d91a35ec44f1",methods:{collectMetrics:{},openSaveDialog:{},willOpenWindow:{},writeToClipboard:{},writeToDisk:{}},newOutgoingWrapper:e=>({collectMetrics:Cu.bind(-1,"collectMetrics",!1,e),openSaveDialog:Cu.bind(-1,"openSaveDialog",!0,e),willOpenWindow:Cu.bind(-1,"willOpenWindow",!0,e),writeToClipboard:Dh.bind(-1,"writeToClipboard",!0,e),writeToDisk:Dh.bind(-1,"writeToDisk",!0,e)})})(vu||={});var Tu;(t=>{t.service=vu.service;function j(r){let o=$r.shared();return{expect:()=>o.expectWithoutDiscovery(t.service,r),discover:n=>o.discover(t.service,r,n),register:n=>o.register({channel:r,service:t.service,implementation:n})}}t.on=j;async function e(r){$r.shared().unregister(r)}t.unregister=e})(Tu||={});var{onewayMethodTemplate:N8,voidMethodTemplate:_h,valueMethodTemplate:Ql,streamMethodTemplate:O8}=hs,xu;(j=>j.service={id:"__ElectronWebRenderingV2__",fingerprint:"6c902a5850607b51714e2b27dafbde81",methods:{collectMetrics:{},openSaveDialog:{},willOpenWindow:{},writeToClipboard:{},writeToDisk:{},getImageData:{}},newOutgoingWrapper:e=>({collectMetrics:Ql.bind(-1,"collectMetrics",!1,e),openSaveDialog:Ql.bind(-1,"openSaveDialog",!0,e),willOpenWindow:Ql.bind(-1,"willOpenWindow",!0,e),writeToClipboard:_h.bind(-1,"writeToClipboard",!0,e),writeToDisk:_h.bind(-1,"writeToDisk",!0,e),getImageData:Ql.bind(-1,"getImageData",!0,e)})})(xu||={});var Pu;(t=>{t.service=xu.service;function j(r){let o=$r.shared();return{expect:()=>o.expectWithoutDiscovery(t.service,r),discover:n=>o.discover(t.service,r,n),register:n=>o.register({channel:r,service:t.service,implementation:n})}}t.on=j;async function e(r){$r.shared().unregister(r)}t.unregister=e})(Pu||={});var nr=class{constructor(j,e,t){this.normal=e,this.property=j,t&&(this.space=t)}};nr.prototype.normal={};nr.prototype.property={};nr.prototype.space=void 0;function Mu(A,j){let e={},t={};for(let r of A)Object.assign(e,r.property),Object.assign(t,r.normal);return new nr(e,t,j)}function na(A){return A.toLowerCase()}var Qj=class{constructor(j,e){this.attribute=e,this.property=j}};Qj.prototype.attribute="";Qj.prototype.booleanish=!1;Qj.prototype.boolean=!1;Qj.prototype.commaOrSpaceSeparated=!1;Qj.prototype.commaSeparated=!1;Qj.prototype.defined=!1;Qj.prototype.mustUseProperty=!1;Qj.prototype.number=!1;Qj.prototype.overloadedBoolean=!1;Qj.prototype.property="";Qj.prototype.spaceSeparated=!1;Qj.prototype.space=void 0;var ia={};am(ia,{boolean:()=>hA,booleanish:()=>yj,commaOrSpaceSeparated:()=>Ce,commaSeparated:()=>qr,number:()=>J,overloadedBoolean:()=>zl,spaceSeparated:()=>Aj});var kC=0,hA=Oo(),yj=Oo(),zl=Oo(),J=Oo(),Aj=Oo(),qr=Oo(),Ce=Oo();function Oo(){return 2**++kC}var Du=Object.keys(ia),wo=class extends Qj{constructor(j,e,t,r){let o=-1;if(super(j,e),Nh(this,"space",r),typeof t=="number")for(;++o<Du.length;){let n=Du[o];Nh(this,Du[o],(t&ia[n])===ia[n])}}};wo.prototype.defined=!0;function Nh(A,j,e){e&&(A[j]=e)}function Ye(A){let j={},e={};for(let[t,r]of Object.entries(A.properties)){let o=new wo(t,A.transform(A.attributes||{},t),r,A.space);A.mustUseProperty&&A.mustUseProperty.includes(t)&&(o.mustUseProperty=!0),j[t]=o,e[na(t)]=t,e[na(o.attribute)]=t}return new nr(j,e,A.space)}var _u=Ye({properties:{ariaActiveDescendant:null,ariaAtomic:yj,ariaAutoComplete:null,ariaBusy:yj,ariaChecked:yj,ariaColCount:J,ariaColIndex:J,ariaColSpan:J,ariaControls:Aj,ariaCurrent:null,ariaDescribedBy:Aj,ariaDetails:null,ariaDisabled:yj,ariaDropEffect:Aj,ariaErrorMessage:null,ariaExpanded:yj,ariaFlowTo:Aj,ariaGrabbed:yj,ariaHasPopup:null,ariaHidden:yj,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Aj,ariaLevel:J,ariaLive:null,ariaModal:yj,ariaMultiLine:yj,ariaMultiSelectable:yj,ariaOrientation:null,ariaOwns:Aj,ariaPlaceholder:null,ariaPosInSet:J,ariaPressed:yj,ariaReadOnly:yj,ariaRelevant:null,ariaRequired:yj,ariaRoleDescription:Aj,ariaRowCount:J,ariaRowIndex:J,ariaRowSpan:J,ariaSelected:yj,ariaSetSize:J,ariaSort:null,ariaValueMax:J,ariaValueMin:J,ariaValueNow:J,ariaValueText:null,role:null},transform(A,j){return j==="role"?j:"aria-"+j.slice(4).toLowerCase()}});function Wl(A,j){return j in A?A[j]:j}function Xl(A,j){return Wl(A,j.toLowerCase())}var Oh=Ye({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:qr,acceptCharset:Aj,accessKey:Aj,action:null,allow:null,allowFullScreen:hA,allowPaymentRequest:hA,allowUserMedia:hA,alt:null,as:null,async:hA,autoCapitalize:null,autoComplete:Aj,autoFocus:hA,autoPlay:hA,blocking:Aj,capture:null,charSet:null,checked:hA,cite:null,className:Aj,cols:J,colSpan:null,content:null,contentEditable:yj,controls:hA,controlsList:Aj,coords:J|qr,crossOrigin:null,data:null,dateTime:null,decoding:null,default:hA,defer:hA,dir:null,dirName:null,disabled:hA,download:zl,draggable:yj,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:hA,formTarget:null,headers:Aj,height:J,hidden:zl,high:J,href:null,hrefLang:null,htmlFor:Aj,httpEquiv:Aj,id:null,imageSizes:null,imageSrcSet:null,inert:hA,inputMode:null,integrity:null,is:null,isMap:hA,itemId:null,itemProp:Aj,itemRef:Aj,itemScope:hA,itemType:Aj,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:hA,low:J,manifest:null,max:null,maxLength:J,media:null,method:null,min:null,minLength:J,multiple:hA,muted:hA,name:null,nonce:null,noModule:hA,noValidate:hA,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:hA,optimum:J,pattern:null,ping:Aj,placeholder:null,playsInline:hA,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:hA,referrerPolicy:null,rel:Aj,required:hA,reversed:hA,rows:J,rowSpan:J,sandbox:Aj,scope:null,scoped:hA,seamless:hA,selected:hA,shadowRootClonable:hA,shadowRootDelegatesFocus:hA,shadowRootMode:null,shape:null,size:J,sizes:null,slot:null,span:J,spellCheck:yj,src:null,srcDoc:null,srcLang:null,srcSet:null,start:J,step:null,style:null,tabIndex:J,target:null,title:null,translate:null,type:null,typeMustMatch:hA,useMap:null,value:yj,width:J,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Aj,axis:null,background:null,bgColor:null,border:J,borderColor:null,bottomMargin:J,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:hA,declare:hA,event:null,face:null,frame:null,frameBorder:null,hSpace:J,leftMargin:J,link:null,longDesc:null,lowSrc:null,marginHeight:J,marginWidth:J,noResize:hA,noHref:hA,noShade:hA,noWrap:hA,object:null,profile:null,prompt:null,rev:null,rightMargin:J,rules:null,scheme:null,scrolling:yj,standby:null,summary:null,text:null,topMargin:J,valueType:null,version:null,vAlign:null,vLink:null,vSpace:J,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:hA,disableRemotePlayback:hA,prefix:null,property:null,results:J,security:null,unselectable:null},space:"html",transform:Xl});var wh=Ye({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ce,accentHeight:J,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:J,amplitude:J,arabicForm:null,ascent:J,attributeName:null,attributeType:null,azimuth:J,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:J,by:null,calcMode:null,capHeight:J,className:Aj,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:J,diffuseConstant:J,direction:null,display:null,dur:null,divisor:J,dominantBaseline:null,download:hA,dx:null,dy:null,edgeMode:null,editable:null,elevation:J,enableBackground:null,end:null,event:null,exponent:J,externalResourcesRequired:null,fill:null,fillOpacity:J,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:qr,g2:qr,glyphName:qr,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:J,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:J,horizOriginX:J,horizOriginY:J,id:null,ideographic:J,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:J,k:J,k1:J,k2:J,k3:J,k4:J,kernelMatrix:Ce,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:J,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:J,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:J,overlineThickness:J,paintOrder:null,panose1:null,path:null,pathLength:J,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Aj,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:J,pointsAtY:J,pointsAtZ:J,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ce,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ce,rev:Ce,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ce,requiredFeatures:Ce,requiredFonts:Ce,requiredFormats:Ce,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:J,specularExponent:J,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:J,strikethroughThickness:J,string:null,stroke:null,strokeDashArray:Ce,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:J,strokeOpacity:J,strokeWidth:null,style:null,surfaceScale:J,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ce,tabIndex:J,tableValues:null,target:null,targetX:J,targetY:J,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ce,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:J,underlineThickness:J,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:J,values:null,vAlphabetic:J,vMathematical:J,vectorEffect:null,vHanging:J,vIdeographic:J,version:null,vertAdvY:J,vertOriginX:J,vertOriginY:J,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:J,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Wl});var Nu=Ye({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(A,j){return"xlink:"+j.slice(5).toLowerCase()}});var Ou=Ye({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Xl});var wu=Ye({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(A,j){return"xml:"+j.slice(3).toLowerCase()}});var mC=/[A-Z]/g,Lh=/-[a-z]/g,fC=/^data[-\w.:]+$/i;function Lu(A,j){let e=na(j),t=j,r=Qj;if(e in A.normal)return A.property[A.normal[e]];if(e.length>4&&e.slice(0,4)==="data"&&fC.test(j)){if(j.charAt(4)==="-"){let o=j.slice(5).replace(Lh,$C);t="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{let o=j.slice(4);if(!Lh.test(o)){let n=o.replace(mC,EC);n.charAt(0)!=="-"&&(n="-"+n),j="data"+n}}r=wo}return new r(t,j)}function EC(A){return"-"+A.toLowerCase()}function $C(A){return A.charAt(1).toUpperCase()}var qh=Mu([_u,Oh,Nu,Ou,wu],"html"),Yl=Mu([_u,wh,Nu,Ou,wu],"svg");function Vh(A,j){let e=j||{};return(A[A.length-1]===""?[...A,""]:A).join((e.padRight?" ":"")+","+(e.padLeft===!1?"":" ")).trim()}function Kh(A){return A.join(" ").trim()}function Vr(A){return!A||typeof A!="object"?"":"position"in A||"type"in A?Hh(A.position):"start"in A||"end"in A?Hh(A):"line"in A||"column"in A?qu(A):""}function qu(A){return Jh(A&&A.line)+":"+Jh(A&&A.column)}function Hh(A){return qu(A&&A.start)+"-"+qu(A&&A.end)}function Jh(A){return A&&typeof A=="number"?A:1}var zj=class extends Error{constructor(j,e,t){super(),typeof e=="string"&&(t=e,e=void 0);let r="",o={},n=!1;if(e&&("line"in e&&"column"in e?o={place:e}:"start"in e&&"end"in e?o={place:e}:"type"in e?o={ancestors:[e],place:e.position}:o={...e}),typeof j=="string"?r=j:!o.cause&&j&&(n=!0,r=j.message,o.cause=j),!o.ruleId&&!o.source&&typeof t=="string"){let a=t.indexOf(":");a===-1?o.ruleId=t:(o.source=t.slice(0,a),o.ruleId=t.slice(a+1))}if(!o.place&&o.ancestors&&o.ancestors){let a=o.ancestors[o.ancestors.length-1];a&&(o.place=a.position)}let i=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=i?i.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=i?i.line:void 0,this.name=Vr(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=n&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual,this.expected,this.note,this.url}};zj.prototype.file="";zj.prototype.name="";zj.prototype.reason="";zj.prototype.message="";zj.prototype.stack="";zj.prototype.column=void 0;zj.prototype.line=void 0;zj.prototype.ancestors=void 0;zj.prototype.cause=void 0;zj.prototype.fatal=void 0;zj.prototype.place=void 0;zj.prototype.ruleId=void 0;zj.prototype.source=void 0;var pt={basename:BC,dirname:hC,extname:gC,join:IC,sep:"/"};function BC(A,j){if(j!==void 0&&typeof j!="string")throw new TypeError('"ext" argument must be a string');aa(A);let e=0,t=-1,r=A.length,o;if(j===void 0||j.length===0||j.length>A.length){for(;r--;)if(A.codePointAt(r)===47){if(o){e=r+1;break}}else t<0&&(o=!0,t=r+1);return t<0?"":A.slice(e,t)}if(j===A)return"";let n=-1,i=j.length-1;for(;r--;)if(A.codePointAt(r)===47){if(o){e=r+1;break}}else n<0&&(o=!0,n=r+1),i>-1&&(A.codePointAt(r)===j.codePointAt(i--)?i<0&&(t=r):(i=-1,t=n));return e===t?t=n:t<0&&(t=A.length),A.slice(e,t)}function hC(A){if(aa(A),A.length===0)return".";let j=-1,e=A.length,t;for(;--e;)if(A.codePointAt(e)===47){if(t){j=e;break}}else t||(t=!0);return j<0?A.codePointAt(0)===47?"/":".":j===1&&A.codePointAt(0)===47?"//":A.slice(0,j)}function gC(A){aa(A);let j=A.length,e=-1,t=0,r=-1,o=0,n;for(;j--;){let i=A.codePointAt(j);if(i===47){if(n){t=j+1;break}continue}e<0&&(n=!0,e=j+1),i===46?r<0?r=j:o!==1&&(o=1):r>-1&&(o=-1)}return r<0||e<0||o===0||o===1&&r===e-1&&r===t+1?"":A.slice(r,e)}function IC(...A){let j=-1,e;for(;++j<A.length;)aa(A[j]),A[j]&&(e=e===void 0?A[j]:e+"/"+A[j]);return e===void 0?".":RC(e)}function RC(A){aa(A);let j=A.codePointAt(0)===47,e=FC(A,!j);return e.length===0&&!j&&(e="."),e.length>0&&A.codePointAt(A.length-1)===47&&(e+="/"),j?"/"+e:e}function FC(A,j){let e="",t=0,r=-1,o=0,n=-1,i,a;for(;++n<=A.length;){if(n<A.length)i=A.codePointAt(n);else{if(i===47)break;i=47}if(i===47){if(!(r===n-1||o===1))if(r!==n-1&&o===2){if(e.length<2||t!==2||e.codePointAt(e.length-1)!==46||e.codePointAt(e.length-2)!==46){if(e.length>2){if(a=e.lastIndexOf("/"),a!==e.length-1){a<0?(e="",t=0):(e=e.slice(0,a),t=e.length-1-e.lastIndexOf("/")),r=n,o=0;continue}}else if(e.length>0){e="",t=0,r=n,o=0;continue}}j&&(e=e.length>0?e+"/..":"..",t=2)}else e.length>0?e+="/"+A.slice(r+1,n):e=A.slice(r+1,n),t=n-r-1;r=n,o=0}else i===46&&o>-1?o++:o=-1}return e}function aa(A){if(typeof A!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(A))}var Uh={cwd:yC};function yC(){return"/"}function Kn(A){return!!(A!==null&&typeof A=="object"&&"href"in A&&A.href&&"protocol"in A&&A.protocol&&A.auth===void 0)}function Qh(A){if(typeof A=="string")A=new URL(A);else if(!Kn(A)){let j=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+A+"`");throw j.code="ERR_INVALID_ARG_TYPE",j}if(A.protocol!=="file:"){let j=new TypeError("The URL must be of scheme file");throw j.code="ERR_INVALID_URL_SCHEME",j}return SC(A)}function SC(A){if(A.hostname!==""){let t=new TypeError('File URL host must be "localhost" or empty on darwin');throw t.code="ERR_INVALID_FILE_URL_HOST",t}let j=A.pathname,e=-1;for(;++e<j.length;)if(j.codePointAt(e)===37&&j.codePointAt(e+1)===50){let t=j.codePointAt(e+2);if(t===70||t===102){let r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(j)}var Vu=["history","path","basename","stem","extname","dirname"],sa=class{constructor(j){let e;j?Kn(j)?e={path:j}:typeof j=="string"||GC(j)?e={value:j}:e=j:e={},this.cwd="cwd"in e?"":Uh.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let t=-1;for(;++t<Vu.length;){let o=Vu[t];o in e&&e[o]!==void 0&&e[o]!==null&&(this[o]=o==="history"?[...e[o]]:e[o])}let r;for(r in e)Vu.includes(r)||(this[r]=e[r])}get basename(){return typeof this.path=="string"?pt.basename(this.path):void 0}set basename(j){Hu(j,"basename"),Ku(j,"basename"),this.path=pt.join(this.dirname||"",j)}get dirname(){return typeof this.path=="string"?pt.dirname(this.path):void 0}set dirname(j){zh(this.basename,"dirname"),this.path=pt.join(j||"",this.basename)}get extname(){return typeof this.path=="string"?pt.extname(this.path):void 0}set extname(j){if(Ku(j,"extname"),zh(this.dirname,"extname"),j){if(j.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(j.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=pt.join(this.dirname,this.stem+(j||""))}get path(){return this.history[this.history.length-1]}set path(j){Kn(j)&&(j=Qh(j)),Hu(j,"path"),this.path!==j&&this.history.push(j)}get stem(){return typeof this.path=="string"?pt.basename(this.path,this.extname):void 0}set stem(j){Hu(j,"stem"),Ku(j,"stem"),this.path=pt.join(this.dirname||"",j+(this.extname||""))}fail(j,e,t){let r=this.message(j,e,t);throw r.fatal=!0,r}info(j,e,t){let r=this.message(j,e,t);return r.fatal=void 0,r}message(j,e,t){let r=new zj(j,e,t);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(j){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(j||void 0).decode(this.value)}};function Ku(A,j){if(A&&A.includes(pt.sep))throw new Error("`"+j+"` cannot be a path: did not expect `"+pt.sep+"`")}function Hu(A,j){if(!A)throw new Error("`"+j+"` cannot be empty")}function zh(A,j){if(!A)throw new Error("Setting `"+j+"` requires `path` to be set too")}function GC(A){return!!(A&&typeof A=="object"&&"byteLength"in A&&"byteOffset"in A)}var bC={track:!0};function Wh(A){let j={...A,event:"canvas_page_add"};Mj(j,bC)}var CC={track:!0};function Xh(A){let j={...A,event:"canvas_page_select"};Mj(j,CC)}var vC={track:!0};function Yh(A){let j={...A,event:"component_canvas_create"};Mj(j,vC)}var TC={track:!0};function Zh(A){let j={...A,event:"component_canvas_enter"};Mj(j,TC)}var xC={track:!0};function A0(A){let j={...A,event:"component_canvas_variant_create"};Mj(j,xC)}var PC={track:!0};function Ju(A){let j={...A,event:"component_design_instance"};Mj(j,PC)}var MC={track:!0};function Uu(A){let j={...A,event:"export_bitmap"};Mj(j,MC)}var DC={track:!0};function j0(A){let j={...A,event:"external_component_insert"};Mj(j,DC)}var _C={track:!0};function e0(A){let j={...A,event:"property_layout_update"};Mj(j,_C)}var NC={track:!0};function t0(A){let j={...A,event:"variable_reference_create"};Mj(j,NC)}function r0(A,j){return hr(j)?j:xA(A)?A.constraintsLocked:!1}function q4(A,j,e,t){let r=A.tree,o={x:Math.round(e.x-t.width/2),y:Math.round(e.y-t.height/2)},n=r.getNode(j);if(!j||!n)return{left:o.x,top:o.y};let i=UE(A.tree,j),a=i?A.tree.getViewportRect(i):null,s=r.getRect(n),l=r.convertPointToNode(n,o),c={x:l.x,y:l.y,width:t.width,height:t.height},d=c.width/c.height,u=Yd(c,{sizing:s,positioning:s,viewport:a,layout:Rt(n)},null,{aspectRatio:d,shouldGuessPinToBottom:or(r,null,n),shouldGuessPinToRight:Me(r,null,n)});return u.aspectRatio=d,u}var Qu=(A,j,e,t)=>{let r=j.getGroundNodes().map(o=>A.getRect(o));return t!==void 0&&r.push(...t),r.find(o=>AA.intersects(e,o))===void 0},OC=(A,j,e,t,r)=>{let o=j.getGroundNodes().map(a=>A.getRect(a));t!==void 0&&o.push(...t);let i=o.sort((a,s)=>AA.maxX(a)>AA.maxX(s)?-1:1)[0];return i!==void 0?Xu(i,e,r):null},wC=(A,j,e,t,r)=>{let o=j.getGroundNodes().map(s=>A.getRect(s));t!==void 0&&o.push(...t);let a=o.filter(s=>s.width===e.width&&s.height===e.height||s.height===e.width&&s.width===e.height).sort((s,l)=>AA.maxX(s)>AA.maxX(l)?-1:1)[0];return a!==void 0?Xu(a,e,r):null},LC=(A,j,e)=>j.map(t=>A.getNode(t)).filter(t=>Hs.equals(t.rect(null),e));function Wu({tree:A,activeScope:j,node:e,size:t,filledRects:r,offsetDistance:o}){let n={...A.getRect(e),...t},i=j.getGroundNodes().map(l=>l.rect());r&&i.push(...r);let a=n,s=0;for(;a;){if(mA(o.x)||(n.x=zu("x",a,o.x)),mA(o.y)||(n.y=zu("y",a,o.y)),a=i.find(l=>AA.intersects(l,n)),s>i.length)return n;s++}return n}var n0=(A,j,e,t,r={x:100,y:void 0},o)=>Wu({tree:A,activeScope:j,node:e,size:t,filledRects:o,offsetDistance:r}),la=(A,j,e,t,r=100,o)=>Wu({tree:A,activeScope:j,node:e,size:t,filledRects:o,offsetDistance:{x:r}}),V4=(A,j,e,t,r=100,o)=>Wu({tree:A,activeScope:j,node:e,size:t,filledRects:o,offsetDistance:{y:r}});function zu(A,j,e){return(A==="x"?AA.maxX:AA.maxY)(j)+e}function Xu(A,j,e=100){return{...A,x:zu("x",A,e),...j}}var qC=(A,j,e,t,r,o,n)=>{if(o){let s=A.getNode(o);if(s)return la(A,j,s,e,n,r)}if(t){let s=LC(A,t,e);if(s.length){let c=s.map(u=>Xu(u.rect(),e,n)).find(u=>Qu(A,j,u,r));if(c)return c;let d=s[0];return B(d,"Equal frame must be defined"),la(A,j,d,e,n,r)}}let i=wC(A,j,e,r,n);if(i!==null&&Qu(A,j,i,r))return i;let a=OC(A,j,e,r,n);return a!==null&&Qu(A,j,a,r)?a:{...e,x:0,y:0}},K4=(A,j,e,t,r)=>{let o=A.getRect(e),n=A.getParent(e.id),i;_A(e)&&(i=Math.min(o.width,100));let a=qC(A,j,o,t,r,e.id,i);return r.push(a),Yd(a,null,Tr(e)?xr(e):null,{shouldGuessPinToBottom:!0,shouldGuessPinToRight:Me(A,e,n)})},H4=(A,j,e,t)=>{if(e.length>0){let r=e[e.length-1],o=A.getGroundFrameAncestor(r,!0);if(o)return o.id}for(let r of A.sortVisually(A.getNodesAtPoint(j,t)).reverse())if(r instanceof dt&&A.getParent(r.id)===Hj){if(DA(r))continue;return r.id}return Hj},J4=(A,j,e)=>{let r=A.tree.newId(),o={top:j.y,left:j.x,width:j.width,height:j.height,overflow:St(),isScreen:!0};return o.framePreset=e,A.createFrame(Hj,{id:r,...o}),r},U4=(A,j)=>{let e=A.tree,t=e.newId(),r={top:j.y,left:j.x,width:j.width,height:j.height,overflow:St(),isScreen:!0};return A.createFrame(Hj,{id:t,...r}),A.stores.scopeStore.active.getGroundNodes(n=>{let i=e.getRect(n);return n.id!==t&&AA.containsRect(j,i)}).forEach(n=>{let i=e.getParent(n.id),a=e.getRect(n),s=AA.offset(a,BA.reverse(j));A.moveNode(n.id,t),A.tree.current(n)?.set(n.updateForRect({rect:s,parentSizeInfo:{sizing:j,positioning:j,viewport:null,layout:Rt(i)},constraintsLocked:r0(n),shouldGuessPinToBottom:!0,shouldGuessPinToRight:Me(A.tree,n,i)}))}),t},o0=["#9ef","#4cf","#3af","#38f","#26f"],Q4=(()=>{let A=-1,j=o0.length;return()=>(A++,o0[A%j])})();function Z4(A,j){if(!A||A.changes.length===0)return!1;for(let e of A.changes){let t=j.get(e.id);if(!pf(t)&&!uf(t)&&!(!t&&e.added==="RedirectRouteNode"))return!1}return!0}function a0(A,j){if(!A||A.changes.length===0)return!1;for(let e of A.changes){let t=j.get(e.id);return!t||!Qt(t)?!1:"variables"in e.from}return!0}function s0(A,j){if(!A||A.changes.length===0)return!1;for(let e of A.changes){let t=j.get(e.id);if(!Ir(t))return!1;let r="locales";return!!(r in e.from||e.from._deleted?.includes(r))}return!0}var l0=class extends ze{constructor(){super(...arguments);y(this,"active",0)}};var VC=CA("EngineChanges");var c0=class{constructor(){y(this,"changes",new Set);y(this,"addChanges",(...j)=>{for(let e of j)this.changes.add(e)});y(this,"changeObserverFlags",[]);y(this,"changeObservers",[]);y(this,"inSignalAllObservers",!1);y(this,"observersToRemove",[])}get flags(){return this.changes}has(...j){for(let e of j)if(this.changes.has(e))return!0;return!1}observe(...j){let e=j.pop(),t=j;return Re.isDebugBuild&&t.some(r=>r===void 0)&&VC.warn("changes.observe was called with undefined as one of the flags. It might be caused by observing a store that hasn't been instantiated yet."),this.changeObserverFlags.push(t),this.changeObservers.push(e),e}observeWithComponent(j,e,t){this.changeObserverFlags.push(j);let r=()=>{Re.benchmarkSkipRendering||e.setState(t())};return this.changeObservers.push(r),r}removeObserver(j){if(this.inSignalAllObservers){this.observersToRemove.push(j);return}let e=this.changeObservers.indexOf(j);e!==-1&&(this.changeObserverFlags.splice(e,1),this.changeObservers.splice(e,1))}signalAllObservers(){if(!this.changes)return;let j=this.changes,e=this.changeObserverFlags,t=this.changeObservers;this.inSignalAllObservers=!0;for(let r=0;r<e.length;r++){let o=e[r];for(let n of o)if(j.has(n)){t[r]();break}}if(this.inSignalAllObservers=!1,this.observersToRemove.length>0){for(let r of this.observersToRemove)this.removeObserver(r);this.observersToRemove.length=0}this.changes.clear()}signalObserversFor(...j){let e=new Set(j),t=this.changeObserverFlags,r=this.changeObservers;for(let o=0;o<t.length;o++){let n=t[o];for(let i of n)if(e.has(i)){r[o]();break}}e.forEach(o=>this.changes.delete(o))}};function lq(){let A=yE();return B(Yu(A),"Expected OnPageEngine"),A}function Yu(A){return A.name==="OnPageEngine"}var d0=A=>[A.loadingStore,...rh(A)],Zu=([A,...j])=>({isReady:A.isReady,...oh(j)});function KC(A,j){if(!A.isReady||A.userIsViewer)return!0;let e=eh(A);return!new th(e)[j]}function ca(A,j){return yn(A)?KC(Zu(d0(A.stores)),j):!Yu(A)}function mq(A,j,e,{signal:t}){let r=d0(A),o=Zu(r),n=j.changes.observe(...r,()=>{let i=Zu(r);ot(o,i)||(o=i,e(i))});t.addEventListener("abort",()=>{j.changes.removeObserver(n)},{once:!0})}var u0=class extends ze{constructor(e,t){super();this.addChanges=e;this.effectsStore=t;y(this,"update",0);y(this,"tooltip");y(this,"shapeToolActive",!1);y(this,"feedbackModeActive",!1);y(this,"handle",null);y(this,"straightLineAnchorIndex",0);y(this,"proseMirrorView",null);y(this,"proseMirrorState",null);y(this,"textLink",null);y(this,"editedTextLink");y(this,"stackInsertionIndicator",null);y(this,"replaceableFloatingPositionNode",null);y(this,"activeTool",0);y(this,"nodeInTextEditorId",Hj);y(this,"nodeInPathEditorOffset",null);y(this,"dragAndDropPlaceholders",null);y(this,"codeComponentInProgressInsertionIndicatorNodeIDs",new Set)}get tool(){return this.activeTool}postProcess(e){this.update=e}get isDefaultToolActive(){return this.tool===0||this.tool===1}updateDragAndDropPlaceholder(e){if(e){let t=e.cache.placeholders,r=t?{id:e.id,placeholders:t}:null;if(Br(r,this.dragAndDropPlaceholders))return;this.dragAndDropPlaceholders=r}else this.dragAndDropPlaceholders=null}setTool(e){Ki.canEditTree(e)&&e!==6&&this.effectsStore.exitPreview(),this.shapeToolActive=JC(e),UC(e)||(this.feedbackModeActive=!1),this.tool===6&&e!==6&&this.addChanges("ExitMove"),this.tool!==e&&this.addChanges("Tool"),this.activeTool=e}};function HC(A){switch(A){case 31:case 21:case 10:case 22:case 24:case 23:case 12:case 11:case 20:case 13:case 19:case 14:case 47:case 29:case 30:case 41:case 46:case 27:case 40:case 28:case 25:return!1;case 42:case 43:case 15:case 17:case 16:case 18:case 1:case 38:case 34:case 44:case 0:case 45:case 9:case 39:case 6:case 32:case 3:case 35:case 37:case 7:case 26:case 8:case 36:case 48:case 2:case 49:case 33:case 4:case 5:return!0;default:EA(A)}}function JC(A){switch(A){case 31:case 42:case 43:case 21:case 10:case 22:case 24:case 23:case 12:case 11:case 20:case 13:case 19:case 14:case 47:case 1:case 38:case 34:case 44:case 0:case 45:case 41:case 46:case 39:case 6:case 32:case 3:case 37:case 7:case 26:case 27:case 28:case 29:case 30:case 8:case 36:case 48:case 2:case 40:case 25:case 49:case 33:case 4:case 5:return!1;case 15:case 17:case 16:case 18:case 9:case 35:return!0;default:EA(A)}}function UC(A){switch(A){case 42:case 43:case 3:case 4:case 5:return!0;case 0:case 1:case 2:case 6:case 7:case 48:case 8:case 9:case 31:case 10:case 11:case 12:case 47:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 23:case 25:case 26:case 27:case 28:case 29:case 30:case 32:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 44:case 49:case 33:case 45:case 46:return!1;default:EA(A)}}function yq(A){switch(A){case 4:case 5:return!0;case 0:case 1:case 2:case 3:case 6:case 7:case 48:case 8:case 9:case 31:case 10:case 11:case 12:case 47:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 23:case 25:case 26:case 27:case 28:case 29:case 30:case 32:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 49:case 33:case 45:case 46:return!1;default:EA(A)}}function m0(A){switch(A){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 42:case 43:case 49:case 46:return!0;case 7:case 48:case 8:case 9:case 31:case 10:case 11:case 12:case 47:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 23:case 25:case 26:case 27:case 28:case 29:case 30:case 32:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 44:case 33:case 45:return!1;default:EA(A)}}function Sq(A){switch(A){case 3:case 4:case 46:return!0;case 5:case 6:case 0:case 1:case 2:case 42:case 43:case 49:case 7:case 48:case 8:case 9:case 31:case 10:case 11:case 12:case 47:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 23:case 25:case 26:case 27:case 28:case 29:case 30:case 32:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 44:case 33:case 45:return!1;default:EA(A)}}function f0(A){switch(A){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 49:return!0;case 42:case 43:case 7:case 48:case 8:case 9:case 31:case 10:case 11:case 12:case 47:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 23:case 25:case 26:case 27:case 28:case 29:case 30:case 32:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 44:case 33:case 45:case 46:return!1;default:EA(A)}}function Gq(A,j){return A.stores.historyStore.isLoadingDocument?j===46:ca(A,"canDesign")?m0(j):A.stores.chromeStore.isPreviewingFeaturedTemplate?f0(j):!0}function bq(A,j){return j==="VectorSet"?HC(A):!(j==="WebPage"&&A===41)}function Cq(A,j){if(ca(A,"canDesign")&&!m0(j))throw Error("Viewer mode: Tool "+j+" is a forbidden action.");if(A.stores.chromeStore.isPreviewingFeaturedTemplate&&!f0(j))throw Error("Previwing template mode: Tool "+j+" is a forbidden action.")}var vq=A=>A===20||A===21||A===22||A===24||A===23||A===19;function Tq(A){return A===8||A===7||A===48||A===32||A===34}var QC={0:!0,1:!0,2:!0,3:!0,4:!0,6:!0,5:!0};function Dq(A){return aA(A)&&QC[A]===!0}var A7=new Map;function Nq(A,j){A7.set(A,j)}function Oq(A){A7.delete(A)}function E0(A){A7.get(A)?.()}var zC="__page_input";function WC(A){return`${zC}_${A}`}function Zl(A){let j=WC(A);E0(j)}function A6(A){return dA(A)||Q(A)}async function $0({messages:A,model:j,schema:e,signal:t}){let r=await Dl.post("/ai/v2/chat/",{model:j,messages:A,response_format:{type:"json_schema",json_schema:{strict:!0,name:"schema",schema:e}}},t);try{return JSON.parse(r?.choices?.[0]?.message?.content??"")}catch(o){throw new Error(`Could not process JSON response: ${o}`,{cause:r})}}function da(A,j){if(mA(A))return A;let e=[];for(let t of A)e.push(j.get(t)??t);return e.length>0?e:void 0}function Ct(A,j){if(!Nj(j))return null;let e=A.getNode(j.originalid);return B(e,"The original variant node should exist"),e}function XC(A,j,e){let t=yA.inheritedReplicaNode(A,j.replicaInfo.inheritsFrom),r=Ro(j.replicaInfo.overrides,t?.replicaInfo.overrides);for(let o of e.walk()){let n=r[o.id];if(!n)continue;let{_deleted:i,itemsOrder:a,...s}=n;i?.forEach(l=>s[l]=void 0),A.current(o)?.set(s)}}function B0(A,j){let e=A.getNode(j.originalid),t=yA.getReplicaForTemplateNode(A,j);if(!e||!t||!XA(t))return[];if(!t.replicaInfo.inheritsFrom)return[e];let r=A.getNode(t.replicaInfo.inheritsFrom);if(!r)return[e];let o=Qe(r.id,e.id),n=A.getNode(o);return n?[e,n]:[e]}function r2(A,j,e,t){let r=yA.getReplicaForTemplateNode(A.tree,j);B(r,"replica should exist when moving node out of replica"),B(XA(r),"replica must be a variant"),XC(A.tree,r,e),j.isVisible()&&!e.isVisible()&&A.tree.current(e)?.set({visible:!0}),t.delete(j.id),t.add(e.id)}function ua(A,j,e,t,r){if(!e||!t)return j.id;B(DA(e),"Fail to update variant nodes: parent must be a replica");let o=yA.getReplicaForTemplateNode(A.tree,e);if(B(o,"Fail to update variant nodes: replica should exist"),B(XA(o),"Fail to update variant nodes: replica must be an variant"),dl(A.tree,e)){A.tree.current(j)?.set({visible:!1});let i={visible:!0};Fo(j)&&r&&(i.itemsOrder=da(j.itemsOrder,r)),ea(A.tree,o,j.id,i)}return Qe(o.id,j.id)}function j7(A,j,e,t,r,o){let n=ua(A,j,e,t,o);return r.delete(j.id),r.add(n),n}function o2(A,j,e){let t=B0(A.tree,j),r=B0(A.tree,e),o=t.find((n,i)=>!n.isVisible()||n.cache.visible===!0?!1:r[i]?.cache.visible??!1);o&&(A.tree.get(o.id)?.set({visible:!1}),j.set({visible:!0},A.tree,!0))}function h0(A,j,e){Pr(A.tree,j).forEach(({replicaRoot:t})=>{if(Object.keys(t.replicaInfo.overrides).every(a=>!e.has(a)))return;let n={...t.replicaInfo},i={...n.overrides};n.overrides=i,e.forEach((a,s)=>{if(s in i){let l={...i[s]},c=l.itemsOrder;"itemsOrder"in l&&Array.isArray(c)&&(l.itemsOrder=da(c,e)),i[a]=Mh(l)}}),A.tree.get(t.id)?.set({replicaInfo:n})})}var YC={type:{type:$i.type,value:id.type},variantId:{type:$i.variantId,value:void 0},pauseOffscreen:{type:$i.pauseOffscreen,value:id.pauseOffscreen}},p2={type:"type",variantId:"variantId",pauseOffscreen:"pauseOffscreen"},ZC={cycle:!0,set:!0};function k2(A){return L(A)&&A in ZC}function ir(A){return Ts(A)&&A.actionIdentifier==="framer/useSetVariant"}function g0(A){return A.controls.type?.value!=="set"?null:A.controls.variantId?.value??null}function m2(A){return Array.isArray(A)&&A.some(j=>ir(j)&&j.controls.type?.value==="set"&&!j.controls.variantId?.value)}function f2(A,j){return OE(A,ir,j)}function E2(A,j,e){let t=NE(j,ir,e),r=[];return t.forEach(o=>{switch(o.controls.type?.value){case"set":{let i=o.controls.variantId?.value;i&&r.push(i);break}case"cycle":{let i=A.getScopeNodeFor(j);if(!dA(i))return;let a=i.getTopLevelVariants();if(a.length<=1)return;let s=A.getGroundNodeFor(j),l=a.findIndex(k=>k.id===s.id);if(l===-1)return;let c=l+1,d=c>=a.length?0:c,u=a[d];u&&r.push(u.id);break}}}),r}function $2(A){let j={};return Object.entries(A).forEach(([e,t])=>{j[e]=t?.value}),j}function Av(A,j){return!(A?.inputValue!==j?.inputValue||A?.delay!==j?.delay||A?.key!==j?.key)}function B2(A,j,e){let t=Array.isArray(A)?[...A]:[],r=t.findIndex(ir),o=t[r];if(ir(o)&&Av(o.meta,e)){let n={...o.controls,...I0(j)},i={...o,controls:n,meta:{...o.meta,...e}};t[r]=i}else{let n=jv(j,void 0,e);t.push(n)}return t}function I0(A){let j={};return Object.entries(A).forEach(([e,t])=>{j[e]={type:$i[e],value:t}}),j}function jv(A,j,e){let t=I0({...A}),r={identifier:j||vr(),actionIdentifier:"framer/useSetVariant",controls:{...YC,...t}};return e&&Object.assign(r,{meta:e}),r}function h2(A,j){let e={...A.controls,...j};return{...A,controls:e}}function R0(A,j){let e=j.get(A);return ws(e)?e:null}function e7(A,j,e="transparent"){if(mA(A))return e;if(!Ut(A))return A;let t=Us(A);return(t?R0(t,j):null)?.light??e}function Lo(A,j,e,t=!1){if(e$(j)){A.has(j)||A.ensureEntityTypeRootNode(j);return}let r=t?$l(e):Ji(e);if(A.has(r))return;let o=new Hi({id:r});A.insertNode(o,j)}function ev(A,j){let e=A.tree.get(j);if(ie(e))return;let t=A.tree.get(e.parentid);if(!ie(t))return t.children?.findIndex(r=>r.id===j)}function x2(A,j,e){let t=A.tree.getEntityReferenceNode(j);if(ie(t))return;let r=Ji(e),o=new Hi({id:r}),n=ev(A,t.id),i=He(n)?n+1:void 0;A.tree.insertNode(o,t.parentid,i)}function P2(A,j){let e=A.tree.get(j);ie(e)||(A.tree.removeNode(e),tv(A,j))}function tv(A,j,e){let{isCodeFile:t=!1}=e??{},r=t?$l(j):Ji(j);A.tree.remove(r)}function j6(A,j){return A===Go?$l(j):Ji(j)}function rv(A){return j=>yt(j)&&j.name===A}function F0(A,j){return A.children.find(rv(j))??null}function K2(A,j){return A.children.find(e=>yt(e)&&e.getName()===j)??null}function H2(A,j){let t=iv(A.tree,j).map(n=>A.tree.get(n));B(t.length>0,"unreferenced nodes parent node must exist");let r=t.flatMap(n=>n?.children??[]);if(!r||r.length===0)return;let o=ov[j];A.tree.beginAllowPartialScopeAccess();for(let n of r){if(!o(n))continue;let i=j6(j,n.id);if(A.tree.get(i))continue;let a=new Hi({id:i});A.tree.insertNode(a,j)}A.tree.endAllowPartialScopeAccess()}function y0(A){return vo(A)&&A.save.type==="codeFile"}var ov={[Ld]:A=>ff(A),[Vd]:A=>xe(A),[Hd]:A=>Ee(A),[Jd]:A=>Bn(A),[qd]:A=>Ft(A)||Vs(A)||$n(A),[Go]:A=>y0(A),[qi]:A=>dA(A)||y0(A),[Kd]:A=>ws(A),[Vi]:A=>Ej(A),[vn]:A=>Je(A)},nv={[Ld]:Lr,[Vd]:Lr,[Hd]:Lr,[Jd]:Lr,[qd]:Lr,[Go]:We,[Kd]:Cl};function iv(A,j){return j===Vi||j===vn?[A.root.id]:j===qi?[A.root.id,We]:[nv[j]]}var av="__entity_input";function J2(A,j){return`${av}_${A}_${j?"popout":"panel"}`}function t7(A){return j$(A)||yt(A)}function U2(A,j,e){let t=e;for(let[r,o]of j.entries()){let n=r===j.length-1,i=A.getNode(t);if(!i||!t7(i))return!1;let a=!1;for(let s of i.children){if($f(s)&&o===s.getName())return!0;if(yt(s)&&o===s.getName()){if(n)return!0;a=!0,t=s.id;break}}if(!a)return!1}return!1}function e6(A,j,e){let t=bj(j)?j:sv(j);if(t.length===0)return e;let r=A.get(e);B(r&&t7(r),"A reference must be in a folder.");for(let o of t){let n=F0(r,o);if(n){r=n;continue}r=A.insertNode(new aB({name:o}),r.id)}return r.id}function tV(A,j){let e=A.tree.get(j);if(!yt(e))return"";let t=[e.name];for(let r of e.ancestors()){if(!yt(r))break;t.unshift(r.name)}return`/${t.join("/")}`}function rV(A,j,e){let t=A.tree.get(j);B(t,"Node must exist");let r=j6(e,j),o=A.tree.get(r),n=[t.name];if(o)for(let i of o.ancestors()){if(!yt(i))break;n.unshift(i.name)}return`/${n.join("/")}`}function sv(A){return tu(A).slice(0,-1)}function oV(A,j,e,t){let r=tu(e);if(r.length===0)return;let o=r.pop(),n=e6(A.tree,e,t),i=t===Go;return Lo(A.tree,n,j.id,i),j.set({name:o}),n}function Hn(A){return Ci(A)}function S0(A,j){if(!vi(j))return!1;let e=wd(j.codeComponentIdentifier);if(!e)return!1;let t=A.getNode(e);return!!(t&&Q(t))}function uV(A,j){let e=wd(j.codeComponentIdentifier);B(e,"WebPageInstance should have a local canvas component id");let t=A.getNode(e);return B(t,"SmartComponentInstance should have a local WebPageNode"),B(Q(t),"WebPageInstance its WebPageNode should be a web page"),t}var ka=(A,j)=>A.length===0?[]:typeof A[0]=="string"?j.withoutDescendants(j.getNodes(A)):A;function t6(A,j){let e=j.reactComponentForIdentifier(A.codeComponentIdentifier);return e?V$(e.properties,A.getControlProps(e.properties)):{}}var lv={type:"None",source:"undefined"},G0=class extends ze{constructor(e){super();this.scheduler=e;y(this,"_stack",[]);y(this,"dismiss",()=>{this._stack=gt.pop(this._stack)});y(this,"isVisible",()=>this.active.type!=="None");y(this,"shouldBlockUndoRedo",(e,t)=>{switch(this.active.type){case"None":return!1;case"Variables":return!a0(e,t);case"LocaleSettings":return!s0(e,t);default:return!0}})}get stack(){return this._stack}get active(){return this._stack[this._stack.length-1]??lv}trackModalOpen({type:e,source:t}){SA("modal_open",{modalType:e,source:t})}push(e){this._stack=gt.push(this._stack,e),this.trackModalOpen(e)}set(e){this._stack=[e],this.trackModalOpen(e)}dismissAll(){this._stack.length!==0&&(this._stack=[])}dismissModal(e){this._stack=gt.filter(this._stack,t=>t.type!==e)}displayComponentIsolationModal({source:e}){let t="componentIsolationModal",r="1";Re.isAutomation||Re.isE2E||Re.isTest||localStorage.getItem(t)!==r&&(localStorage.setItem(t,r),setTimeout(()=>{this.scheduler.processWhenReady(()=>{this.set({type:"ComponentIsolationModal",source:e})})},0))}};function b0(A){if(L(A))return[A];if("id"in A)return[A.id];let j=[];for(let e of A)L(e)?j.push(e):j.push(e.id);return j}function ma(A,j){if(A===j)return!0;if(A.length!==j.length)return!1;let e=new Set(A);for(let t of j)if(!e.has(t))return!1;return!0}var C0=class extends ze{constructor(e,t,r){super();this.guides=e;this.chromeStore=t;this.overlayStore=r;y(this,"_previousIds",[]);y(this,"_ids",[]);y(this,"_nodes",[]);y(this,"_isSticky",!1);y(this,"_commonGroundNode");y(this,"gradientStopId")}get ids(){return this._ids}get nodes(){return this._nodes}get isSticky(){return this._isSticky}get commonGroundNode(){return this._commonGroundNode}get commonGroundNodeId(){return this._commonGroundNode?.id??null}get previousIds(){return this._previousIds}set(e,t={}){let r=b0(e);if(ma(this._ids,r))return;this._previousIds=this._ids,this._ids=r,this._isSticky=t.sticky??r.length>1,r.length>0&&this.guides.clearSelected();let{switchToLayers:n=!1,tree:i}=t;this.chromeStore.onCanvasSelectionChange(r,n),this.overlayStore.onCanvasSelectionChange(r,{tree:i})}toggle(e,{switchToLayers:t=!1}={}){let r=b0(e),o=new Set(this.ids);for(let n of r)o.has(n)?o.delete(n):o.add(n);this._ids=Array.from(o),this.chromeStore.onCanvasSelectionChange(this.ids,t),this.overlayStore.onCanvasSelectionChange(o,{toggle:!0})}clear(){this.set([])}updateNodes(e){let t=e.getNodes(this.ids),r=!po(this.nodes,t);r&&(this._nodes=t),(r||this.commonGroundNode&&!e.isGroundNode(this.commonGroundNode))&&this.updateCommonGroundNode(e)}updateCommonGroundNode(e){let t;for(let r of this.nodes){let o=e.getGroundNodeFor(r);if(!t)t=o;else if(t!==o){t=void 0;break}}this._commonGroundNode=t}postProcess(e,t,r,o=this.gradientStopId,n=this._ids){this.gradientStopId=o;let i=[];for(let a of n){let s=e.getNode(a);if(s){e.isAncestorOfNode(s,t.id)&&i.push(a);continue}let l=r.getNode(a);if(!Ge(l))continue;let c=e.getNode(l.parentid);if(hj(c)){i.splice(0,i.length,c.id);break}}this.set(i,{tree:e}),this.updateNodes(e)}};function r7(A){let j=Y.componentForIdentifier(A.codeComponentIdentifier);if(!j?.properties)return null;let e=Object.entries(j.properties).find(([,n])=>n&&n.title==="Variant"&&n.type==="enum");if(!e)return null;let[t,r]=e;if(r.options.length<=1)return null;let o=r.defaultValue??r.options[0];return L(o)?{key:t,control:r,defaultVariant:o}:null}function o7(A,{control:j}){let e=A.toLowerCase().trim(),r=(j.optionTitles??j.options).findIndex(n=>L(n)&&n.toLowerCase()===e);if(r===-1)return null;let o=j.options[r];return L(o)?o:null}function v0(A,j,e){let t={};for(let r of e.walk()){if(!nA(r))continue;let o=r7(r);if(!o)continue;let n=o7(j,o);if(!n)continue;let i=r;if(Bj(r)&&(i=A.tree.getNode(r.originalid)),!i||(i.getRawControlProp(o.key)??o.defaultVariant)===n)continue;let s={type:"enum",value:n};t[i.id]={[WA(o.key)]:s}}return Object.keys(t).length>0?t:null}var T0=["blur","backgroundBlur","brightness","contrast","grayscale","hueRotate","invert","saturate","sepia"];var o6={left:"position",right:"position",top:"position",bottom:"position",centerAnchorX:"position",centerAnchorY:"position",constraintsLocked:"position",x:"position",y:"position",width:"size",widthType:"size",height:"size",heightType:"size",aspectRatio:"size",itemsOrder:"itemsOrder",layout:"layout",gap:"layout",gridAlignment:"layout",gridColumnCount:"layout",gridColumnWidthType:"layout",gridColumnWidth:"layout",gridColumnMinWidth:"layout",gridRowHeightType:"layout",gridRowHeight:"layout",gridRowCount:"layout",stackDirection:"layout",stackDistribution:"layout",stackAlignment:"layout",stackWrapEnabled:"layout",gridItemFillCellWidth:"size",gridItemFillCellHeight:"size",gridItemHorizontalAlignment:"position",gridItemVerticalAlignment:"position",gridItemColumnSpan:"size",gridItemRowSpan:"size",minHeight:"sizeConstraints",minWidth:"sizeConstraints",maxHeight:"sizeConstraints",maxWidth:"sizeConstraints",paragraphSpacing:"paragraphSpacing",position:"positionType",positionStickyTop:"positionType",positionStickyRight:"positionType",positionStickyBottom:"positionType",positionStickyLeft:"positionType",intrinsicWidth:"intrinsicSize",intrinsicHeight:"intrinsicSize",fillColor:"fill",fillEnabled:"fill",fillImage:"fill",fillImageOriginalName:"fill",fillImagePixelHeight:"fill",fillImagePixelWidth:"fill",fillImageResize:"fill",fillImagePositionX:"fill",fillImagePositionY:"fill",fillImageTileSize:"fill",fillType:"fill",fillRadialGradient:"fill",fillLinearGradient:"fill",fillConicGradient:"fill",tapHighlightColor:"tapHighlight",textSelection:"textSelection",masks:"mask",radius:"radius",radiusBottomLeft:"radius",radiusBottomRight:"radius",radiusIsRelative:"radius",radiusPerCorner:"radius",radiusTopLeft:"radius",radiusTopRight:"radius",borderTop:"border",borderBottom:"border",borderLeft:"border",borderRight:"border",borderEnabled:"border",borderWidth:"border",borderStyle:"border",borderColor:"border",borderPerSide:"border",rotation:"rotation",rotate3d:"rotation",rotateX:"rotation",rotateY:"rotation",blendingMode:"blending",opacity:"opacity",backgroundBlur:"backgroundBlur",overflow:"overflow",overflowY:"overflowY",overflowX:"overflowX",overscrollBehavior:"overscroll",visible:"visibility",brightness:"brightness",contrast:"contrast",grayscale:"grayscale",hueRotate:"hueRotate",invert:"invert",saturate:"saturate",sepia:"sepia",blur:"blur",boxShadows:"shadows",shadows:"shadows",guidesX:"canvasSettings",guidesY:"canvasSettings",exportOptions:"canvasSettings",overlayGrid:"canvasSettings",gesture:"canvasSettings",sizeToFit:"canvasSettings",framePreset:"canvasSettings",isVariant:"canvasSettings",onTap:"action",onTapStart:"action",onClick:"action",onMouseUp:"action",onMouseDown:"action",onMouseEnter:"action",onMouseLeave:"action",onAppear:"action",onKeyDown:"action",padding:"padding",paddingPerSide:"padding",paddingTop:"padding",paddingRight:"padding",paddingBottom:"padding",paddingLeft:"padding",name:"name",strokeEnabled:"stroke",strokeAlignment:"stroke",strokeWidth:"stroke",strokeColor:"stroke",lineJoin:"stroke",lineCap:"stroke",strokeMiterLimit:"stroke",strokeDashArray:"stroke",strokeDashOffset:"stroke",html:"richText",htmlLocalized:"richText",htmlContent:"richText",textFitScale:"richText",textFitViewBoxSize:"richText",textFitViewBoxSizeLocalized:"richText",stylePresetHeading1:"stylePresets",stylePresetHeading2:"stylePresets",stylePresetHeading3:"stylePresets",stylePresetHeading4:"stylePresets",stylePresetHeading5:"stylePresets",stylePresetHeading6:"stylePresets",stylePresetParagraph:"stylePresets",stylePresetLink:"stylePresets",stylePresetAnchorLink:"stylePresets",stylePresetBlockquote:"stylePresets",stylePresetTable:"stylePresets",stylePresetInlineCode:"stylePresets",stylePresetImage:"stylePresets",anchorLinkOffsetY:"anchorLinkOffsetY",styledText:"styledText",getStyledText:"styledText",font:"font",rootFontSize:"rootFontSize",textColor:"textColor",textBackgroundColor:"textBackgroundColor",textBackgroundRadius:"textBackgroundRadius",textBackgroundPadding:"textBackgroundPadding",fontSize:"fontSize",letterSpacing:"letterSpacing",textTransform:"textTransform",textDecoration:"textDecoration",textDecorationColor:"textDecoration",textDecorationThickness:"textDecoration",textDecorationStyle:"textDecoration",textDecorationSkipInk:"textDecoration",textDecorationOffset:"textDecoration",lineHeight:"lineHeight",textAlignment:"textAlignment",textStrokeWidth:"textStroke",textStrokeColor:"textStroke",textWrapBalance:"textWrapBalance",openTypeFontFeatures:"openTypeFontFeatures",link:"link",linkOpenInNewTab:"link",linkSmoothScroll:"link",linkClickTrackingId:"link",linkLocalized:"link",linkRelValues:"link",linkPreserveParams:"link",getLink:"link",linkFont:"linkStyle",linkTextColor:"linkStyle",linkFontSize:"linkStyle",linkTextTransform:"linkStyle",linkTextDecoration:"linkStyle",linkTextDecorationColor:"linkStyle",linkTextDecorationThickness:"linkStyle",linkTextDecorationStyle:"linkStyle",linkTextDecorationSkipInk:"linkStyle",linkTextDecorationOffset:"linkStyle",linkTextBackgroundColor:"linkStyle",linkTextBackgroundRadius:"linkStyle",linkTextBackgroundPadding:"linkStyle",linkHoverFont:"linkStyle",linkHoverTextColor:"linkStyle",linkHoverFontSize:"linkStyle",linkHoverTextTransform:"linkStyle",linkHoverTextDecoration:"linkStyle",linkHoverTextDecorationColor:"linkStyle",linkHoverTextDecorationThickness:"linkStyle",linkHoverTextDecorationStyle:"linkStyle",linkHoverTextDecorationSkipInk:"linkStyle",linkHoverTextDecorationOffset:"linkStyle",linkHoverTextBackgroundColor:"linkStyle",linkHoverTextBackgroundRadius:"linkStyle",linkHoverTextBackgroundPadding:"linkStyle",linkCurrentFont:"linkStyle",linkCurrentTextColor:"linkStyle",linkCurrentFontSize:"linkStyle",linkCurrentTextTransform:"linkStyle",linkCurrentTextDecoration:"linkStyle",linkCurrentTextDecorationColor:"linkStyle",linkCurrentTextDecorationThickness:"linkStyle",linkCurrentTextDecorationStyle:"linkStyle",linkCurrentTextDecorationSkipInk:"linkStyle",linkCurrentTextDecorationOffset:"linkStyle",linkCurrentTextBackgroundColor:"linkStyle",linkCurrentTextBackgroundRadius:"linkStyle",linkCurrentTextBackgroundPadding:"linkStyle",textContent:"textContent",textVerticalAlignment:"textVerticalAlignment",variantTransition:"transition",pathSegments:"vectorPath",pathClosed:"vectorPath",spikeCount:"vectorPath",spikeDepth:"vectorPath",polygonSides:"vectorPath",elementId:"scrollTarget",scrollMarginTop:"scrollTarget",scrollTargetEnabled:"scrollTarget",altAttribute:"accessibility",altAttributeLocalized:"accessibility",cursor:"cursor",customCursorSmartComponentId:"customCursor",customCursorFollow:"customCursor",customCursorOffsetX:"customCursor",customCursorOffsetY:"customCursor",customCursorVariant:"customCursor",customCursorType:"customCursor",customCursorTransitionEnabled:"customCursor",customCursorTransition:"customCursor",customCursorPlacement:"customCursor",customCursorAlignment:"customCursor",pointerEvents:"pointerEvents",userSelect:"userSelect",zIndex:"zIndex",draggable:"draggable",imageRendering:"imageRendering",viewportHeight:"canvasSettings",isBreakpoint:"canvasSettings",backdropFill:"overlay",backdropFillEnabled:"overlay",backdropDismissible:"overlay",blockDocumentScrolling:"overlay",backdropExitTransition:"overlayTransition",backdropEnterTransition:"overlayTransition",backdropTransitionLocked:"overlayTransition",hideScrollbars:"scrollbars",customizations:"customizations",customizationsDescription:"customizations",customizationsSectionId:"customizations",customizationsCategory:"customizations",customizationsRules:"customizations",isApplyingCustomizations:"customizations",translateZ:"translateZ",scale:"scale",skewX:"skew",skewY:"skew",backfaceVisibility:"backfaceVisibility",perspective:"perspective",transformStylePreserve3d:"transformStylePreserve3d",transformOriginX:"transformOrigin",transformOriginY:"transformOrigin",transition:"transition",formInputFontSize:"formInputFont",formInputFontFamily:"formInputFont",formInputFontSelector:"formInputFont",formInputFontWeight:"formInputFont",formInputFontStyle:"formInputFont",formInputPlaceholderColor:"formPlaceholderColor",formInputFontColor:"formInputColor",formInputFontLetterSpacing:"formInputFont",formInputFontLetterSpacingUnit:"formInputFont",formInputFontLineHeight:"formInputFont",formInputFontLineHeightUnit:"formInputFont",formInputFontTextAlignment:"formInputFont",formInputOpenTypeFontFeatures:"formInputFont",formTextInputType:"formTextInputType",formTextAreaResizable:"formInputTextAreaResize",formTextInputMinNumber:"formTextInputTypeMin",formTextInputMaxNumber:"formTextInputTypeMax",formInputMaxLength:"formInputMaxLength",formInputStep:"formInputStep",formBooleanInputType:"formBooleanInputType",formBooleanInputValue:"formBooleanInputValue",formBooleanInputCheckedBorderColor:"formBooleanInputCheckedEffect",formBooleanInputCheckedBorderWidth:"formBooleanInputCheckedEffect",formBooleanInputCheckedBorderStyle:"formBooleanInputCheckedEffect",formBooleanInputCheckedBoxShadow:"formBooleanInputCheckedEffect",formBooleanInputCheckedFillColor:"formBooleanInputCheckedEffect",formBooleanInputCheckedTransition:"formBooleanInputCheckedEffect",formInputFocusedBackgroundColor:"formInputFocusedFill",formInputFocusedBorderColor:"formInputFocusedBorder",formInputFocusedBorderStyle:"formInputFocusedBorder",formInputFocusedBorderWidth:"formInputFocusedBorder",formInputFocusedBoxShadow:"formInputFocusedBoxShadow",formInputFocusedTransition:"formInputFocusedTransition",formInputInvalidTextColor:"formInputInvalidTextColor",formInputIconImage:"formInputIcon",formInputIconColor:"formInputIcon",viewTransitionNone:"viewTransitionNone"};function qV(A){let j=[],e;for(e in o6){let t=o6[e];A.includes(t)&&j.push(e)}return j}function x0(A,j){let e=Y.componentForIdentifier(j.codeComponentIdentifier);if(!e?.properties)return{};let t={};return Object.entries(e.properties).forEach(([r,o])=>{if(!o||Ue(j)&&o.type==="slot")return;let n=WA(r),i=A[n];Ps(i)&&i.type&&rE(o.type,i.type)&&(o.type==="enum"&&!nf(o,i.value)||(t[n]=i))}),t}function oA(A,j){return j?new Set(bj(j)?j:[j]).has(A):!0}function n6(A,j,e,t,r,o){let n=A.getScopeNodeFor(e);function i(s){return!$A(s)||n&&Qt(n)&&n.hasVariable(s.id)?s:r?.[s.id]??s}let a={};if(ll(A,e)||lt(j)&&(j.widthType===4&&(a.widthType=1),j.heightType===4&&(a.heightType=1)),oA("visibility",o)&&wn(j)&&wn(e)&&(a.visible=i(j.visible)),oA("border",o)&&jr(j)&&jr(e)&&(a.borderEnabled=j.borderEnabled,a.borderWidth=j.borderWidth,a.borderColor=j.borderColor,a.borderStyle=j.borderStyle,a.borderPerSide=j.borderPerSide,a.borderLeft=j.borderLeft,a.borderTop=j.borderTop,a.borderRight=j.borderRight,a.borderBottom=j.borderBottom),oA("border",o)&&jr(j)&&Xe(e))if(aj(j.borderEnabled)){let s=j.resolveValue("borderEnabled");mo(s)?(a.strokeEnabled=!0,a.strokeWidth=s.borderWidth,a.strokeColor=s.borderColor):a.strokeEnabled=!1}else a.strokeEnabled=j.borderEnabled,a.strokeWidth=j.borderWidth,a.strokeColor=j.borderColor;if(oA("stroke",o)&&Xe(j)&&Xe(e)&&(a.strokeEnabled=j.strokeEnabled,a.strokeColor=j.strokeColor,a.strokeWidth=j.strokeWidth,a.strokeAlignment=j.strokeAlignment,a.lineJoin=j.lineJoin,a.lineCap=j.lineCap,a.strokeMiterLimit=j.strokeMiterLimit,a.strokeDashArray=j.strokeDashArray,a.strokeDashOffset=j.strokeDashOffset),oA("stroke",o)&&Xe(j)&&jr(e)&&(a.borderEnabled=j.strokeEnabled,a.borderWidth=j.resolveValue("strokeWidth"),a.borderColor=j.resolveValue("strokeColor")),oA("formInputTextAreaResize",o)&&Gf(j)&&(a.formTextAreaResizable=j.formTextAreaResizable),oA("formInputFocusedFill",o)&&Yt(j)&&Yt(e)&&(a.formInputFocusedBackgroundColor=j.formInputFocusedBackgroundColor),oA("formInputFocusedBorder",o)&&Yt(j)&&Yt(e)&&(a.formInputFocusedBorderColor=j.formInputFocusedBorderColor,a.formInputFocusedBorderWidth=j.formInputFocusedBorderWidth,a.formInputFocusedBorderStyle=j.formInputFocusedBorderStyle),oA("formInputFocusedBoxShadow",o)&&Yt(j)&&Yt(e)&&(a.formInputFocusedBoxShadow=j.formInputFocusedBoxShadow?[...j.formInputFocusedBoxShadow]:void 0),oA("formInputFocusedTransition",o)&&Yt(j)&&Yt(e)&&(a.formInputFocusedTransition=j.formInputFocusedTransition),oA("formInputColor",o)&&No(j)&&No(e)&&(a.formInputFontColor=j.formInputFontColor),oA("formPlaceholderColor",o)&&Eu(j)&&Eu(e)&&(a.formInputPlaceholderColor=j.formInputPlaceholderColor),oA("formInputPadding",o)&&Xt(j)&&Xt(e)&&(a.padding=j.padding,a.paddingPerSide=j.paddingPerSide,a.paddingTop=j.paddingTop,a.paddingRight=j.paddingRight,a.paddingBottom=j.paddingBottom,a.paddingLeft=j.paddingLeft),oA("shadows",o)&&fo(j)&&fo(e)){let s=i(j.boxShadows);vf(e)?a.boxShadows=s:aj(s)||(a.boxShadows=s?.filter(l=>l.type!=="realistic"))}if(oA("shadows",o)&&Gd(j)&&Gd(e)&&(a.shadows=j.shadows),oA("rotation",o)&&Dr(j)&&Dr(e)&&(a.rotation=j.rotation,ee(e)&&ee(j)&&(a.rotate3d=j.rotate3d,a.rotateX=j.rotateX,a.rotateY=j.rotateY)),oA("overflow",o)&&Jt(j)&&Jt(e)&&(a.overflow=i(j.overflow)),oA("overscroll",o)&&Id(j)&&Id(e)&&(a.overscrollBehavior=i(j.overscrollBehavior)),oA("cursor",o)&&Di(j)&&Di(e)&&(a.cursor=i(j.cursor)),oA("customCursor",o)&&Di(j)&&Di(e)&&(a.customCursorType=j.customCursorType,a.customCursorSmartComponentId=j.customCursorSmartComponentId,a.customCursorVariant=j.customCursorVariant,a.customCursorFollow=j.customCursorFollow,a.customCursorOffsetX=j.customCursorOffsetX,a.customCursorOffsetY=j.customCursorOffsetY,a.customCursorTransitionEnabled=j.customCursorTransitionEnabled,a.customCursorTransition=j.customCursorTransition,a.customCursorPlacement=j.customCursorPlacement,a.customCursorAlignment=j.customCursorAlignment),Xi(j)&&Xi(e))for(let s of T0){let l=o6[s];oA(l,o)&&(a[s]=i(j[s]))}if(oA("blending",o)&&hd(j)&&hd(e)&&(a.blendingMode=i(j.blendingMode)),oA("transition",o)&&au(j)&&au(e)){let s=XA(j)?j.variantTransition:j.transition;XA(e)?a.variantTransition=s:a.transition=s}if(oA("fill",o)&&st(j)&&st(e)){a.fillColor=i(j.fillColor),a.fillType=j.fillType,a.fillLinearGradient=j.fillLinearGradient,a.fillRadialGradient=j.fillRadialGradient,a.fillConicGradient=j.fillConicGradient,a.fillType==="conic-gradient"&&!Uf(e)&&(a.fillType=e.fillType??"color");let s=i(j.fillImage);aj(s)?aj(s)&&e.supportsDynamicValues()&&(a.fillImage=s):a.fillImage=s,a.fillImageResize=j.fillImageResize,a.fillImagePixelWidth=j.fillImagePixelWidth,a.fillImagePixelHeight=j.fillImagePixelHeight,a.fillImagePositionX=j.fillImagePositionX,a.fillImagePositionY=j.fillImagePositionY,a.fillImageTileSize=j.fillImageTileSize}if(oA("fill",o)&&br(j)&&br(e)&&(a.fillEnabled=j.fillEnabled),(oA("size",o)||oA("fill",o))&&lt(j)&&lt(e)){let s=a.fillType??(st(e)?e.fillType:void 0),l=a.heightType??e.heightType;(a.widthType??e.widthType)===5&&s!=="image"&&(a.width=e.rect().width,a.widthType=0),l===5&&s!=="image"&&(a.height=e.rect().height,a.heightType=0)}if(oA("opacity",o)&&nu(j)&&nu(e)&&(a.opacity=i(j.opacity)),oA("radius",o)&&Nr(j)&&Nr(e)&&(a.radius=i(j.radius),zd(j)&&zd(e)&&(a.radiusIsRelative=j.radiusIsRelative),ho(j)&&ho(e)&&(a.radiusPerCorner=j.radiusPerCorner,a.radiusBottomLeft=j.radiusBottomLeft,a.radiusBottomRight=j.radiusBottomRight,a.radiusTopLeft=j.radiusTopLeft,a.radiusTopRight=j.radiusTopRight)),oA("pointerEvents",o)&&Rd(j)&&Rd(e)&&!Lj(n)&&(a.pointerEvents=i(j.pointerEvents)),oA("draggable",o)&&ou(j)&&ou(e)&&(a.draggable=i(j.draggable)),oA("userSelect",o)&&Fd(j)&&Fd(e)&&(a.userSelect=i(j.userSelect)),oA("imageRendering",o)&&gd(j)&&gd(e)&&(a.imageRendering=i(j.imageRendering)),oA("overflowX",o)&&Jt(j)&&Jt(e)&&(a.overflowX=i(j.overflowX)),oA("overflowY",o)&&Jt(j)&&Jt(e)&&(a.overflowY=i(j.overflowY)),oA("zIndex",o)&&xd(j)&&xd(e)&&(a.zIndex=i(j.zIndex)),oA("scrollbars",o)&&uu(j)&&uu(e)&&(a.hideScrollbars=i(j.hideScrollbars)),oA("textVerticalAlignment",o)&&ku(j)&&ku(e)&&(a.textVerticalAlignment=j.textVerticalAlignment),oA("textWrapBalance",o)&&Wd(j)&&Wd(e)&&(a.textWrapBalance=j.textWrapBalance),oA("styledText",o)&&ae(j)&&PE(e)){a.font=j.getFonts(!1)[0],a.textColor=j.getTextColors(!1)[0];let s=j.getFontSizes(!1)[0];a.fontSize=Pi(s)?s[0]:s;let l=j.getLetterSpacings(!1)[0];a.letterSpacing=mA(l)?l:Yf(l),a.textTransform=j.getTextTransforms(!1)[0],a.textDecoration=j.getTextDecorations(!1)[0],a.lineHeight=j.getLineHeights(!1)[0],a.textAlignment=j.getTextAlignments(!1)[0],a.styledText=e.styledText.setFont(void 0,!1).setTextColor(void 0,!1).setFontSize(void 0,!1).setLetterSpacing(void 0,!1).setTextTransform(void 0,!1).setTextDecoration(void 0,!1).setLineHeight(void 0).setTextAlignment(void 0)}if(oA("link",o)&&ae(j)&&ae(e)&&(a.linkFont=j.linkFont,a.linkTextColor=j.linkTextColor,a.linkFontSize=j.linkFontSize,a.linkTextTransform=j.linkTextTransform,a.linkTextDecoration=j.linkTextDecoration,a.linkHoverFont=j.linkHoverFont,a.linkHoverTextColor=j.linkHoverTextColor,a.linkHoverFontSize=j.linkHoverFontSize,a.linkHoverTextTransform=j.linkHoverTextTransform,a.linkHoverTextDecoration=j.linkHoverTextDecoration,a.linkCurrentFont=j.linkCurrentFont,a.linkCurrentTextColor=j.linkCurrentTextColor,a.linkCurrentFontSize=j.linkCurrentFontSize,a.linkCurrentTextTransform=j.linkCurrentTextTransform,a.linkCurrentTextDecoration=j.linkCurrentTextDecoration),oA("mask",o)&&Ud(j)&&Ud(e)&&(a.masks=j.masks),uj(j)&&uj(e)){if(oA("fontSize",o)&&(a.textFitScale=j.textFitScale,a.textFitViewBoxSize=j.textFitViewBoxSize),oA("paragraphSpacing",o)&&(a.paragraphSpacing=j.paragraphSpacing),oA("styledText",o)){let s=j.getTextStrokeWidths(!1)[0],l=j.getTextStrokeColors(!1)[0];mA(s)||(a.textStrokeWidth=s),l&&(a.textStrokeColor=l)}if(oA("richText",o))for(let s of Vn){let l=j[s];A.has(l)&&(a[s]=l)}}if(oA("codeComponentProps",o)&&vi(j)&&vi(e)){let s=x0(j,e);Object.assign(a,s)}if(oA("codeOverride",o)&&Sn(j)&&Sn(e)&&(a.codeOverrideEnabled=j.codeOverrideEnabled,a.codeOverrideIdentifier=j.codeOverrideIdentifier),oA("formInputFont",o)&&No(j)&&No(e)&&(a.formInputFontFamily=j.formInputFontFamily,a.formInputFontWeight=j.formInputFontWeight,a.formInputFontStyle=j.formInputFontStyle,a.formInputFontSize=j.formInputFontSize,a.formInputFontSelector=j.formInputFontSelector,a.formInputFontLetterSpacing=j.formInputFontLetterSpacing,a.formInputFontLetterSpacingUnit=j.formInputFontLetterSpacingUnit,a.formInputFontLineHeight=j.formInputFontLineHeight,a.formInputFontLineHeightUnit=j.formInputFontLineHeightUnit,a.formInputFontTextAlignment=j.formInputFontTextAlignment,a.formInputOpenTypeFontFeatures=j.formInputOpenTypeFontFeatures),oA("layout",o)&&dj(j)&&RA(e)&&(Nj(e)||(a.layout=j.layout),a.stackDirection=j.stackDirection,a.stackDistribution=j.stackDistribution,a.stackAlignment=j.stackAlignment,a.gap=j.gap,a.padding=j.padding,a.paddingPerSide=j.paddingPerSide,a.paddingTop=j.paddingTop,a.paddingRight=j.paddingRight,a.paddingBottom=j.paddingBottom,a.paddingLeft=j.paddingLeft),oA("position",o)&&Object.assign(a,xn(j,t)),oA("perspective",o)&&ee(j)&&ee(e)&&(a.perspective=i(j.perspective)),oA("overlay",o)&&Ae(j)&&Ae(e)&&t){let s=xr(j);Object.assign(a,s)}if(oA("effects",o)&&Zi(j)&&Zi(e)&&Object.assign(a,oB(e,j)),oA("transformOrigin",o)&&ee(j)&&ee(e)&&Object.assign(a,{transformOriginX:j.transformOriginX,transformOriginY:j.transformOriginY}),oA("backfaceVisibility",o)&&ee(j)&&ee(e)&&Object.assign(a,{backfaceVisibility:j.backfaceVisibility}),oA("transformStylePreserve3d",o)&&ee(j)&&ee(e)&&Object.assign(a,{transformStylePreserve3d:j.transformStylePreserve3d}),oA("translateZ",o)&&ee(j)&&ee(e)&&Object.assign(a,{translateZ:j.translateZ}),oA("scale",o)&&ee(j)&&ee(e)&&Object.assign(a,{scale:j.scale}),oA("skew",o)&&ee(j)&&ee(e)&&Object.assign(a,{skewX:j.skewX,skewY:j.skewY}),oA("formBooleanInputType",o)&&_o(j)&&_o(e)&&Object.assign(a,{formBooleanInputType:j.formBooleanInputType}),oA("formBooleanInputValue",o)&&_o(j)&&_o(e)&&Object.assign(a,{formBooleanInputValue:j.formBooleanInputValue}),oA("formBooleanInputCheckedEffect",o)&&_o(j)&&_o(e)){let s={formBooleanInputCheckedBorderColor:j.formBooleanInputCheckedBorderColor,formBooleanInputCheckedBorderWidth:j.formBooleanInputCheckedBorderWidth,formBooleanInputCheckedBorderStyle:j.formBooleanInputCheckedBorderStyle,formBooleanInputCheckedFillColor:j.formBooleanInputCheckedFillColor,formBooleanInputCheckedBoxShadow:j.formBooleanInputCheckedBoxShadow,formBooleanInputCheckedTransition:j.formBooleanInputCheckedTransition};Object.assign(a,s)}return oA("formInputIcon",o)&&fu(j)&&fu(e)&&Object.assign(a,{formInputIconImage:j.formInputIconImage,formInputIconColor:j.formInputIconColor}),oA("viewTransitionNone",o)&&su(j)&&su(e)&&(a.viewTransitionNone=j.viewTransitionNone),a}function P0(A,j,e,t,r){if(Kt(t))return;let o=gj(j)?2:0,n=Dj(e.x,o),i=Dj(e.y,o);if(gr(r.x)?(r.x=n,r.y=i):(!Ve(r.x)&&r.x!==n&&(r.x=so),!Ve(r.y)&&r.y!==i&&(r.y=so)),!xA(j)||!t)return;let a=A.getParentSizeInfo(j);if(!a?.positioning)return;let s=a.positioning,l=Dj(s.width-AA.maxX(e),o),c=Dj(s.height-AA.maxY(e),o);gr(r.right)?(r.right=l,r.bottom=c):(!Ve(r.right)&&r.right!==l&&(r.right=so),!Ve(r.bottom)&&r.bottom!==c&&(r.bottom=so))}var se={padding:0,gridRowCount:2,gridColumnCount:2,gridRowHeight:200,gridColumnWidth:200};Object.freeze(se);function KH(A){switch(A){case 20:return 0;case 21:return 1;case 23:return 4;case 24:return 3;case 22:return 2;case 19:return 5}}var cv=(A,j,e=!0)=>{let t=A.stores.persistedUserDefaults.layoutGap;return{layout:"stack",stackDirection:j,stackDistribution:"start",stackAlignment:"center",gap:t,stackWrapEnabled:!1,paddingPerSide:!1,padding:e?t:se.padding,paddingTop:se.padding,paddingBottom:se.padding,paddingLeft:se.padding,paddingRight:se.padding}},dv={gridItemFillCellWidth:!0,gridItemFillCellHeight:!0,gridItemHorizontalAlignment:"center",gridItemVerticalAlignment:"center",gridItemColumnSpan:1,gridItemRowSpan:1},uv=A=>({layout:"grid",gridColumnCount:se.gridColumnCount,gridAlignment:"center",gridColumnWidthType:"minmax",gridColumnWidth:se.gridColumnWidth,gridColumnMinWidth:50,gridRowHeightType:"auto",gridRowCount:se.gridRowCount,gridRowHeight:se.gridRowHeight,gap:A.stores.persistedUserDefaults.layoutGap,paddingPerSide:!1,padding:se.padding,paddingTop:se.padding,paddingBottom:se.padding,paddingLeft:se.padding,paddingRight:se.padding}),D0=new Set(["#BDF","#CEF","#9DF"]);function pv(A){let j=Array.from(D0).filter(e=>e!==A);return j.length=2,j}var _0=(A,j={},e={})=>{let{index:t=0,lastColor:r,parentColor:o,source:n}=e,i=pv(o),a=i.length,s=i[0];if(t>0)s=i[Math.ceil(t/a)%a];else if(L(r))if(D0.has(r)){let c=(i.indexOf(r)+1)%a;s=i[c]}else s=r;n&&SA("layout_frame",{source:n});let l={fillEnabled:!0,fillColor:s};return dj(A)&&!A.stackWrapEnabled&&(A.widthType!==2&&(l.width=1,l.widthType=3),A.heightType!==2&&(l.height=1,l.heightType=3)),Object.assign(l,j),new dt(l)},HH=(A,j)=>{switch(A){case 0:case 1:{j.layout="stack",j.stackDirection=A===0?"vertical":"horizontal";break}case 2:case 3:case 4:j.overflow=St();break}},kv=(A,j,e,t,r,o)=>{let n=new dt({...cv(A,e,r),fillEnabled:!1,...j});B(dj(n));let i=o?{widthType:0,width:o.width,heightType:0,height:o.height}:void 0;for(let a=0;a<t;a++){let s=_0(n,i,{index:a});n.addChild(s)}return n},M0=(A,j,e,t)=>{let r=new dt({...uv(A),fillEnabled:!1,...j});B(qt(r));for(let o=0;o<e;o++){let n={};switch(t){case 3:o===0&&(n.gridItemRowSpan=2);break;case 4:o+1===e&&(n.gridItemColumnSpan=2);break;default:break}let i=_0(r,{...dv,...n},{index:o});r.addChild(i)}return r},JH=(A,j,e,t=!1)=>{if(j===2)return M0(A,e,t?0:4);if(j===3||j===4)return M0(A,e,t?0:3,j);let r=t?0:2;return kv(A,e,e.stackDirection??"horizontal",r,!1)},N0=HE.width,mv=(A,j,e,t,r,o)=>{let n={x:ko,y:ko,right:ko,bottom:ko};P0(A,j,e,t,n),Fs(n.x)&&Fs(n.right)&&r-n.x-n.right<200&&(o.left=0,o.right=0)},fv=(A,j)=>{A.stackDirection==="horizontal"&&!A.stackWrapEnabled&&(j.stackDirection="vertical"),A.stackWrapEnabled&&A.stackDistribution==="start"&&(j.stackDistribution="center")},Ev=A=>{let j={};return A.children?.forEach(e=>{if(!Cn(e))return;let t=e.originalid??e.id;j[t]={maxWidth:"100%"}}),j},$v=(A,j)=>{Fs(A.gridColumnCount)&&(j.gridColumnCount=1)},Bv=(A,j,e,t,r,o)=>{mv(A,j,e,t,r,o),!(r>N0)&&(dj(j)&&fv(j,o),qt(j)&&$v(j,o))},n7=(A,j,e,t,r,o)=>{let n=j.originalid??j.id,i={};if(Bv(A,j,e,t,r,i),o[n]=i,it(j)&&j.stackWrapEnabled&&r<=N0){let s=Ev(j);for(let l in s)o[l]={...o[l],...s[l]}}};function UH(A,j,e){let t=A.tree.getNode(j);if(!t||!at(t))return;let r=A.tree.getNode(e);if(!r||!_j(r)||!NA(r))return;let o=A.tree.getScopeNodeFor(r);if(!o||!Q(o))return;let n=A.tree.getRect(t),i=o.getBreakpointValues();for(let a in i){if(a===e)continue;let s=A.tree.getNode(a);if(!s||!Cj(s)||!Fj(s))continue;let l={};n7(A.tree,t,n,r,s.width,l),ZB(A.tree,s,l)}}function O0(A,j){let e={width:{2:!0,0:!0,3:!0,1:!0,4:!0,5:!0},height:{2:!0,0:!0,3:!0,1:!0,4:!0,5:!0}},t=A.getParent(j.id);if(!t||!xA(j)||HB(j)&&j.autoSize===!0||Ae(j)?(e.width[1]=!1,e.height[1]=!1,e.width[3]=!1,e.height[3]=!1,e.width[4]=!1,e.height[4]=!1):qt(t)?Ar(j,t)?(e.width[3]=!0,e.height[3]=t.gridRowHeightType!=="fit"):(e.width[3]=!1,e.height[3]=!1):dj(t)?(Ar(j,t)||(e.width[3]=!1),Ar(j,t)||(e.height[3]=!1)):(e.width[3]=!1,e.height[3]=!1),u$(j)&&ne(j.textFitViewBoxSize)&&(e.height[2]=!0,e.width[2]=!1,e.height[0]=!1,e.height[1]=!1,e.height[3]=!1,e.height[4]=!1),In(j)||(e.width[5]=!1,e.height[5]=!1),nA(j)){let o=j.getSupportedLayout(Y);tt(o.width)||(e.width[2]=!1),tt(o.height)||(e.height[2]=!1),nd(o.width)||(e.width[0]=!1,e.width[1]=!1,e.width[3]=!1,e.width[4]=!1),nd(o.height)||(e.height[0]=!1,e.height[1]=!1,e.height[3]=!1,e.height[4]=!1)}else if(RA(j)){if(NA(j)){e.width[2]=!1,Pd(j)&&(e.height[0]=!1,e.height[1]=!1,e.height[3]=!1,e.height[4]=!1);let o=A.get(j.parentid);Ej(o)&&(e.height[2]=!1)}j.children.length===0&&(e.width[2]=!1,e.height[2]=!1)}else RA(j)||yi(j)||uj(j)||(e.width[2]=!1,l$(j)||(e.height[2]=!1));return It(j)&&mA(j.layout)&&Bj(j)&&!Nj(j)&&(e.width[2]=!1,e.height[2]=!1),ll(A,j)||(e.width[4]=!1,e.height[4]=!1),(NA(t)&&lt(t)&&Bi(t.heightType)||Pd(t))&&(e.height[3]=!1,e.height[1]=!1),Kt(t)&&(e.width[3]=!1,e.width[1]=!1,e.height[3]=!1,e.height[1]=!1),KE(j)&&(e.width[3]=!1,e.height[3]=!1),e}var w0=A=>{let j=[];return A.forEach((e,t)=>{for(let r=t+1;r<A.length;r++){let o=A[r];j.push([e,o])}}),j};function L0(A,j,e){let t=j.map(c=>A.convertFrameToCanvas(c));if(t.length===2){let[c,d]=t,u=Iv(c,d),k=Rv(c,d);if(u&&!k)return"vertical";if(k&&!u)return"horizontal"}let r=t.map(c=>AA.center(c));if(r.length<=1){if(t.length===1){let[c]=t,d=e.width/Math.max(1,c.width),u=e.height/Math.max(1,c.height);return d<u?"vertical":"horizontal"}return e.width<e.height?"vertical":"horizontal"}let o=w0(r),n=[],i=[];o.forEach(([c,d])=>{n.push(Math.abs(c.x-d.x)),i.push(Math.abs(c.y-d.y))});let a=n.reduce((c,d)=>c+d,0),s=i.reduce((c,d)=>c+d,0);return a>s?"horizontal":"vertical"}function q0(A,j,e){return[...j].sort((t,r)=>{let o=A.tree.getRect(t),n=A.tree.getRect(r);return e==="horizontal"?o.x-n.x:o.y-n.y})}function hv(A){if(aj(A))return!0;switch(A){case"start":case"center":case"end":return!0;default:return!1}}function i7(A,j,e){let t=L0(A.tree,j,e),r=A.stores.persistedUserDefaults.layoutGap;return{layout:"stack",stackDirection:t,gap:r,stackDistribution:df,stackAlignment:_s,stackWrapEnabled:!1,padding:0,paddingPerSide:!1,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}}function gv(A,j){j.forEach((e,t)=>{A.tree.moveNodeIndex(e,t)})}function V0(A,j,e,t,r){e==="horizontal"&&j.heightType===2||e==="vertical"&&j.widthType===2||K0(A,t,e,r,{})}function K0(A,j,e,t,r){if(e==="horizontal"||aj(r.padding))return;let o={...t};if(r.paddingPerSide)r.paddingLeft&&(o.width-=r.paddingLeft),r.paddingRight&&(o.width-=r.paddingRight),r.paddingTop&&(o.height-=r.paddingTop),r.paddingBottom&&(o.height-=r.paddingBottom);else if(r.padding){let i=r.padding*2;o.width-=i,o.height-=i}o.width=Math.max(0,o.width),o.height=Math.max(0,o.height);let n=o.width;n>0&&j.forEach(i=>{if(!xA(i)||_A(i)||kl(i)||pl(i)||i.widthType===2||i.widthType===4)return;if(A.tree.getRect(i).width/n>.96){let l=A.tree.getParent(i.id),c=A.tree.getParentSizeInfo(i);c.sizing&&i.heightType===4&&(c.sizing={...o,height:c.sizing.height});let d=A.tree.getRect(i),u=i.updateForRect({rect:d,parentSizeInfo:c,constraintsLocked:!0,shouldGuessPinToBottom:or(A.tree,i),shouldGuessPinToRight:Me(A.tree,i,l)});u.width=1,i.width!==1&&(u.widthType=3),i.set(u)}})}function H0(A,j,e,t,r){if(!A.tree.getNode(j))return;q0(A,t,r).forEach(i=>{if(Cf(i)&&wr(i)||Ti(i))return;let a=A.tree.getParent(i.id),s=A.tree.getRect(i),l=AA.offset(s,BA.reverse(e));A.moveNode(i.id,j);let c={...e},d=A.tree.getParentSizeInfo(i);TE(i)&&d.sizing&&(c.width=d.sizing.width),xE(i)&&d.sizing&&(c.height=d.sizing.height),A.tree.current(i)?.set({...i.updateForRect({rect:l,parentSizeInfo:{sizing:c,positioning:e,viewport:d?.viewport??null,layout:Rt(a)},constraintsLocked:!1,shouldGuessPinToBottom:!0,shouldGuessPinToRight:Me(A.tree,i,a)}),top:null,left:null,bottom:null,right:null,position:void 0}),Pr(A.tree,i).forEach(({replicaRoot:k,relatedNode:m})=>{yA.resetOverridesByProperty(A.tree,k,m,["position"])})})}function Iv(A,j){let e=AA.maxX(A),t=AA.maxX(j);return e>j.x&&t>A.x}function Rv(A,j){let e=AA.maxY(A),t=AA.maxY(j);return e>j.y&&t>A.y}function a7(A,j,e){if(!YA(e))return;let t=j==="width"?"widthType":"heightType";e.children.forEach(r=>{if(xA(r)&&(r[t]===3||r[t]===1)){let o=A.getRect(r),n={[t]:0,[j]:o[j]};bn(r)&&(n.aspectRatio=null),A.current(r)?.set(n)}})}function hJ(A,j){if(!YA(j)||!xA(j))return;let e=new Set;j.children.forEach(t=>{if(!xA(t)||!Cn(t))return;let r=A.getRect(t),o={};j.widthType===2&&(t.widthType===3||t.widthType===1)&&(o.minWidth=r.width,e.add(t)),j.heightType===2&&(t.heightType===3||t.heightType===1)&&(o.minHeight=r.height),Object.keys(o).length>0&&(e.add(t),A.current(t)?.set(o))}),e.size>0&&Fv()}function Fv(){QA({type:"add",variant:"info",key:"setting-stack-direction-causes-children-change",text:"Layers in this stack received min-sizing to prevent a collapse",icon:"thumbnail",duration:5e3,showCloseButton:"always"})}function i6(A,j,e={}){if(!It(j)||!YA(j)||it(j))return;let t={layout:"stack",...e},r=A.tree.getRect(j),o=A.tree.getScopeNodeFor(j),n=$B(j)||XA(j)&&Q(o)||j.__unsafeIsGroundNode(A.tree)&&Se(o),i=n?"vertical":L0(A.tree,j.children,r),a=q0(A,j.children,i);DA(j)||gv(A,a);let s=Ns(j),l=j.gap??A.stores.persistedUserDefaults.layoutGap,c=n?"start":"center";t.stackDirection=s?j.stackDirection??i:i,t.stackDistribution=s?j.stackDistribution??c:c,t.gap=s||hv(c)?l:0,t.stackAlignment=s?j.stackAlignment??_s:_s,t.stackWrapEnabled=s?j.stackWrapEnabled??!1:!1;let d=s&&Xt(j)?{padding:j.padding,paddingPerSide:j.paddingPerSide,paddingLeft:j.paddingLeft,paddingRight:j.paddingRight,paddingTop:j.paddingTop,paddingBottom:j.paddingBottom}:{...Zf};if(i==="horizontal"&&e.heightType===2||i==="vertical"&&e.widthType===2||K0(A,j.children,i,r,d),d.paddingPerSide){let{paddingTop:k,paddingRight:m,paddingBottom:I,paddingLeft:$}=d;k===m&&k===I&&k===$&&(d.paddingPerSide=!1,d.padding=k)}j.set({...t,...d})}var Q0=900;function wJ(A){return A.intrinsicWidth>=Q0}function a6(A,j,e){if(ae(j))return!1;let t=e??A.getParent(j.id);return!!(t&&NA(t))}function LJ(A){return A<=.5}function yv(A,j,e){if(!RA(j)||!_j(j)||!NA(j)||nt(j)||!a6(A,e,j))return!1;let t=Fj(e)&&lt(e)&&e.widthType===1&&e.width===1;if(Fj(e)&&e.width<Q0&&!t)return!1;let r=j.children.filter(l=>l.id!==e.id);if(r.length===0)return!0;let n=A.getRect(j).width||1,i=r.map(l=>A.getRect(l));return i.some(l=>l.width/n<.5)?!1:i.every((l,c)=>i.every((d,u)=>c===u?!0:!AA.intersects(l,d)))}function z0(A,j,e,t){if(!It(j)||!yv(A.tree,j,e))return;let r={};t.height>500&&(r.heightType=2),i6(A,j,r),j.set({gap:0})}function J0(A,j){for(let e of Object.values(A.variables))if(e?.type==="collectionreference"&&e.dataIdentifier===j)return e}function U0(A,j){return Object.values(A.variables).find(e=>e?.type==="multicollectionreference"&&e.dataIdentifier===j)}function Sv(A,j){let e=O$(j);if(Ed(e))return{targetDataIdentifier:e.dataIdentifier,targetProviderId:e.id};let t=A.stores.scopeStore.active;if(fe(t))return{targetDataIdentifier:t.dataIdentifier,targetProviderId:t.id}}function W0(A,j,e){if(!Ed(e))return;let t=Sv(A,j);if(!t)return;let{targetDataIdentifier:r,targetProviderId:o}=t,n=Eo(A.tree,e.dataIdentifier),i=Eo(A.tree,r);if(!n||!i)return;let a=J0(n,r),s=U0(n,r),l=J0(i,e.dataIdentifier),c=U0(i,e.dataIdentifier),d;c?d={id:Jj(),itemKey:"id",transforms:[{id:Jj(),type:"valueTransform",name:"isIncludedIn",value:Te(c.id,o)}]}:l?d={id:Jj(),itemKey:"id",transforms:[{id:Jj(),type:"valueTransform",name:"equals",value:Te(l.id,o)}]}:s?d={id:Jj(),itemKey:s.id,transforms:[{id:Jj(),type:"valueTransform",name:"contains",value:Te("id",o)}]}:a&&(d={id:Jj(),itemKey:a.id,transforms:[{id:Jj(),type:"valueTransform",name:"equals",value:Te("id",o)}]}),d&&e.set({collectionFilters:{filters:[d]}})}function X0(A,j,e,t){if(!RA(j)||!_j(j)||!NA(j)||!it(j)||j.stackDirection!=="vertical"||!a6(A.tree,e,j)||j.heightType===2||!O0(A.tree,j).height[2])return;let o=j.children.filter(s=>s.id!==e.id);if(o.length===0)return;let n=A.tree.getRect(j),i=o.map(s=>A.tree.getRect(s));AA.merge(...i).height+t.height<=n.height||(j.set({height:n.height,heightType:2}),o.forEach((s,l)=>{let c=i[l];B(c,"Child rect must be defined"),Fj(s)&&lt(s)&&s.heightType===3&&s.set({height:c.height,heightType:0})}))}var Y0=Xj(cC());var l6=Xj(kn()),c7=Xj(Is());function s6(A){let j=A.name||ut(A);return/^\s*$/u.test(j)?A instanceof zB?"Text":"Layer":j}function Z0({node:A,renderTarget:j=Ss.export,addNames:e=!1,isDarkMode:t,combinedVariableValueMap:r}){if(Fr(A))return A.svg;let o=[],n=!0,i=null;_A(A)?(i=A,A.children.map(m=>{gj(m)&&o.push(m)})):(n=!1,o.push(A));let a=A.tree();B(a,"cannot render nodes to svg without a tree"),o=o.map(m=>ih(m,a,t)),ah(a,r,t);let s={needsXlinks:!1},l=o.map(m=>(l7(m,s),s7(m,n,e,r))),c=null,d=i?.fillEnabled&&i.exportIncludesBackground&&!Qf(i);if(d&&i){let m=new XB(i.raw({__class:"RectangleShapeNode"}));l7(m,s),c=s7(m,!1,!1,r)}let u=(0,l6.jsx)(Tm,{isStatic:!0,children:(0,l6.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:s.needsXlinks?"http://www.w3.org/1999/xlink":void 0,width:ld(A.width,3),height:ld(A.height,3),fill:"none",overflow:_A(A)?void 0:"visible",children:[d&&c,l]})});return Cm({target:j},()=>Y0.renderToStaticMarkup(u))}function Ag(A){return A.replace(/[\f\n\r\t\v\xa0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/gu," ").replace(/(?:\/|^)(?:\.+\/)+/gmu,"/")}function s7(A,j,e,t){if(yr(A)){let o=A.getProps(t);return(0,c7.createElement)(Sf,{...o,key:A.id,isRootVectorNode:!1,includeTransform:j},A.children.map(n=>s7(n,!0,e,t)))}let r=A.getProps(t);return(0,c7.createElement)(yf,{...r,key:A.id,isRootVectorNode:!1,includeTransform:j})}function l7(A,j){if(j.needsXlinks||((yr(A)||Gi(A))&&A.children&&A.children.map(d=>l7(d,j)),yr(A)))return;let{strokeEnabled:e,strokeAlignment:t,strokeWidth:r,fillEnabled:o,fillType:n,fillImage:i,boxShadows:a}=A,s=t==="inside"&&e&&e&&!!r,l=o&&n==="image"&&i!==null,c=a&&!aj(a)&&a.length>0&&a.some(d=>d!==void 0);(s||c||l)&&(j.needsXlinks=!0)}var jg=cm({canvas:()=>{let A=Gv();return Ru(A),Iu(A)},onPageCanvas:()=>{let A=bv();return Ru(A),Iu(A)}});function Gv(){let A=Re.isDebugBuild?"canvas-sandbox.debug.html":"canvas-sandbox.html",j=Au(`./${A}`),e=JSON.stringify(ht());return j+`#services=${encodeURIComponent(e)}`}function bv(){let A=Re.isDebugBuild?"canvas-sandbox-on-page.debug.html":"canvas-sandbox-on-page.html",j=Au(`./${A}`),e=JSON.stringify(ht());return j+`#services=${encodeURIComponent(e)}`}var qj=class qj{constructor(j,e,t,r){this.log=j;this.windowService=e;this.windowRef=t;this.contentWindow=r}static async serviceIfAvailable(){qj.deprecatedServicePromise=qj.deprecatedServicePromise??Tu.on(pn).discover({timeout:1e3}),qj.servicePromise=qj.servicePromise??Pu.on(pn).discover({timeout:1e3});try{return await Promise.any([qj.servicePromise,qj.deprecatedServicePromise])}catch{return}}static async isAvailable(){return!!await qj.serviceIfAvailable()}static async new(j){qj.currentWindow&&(qj.currentWindow.contentWindow.close(),qj.currentWindow=void 0);let e=await qj.serviceIfAvailable();B(e,"CustomWindow is not available");let t=CA("electron-window"),r=await e.willOpenWindow(j);t.debug("opening window...");let o=window.open(j.url,"_blank")??void 0;return B(o,"Couldn't open a new DOM window"),t.debug("opened window",o),qj.currentWindow=new qj(t,e,r,o),qj.currentWindow}async openSaveDialog({count:j,pathname:e}){return this.windowService.openSaveDialog({count:j,pathname:e})}async collectMetrics(){return this.windowService.collectMetrics()}async writeToClipboard(j){return this.windowService.writeToClipboard({...j,ref:this.windowRef})}async writeToDisk(j){return this.log.debug("capture....",this.windowRef),this.windowService.writeToDisk({...j,ref:this.windowRef})}async getImageData(j){return"getImageData"in this.windowService?(await this.windowService.getImageData({...j,ref:this.windowRef})).imageData:Promise.reject(new Error("getImageData is not available"))}};y(qj,"deprecatedServicePromise"),y(qj,"servicePromise"),y(qj,"currentWindow");var fa=qj;var c6=class{constructor(){y(this,"controller");y(this,"renderer");y(this,"modules");y(this,"modulesRuntime");y(this,"assets");y(this,"controlsVisibility");y(this,"flags");VA.isOn("newRpc")&&(this.controller=new lh(De),this.renderer=this.controller.getRemote(De.channels.renderer),this.modules=this.controller.getRemote(De.channels.modules),this.modulesRuntime=this.controller.getRemote(De.channels.modulesRuntime),this.controlsVisibility=this.controller.getRemote(De.channels.controlsVisibility),this.assets=this.controller.getRemote(De.channels.assets),this.flags=this.controller.getRemote(De.channels.flags))}setLocal({componentsStore:j,loadedExternalModulesStore:e},t){this.controller&&(this.controller.setLocal(De.channels.rendererListener,t),this.controller.setLocal(De.channels.componentsStore,j),this.controller.setLocal(De.channels.loadedExternalModulesStore,e))}};var Ea=class{constructor(j){this.callbacks=j;y(this,"experimentListeners",new Map);y(this,"employeesOnlySettingsListeners",new Map);y(this,"projectFeaturesListeners",new Map)}startUpdatesStream(){Object.keys(Bd).forEach(j=>{let e=t=>{this.callbacks.updateExperiments({[j]:t})};VA.addListener(j,e),this.experimentListeners.set(j,e)}),Object.keys($d).forEach(j=>{let e=t=>{this.callbacks.updateEmployeesOnlySettings({[j]:t})};bt.addListener(j,e),this.employeesOnlySettingsListeners.set(j,e)})}getInitialExperiments(){let j={};return Object.keys(Bd).forEach(e=>{j[e]=VA.get(e)}),j}getInitialEmployeesOnlySettings(){let j={};return Object.keys($d).forEach(e=>{j[e]=bt.get(e)}),j}initProjectFeatures(){ta.updated.then(()=>{let j={};Object.keys(Fu).forEach(e=>{j[e]=ta.get(e)}),this.callbacks.updateProjectFeatures(j),this.projectFeaturesListeners.size===0&&Object.keys(Fu).forEach(e=>{let t=r=>{this.callbacks.updateProjectFeatures({[e]:r})};ta.addListener(e,t),this.projectFeaturesListeners.set(e,t)})}).catch(LA)}stopUpdatesStream(){for(let[j,e]of this.experimentListeners)VA.removeListener(j,e);for(let[j,e]of this.employeesOnlySettingsListeners)bt.removeListener(j,e);for(let[j,e]of this.projectFeaturesListeners)ta.removeListener(j,e);this.experimentListeners.clear(),this.employeesOnlySettingsListeners.clear(),this.projectFeaturesListeners.clear()}},d6=class{constructor(j){this.remoteFlags=j;let e=new Ea(this.remoteFlags);e.startUpdatesStream(),this.remoteFlags.updateExperiments(e.getInitialExperiments()),this.remoteFlags.updateEmployeesOnlySettings(e.getInitialEmployeesOnlySettings())}};var Jn=class{constructor(){y(this,"experimentsUpdatesEmitter",new Nt);y(this,"employeesOnlySettingsUpdatesEmitter",new Nt);y(this,"projectFeaturesUpdatesEmitter",new Nt);y(this,"flagsUpdater",new Ea(this));this.flagsUpdater.startUpdatesStream(),this.experimentsUpdatesEmitter.onNewStream=j=>{if(j?.replay==="latest")return{latest:this.flagsUpdater.getInitialExperiments()}},this.employeesOnlySettingsUpdatesEmitter.onNewStream=j=>{if(j?.replay==="latest")return{latest:this.flagsUpdater.getInitialEmployeesOnlySettings()}},this.projectFeaturesUpdatesEmitter.onNewStream=j=>{this.flagsUpdater.initProjectFeatures()}}updateExperiments(j){this.experimentsUpdatesEmitter.emit(j)}updateEmployeesOnlySettings(j){this.employeesOnlySettingsUpdatesEmitter.emit(j)}updateProjectFeatures(j){this.projectFeaturesUpdatesEmitter.emit(j)}stopUpdatesStream(){this.flagsUpdater.stopUpdatesStream()}experimentsUpdatesStream(j){return this.experimentsUpdatesEmitter.newStream(j)}employeesOnlySettingsUpdatesStream(j){return this.employeesOnlySettingsUpdatesEmitter.newStream(j)}projectFeaturesUpdatesStream(j){return this.projectFeaturesUpdatesEmitter.newStream(j)}};var u6=CA("setup-rpc-connection"),d7=3e4;function tg(A,j){if(!A)return Promise.resolve();let e=performance.now(),t=vr(),r=A.connect(j);return r.then(()=>{u6.debug("Connected to controller",A.channelInterface.name),SA("connected_to_sandbox",{correlationId:t,durationMs:Math.round(performance.now()-e),userAgent:navigator.userAgent,visibility:document.visibilityState})}).catch(()=>{u6.debug("Failed to connect to controller",A.channelInterface.name),SA("connection_to_sandbox_error",{correlationId:t,userAgent:navigator.userAgent,visibility:document.visibilityState,error:"failed to connect"})}),new u7(d7,()=>{if(A.isConnected)u6.debug("Controller connected within timeout");else{SA("connection_to_sandbox_error",{correlationId:t,userAgent:navigator.userAgent,visibility:document.visibilityState,error:`not connected within ${d7}ms`});let o=new Error(`RPC connection timeout after ${d7}ms`);u6.reportCriticalError(o)}}),r}var eg=10,u7=class{constructor(j,e){this.millis=j;this.callback=e;y(this,"round",0);y(this,"timer",0);y(this,"arm",()=>{this.round>=eg?this.callback():(this.round+=1,this.timer=window.setTimeout(this.arm,this.millis/eg))});this.arm()}cancel(){this.timer&&(clearTimeout(this.timer),this.timer=0)}};async function rg(A,j,e,t,r){if(!e)throw Error("ServiceSandbox: no trusted sandbox origin");if(A){await tg(A,{target:j,url:e}),await A.getRemote(De.channels.renderer).initialize(wi,t);return}let o=!1,n=new $m(j,e),i=await rd.on(n).discover({timeout:3e4}),a=new Jn;A||gs.on(n).register(a);let s=wi;await i.initialize({renderTarget:t,upgradeToMessagePortChannel:o,treeVersion:s}),r.debug("ServiceSandbox: ready to initialize contentWindow. Establishing channel\u2026");let l=new MessageChannel,c=rd.service.fingerprint;return j.postMessage(c,e,[l.port2]),o&&(a.stopUpdatesStream(),r.debug("ServiceSandbox: unregistering initializer"),await $r.shared().unregister(n)),r.debug("ServiceSandbox: service channel ready"),o?new Em(l.port1):n}var og=new WeakMap,p7=new Set;function ng(A){return og.get(A())?Promise.resolve():new Promise((j,e)=>{let t=setTimeout(()=>{e(new Error("waitForReadyToInitialize timed out"))},1e4);p7.add({source:A,resolveReady(){clearTimeout(t),j()}})})}window.addEventListener("message",A=>{if(A.data!==ch)return;let j=A.source;if(j){og.set(j,!0);for(let e of p7)e.source()===j&&(p7.delete(e),e.resolveReady())}},!1);var $a=class extends c6{constructor(e,t,r){super();y(this,"log",CA("window-sandbox"));y(this,"channelPromise");y(this,"windowPromise",co());this.channelPromise=(async()=>{let o=await fa.new({...r,url:e.url});return this.log.debug("WindowSandbox: created custom window"),this.windowPromise.resolve(o),this.controller||(await ng(()=>o.contentWindow),this.log.debug("WindowSandbox: loaded")),rg(this.controller,o.contentWindow,e.origin,t,this.log)})()}static async isAvailable(){return fa.isAvailable()}waitForServiceChannel(){return this.channelPromise}async openSaveDialog({count:e,pathname:t}){return(await this.windowPromise).openSaveDialog({count:e,pathname:t})}async collectMetrics(){return(await this.windowPromise).collectMetrics()}async writeToClipboard(e){return(await this.windowPromise).writeToClipboard(e)}async writeToDisk(e){return(await this.windowPromise).writeToDisk(e)}async getImageData(e){return(await this.windowPromise).getImageData(e)}};var Ba=class{constructor(){y(this,"metricsMap",new Map)}static trackError(j){Uu({exportCount:0,success:!1,scope:"selection",errorReason:j})}createErrorReason({sizeKb:j,hasSavedToDisk:e}){if(!e)return"Export success, but no file was written";if(j===0)return"Export success, but the file is 0kb"}createId({nodeId:j,pixelRatio:e}){return j+"-"+e}mergeElectronMetrics(j){for(let e of j){let t=this.createId({nodeId:e.nodeId,pixelRatio:e.pixelRatio}),r=this.metricsMap.get(t);r&&this.metricsMap.set(t,{...r,sizeKb:e.kb,success:e.hasSavedToDisk})}}add(j,e){let t=this.createId({nodeId:j.nodeId,pixelRatio:j?.pixelRatio??1}),r=this.metricsMap.get(t)??{};this.metricsMap.set(t,{...r,...e})}track(){for(let[j,e]of this.metricsMap){let t=this.createErrorReason({sizeKb:e.sizeKb??0,hasSavedToDisk:e.hasSavedToDisk??!1});Uu({durationMs:e.durationMs,format:e.format,exportCount:e.exportCount,success:e.success,scope:e.scope,sizeKb:e.sizeKb,errorReason:e.errorReason??t})}this.metricsMap.clear()}};function ig(A){for(let j of A.walk())if(In(j))return!1;return gj(A)||_A(A)||Fr(A)}function ag(A){return Z0({...A})}var Cv=3,le=CA("PartialTreeSender"),sg=dn();function lg(){return new Promise((A,j)=>{if(typeof MessageChannel<"u"){let e=new MessageChannel;e.port1.onmessage=()=>A(),e.port1.onmessageerror=()=>j(),e.port2.postMessage(null)}else setTimeout(A,0)})}var k6=class{constructor(j,e,t){this.timeline=j;y(this,"name");y(this,"currentScopeId","");y(this,"timelineCursor");y(this,"scopeBufferMap",new Map);y(this,"chunkQueue",[]);y(this,"chunkIndex",0);y(this,"chunkingConfig");y(this,"drainingPromise");this.name=e+"-"+String(Math.round(Math.random()*1e3)),this.chunkingConfig={maxNodesPerChunk:t?.maxNodesPerChunk??1e3}}shouldUseChunking(j,e){if(this.timelineCursor)return!1;let t=j.chunkingHints;if(!t||t.size===0)return!1;let r=p6();e&&r.add(e);for(let o of r)if(t.has(o))return le.debug(this.name,`chunking required - large page hint: ${o}`),!0;return!1}serializeTreeChunks(j,e){let t=[],r=crypto.randomUUID(),o=new Map,n=new Map,i=0,a=p6();e&&a.add(e);let s=()=>{o.size>0&&(t.push({name:this.name,timestamp:Date.now(),treeChunks:{chunkId:r,chunkIndex:t.length,totalChunks:-1,nodes:o,childrenMap:n,rootId:t.length===0?j.root.id:void 0}}),o=new Map,n=new Map)},l=$=>{let F=El.valueFromNode($);o.set($.id,F);let S=$.children?$.children.map(P=>P.id):[];if(n.set($.id,S),i++,F.children&&(F.children=sg),o.size>=this.chunkingConfig.maxNodesPerChunk&&s(),$.children)for(let P of $.children)l(P)},c=j.root,d,u={};for(d in c)Sd[d]||(u[d]=c[d]);let k=j.getNodes(a),m={...u,__class:"RootNode",id:j.root.id,children:sg};o.set(j.root.id,m),n.set(j.root.id,k.map($=>$.id)),i++,o.size>=this.chunkingConfig.maxNodesPerChunk&&s();for(let $ of k)l($);s();let I=t.length;for(let $ of t)$.treeChunks.totalChunks=I;return le.debug(this.name,`directly chunked tree into ${t.length} chunks with ${i} total nodes`),t}getNextChunk(){if(this.chunkQueue.length===0)return;let j=this.chunkQueue[this.chunkIndex];return this.chunkIndex++,this.chunkIndex>=this.chunkQueue.length&&(this.chunkQueue=[],this.chunkIndex=0),j}hasMoreChunks(){return B(this.chunkIndex>=0,"Chunk index should not be negative"),B(this.chunkIndex<=this.chunkQueue.length,"Chunk index should not exceed queue length"),this.chunkIndex<this.chunkQueue.length}async*drainChunks(j){if(!this.hasMoreChunks())return;let e=this.drainingPromise;this.drainingPromise=new Bs,e&&(le.debug(this.name,"drainChunks already in progress, waiting for it to finish"),await e),le.debug(this.name,"drainChunks started");let t=0,r=performance.now();try{for(;this.hasMoreChunks();){if(j?.aborted){le.debug(this.name,"drainChunks aborted, clearing chunk queue"),this.chunkQueue=[],this.chunkIndex=0;return}let o=this.getNextChunk();o&&(t++,le.debug(this.name,`sending chunk ${o.treeChunks.chunkIndex+1} of ${o.treeChunks.totalChunks}`),yield o),await lg()}}finally{await lg(),this.timelineCursor=this.timeline.getChangeTrackingCursor();let o=performance.now()-r,n=o>1e3?`${(o/1e3).toFixed(2)}s`:`${Math.round(o)}ms`;le.debug(this.name,`completed sending ${t} chunks in ${n}`),le.debug(this.name,"drainChunks completed"),this.drainingPromise?.resolve(),this.drainingPromise=void 0}}resetScopeBuffer(j){this.scopeBufferMap.clear(),this.currentScopeId=j??"",j&&(this.timelineCursor=void 0,this.scopeBufferMap.set(j,performance.now()))}updateScopeBuffer(j){if(this.currentScopeId===j)return[void 0,void 0];if(j===So)return[void 0,void 0];if(this.currentScopeId=j,this.scopeBufferMap.has(this.currentScopeId))return this.scopeBufferMap.set(this.currentScopeId,performance.now()),[void 0,void 0];let e;if(this.scopeBufferMap.size>=Cv){let t=p6(),r=1/0,o;for(let[n,i]of this.scopeBufferMap)t.has(n)||r>i&&(r=i,o=n);o&&(this.scopeBufferMap.delete(o),e=o)}return this.scopeBufferMap.set(this.currentScopeId,performance.now()),[e,j]}reset(j){let e=this.timeline.tree;if(this.resetScopeBuffer(j),this.shouldUseChunking(e,j))return this.chunkQueue=this.serializeTreeChunks(e,j),this.chunkIndex=0,le.debug(this.name,"initiated direct chunked transfer for tree"),null;let t=dg(e,j);return this.chunkQueue=[],this.chunkIndex=0,t}update(j){if(!j)return{};if(this.hasMoreChunks())return{};let e=this.timeline.tree,t=this.timeline.fetchForwardChanges(this.timelineCursor);if(!t){if(this.timeline.invalidatedByLoadCompletedDocument(this.timelineCursor))return le.debug(this.name,"cursor invalidated, sending empty update for load completed document"),this.timelineCursor=this.timeline.getChangeTrackingCursor(),{};if(this.resetScopeBuffer(j),this.shouldUseChunking(e,j)){this.chunkQueue=this.serializeTreeChunks(e,j),this.chunkIndex=0;let a=this.getNextChunk();if(a)return le.debug(this.name,`starting direct chunked resend with ${this.chunkQueue.length} chunks`),a}let i=dg(e,j);return le.debug(this.name,"cursor invalidated, sending tree with scope:",j),this.timelineCursor=this.timeline.getChangeTrackingCursor(),{name:this.name,tree:i,timestamp:Date.now()}}let[r,o]=this.updateScopeBuffer(j);r&&(le.debug(this.name,"deleting scope by diff:",r),cg(r,t)),t.length===0&&(t=void 0);let n;if(o&&(le.debug(this.name,"adding scope by subtree:",o),n=this.getScopeSubTree(e,o)),t){let i=this.getAffectedScopeIDsAfterCrossScopeMove(e,t);for(let a of i){if(a!==this.currentScopeId){this.scopeBufferMap.has(a)&&(le.debug(this.name,"deleting scope due to cross-scope move:",a),cg(a,t),this.scopeBufferMap.delete(a));continue}n||(le.debug(this.name,"resending tree with scope due to cross-scope move:",a),n=this.getScopeSubTree(e,a))}}return{changes:t,scopes:n?[n]:void 0,timestamp:Date.now()}}getScopeSubTree(j,e){let t=j.get(e);return yo(t)&&B(t.isLoaded(),"Scope must be loaded"),vv(t)}getAffectedScopeIDsAfterCrossScopeMove(j,e){let t=new Set;for(let r of e){if(!r.previousScope||!r.to.parentid)continue;let o=j.get(r.id),n=j.getScopeNodeFor(o);n&&t.add(n.id)}return t}};function cg(A,j){j.push({id:A,removed:"CanvasNode",to:{}})}function vv(A){if(A)return El.valueFromNode(A)}function p6(){return new Set([Lr,Cl,KB,We,cB,So])}function dg(A,j){let e=p6();j&&e.add(j);let t=A.getNodes(e).map(i=>El.valueFromNode(i)),r=A.root,o,n={};for(o in r)Sd[o]||(n[o]=r[o]);return{version:wi,root:{...n,__class:"RootNode",id:A.root.id,children:t}}}function ug(A,j){let e=gn(A);if(!e)return j;let t=new Map(j.map(o=>[o.id,o])),r=[];for(let o of e.walk()){if(!Vt(o)||!o.webPageId)continue;let n=t.get(o.webPageId);n&&r.push(n)}return r}function pg(A,j,e=!1,t=!1){let r=j?.[A];if(r)return r;if(A===ME&&e)return t?"Key":"Key & Gamepad";if(t&&A==="onMouseEnter")return"Enter";let n=(A.startsWith("on")&&A.length>2?A.substring(2):A).replace("Tap","Click");return Ot(n)}function Tv(){let A=null,j=null;return e=>{let t=Y.componentForIdentifier(e.codeComponentIdentifier);if(t===A)return j;if(!t||!t.properties)return null;let r={},o=Object.keys(t.properties);for(let n=0,i=o.length;n<i;n++){let a=o[n],s=t.properties[a];s?.type==="eventhandler"&&s.title&&(r[a]=s.title)}return A=t,j=r,r}}var F3=Tv();function xv(A){if(A.type!=="controlReference"&&A.type!=="nodePropertyControlReference")return;let{expectedType:j}=A;B(j==="enum"||j==="segmentedenum"||j==="file")}function x3({galleryImageId:A,isSmartComponent:j}){return j?Array(4).fill(null).map(()=>({id:Jj(),type:"object",value:{[A]:{type:"image",value:void 0}}})):[]}function kg(A,j){return B(A.type!=="responsiveimage",`Image variables are compiled to be responsive images. To
        prevent confusion we don't allow creation of type responsive images.
        Because that would mean that two different types represent the same thing.`),xv(A),A.type!=="trackingid"&&A.type!=="vectorsetitem"&&SA("variable_create",{scopeType:j,variableType:A.type}),A.type==="image"&&(L(A.initialValue)?sd(A.initialValue)||(A.initialValue=void 0):He(A.initialValue)&&L(A.initialValue.value)&&(sd(A.initialValue.value)||(A.initialValue=void 0))),A.type==="array"&&j==="canvas_component"&&(B(A.minCount===void 0,"minCount should not be lifted to component"),B(A.maxCount===void 0,"maxCount should not be lifted to component")),{id:Jj(),...A}}function Pv(A,j){let e=new Set(A.variables.map(t=>t.name));return te(Ot(j),e)}function Mv(A){switch(A.type){case"controlReference":case"nodePropertyControlReference":switch(A.expectedType){case"enum":return"Type";case"file":return"File";default:throw Error(`getFallbackNameForCreateVariableOptions(), unsupported file reference type: ${A.expectedType}`)}default:return wf(A.type)}}function Dv(A,j){if(A==="richtext")return j.length;let e=ko;return j.forEach((t,r)=>{if(!Ve(e)){if(t.type!=="richtext"){aA(e)&&(e=so);return}rf(e)||(e=r)}}),aA(e)?e:j.length}function _v(A){return hj(A)?"collection":Ej(A)?"layout_template":(dA(A)||B(!0,"Should not be able to create variables on invalid scope",A.__class),"canvas_component")}function k7(A,j){let{scopeId:e,isAssigned:t=!0,useUniqueName:r=!0,...o}=j,n=A.get(e);if(!n||!Qt(n))return null;let i=j.name.trim(),a=i||Mv(j),s=r?Pv(n,a):a,l=kg({...o,name:s},_v(n));if(l.type==="eventhandler"&&!dA(n))return null;let c=Dv(l.type,n.variables),d=gt.insert(n.variables,c,l);return n.set({variables:d}),t&&t0({variableType:l.type,variableId:l.id}),Te(l.id,n.id)}function Q3(A){let{engine:j,showModal:e=!0,...t}=A,r=k7(j.tree,t);if(!r)return null;let o=j.tree.get(A.scopeId);return!o||!Qt(o)?null:(yn(j)&&e&&(j.stores.variablesStore.selectedVariableId=r.id,j.stores.modalStore.set({type:"Variables",source:"properties"})),Te(r.id,o.id))}var Nv=CA("createAndAssignActionVariableToNode");function mg(A,j,e,t,r){if(!(Gt(j)||nA(j)))return null;let o=A.getScopeNodeFor(j);if(!o||!dA(o))return null;let n=A.getGroundNodeFor(j);if(!n||!_j(n))return null;let i=Y.componentForIdentifier("framer/useTriggerEvent");if(!i)return null;let a=k7(A,{scopeId:o.id,type:"eventhandler",name:t??pg(e,null),initialValue:void 0});if(!a)return null;Sl(A,j,e,i,{id:{type:"string",value:a.id}});let s=o.getTopLevelReplicaVariants();for(let l of s){let{overrides:c}=l.replicaInfo;c[j.id]&&z$(A,l,j.id,e,i,{id:{type:"string",value:a.id}})}return r&&r.updateComponent(o.id).catch(l=>Nv.error(l)),a.id}function Ov(A){let j=yl(A);if(Object.keys(j).length!==0)for(let t in j){let r=j[t];if(r&&r.length===0)return t}}function wv(A,j,e){switch(j){case"framer/useShowOverlay":return A.create(CB,e);case"framer/useShowRelativeOverlay":return A.create(dt,e,{width:200,height:150,radius:10,boxShadows:[tf({x:0,y:10,blur:20,color:"rgba(0,0,0,0.05)",spread:0})],floatingPositionEnabled:!0,floatingPlacement:al,floatingAlignment:sl,floatingOffsetX:LE,floatingOffsetY:qE,floatingCollisionDetection:!0,floatingCollisionPadding:wE});default:EA(j)}}function Lv(A,j,e,t){e&&B(j==="framer/useShowOverlay"&&Si(e)||j==="framer/useShowRelativeOverlay"&&(RA(e)||nA(e)),"Invalid overlay type: ",e.__class,"for overlay action: ",j);let r=e??wv(A,j,t.id);return Ae(r)&&r.set({zIndex:jE,styleAppearEffectEnabled:!0,styleAppearEffectTrigger:"onMount",overflow:St(),position:"absolute",...Z$.fadeIn()}),r}function qv(A,j,e,t,r){B(Li(e),"Parent is not a local smart component instance, events can't be created");let o=ZE(A,e);A.loadScopes([o],([n])=>{if(!n)return;let i=n.getPrimaryVariant();B(i,"SmartComponentNode should have a primary variant");let a=mg(A,i,t,t==="onMouseEnter"?"Hover":void 0,j);B(a,"Should be able to create event key for local smart component node"),r(a)})}function fg(A,j,e,t,r){let o=Y.componentForIdentifier(j);B(o,"Cannot find overlay action definition"),Sl(A,r,t,o,{overlay:{type:"string",value:e.id}},!0)}function Vv(A){switch(A){case"framer/useShowOverlay":return"fixed";case"framer/useShowRelativeOverlay":return"relative";default:EA(A)}}function m6({treeStore:A,codeGenerationStore:j},e,t,r){let o=A.tree.get(t);if(!o)return;let n=DA(o)?A.tree.get(o.originalid):o;if(!n||!Gt(n)&&!nA(n))return;let i=e==="framer/useShowRelativeOverlay"?"onMouseEnter":"onTap",a=nA(n)?Ov(n):i,s=Li(n);if(!a&&!s)return;let l=Lv(A.tree,e,r,n);return a?fg(A.tree,e,l,a??i,n):qv(A.tree,j,n,i,c=>fg(A.tree,e,l,c,n)),SA("overlay_create",{source:r?"duplicate":"events_panel",overlayType:Vv(e)}),l}var Eg=CA("ScopeStore");function ha(A){return Lj(A,!0)||Q(A,!0)||Se(A,!0)}function $g(A){if(Lj(A))return"CanvasPage";if(Q(A))return"WebPage";if(dA(A))return"SmartComponent";if(Rr(A))return"ContentManagement";if(Ej(A))return"LayoutTemplate";if(Je(A))return"VectorSet";if(hf(A))return"Analytics";if(gf(A))return"LocalizationGlossary";if(Se(A))return"DesignPage";throw Error(`Failed to return scope type, invalid scope: ${A.__class}`)}var qo,Vo,Ko,Ho,Un,Oe,ar,Kr,Qn,zn,Wn,Bg=class extends ze{constructor(e,t,r,o,n,i,a,s,l,c,d,u){super();this.scheduler=e;this.treeStore=t;this.canvasStore=r;this.selection=o;this.chromeStore=n;this.contentManagementStore=i;this.modalStore=a;this.overlayStore=s;this.codeGenerationStore=l;this.insertSidebarStore=c;this.modulesStore=d;this.aiGenerationStore=u;rj(this,qo,0);y(this,"isCheckingActivePage",!0);rj(this,Vo,"");rj(this,Ko,"");rj(this,Ho,"");rj(this,Un,"");rj(this,Oe,[]);rj(this,ar,!1);rj(this,Kr,!1);rj(this,Qn,new Map);rj(this,zn,new Map);y(this,"loadingActiveId");y(this,"_activeId");y(this,"scopeSwitchStart",0);y(this,"scopeSwitchPending",!1);y(this,"scopeIdToSelectedCollectionItem",new Map);y(this,"rootScopeType","CanvasPage");rj(this,Wn,[]);y(this,"canGoBack",()=>kA(this,ar));y(this,"goBack",()=>{let e=Array.from(this.isolatedCanvasNodes());e.pop();let t=e.pop();t&&this.select(t.id,{keepHistory:!1})});let k=this.getFirstPageNodeAccordingToUI();this._activeId=k.id,Oi(k),Lj(k)?OA(this,Vo,k.id):Q(k)?OA(this,Ko,k.id):Se(k)&&OA(this,Ho,k.id);let m=this.getScopeNodes();OA(this,qo,m.indexOf(k)),B(k.loaded,"Scope must be fully loaded"),c.onScopeChange({scope:k.loaded,hasCanvasPageNodes:this.hasCanvasPageNodes(),hasWebPageNodes:this.hasWebPageNodes()}),this.modulesStore.setActiveScope(this._activeId)}get activeId(){return this._activeId}get active(){let e=this.getScopeNode(this._activeId);return B(e.isLoaded(),"Scope must be fully loaded"),e}get rootNode(){return this.treeStore.tree.root}get checkingActivePage(){return this.isCheckingActivePage}documentDidLoad(){this.isCheckingActivePage=!1}get scopeType(){return $g(this.active)}getScopeNode(e){let t=this.treeStore.tree.get(e);return B(t instanceof Nd,"Node, ",e,"is not a ScopeNode"),t}getScopeNodes(){return this.rootNode.children.filter(yo)}getCanvasPageNodes(){return this.rootNode.children.filter(Lj)}getDesignPageNodes(){return this.rootNode.children.filter(Se)}getKitPageNodes(){let e=[];for(let t of this.rootNode.children)Q(t)&&t.kitPage&&e.push(t);return e}getSmartComponentNodes(){return this.rootNode.children.filter(dA)}getLayoutTemplateNodes(){return this.rootNode.children.filter(Ej)}getWebPageNodes(){return this.rootNode.children.filter(Q)}getWebPageNodesWithoutCollection(){return this.rootNode.children.filter(e=>Q(e,!0)&&!e.dataIdentifier)}getWebPageNodesWithCollection(e=!1){let t=this.rootNode.children.filter(r=>!!(Q(r)&&r.dataIdentifier));return e?ug(this.treeStore.tree,t):t}hasPages(){let e=!1,t=!1,r=!1,o=!1,n=!1;for(let i of this.rootNode.children)if(Lj(i)&&(r=!0),Se(i)&&(o=!0),Q(i)&&(i.kitPage?n=!0:i.dataIdentifier?t=!0:e=!0),e&&t&&r&&o&&n)break;return{hasSitesPages:e,hasCMSPages:t,hasCanvasPages:r,hasDesignPages:o,hasKitPages:n}}hasCanvasPageNodes(){return this.rootNode.children.some(Lj)}hasWebPageNodes(){return this.rootNode.children.some(Q)}getRootScopeNodes(){return this.rootNode.children.filter(ha)}getFirstPageNodeAccordingToUI(e=this.treeStore.tree){let{children:t,homePageNodeId:r}=e.root,o=uh(t,r);if(Hv(o)){let n=ph(t);if(n)return n}return o}getFirstWebPageNode(){try{let e=this.getFirstPageNodeAccordingToUI();if(Q(e))return e}catch{}}changeActive(e,t,r){if(this._activeId){let a=e.get(this._activeId),s=Q(a)&&a.abTestingParentId?a.abTestingParentId:this._activeId;kA(this,Qn).set(s,{zoom:this.canvasStore.zoom,offset:this.canvasStore.offset}),kA(this,zn).set(this._activeId,this.selection.ids),dA(a)&&SA("component_canvas_exit",{componentId:this._activeId})}if(OA(this,Un,this._activeId),OA(this,qo,r),this._activeId=t.id,Oi(t),this.codeGenerationStore.changeScope(),this.modulesStore.changeScope(t),Se(t))this.rootScopeType="DesignPage",OA(this,Ho,t.id),OA(this,Oe,[]),OA(this,ar,!1),OA(this,Kr,!1);else if(Lj(t))this.rootScopeType="CanvasPage",OA(this,Vo,t.id),OA(this,Oe,[]),OA(this,ar,!1),OA(this,Kr,!1);else if(Q(t))this.rootScopeType="WebPage",OA(this,Ko,t.id),OA(this,Oe,[]),OA(this,ar,!1),OA(this,Kr,fe(t));else if(dA(t)||Ej(t)||Je(t)){let a=kA(this,Oe).indexOf(t.id);a===-1?kA(this,Oe).push(t.id):kA(this,Oe).splice(a+1),OA(this,ar,kA(this,Oe).length>0),OA(this,Kr,!1),Zh({componentId:t.id}),dA(t)&&this.chromeStore.mainView===0&&this.modalStore.displayComponentIsolationModal({source:"automatic"})}let o=kA(this,Qn).get(Q(t)&&t.abTestingParentId?t.abTestingParentId:t.id);o?this.canvasStore.updateCanvas(o.offset,o.zoom):this.canvasStore.zoomAfterScopeSwitch(e,t);let n=kA(this,zn).get(t.id);n?this.selection.set(n):this.selection.clear(),this.overlayStore.hideAll(),this.insertSidebarStore.onScopeChange({scope:t,hasWebPageNodes:this.hasWebPageNodes(),hasCanvasPageNodes:this.hasCanvasPageNodes()}),this.treeStore.setHighlight(null);let i=$g(t);this.chromeStore.onChangeScopeType(i),this.contentManagementStore.onChangeScopeType(i),this.aiGenerationStore.setCurrentSessionId(i==="DesignPage"?t.id:void 0)}select(e,{keepHistory:t,activateContentPanel:r,collectionItemId:o}){this.loadingActiveId=e,this.scopeSwitchStart=performance.now();let n=()=>{if(this.scopeSwitchPending=!1,this.loadingActiveId!==e||this._activeId===e)return;let s=this.getScopeNodes().findIndex(u=>u.id===e);B(s!==-1,"Tree must contain scope node");let c=this.treeStore.tree.latestTree().getNode(e);B(yo(c),"Tree must contain scope node",e);let d;if(c.isLoaded())d=c.loaded;else if(!this.treeStore.tree.getService("loader"))Eg.reportError(new ReferenceError("Loader service is not available in the tree but scope is not loaded"),{message:"Scope must be fully loaded"},{shallowScopes:"true"}),d=c;else throw new TypeError("Scope must be fully loaded");t||OA(this,Oe,[]),L(o)&&Q(c)&&this.setSelectedCollectionItemForWebPage(c.id,o),r&&(this.chromeStore.contentPanelTab=r),this.changeActive(this.treeStore.tree,d,s)},i=this.treeStore.tree.getService("loader");if(i&&!i.hasLoadedScope(e)){this.scopeSwitchPending=!0,i.prioritizeLoadingScope(e,()=>this.scheduler.processWhenReady(n));return}n()}selectByNode(e){let t=this.treeStore.tree.get(e);if(t===null)return;let r=this.treeStore.tree.getScopeNodeFor(t);r!==null&&this.select(r.id,{keepHistory:!1})}selectPreviousActiveScope(){let e=this.treeStore.tree.get(kA(this,Un));this.select(e?.id??this.getFirstPageNodeAccordingToUI().id,{keepHistory:!1})}findNextActiveScope(e=this.treeStore.tree){let t=e.root,r=t.children.filter(yo);B(t.children.some(ha),"validateActiveScope: Tree must contain at least one Canvas Page or Web Page");let o=r.findIndex(n=>n.id===this._activeId);return o===-1&&(o=this.findNextAvailablePageIndex(r,kA(this,qo))),[r[o],o]}validateActiveScope(e=this.treeStore.tree,t=!1){let[r,o]=this.findNextActiveScope(e);B(r,"ScopeNode must be defined"),t||B(r.isLoaded(),"Scope must be fully parsed"),OA(this,qo,o);let n=r;return r.id!==this._activeId&&(this.scopeSwitchStart=performance.now(),this.scopeSwitchPending=!1,this.changeActive(e,n,o)),n}findNextAvailablePageIndex(e,t){let r=[],o=[];for(let s=0;s<e.length;s++){let l=e[s];Q(l)?o.push(s):Lj(l)&&r.push(s)}let n=this.rootScopeType==="WebPage",i=n?o:r,a=n?r:o;return Kv(i.length>0?i:a,t)}renameScope(e,t){this.getScopeNode(e).set({name:t})}getActiveScopeNodeForReset(e=this.treeStore.tree,t=null){if(t){let o=e.getScopeNodeFor(e.get(t));if(kh(o)&&o?.isValid())return o}let r=this.getFirstPageNodeAccordingToUI(e);if(Q(r)&&r.isValid()&&r.loaded||(Lj(r)||Se(r))&&r.loaded)return r.loaded;Eg.warn("getActiveScopeNodeForReset: falling back to scanning for a useful scope to make active");for(let o of e.root.children)if(Lj(o)&&o.isValid()&&o.loaded||Q(o)&&o.isValid()&&o.loaded)return o.loaded;for(let o of e.root.children)if(dA(o)&&o.isValid()&&o.loaded)return o.loaded;throw Error("Document does not have any scopes that can be set to active.")}resetActiveScope(e=this.treeStore.tree,t=void 0){let r=this.getActiveScopeNodeForReset(e,t);if(r.id===this._activeId)return;this._activeId="",OA(this,Vo,""),OA(this,Ho,""),OA(this,Ko,""),OA(this,Un,""),kA(this,Qn).clear(),kA(this,zn).clear(),B(r.isLoaded(),"Scope must be fully parsed");let o=e.root.children.indexOf(r);this.scopeSwitchStart=performance.now(),this.scopeSwitchPending=!1,this.changeActive(e,r,o)}movePage(e,t){let r=this.getScopeNode(e),o=this.getAllPageNodesOfScope(r),n=o[t];B(n,`Trying to move a page node to an invalid index: ${t}, total: ${o.length} page nodes.`);let i=this.rootNode.children.findIndex(a=>a.id===n.id);B(r.parentid,"Scope node has no parentid"),B(i!==-1,"Cant find scope in root node"),this.treeStore.tree.moveNode(r,r.parentid,i)}getAllPageNodesOfScope(e){return Se(e)?this.getDesignPageNodes():Lj(e)?this.getCanvasPageNodes():Q(e)&&e.kitPage?this.getKitPageNodes():(B(!e,"Scope is not movable"),dn())}getParentId(e,t){let r=this.rootNode.id;if(e instanceof Nd||fn(e))return r;let o=this.active,n=o.id;return Rr(o)&&B(Js(e),"ContentManagementNode only accepts content nodes"),t===r?n:t??n}insertNode(e,t,r,o){t=this.getParentId(e,t),Pe(e)&&m6({codeGenerationStore:this.codeGenerationStore,treeStore:this.treeStore},Ae(e)?"framer/useShowRelativeOverlay":"framer/useShowOverlay",t,e),this.treeStore.tree.insertNode(e,t,r,o)}insertNodes(e){for(let t of e)this.insertNode(t,t.parentid)}moveNode(e,t,r,o){t=this.getParentId(e,t),this.treeStore.tree.moveNode(e,t,r,o)}removeNode(e){this.treeStore.tree.removeNode(e),e.id===this._activeId&&this.validateActiveScope(this.treeStore.tree,!0)}setSelectedCollectionItemForWebPage(e,t){if(this.scopeIdToSelectedCollectionItem.get(e)===t)return;let o=new Map(this.scopeIdToSelectedCollectionItem);o.set(e,t),this.scopeIdToSelectedCollectionItem=o}getSelectedCollectionItemForScope(e){if(Q(e))return this.scopeIdToSelectedCollectionItem.get(e.id)}getMostRecentPage(){switch(this.rootScopeType){case"CanvasPage":{let e=this.treeStore.tree.get(kA(this,Vo));if(Lj(e))return e;break}case"DesignPage":{let e=this.treeStore.tree.get(kA(this,Ho));if(Se(e))return e;break}case"WebPage":{let e=this.treeStore.tree.get(kA(this,Ko));if(e&&yo(e)&&Q(e))return e;break}}return this.getFirstPageNodeAccordingToUI()}getComponentHistory(){if(kA(this,Oe).length===0)return[];let e=this.active;if(!(dA(e)||Ej(e)||Je(e)))return[];let t=[],r;for(let o of kA(this,Oe)){let n=this.treeStore.tree.getNode(o);(dA(n)||Ej(n)||Je(n))&&n.isLoaded()&&(t.push(n),r=n)}return r===e?t:[e]}get onIsolatedCanvas(){return kA(this,ar)}get onCollectionPage(){return kA(this,Kr)}isolatedCanvasNodes(){let e=this.active,t;return ha(e)?t=[e]:t=[this.getMostRecentPage(),...this.getComponentHistory()],po(kA(this,Wn),t)?kA(this,Wn):(OA(this,Wn,t),t)}getTopMostWebPageNode(){for(let e of this.isolatedCanvasNodes())if(Q(e))return e}};qo=new WeakMap,Vo=new WeakMap,Ko=new WeakMap,Ho=new WeakMap,Un=new WeakMap,Oe=new WeakMap,ar=new WeakMap,Kr=new WeakMap,Qn=new WeakMap,zn=new WeakMap,Wn=new WeakMap;function Kv(A,j){for(let e of A)if(!(e<j))return e;return Math.max(...A)}function Hv(A){if(!Q(A)||!A.isLoaded())return!1;for(let j of A.children)if(!RA(j)||j.children.length>0)return!1;return!0}var ZU=pn,hg=Re.isAutomation?pn:fm;var f6=class{constructor(j,e){y(this,"sandbox");y(this,"log");y(this,"engine");y(this,"wantsEngineUpdates");y(this,"renderState");y(this,"partialTreeSender");y(this,"timelineCursor");y(this,"chunkAbortController");y(this,"chunkSessionId");y(this,"drainingPromise");y(this,"onSandboxServicesReady");y(this,"onSandboxStateChange",j=>{typeof j!="boolean"&&this.log.reportError(j)});y(this,"onSandboxRender");y(this,"fail",j=>{this.chunkAbortController?.abort(),this.readyForRenderingPromise.reject(j),this.onSandboxStateChange?.(j)});y(this,"renderServiceIfDiscovered");y(this,"readyForRenderingPromise",co());y(this,"flagsService",new Jn);y(this,"lastSandboxTreeUpdate",0);y(this,"onRenderedUpdate",j=>{this.lastSandboxTreeUpdate&&(this.lastSandboxTreeUpdate<j.update?(this.fail(new Error(`dropped tree update: ${this.lastSandboxTreeUpdate} < ${j.update}`)),this.lastSandboxTreeUpdate=0):this.lastSandboxTreeUpdate===j.update&&(this.lastSandboxTreeUpdate=0)),this.onSandboxRender&&(this.onSandboxRender(j),this.updateGroundNodeOverflowSizes());let{scopeId:e,scopeSwitchStartTime:t,renderEndTime:r,updateEndTime:o}=j;if(t&&o&&r){let n=Math.round(o-t),i=Math.round(r-t),{scopeStore:a}=this.engine.stores,{scopeSwitchStart:s,scopeSwitchPending:l,activeId:c}=a,d=i,u=!1;c===e&&(d=performance.now()-s,u=l);let k=this.engine.tree.get(e);k&&ha(k)&&Xh({pageId:e,renderDurationMs:i,updateDurationMs:n,totalDurationMs:d,neededLoading:u})}});y(this,"onChannelReady",async j=>{if(j){let r=await Bm.on(j).discover({timeout:3e4});this.log.debug("Discovered render service"),this.renderServiceIfDiscovered=r,r.renderedUpdateStream({oneway:!0}).read(this.onRenderedUpdate).catch(this.fail),gs.on(j).register(this.flagsService)}let{modulesStore:e}=this.engine.stores;this.sandbox.modules?e.getModulesUpdatesService().moduleUpdatesStream({replay:"latest"}).read(r=>this.sandbox.modules?.updateModules(r.patches,r.dependentModules,r.prioritizedModules,r.initialized,r.revision)).catch(this.fail):(B(j,"neither old or new rpc defined for modules"),hm.on(j).register(e.getModulesUpdatesService()));let t=new Nt;t.emit({}),j&&td.on(j).register({assetUpdatesStream:t.newStream}),bm(td.on(hg).discover(),async r=>{this.sandbox.assets?r.assets&&this.sandbox.assets.oneway.updateAssets(r.assets):t.emit(r)}),this.onSandboxServicesReady&&(this.renderServiceIfDiscovered?await this.onSandboxServicesReady(j,this.renderServiceIfDiscovered):this.sandbox.renderer&&await this.onSandboxServicesReady(j,this.sandbox.renderer)),this.wantsEngineUpdates&&(this.engine.addSandbox(this),this.engine.scheduler.changes.observe("PendingBundle",()=>this.update(!0)),this.engine.loadWasCalled&&this.update(!0)),this.log.debug("Initialized render sandbox"),this.onSandboxStateChange?.(!0),this.renderServiceIfDiscovered?this.readyForRenderingPromise.resolve(this.renderServiceIfDiscovered):this.sandbox.renderer&&this.readyForRenderingPromise.resolve(this.sandbox.renderer)});y(this,"previousTransform");y(this,"previousActiveLocaleId");y(this,"previousIsReadyToRender");y(this,"previousPerformanceMode");y(this,"previousLoadedAllUserData");y(this,"previousRenderScope");y(this,"previousRenderNodes");y(this,"previousSelection");y(this,"previousNodeInTextEditor");y(this,"previousNodeInEffectPreview");y(this,"previousActiveEffect");y(this,"previousActiveEffectIds");y(this,"previousNodesInMoveToolRootFontSize");y(this,"previousActiveOverlays");y(this,"previousPlaceholder");y(this,"previousRootFontSize");y(this,"previousIsDarkMode");y(this,"previousScopeIdToSelectedCollectionItem");y(this,"previousShouldSetMinHeight");y(this,"previousActiveLinkStyle");y(this,"update",(j=!0)=>{if(this.drainingPromise)return!1;let e=this.renderState(),t=e.transform,r=!ot(t,this.previousTransform);if(this.previousTransform=t,!j)return this.sendSandboxUpdate(void 0,r?t:void 0);let o=!1,n={},i=this.engine,{treeStore:a,loadingStore:s,chromeStore:l,persistedUserDefaults:c}=i.stores,d=a.timeline,u="renderScope"in e?e.renderScope:void 0;u!==this.previousRenderScope&&(this.previousRenderScope=u,o=!0,n.renderScope=u),this.previousRenderScope||(this.previousRenderScope=d.tree.root.children[0]?.id??"");let k=!bt.isOn("disablePartialTreeInSandbox");if(!this.partialTreeSender&&k?(this.partialTreeSender=new k6(d,"sandbox"),this.timelineCursor=void 0):this.partialTreeSender&&!k&&(this.partialTreeSender=void 0),this.partialTreeSender){d.legacyMode=!1;let x=this.partialTreeSender.update(this.previousRenderScope);n.partialTreeUpdate=x,x.tree?(o=!0,r=!0,n.loadedSomeUserData=s.isDocumentLoaded):x.changes||x.scopes?o=!0:x.treeChunks&&(o=!0,this.partialTreeSender.hasMoreChunks()?this.drainChunksAsync():(n.loadedSomeUserData=s.isDocumentLoaded,r=!0))}else{let x=d.fetchForwardChanges(this.timelineCursor);d.legacyMode=!0,x?(this.log.trace("change tracking cursor changes:",x.length),x.length>0&&(n.changes=x,o=!0)):(this.timelineCursor=d.getChangeTrackingCursor(),this.log.debug("change tracking cursor invalidated, sending full tree:",d.tree.size()),d.tree.beginAllowPartialScopeAccess(),n.tree=d.tree.toJS(),d.tree.endAllowPartialScopeAccess(),o=!0,r=!0,n.loadedSomeUserData=s.isDocumentLoaded)}let m=VA.isOn("debugEditWhileNeverLoadingRest")?s.hasMinimalEditableData:s.hasFullDocumentData;!this.previousLoadedAllUserData&&m&&(this.previousLoadedAllUserData=!0,o=!0,n.loadedAllUserData=!0);let I=l.canvasLocaleId;I!==this.previousActiveLocaleId&&(this.previousActiveLocaleId=I,o=!0,n.activeLocaleId=I);let $=s.assetMapLoaded;$!==this.previousIsReadyToRender&&(this.previousIsReadyToRender=$,o=!0,n.isReadyToRender=$);let F=c.performanceMode;F!==this.previousPerformanceMode&&(this.previousPerformanceMode=F,o=!0,n.performanceMode=F);let S="renderNodes"in e?e.renderNodes:void 0;ot(S,this.previousRenderNodes)||(this.previousRenderNodes=S,o=!0,n.renderNodes=S);let P="isDarkMode"in e?e.isDarkMode:void 0;P!==this.previousIsDarkMode&&(this.previousIsDarkMode=P,o=!0,n.isDarkMode=P);{let x=e.editor,C=x?.selection;C!==this.previousSelection&&(this.previousSelection=C,o=!0,n.selection=C);let H=x?.nodeInTextEditorId;H!==this.previousNodeInTextEditor&&(this.previousNodeInTextEditor=H,o=!0,n.nodeInTextEditorId=H);let U=x?.nodesInEffectPreview;ot(U,this.previousNodeInEffectPreview)||(this.previousNodeInEffectPreview=U,o=!0,n.nodesInEffectPreview=U);let z=x?.nodesInMoveToolRootFontSize;ot(z,this.previousNodesInMoveToolRootFontSize)||(this.previousNodesInMoveToolRootFontSize=z,o=!0,n.nodesInMoveToolBaseFontSize=z);let v=x?.activeEffect;v!==this.previousActiveEffect&&(this.previousActiveEffect=v,o=!0,n.activeEffect=v);let tA=x?.activeEffectIds;ot(tA,this.previousActiveEffectIds)||(this.previousActiveEffectIds=tA,o=!0,n.activeEffectIds=tA?new Set(tA):null);let X=x?.activeOverlayNodes;X!==this.previousActiveOverlays&&(this.previousActiveOverlays=X,o=!0,n.activeOverlayNodes=X);let N=x?.dragAndDropPlaceholders;N!==this.previousPlaceholder&&(this.previousPlaceholder=N,o=!0,n.placeholder=N);let K=x?.rootFontSize;K!==this.previousRootFontSize&&(this.previousRootFontSize=K,o=!0,n.rootFontSize=K);let q=x?.scopeIdToSelectedCollectionItem;q&&q!==this.previousScopeIdToSelectedCollectionItem&&(this.previousScopeIdToSelectedCollectionItem=q,o=!0,n.scopeIdToSelectedCollectionItem=q,u&&u===this.previousRenderScope&&(n.renderScope=u));let rA=x?.shouldSetMinHeight;rA!==this.previousShouldSetMinHeight&&(this.previousShouldSetMinHeight=rA,o=!0,n.shouldSetMinHeight=rA);let sA=x?.activeLinkStyle;sA!==this.previousActiveLinkStyle&&(this.previousActiveLinkStyle=sA,o=!0,n.activeLinkStyle=sA??null)}return this.sendSandboxUpdate(o?n:void 0,r?t:void 0)});y(this,"groundNodeOverflowSizes",{});this.sandbox=j,this.log=e.log,this.engine=e.engine,this.wantsEngineUpdates=e.wantsEngineUpdates,this.renderState=e.renderState,j.setLocal(e.engine.stores,{renderedUpdate:this.onRenderedUpdate,error:e.handleSandboxError??(()=>{}),heartbeat:e.heartbeat??(()=>{})}),j.waitForServiceChannel().then(this.onChannelReady).catch(this.fail),j.controller&&j.controller.waitUntilConnected().then(()=>{j.flags&&new d6(j.flags)}).catch(t=>{this.log.error("Error while waiting for flags service",t)})}sendSandboxUpdate(j,e){if(j||e){let{scheduler:t}=this.engine;j?.tree&&(this.lastSandboxTreeUpdate=t.update),j&&(j.timestamp=Date.now());let r={type:"SandboxUpdate",update:t.update,document:j,transform:e};return this.renderServiceIfDiscovered?this.renderServiceIfDiscovered.update({fixmeOpaqueJSON:r}):this.sandbox.renderer&&this.sandbox.renderer.oneway.updateSandbox(r),!0}return!1}command(j,e){this.renderServiceIfDiscovered?this.renderServiceIfDiscovered.update({fixmeOpaqueJSON:{command:j,args:e}}):this.sandbox.renderer&&this.sandbox.renderer.oneway.updateSandbox({command:j,args:e})}async drainChunksAsync(){if(this.drainingPromise)return this.drainingPromise;this.drainingPromise=this._performDraining();try{await this.drainingPromise}finally{this.drainingPromise=void 0}}async _performDraining(){this.chunkAbortController?.abort(),this.chunkAbortController=new AbortController;let j=crypto.randomUUID();this.chunkSessionId=j;let e=this.chunkAbortController.signal,t=this.previousRenderScope;try{if(!this.partialTreeSender)return;for await(let r of this.partialTreeSender.drainChunks(e)){if(e.aborted||this.chunkSessionId!==j||this.previousRenderScope!==t)break;let o={partialTreeUpdate:r,timestamp:Date.now()};this.partialTreeSender.hasMoreChunks()?this.sendSandboxUpdate(o,void 0):(o.loadedSomeUserData=this.engine.stores.loadingStore.isDocumentLoaded,this.sendSandboxUpdate(o,this.previousTransform))}this.update(!0)}catch(r){if(r instanceof Error&&r.name==="AbortError")return;throw r}finally{this.log.debug("Chunk draining completed or aborted"),this.chunkSessionId===j&&(this.chunkAbortController=void 0,this.chunkSessionId=void 0)}}updateGroundNodeOverflowSizes(){let j=this.engine.tree.get(this.previousRenderScope);Oi(j);let e=j?.children;if(!e)return;let t=!1;for(let o of e){let n=o.cache,i=this.groundNodeOverflowSizes[o.id];dh(n,i)||(t=!0,this.groundNodeOverflowSizes[o.id]={minX:n.minX,maxX:n.maxX,minY:n.minY,maxY:n.maxY})}let r=Object.keys(this.groundNodeOverflowSizes);if(r.length>e.length){t=!0;let o=new Set(r);for(let n of e)o.delete(n.id);for(let n of o)delete this.groundNodeOverflowSizes[n]}t&&this.command("updateGroundNodeOverflowSizes",this.groundNodeOverflowSizes)}async renderUpdates(j){let e=await this.readyForRenderingPromise;await e.willStartUpdates(),j(),this.update(),await e.waitForCompleteRenderAfterUpdates()}get renderService(){return this.renderServiceIfDiscovered||this.sandbox.renderer||void 0}async measureNodes(j){return this.renderService?.measureNodes(j)}async getFitTextViewBoxes(j){return this.renderService?.getFitTextViewBoxes(j)}async fetchJSON(j){return this.renderService?.fetchJSON(j)}async getComponentRenderingError(j){return this.renderService?.getComponentRenderingError(j)}async preloadFonts(j){return this.renderService?.preloadFonts(j)}async waitUntilPlaceholdersSettled(){await this.renderService?.waitUntilPlaceholdersSettled()}};var E6=class{constructor(j,e){y(this,"log",CA("node-snapshots"));y(this,"engine");y(this,"renderer");y(this,"renderState",{renderNodes:{},transform:[0,0,1],isDarkMode:!1});this.engine=e,this.renderer=new f6(j,{log:this.log.extend("renderer"),engine:this.engine,wantsEngineUpdates:!1,renderState:()=>this.renderState})}renderToSVG({nodeId:j}){this.log.debug("preparing SVG");let t=this.engine.tree.getNode(j);if(!t)throw Error(`Node ${j} doesn't exist`);if(!ig(t))throw Error(`Node ${j} must be exportable as SVG`);return ag({node:t,isDarkMode:this.engine.stores.documentSettingsStore.hasDarkAppearance,combinedVariableValueMap:t.cache.getUnsafeCombinedVariableValueMap()})}async prepareNodeSnapshot({nodeId:j,zoom:e=1,pixelRatio:t=1}){this.log.debug("preparing snapshot");let r=this.engine.tree,o=r.getNode(j);if(!o)throw Error(`Node ${j} doesn't exist`);let n=r.getRect(o),i=Jv(r,o),a=mh(r,o),s={...n,x:i.x-a.x,y:i.y-a.y};t!==1&&(e*=t),this.log.debug("rendering");let l=this.engine.stores.scopeStore.active;return await this.renderer.renderUpdates(()=>{let{treeStore:c,toolStore:d,scopeStore:u,modulesStore:k,documentSettingsStore:m,propertiesPanelStore:I,overlayStore:$,selectionStore:F,effectStore:S}=this.engine.stores;this.renderState.renderScope=c.treeIndex.getScopeIdFor(o.id),this.renderState.renderNodes={[o.id]:s},this.renderState.transform=[0,0,e],this.renderState.isDarkMode=m.hasDarkAppearance,this.renderState.editor={selection:F.ids,nodeInTextEditorId:d.nodeInTextEditorId,nodesInEffectPreview:S.nodesInEffectPreview,nodesInMoveToolRootFontSize:this.engine.getNodesInMoveToolRootFontSize(),activeEffect:S.activeEffect,activeEffectIds:S.activeEffectIds,activeOverlayNodes:$.activeOverlays,dragAndDropPlaceholders:d.dragAndDropPlaceholders,rootFontSize:tE(l,c.tree,k)??null,scopeIdToSelectedCollectionItem:u.scopeIdToSelectedCollectionItem,shouldSetMinHeight:!1,activeLinkStyle:I.activeLinkStyle}}),AA.multiply(AA.atOrigin(a),e)}};function Jv(A,j){if(A.isGroundNode(j))return A.getRect(j);let e=A.getGroundNodeFor(j);return A.getCanvasBoundingRectCached(e)}function gg(){QA({type:"add",variant:"warning",text:"This file format is currently unsupported",key:"image-export-unsupported",icon:"warning",duration:2e3})}function Ig(){QA({type:"add",variant:"error",text:"Please update to the latest version",key:"image-export-not-available",icon:"error",duration:2e3})}async function Rg(A,j){A=A.filter(a=>{for(let s of a.exportOptions)if(s.enabled)return!0;return!1});let e=A.length,t=A[0];B(t,"Node must be defined");let r=s6(t),o=new Set;for(let a of A)for(let s of a.exportOptions)s.enabled&&o.add(s.type);let n=Array.from(o).join(", "),i={key:"export-nodes-progress",progress:{variant:"progress",text:e===1?`${r} is exporting as ${n}`:`${e} layers are exporting as ${n}`},success:{variant:"success",text:e===1?`${r} has been exported`:`${e} layers have been exported`},error:{variant:"error",text:e===1?`Unable to export ${r}`:"Unable to export layers"}};await nh(i,j)}var Qv=CA("export"),f7=$$?"\\":"/",E7=new Set;E7.add("html");E7.add("webp");var Xn=class Xn extends E6{constructor(e){super(new $a(jg.canvas,Ss.export,{width:100,height:100,offscreen:!bt.isOn("sandboxExportDebugging")}),e);y(this,"exportMetrics",new Ba)}static async whenAvailable({toastIfNot:e}={toastIfNot:!1},t){let r=await $a.isAvailable();if(this.isAvailable&&r)return this.shared=this.shared??new Xn(t),this.shared;e&&(Ba.trackError("ServiceChannel miss-match error. Unable to establish a connection."),Ig())}static async exportNodes(e,t){let r=await Xn.whenAvailable({toastIfNot:!0},t);if(B(r,"Expected image exporter to be available"),r.hasUnsupportedFiles(e))return gg();let i=(await r.openSaveDialog(e))?.filePath;i&&await Rg(e,async()=>{await r.exportNodes(e,i)})}hasUnsupportedFiles(e){for(let t of e)for(let r of t.exportOptions)if(E7.has(r.type)&&r.enabled)return!0;return!1}async exportNodes(e,t){let r=[],o=this.getCount(e);for(let a of e)for(let s of a.exportOptions){if(!s.enabled)continue;let l=s.type,c=this.createNamePath(a,s),d=a.id,u=s.scale,k=o===1?this.verifyNamePath(c,t):c;switch(l){case"png":r.push({nodeId:d,pixelRatio:u,type:"image/png",pathname:k,count:o,dialogFilePath:t,p3:this.engine.stores.persistedUserDefaults.p3});break;case"jpg":r.push({nodeId:d,pixelRatio:u,type:"image/jpeg",pathname:k,count:o,dialogFilePath:t,p3:this.engine.stores.persistedUserDefaults.p3});break;case"svg":r.push({nodeId:d,pixelRatio:u,type:"image/svg+xml",pathname:k,count:o,dialogFilePath:t,p3:this.engine.stores.persistedUserDefaults.p3});break;default:EA(l)}}let n;for(let a of r){let s=performance.now();Qv.debug("snapshotting export",a);try{await this.writeToDisk(a),this.exportMetrics.add(a,{durationMs:Math.floor(performance.now()-s),errorReason:null,format:a.type,exportCount:o,success:!0,scope:"selection"})}catch(l){this.exportMetrics.add(a,{durationMs:Math.floor(performance.now()-s),errorReason:"Exporting snapshoting failed",format:a.type,exportCount:o,success:!1,scope:"selection"}),n=l}}let{metrics:i}=await this.renderer.sandbox.collectMetrics();if(this.exportMetrics.mergeElectronMetrics(i),this.exportMetrics.track(),n)throw n}createNamePath(e,t){let r=Ag(s6(e))||"export",o=t.nameExtension.lastIndexOf("/"),n=o>=0?t.nameExtension.slice(0,o+1):"",i=t.nameExtension.slice(o+1),a=t.type;return n+r+i+"."+a}getCount(e){let t=0;for(let r of e)for(let o of r.exportOptions)o.enabled&&t++;return t}async openSaveDialog(e){for(let t of e)for(let r of t.exportOptions)if(r.enabled)return this.renderer.sandbox.openSaveDialog({count:this.getCount(e),pathname:this.createNamePath(t,r)})}verifyNamePath(e,t){let r=e.split("/"),o=r[r.length-1];B(L(o),`Filename must be defined: ${r}`);let n=t.split(f7),i=n[n.length-1];if(B(L(i),`Filename must be defined: ${n}`),o.toLowerCase()!==i.toLowerCase()){let s=r.slice(0,-1).join(f7);return s?s+f7+i:i}return e}async writeToDisk(e){let t=await this.prepareNodeSnapshot(e);if(this.exportMetrics.add(e,{nodeWidth:t.width,nodeHeight:t.height}),e.type==="image/svg+xml"){let r=this.renderToSVG(e);return this.renderer.sandbox.writeToDisk({...e,rect:t,svgString:r})}return this.renderer.sandbox.writeToDisk({...e,rect:t})}async writeToClipboard(e){let t=await this.prepareNodeSnapshot(e);if(this.exportMetrics.add(e,{nodeWidth:t.width,nodeHeight:t.height}),e.type==="image/svg+xml"){let r=this.renderToSVG({nodeId:e.nodeId});return this.renderer.sandbox.writeToClipboard({...e,rect:t,svgString:r})}return this.renderer.sandbox.writeToClipboard({...e,rect:t})}async getImageData(e){let t=await this.prepareNodeSnapshot(e);return e.type==="image/svg+xml"?this.renderToSVG({nodeId:e.nodeId}):this.renderer.sandbox.getImageData({...e,rect:t})}};y(Xn,"isAvailable",B$),y(Xn,"shared");var ga=Xn;var $6=Xj(sC());function $7(A){let j=$e.boundingBox(A),e=A.pathSegments.map(t=>t.merge({x:t.x-j.x,y:t.y-j.y}));return[{pathClosed:A.pathClosed,pathSegments:e},j]}function Fg(A,j,e,t){let r=CA("app:importSVG"),o=A,n,i;if(t&&t.colorable){let m=bi(A,"image/svg+xml").documentElement;if(!m)throw new Error(`Unsupported SVG: ${A}}`);let I=m.getAttribute("fill"),$=!(I&&I.toLowerCase()==="none");if($){if(t.fillType==="linear-gradient"&&t.fillLinearGradient instanceof n$)n={fillType:"linear-gradient",fillLinearGradient:t.fillLinearGradient};else if(t.fillType==="image"&&t.fillImage)n={fillType:"image",fillImage:t.fillImage,fillImageResize:t.fillImageResize,fillImagePixelWidth:t.fillImagePixelWidth,fillImagePixelHeight:t.fillImagePixelHeight};else if(t.fillType==="color"&&L(t.fillColor)){let F=(0,$6.getPaperLazily)(),P=new F.Color(t.fillColor).toCSS(!1);$&&m.setAttribute("style",`fill: ${P}; color: ${P}`);let x=m.getAttribute("stroke");x&&x.toLowerCase()==="currentcolor"&&m.setAttribute("stroke",P)}o=m}}let a=Wv(o);o=a.svgElement,i=a.svgSize;let s=!1,c=(0,$6.getPaperLazily)().project.importSVG(o,{expandShapes:!0,insert:!1,size:e,onError:k=>{r.reportError(k),s=!0;let m=document&&document.getElementsByTagName("body");if(m&&m[0]){let I=m[0].lastElementChild;for(;I&&I.tagName==="svg";)I.remove(),I=m[0].lastElementChild}}});if(s)return null;let d;try{d=yg({item:c,fillOverrides:n,tree:j()})}catch(k){return r.reportError(k),null}let u=d[0];return u?(Fj(u)&&i&&u.set({width:i.width,height:i.height}),j().insertNodes(d).getNode(u.id)):null}function yg({item:A,tree:j,nodes:e=[],parent:t=null,parentAbsolutePosition:r=BA(0,0),fillOverrides:o}){let n=(0,$6.getPaperLazily)();return A instanceof n.Group?Zv({group:A,nodes:e,parent:t,parentAbsolutePosition:r,tree:j,fillOverrides:o}):A instanceof n.PathItem?Yv({item:A,nodes:e,parent:t,parentAbsolutePosition:r,fillOverrides:o}):(console.warn("Unhandled Paper item:",A),e)}function Wv(A){let j=L(A)?bi(A,"image/svg+xml").documentElement:A;if(!j)throw new Error(`Unsupported SVG: ${A}}`);let e,t=j.getAttribute("viewBox"),r=j.getAttribute("width"),o=j.getAttribute("height");if(t){let[n,i,a,s]=t.split(" ");a&&s&&(j.setAttribute("width",a),j.setAttribute("height",s),e={width:parseInt(a),height:parseInt(s)})}else r&&o&&(e={width:parseInt(r),height:parseInt(o)});return Sg(j),{svgElement:j,svgSize:e}}function Sg(A){Xv(A);for(let j of A.children)Sg(j)}function Xv(A){let j=A.getAttribute("rx"),e=A.getAttribute("ry");!j&&!e||j&&e||(j?A.setAttribute("ry",j):e&&A.setAttribute("rx",e))}function Yv({item:A,nodes:j=[],parent:e=null,parentAbsolutePosition:t=BA(0,0),fillOverrides:r}){let o=a$({item:A,parentAbsolutePosition:t}),n=s$(A),i=e?e.id:Hj;if(o.length===1){let s=o[0];B(s,"Path must be defined");let[{pathSegments:l,pathClosed:c},d]=$7(s),u=new ja({parentid:i,pathSegments:l,pathClosed:c,...n,...r,...d});j.push(u)}else if(o.length){let s=Gg(A),l=s.x-t.x,c=s.y-t.y,d=A.fillRule==="evenodd"?3:4,u=new Pl({parentid:i,pathBoolean:d,...n,...r,x:l,y:c,width:s.width,height:s.height});j.push(u),o.forEach(k=>{let[{pathSegments:m,pathClosed:I},$]=$7(k),F=new ja({parentid:u.id,pathSegments:m,pathClosed:I,...r,x:$.x-l,y:$.y-c,width:$.width,height:$.height});j.push(F)})}return j}function Zv({group:A,tree:j,nodes:e=[],parent:t=null,parentAbsolutePosition:r=BA(0,0),fillOverrides:o}){let n=Gg(A),i=t?t.id:Hj,a,s;return i?(a=new UB({parentid:i,x:n.x-r.x,y:n.y-r.y,width:n.width,height:n.height}),s=BA(n.x,n.y)):(a=new Do({parentid:i,left:0,top:0,width:n.x+n.width,height:n.y+n.height,fillEnabled:!1}),s=BA(0,0)),e.push(a),A.children.forEach(l=>{yg({item:l,nodes:e,parent:a,parentAbsolutePosition:s,tree:j,fillOverrides:o})}),e}function Gg(A){let{x:j,y:e,width:t,height:r}=A.bounds;return{x:j,y:e,width:t,height:r}}function AT(A){return ne(A)&&"iconURL"in A}function nz(A){return ne(A.icon)?A.id==="WorkspacePluginsCategory"?!0:AT(A.icon):!1}var jT={DefaultCategory:!0,PluginsCategory:!0,ManagedCollectionPluginsCategory:!0,WorkspacePluginsCategory:!0};function iz(A){return L(A)?Object.hasOwn(jT,A):!1}var eT={FindNodesCategory:!0,PluginsCategory:!0,ManagedCollectionPluginsCategory:!0,WorkspacePluginsCategory:!0};function az(A){return Object.hasOwn(eT,A)}function sz(A){return A?.kind==="item"}function bg(A){if(A!==void 0)switch(A){case 2:return"auto";case 0:return"fixed";case 3:return"fraction";case 1:return"percentage";case 4:return"viewport";case 5:return"fit-image";default:EA(A)}}function Cg(A,{widthType:j,heightType:e},t){if(!xA(A))return;let r=j!==void 0&&A.widthType!==j,o=e!==void 0&&A.heightType!==e;!r&&!o||e0({widthType:bg(j),heightType:bg(e),source:t,nodeType:A.__class,componentId:nA(A)?A.codeComponentIdentifier:void 0})}function Yn(A,j,e=!1){let t={};for(let r in A){let o={...A[r]};"itemsOrder"in o&&Array.isArray(o.itemsOrder)&&e&&(o.itemsOrder=da(o.itemsOrder,j)),t[j.get(r)??r]=o}return t}var B6=class extends Map{get(j){let e=super.get(j);for(;e;){let t=super.get(e);if(t===void 0)break;e=t}return e}};function tT(A,j){if(Fl(A)){if(!A.controls.target?.value)return;let e=j.get(A.controls.target.value);return e?{target:{...A.controls.target,value:e}}:void 0}if(ir(A)){if(!A.controls.variantId?.value)return;let e=j.get(A.controls.variantId.value);return e?{variantId:{...A.controls.variantId,value:e}}:void 0}if(_d(A)){if(!A.controls.overlay?.value)return;let e=j.get(A.controls.overlay.value);return e?{overlay:{...A.controls.overlay,value:e}}:void 0}}function vg(A,j,e,t){let r=nA(j),o={},n=!1,i=yl(j);for(let a in i){let s=r?WA(a):a;if(!pj(A,j,s))continue;let l=i[a];if(!bj(l))continue;let c=[],d=!1;for(let u of l){if(t&&(_d(u)||il(u))){d=!0;continue}let m=tT(u,e);if(!m){c.push(u);continue}c.push({...u,controls:{...u.controls,...m}}),d=!0}d&&(r?o[WA(a)]={type:"eventhandler",value:c}:o[a]=c,n=!0)}n&&j.set(o,A)}function rT(A,j,e){let t={};function r(i){let a=A.get(i);a&&A.linkNodeChangesTo(a,j.id)}let o=YB(j,Y);for(let i of o){if(!pj(A,j,WA(i)))continue;let a=j.getRawControlProp(i);if(a){if(a.type==="slot"&&bj(a.value)){let s=!1,l=a.value.map(c=>{if(!ne(c))return c;let d="reference";if(!L(c[d]))return c;let u=e.get(c.reference);return u?(s=!0,r(u),{...c,[d]:u}):c});if(!s)continue;t[i]={type:"slot",value:l}}else if((a.type===null||a.type==="componentinstance")&&L(a.value)){let s=e.get(a.value);if(!s)continue;t[i]={type:"slot",value:[{id:"first-item",reference:s}]},r(s)}else if(bj(a.value)){let s=!1,l=[];for(let c=0;c<a.value.length;c++){let d=a.value[c];if(!Ps(d)||d.type!==null&&d.type!=="componentinstance"||!L(d.value))continue;let u=Mf(d)?d.id:Jj(),k=e.get(d.value);l.push({id:u,reference:k??d.value}),k&&(r(k),s=!0)}if(!s)continue;t[i]={type:"slot",value:l}}}}if(Bt(t))return;let n=hn(t);j.set(n,A)}function oT(A,j,e){let t={},r=Y.componentForIdentifier(j.codeComponentIdentifier)?.properties;for(let o in r){if(!pj(A,j,WA(o)))continue;let n=r[o];if(n?.type!=="scrollsectionref")continue;let i=j.getRawControlProp(o);if(!i)continue;let a=oE(n,i);if(!a||$A(a)||!L(a.target))continue;let s=e.get(a.target);s&&(t[o]={type:"scrollsectionref",value:{...a,target:s}})}Bt(t)||j.set(hn(t),A)}function nT(A,j){if(eB(A)&&bj(A.appearEffectScrollTargets)){let e=A.appearEffectScrollTargets.map(t=>{if(!t.target||$A(t.target))return t;let r=j.get(t.target);return r?{id:Jj(),variant:t.variant,target:r}:t});A.set({appearEffectScrollTargets:e})}if(AB(A)&&L(A.styleAppearEffectScrollTarget)){let e=j.get(A.styleAppearEffectScrollTarget);e&&A.set({styleAppearEffectScrollTarget:e})}if(jB(A)&&bj(A.styleTransformEffectScrollTargets)){let e=A.styleTransformEffectScrollTargets.map(t=>{if(!t.target||$A(t.target))return t;let r=j.get(t.target);return r?{id:Jj(),style:t.style,target:r}:t});A.set({styleTransformEffectScrollTargets:e})}if(X$(A)&&A.dragEffectConstraintElement){let e=j.get(A.dragEffectConstraintElement);e&&A.set({dragEffectConstraintElement:e})}if(tB(A)&&L(A.textEffectScrollTarget)){let e=j.get(A.textEffectScrollTarget);e&&A.set({textEffectScrollTarget:e})}}function mt(A,j,e,t){if(j=j.draftOrCurrent(),(Gt(j)||DE(j))&&vg(A,j,e,t),nA(j)&&(vg(A,j,e,t),rT(A,j,e),oT(A,j,e)),Zi(j)&&nT(j,e),Gn(j)&&j.formSubmitButtonId){let o=e.get(j.formSubmitButtonId);o&&j.set({formSubmitButtonId:o})}if(EB(j)&&j.dataSourceLoaderId){let o=e.get(j.dataSourceLoaderId);o&&j.set({dataSourceLoaderId:o})}if(Os(j)&&j.collectionRepeatedItemId){let o=e.get(j.collectionRepeatedItemId);o&&j.set({collectionRepeatedItemId:o})}if(fe(j)){let o=Tg(j.dataIdentifier,e);o&&j.set({dataIdentifier:o})}if(hj(j)){let o=j.variables.map(n=>{if(!zs(n))return n;let i=Tg(n.dataIdentifier,e);return i?{...n,dataIdentifier:i}:n});po(j.variables,o)||j.set({variables:o})}Ge(j)&&iT(j,e);let r=FB(A,j,o=>{if(!o.providerId)return;let n=e.get(o.providerId);if(n)return Te(e.get(o.id)??o.id,n)});if(r&&j.set(r),j.children)for(let o of j.children)mt(A,o,e,t);return j}function Tg(A,j){let e=cA(A);if(!fj(e))return null;let t=j.get(e.localIdName);return t?lo(e.type,t,e.exportSpecifier).value:null}function iT(A,j){let e=A.getControlProps();for(let[t,r]of Object.entries(e)){if(r?.type==="collectionreference"&&L(r.value)){let o=j.get(r.value);o&&A.setControlProp(t,{...r,value:o})}if(r?.type==="multicollectionreference"&&!mA(r.value)&&!$A(r.value)){let o=r.value.map(n=>j.get(n)??n);po(r.value,o)||A.setControlProp(t,{...r,value:o})}}}function Zn(A){return A==="/"?"Home":(A=sT(A),A=aT(A),A=Pg(A),A=lT(A),A=A.split(" ").map(Um).join(" "),A)}function aT(A){return A.replace(/-+/gu," ")}function sT(A){return A.replace(bs,"")}var xg=/\s*\/+[/\s]*/gu;function lT(A){return A.replace(xg," / ")}function Pg(A){return A.replace(/^[/\s]+|[/\s]+$/gu,"")}var cT=/\s+/gu,dT=/-+/gu;function Mg(A){if(A==="Home")return"/";let j=A;return j=Pg(j),j=j.replace(xg,"-"),j=j.replace(cT,"-"),j=j.replace(dT,"-"),j=j.toLowerCase(),"/"+j}function mW(A,j){let e=j.instanceIdentifier,t=A.getPersistedModuleByLocalIdentifier(e),r=Y.dataForIdentifier(e)??void 0;return{identifier:e,module:t,entity:r}}function fW(A){return A.annotations?.framerSlug}function EW(A,j="Collection"){return A.name?A.name.toLowerCase().includes("collection")?A.name:`${A.name.trim()} Collection`:j}function uT(A){switch(A.toLowerCase()){case"title":case"name":case"label":return!0;default:return!1}}function pT(A){return Nf(A)&&uT(A.name)}function kT(A){return A.variables.find(pT)}function mT(A,j){if(mA(j))return;let t=A.getControlProp(j.id)?.value||j.initialValue;if(L(t)&&t.length>0)return t}function fT(A){return A.variables.find(Qs)}function ET(A,j){if(mA(j))return;let t=A.getControlProp(j.id)?.value||j.initialValue;if(L(t)&&t.length>0)return t}function _g(A,j){let e=kT(A),t=mT(j,e);if(L(t))return t;let r=fT(A),o=ET(j,r);return L(o)?Zn(o):"Collection Item"}function B7(A){let{ids:j}=A.stores.selectionStore,e=j[0];if(!e)return null;let t=A.tree.getNode(e);if(hj(t))return t;if(Ge(t)){let r=A.tree.getNode(t.parentid);if(hj(r))return r}return null}function $W(A){let j=B7(A);return j?j.id:null}function BW(A){let j=B7(A);return j?j.name:null}function hW(A){let j=A.getContentManagementNode()?.loaded;return j?j.children.length:0}function gW(A){let j=A.getContentManagementNode()?.loaded;return j?j.children.reduce((e,t)=>e+=t.getItemCount(),0):0}function h7(A){return A.type==="richtext"&&L(A.value)}function $T(A,j){let e=cA(A);return t=>{let r=cA(t);if(!(!r||!e)&&(r.kind==="localModuleExport"&&e.kind==="localModuleExport"&&r.localId===e.localId||r.kind==="externalModuleExport"&&e.kind==="externalModuleExport"&&r.moduleId===e.moduleId&&r.exportSpecifier===e.exportSpecifier))return j}}function Dg(A,j){return A.replaceAll(ol,(e,t)=>{let r=j(t);return r?`${bE}="${r}"`:e})}function g7(A,j){let e=A.getControlProps(),t={};for(let[r,o]of Object.entries(e)){if(!h7(o))continue;let n=o.value,i=Dg(n,j),a=HA(n),s=HA(i),l;if(o.valueLocalized){l={};for(let d of Object.keys(o.valueLocalized)){let u=o.valueLocalized[d];if(!u)continue;let k=i!==n,m=u.hash===a&&k;if(!u.value){if(m){l[d]={...u,hash:s};continue}l[d]=u;continue}let I=Dg(u.value,j);l[d]={...u,value:I,hash:m?s:u.hash}}}if(o.value===i&&Br(o.valueLocalized,l))continue;let c={...o,value:i};l&&(c.valueLocalized=l),t[WA(r)]=c}return Object.keys(t).length>0?t:void 0}function Ng(A,j,e){let t=A.getContentManagementNode()?.loaded;if(!t)return;let r=$T(j,e);for(let o of t.children)for(let n of o.getUnsortedChildren()){let i=g7(n,r);i&&n.set(i)}}function BT(A,j){let e=A.getControlProps();for(let t of Object.values(e))if(h7(t)){if(t.value.includes(j))return!0;if(t.valueLocalized){for(let r of Object.keys(t.valueLocalized))if(t.valueLocalized[r]?.value?.includes(j))return!0}}return!1}function IW(A,j){let e=A.getContentManagementNode()?.loaded;if(!e)return!1;for(let t of e.children)for(let r of t.getUnsortedChildren())if(BT(r,j))return!0;return!1}function RW(A){let j=new Set;for(let e of A.getUnsortedChildren()){let t=I7(e);for(let r of t)j.add(r)}return[...j]}function I7(A){let j=new Set,e=A.getControlProps();for(let t of Object.values(e)){if(!h7(t))continue;let r=t.value.matchAll(ol);for(let[,o]of r)Pj(o)&&j.add(o);if(t.valueLocalized)for(let o of Object.keys(t.valueLocalized)){let n=t.valueLocalized[o];if(!n?.value)continue;let i=n.value.matchAll(ol);for(let[,a]of i)Pj(a)&&j.add(a)}}return[...j]}function FW(A,j,e){let t=Eo(A.tree,j);if(!t)return;let r=e??t.getUnsortedChildren()[0];A.stores.scopeStore.select(So,{keepHistory:!1}),A.stores.selectionStore.set(r??t)}function yW(A){let j=B7(A);if(!j)return!1;let e=A.stores.contentManagementStore;return e.multiSelectedItems||e.isCreatingNewItem()?!1:!j.managedByPlugin}function Og(A,j){let e=A.stores.scopeStore.active;return B(Rr(e),"Content management node should be active"),e.children.toSorted(({name:t},{name:r})=>H$(t||"",r||"",j))}function SW(A,j){let e=A.stores.scopeStore.active;Og(A,j).forEach(({id:r},o)=>{A.moveNode(r,e.id,o)})}function GW(A,j){let e=A.stores.scopeStore.active;B(Rr(e),"Content management node should be active");let t=Og(A,j);return e.children.every(({id:r},o)=>t[o]?.id===r)}function h6(A){if(!A)return!1;let j=cA(A);return j?j.kind==="externalModuleExport"||j.kind==="localModuleExport":!1}function g6(A,j){nA(A)&&h6(A.codeComponentIdentifier)&&j(A.codeComponentIdentifier),En(A)&&A.dataIdentifier&&j(A.dataIdentifier),Sn(A)&&h6(A.codeOverrideIdentifier)&&j(A.codeOverrideIdentifier),du(A)&&A.codeOverrides?.forEach(e=>{j(e.identifier)}),Ge(A)&&I7(A).forEach(j)}function I6(A,j){let e={};if(nA(A)&&h6(A.codeComponentIdentifier)){let r=j(A.codeComponentIdentifier);r&&(e.codeComponentIdentifier=r)}if(En(A)&&A.dataIdentifier){let r=j(A.dataIdentifier);r&&(B(Pj(r)),e.dataIdentifier=r)}if(Sn(A)&&h6(A.codeOverrideIdentifier)){let r=j(A.codeOverrideIdentifier);r&&(e.codeOverrideIdentifier=r)}if(du(A)&&A.codeOverrides){let r=!1,o=A.codeOverrides.map(n=>{let i=j(n.identifier);return i?(r=!0,{...n,identifier:i}):n});r&&(e.codeOverrides=o)}if(Ge(A)){let r=g7(A,j);r&&Object.assign(e,r)}if(Object.keys(e).length!==0)return e}function wg(A){return A6(A)||hj(A)}async function Lg(A,j,e){return(await Dl.post(`/web/projects/${e}/assets/duplicate-module`,{moduleId:A,saveId:j})).assets}var Vg=75,hT={mutable:!0,update:0};function Jo(A,j,e,t,r=!1){function o(n,i,a=!1){let s=new n.constructor;s.assign(n,hT,{cache:s.cache,id:s.id}),YE(s)&&(s.itemsOrder=void 0),n.cache.insideVariant=a;let l=Fo(n)?n.getChildrenInVisualOrder():n.children;l&&(s.children=l.map(u=>o(u,s.id,a)));let c={parentid:i},d=I6(n,u=>{let k=cA(u);if(k.kind==="localModuleExport"){let m=j.get(k.localId);if(m)return`${m}:${k.exportSpecifier}`}else if(k?.kind==="externalModuleExport"){let m=e.get(k.moduleId);if(m)return un(k,m).value}});if(d&&Object.assign(c,d),Cj(n)&&!XA(n)&&Object.assign(c,{replicaInfo:void 0,originalid:void 0,...n.replicaInfo.overrides[n.replicaInfo.master],_deleted:void 0}),r&&Object.assign(c,{duplicatedFrom:nl(n.duplicatedFrom,n.id)}),s.assign(c),t){if(t.has(n.id)){let u=t.get(n.id);u&&t.set(u,s.id)}t.set(n.id,s.id),n.originalid&&!t.has(n.originalid)&&t.set(n.originalid,s.id)}return s}return o(A,void 0,XA(A))}function gT(A){let j=new Map;for(let e of A)if(e.type==="local"){let t=e.moduleId;j.set(e.localId,Ke(t,e.saveId,e.file).value)}return j}async function Kg(A){let j=new Map;for await(let e of A)if(e.type==="local"&&e.moduleType==="css"){let t=await Jg({moduleId:e.moduleId,saveId:e.saveId}),{__treeSerializationVersion:r,...o}=t,n=r||Vg,{root:i}=Od({root:o,version:n}),a=hu(i);be(a)&&j.set(a.id,a)}return[...j.values()]}function Hg(A,j,e){let t=gT(e.imports),r=new Map,o=[];for(let n of A.walk())g6(n,i=>{let a=cA(i);if(fj(a)){let s=t.get(a.localId);if(!s)return;let{moduleId:l,saveId:c,file:d}=cA(s);a=um(a,l,c,d)}if(a.kind==="externalModuleExport"){let s=j.getPersistedModuleByGlobalId(a.moduleId);s?r.set(a.moduleId,s.localId):o.push(a)}});return{identifiers:o,localIdsToExternalIdentifiers:t,externalModuleIdsToLocalIds:r}}async function Jg({moduleId:A,saveId:j}){try{return await(await fetch(`${ht().modulesCDN}/${A}/${j}/tree.json`)).json()}catch(e){LA(e)}}async function Ug(A,j){let[e,t]=await Promise.all([Jg(j),A.stores.modulesStore.getModuleDependencies(j)]);B(e,"Can't get tree.json for module identifier"),B(t,"Can't get dependencies for module identifier");let{__treeSerializationVersion:r,...o}=e,n=r||Vg,{root:i}=Od({root:o,version:n}),a=hu(i);return B(wg(a),"Node should be un-linkable."),{node:a,dependencies:t}}async function Qg(A,j,e){let t=A.remoteDocument?.projectId;if(t&&j.assets.length>0)try{let r=await Lg(e.moduleId,e.saveId,t);A.stores.assetStore.assetService?.addAssets(r)}catch{}}function F7(A){if(!YA(A)||_A(A))return 0;let j=0,e=A.children.length;return j+=e,A.children.forEach(t=>{j+=F7(t)}),j}function zg(A,j,e,t){let r=t6(e,Y),o=new Map(Object.entries(r)),n=new Map;n.set(t,o);let i={};for(let a of A.walk()){let s=vl(j,t,a,n);s&&(i[a.originalid??a.id]=s)}return i}function Wg(A){let{left:j,top:e,right:t,bottom:r,centerAnchorX:o,centerAnchorY:n,constraintsLocked:i,width:a,widthType:s,height:l,heightType:c,aspectRatio:d,name:u,...k}=A;return k}function Xg(A){let j=Y.reactComponentForIdentifier(A.codeComponentIdentifier);if(!j)return;let e={},t=Object.keys(j.properties);for(let r of t){let o=j.properties[r];if(!o||o.type!=="eventhandler")continue;let n=A.getRawControlProp(r);if(!n)continue;let{value:i}=n;!Array.isArray(i)||i.length===0||(e[r]=i)}return e}function R6(A,{opacity:j,rotation:e}){if($A(j))A.opacity=j;else if(A?.opacity||j){let t=aA(j)?j:1;A.opacity=(A.opacity??1)*t}if($A(e))A.rotation=e;else if(A?.rotation||e){let t=aA(e)?e:0;A.rotation=(A.rotation??0)+t}}function g9(A){return A.every(j=>RA(j)||ae(j)||nA(j))}function I9(A,j){return j?!1:A.every(e=>{if(!RA(e)&&!nA(e)&&!uj(e)||NA(e)||RA(e)&&Tn(e).length===0)return!1;if(nA(e)){let t=e.getSupportedLayout(Y);if(!tt(t.width)||!tt(t.height))return!1}return e.widthType!==2||e.heightType!==2})}function Yg(A,j,e){for(let t of j)if(ae(t)||nA(t))t.set({widthType:2,heightType:2}),ae(t)&&e&&SA("layout_fit_text",{source:e});else if(RA(t)){let r={widthType:2,heightType:2,aspectRatio:null};it(t)||i6(A,t,r),a7(A.tree,"width",t),a7(A.tree,"height",t),mB(t)&&(r.framePreset=null),t.set(r),e&&SA("layout_stack",{layoutType:"stack",source:e})}}function S9(A){return Cj(A)&&!XA(A)}function Zg(A){return DA(A)&&!Nj(A)}function AI(A){return Bj(A)&&!Nj(A)}function F6(A,j){return Ds(j)&&(CA("app").warn("Inserting a symbol is no longer supported."),j.isMaster=!1,j.replicaInfo=null,j.originalid=null),B(!A.tree.has(j.id),"Tree should not contain node with same id as inserted template"),A.stores.scopeStore.insertNode(j),j}function tI(A){let j={width:200,height:200,codeComponentIdentifier:A.identifier,intrinsicWidth:null,intrinsicHeight:null,slotsAreChildNodes:VA.isOn("componentSlotsAreChildNodes")},{defaultProps:e,annotations:t}=A;if(e!==void 0&&(dd(e.width)&&(j.width=e.width,j.intrinsicWidth=e.width),dd(e.height)&&(j.height=e.height,j.intrinsicHeight=e.height)),t){let r=m$(t);r.width&&(j.width=r.width),r.height&&(j.height=r.height)}return new Po(j)}function q9(A){return A.sort(IT)}var jI=new Map;function eI(A){let j=jI.get(A);if(j)return j;let e=A.split("/").map(t=>t.trim()).join("");return jI.set(A,e),e}function IT(A,j){if(A.name===null)return-1;if(j.name===null)return 1;let e=eI(A.name),t=eI(j.name);return e.localeCompare(t,void 0,{numeric:!0})}function V9(A){if(Im(A)&&A.file==="./canvas.tsx"||A.identifier==="framer/Stack")return!1;let j=cA(A.identifier);return fj(j)&&j.type==="screen"?!1:A.type==="component"||A.type==="master"}function K9(A){let j=A.split("/"),e=j[j.length-1];return B(He(e),"Last section is required"),e.trim()}function H9(A,j){return A.name?A.name:j?ut(j):"Unknown"}function J9(A){let j=[];for(let e of Y.getAllLocalModules())e.type==="component"&&e.file===A&&j.push(e);return j}function y6(A,{allowVariants:j,allowLockedNodes:e}={}){return!e&&wr(A)||ye(A)||!j&&(XA(A)||Nj(A))||AI(A)||yi(A)||_A(A)||If(A)?!1:xA(A)}async function rI(A,j,e,t){function r(){ST(A,[j],e,t)}if(!nA(e)){r();return}let o=cA(e.codeComponentIdentifier);if(!o||o.kind!=="externalModuleExport"){r();return}await A.stores.modulesStore.addExternalModulesToProject([o],{onTreeUpdate:r})}function RT(A,j,e){if(!Li(j))return;let t=A$(A.tree,j);if(!dA(t))return;B(t.isLoaded(),"smart component must be loaded"),e.set({formSubmitButtonId:j.id});let r=t.getPrimaryVariant();t.getReplicaVariants().forEach(o=>{yA.resetOverridesByProperty(A.tree,o,o,["htmlTag","link"])}),Y$(r)&&r.set({htmlTag:"button",link:void 0})}function FT(A,j,e){if(!nA(A)||!nA(j)||!A.cache.formContainerAncestorId)return;let t=e.tree.get(A.cache.formContainerAncestorId);Gn(t)&&RT(e,j,t)}function yT(A,j,e){let t=w$(e.tree,A);t&&W$(A,t)&&t.set({dataSourceLoaderId:j.id})}function ST(A,j,e,t){let r={},o=new Set;j.forEach(n=>{let i=null;if(Bj(n)){if(!Ue(n))return;let k=Ct(A.tree,n),m=yA.getReplicaForTemplateNode(A.tree,n);if(!k||!m||!XA(m))return;n=k,i=m}let a=F6(A,e);FT(n,a,A),yT(n,a,A);let s=A.tree.getNodeParent(n),l=s||A.tree.getScopeNodeFor(n)||A.stores.scopeStore.active,c=l.children.indexOf(n),d=n6(A.tree,n,a,l);if(a.set(d),s&&Ae(n)&&Tr(a)){a.set(xr(n));let k=new B6([[n.id,a.id]]);mt(A.tree,s,k,Pe(s)||cl(s)),o.add(a.id)}if(nA(a)&&bT(n,a,new Set(Object.keys(d))),Cj(n)&&!XA(n)&&nA(a)&&GT(A,n,a),CT(A,l,n,a),YA(n))for(let k of n.children)Pe(k)&&A.moveNode(k.id,a.id);A.deleteNode(n.id),A.moveNode(a.id,l.id,c);let u=vT(A.tree,n,a);xA(a)&&u&&(t?A.tree.current(a)?.set({left:u.left,right:u.right,top:u.top,bottom:u.bottom,centerAnchorX:u.centerAnchorX,centerAnchorY:u.centerAnchorY}):A.tree.current(a)?.set(u)),i?r[n.id]=Qe(i.id,a.id):r[n.id]=a.id});for(let n of A.stores.selectionStore.ids)o.add(r[n]??n);A.stores.selectionStore.set(Array.from(o))}function GT(A,j,e){if(XA(j))return;let t=e.getLocalSmartComponentNodeId();if(!t)return;let r=A.tree.getNode(t);if(!(!r||!dA(r))&&r.originalSymbolId===j.replicaInfo.master){for(let o of j.walk())if(!(!fB(o)||!o.isTarget)&&o.originalid){if(RA(o)&&o.fillType==="image"&&L(o.fillImage)){let n=e.getRawControlProp(`symbol_${o.originalid}`);n&&n.type==="image"&&(n.value=o.fillImage)}else if(yi(o)){let n=e.getRawControlProp(`symbol_${o.originalid}`);n&&n.type==="string"&&(n.value=o.styledText.text)}}}}function bT(A,j,e){let t;A:for(let o of A.walk()){if(!Gt(o)&&!nA(o))continue;let n=Gl(o);for(let[,i]of Object.entries(n))if(t===void 0)t=i;else if(t){t=null;break A}}if(!t)return;let r=Y.componentForIdentifier(j.codeComponentIdentifier);if(r?.properties)for(let o in r.properties){if(e?.has(o)||r.properties[o]?.type!=="eventhandler")continue;let i={type:"eventhandler",value:t};j.set({[WA(o)]:i});return}}function CT(A,j,e,t){let r=j?Fi(j):null;if(!r||!_j(r))return;let o=A.tree.getSmartComponentNodeFor(r);if(o)for(let n of o.getReplicaVariants()){let i=n.replicaInfo;if(!(e.id in i.overrides))continue;let a={...i};a.overrides={...a.overrides};let s={},l=a.overrides[e.id];for(let c in l){let d=l[c];if(c==="_deleted"){if(!bj(d))continue;let u=d.filter(k=>k in t);u.length&&(s._deleted=u)}else c in t&&(s[c]=d)}delete a.overrides[e.id],a.overrides[t.id]=s,A.tree.current(n)?.set({replicaInfo:a})}}function vT(A,j,e){if(!xA(j)||!xA(e))return;let t=j.constraintValues();if(Io(j)&&Io(e)&&(vE(j)&&(t.gridItemFillCellWidth=!0),CE(j)&&(t.gridItemFillCellHeight=!0)),!nA(e))return t;if(E$(j)){let r=e.getSupportedLayout(Y),o=A.getRect(j);j.widthType===2&&!tt(r.width)&&(t.widthType=0,t.width=o.width),j.widthType===5&&(t.widthType=tt(r.width)?2:0),j.heightType===2&&!tt(r.height)&&(t.heightType=0,t.height=o.height),j.heightType===5&&(t.heightType=tt(r.height)?2:0)}return t}function oI(A){return gm(A)?tI(A):null}var nI=Xj(Td());function iI(A){let j={};for(let e of A.walk()){let t={};Xe(e)&&(t.strokeDashArray=e.strokeDashArray,t.strokeDashOffset=e.strokeDashOffset,aj(e.strokeWidth)||(t.strokeWidth=e.strokeWidth)),fo(e)&&(t.boxShadows=e.boxShadows),Nr(e)&&(t.radius=e.radius),ho(e)&&(t.radiusTopLeft=e.radiusTopLeft,t.radiusTopRight=e.radiusTopRight,t.radiusBottomRight=e.radiusBottomRight,t.radiusBottomLeft=e.radiusBottomLeft),Ci(e)&&(t.pathSegments=e.pathSegments),st(e)&&e.fillType==="image"&&e.fillImageResize==="tile"&&(t.fillImageTileSize=e.fillImageTileSize??1),j[e.id]=t}return(0,nI.Map)(j)}function y7(A,j,e){j.forEach((t,r)=>{let o=A.getNode(r);if(!o)return;let n={};Xe(o)&&(aA(t.strokeWidth)&&(n.strokeWidth=Dj(t.strokeWidth*e,2)),L(t.strokeDashArray)&&(n.strokeDashArray=xT(t.strokeDashArray,e)),aA(t.strokeDashOffset)&&(n.strokeDashOffset=Dj(t.strokeDashOffset*e,2))),Tf(o)&&ef(t.boxShadows)&&(n.boxShadows=TT(t.boxShadows,e)),Nr(o)&&(aA(t.radius)&&(n.radius=Dj(t.radius*e,2)),aA(t.radiusTopLeft)&&(n.radiusTopLeft=Dj(t.radiusTopLeft*e,2)),aA(t.radiusTopRight)&&(n.radiusTopRight=Dj(t.radiusTopRight*e,2)),aA(t.radiusBottomRight)&&(n.radiusBottomRight=Dj(t.radiusBottomRight*e,2)),aA(t.radiusBottomLeft)&&(n.radiusBottomLeft=Dj(t.radiusBottomLeft*e,2))),Ci(o)&&t.pathSegments&&(n.pathSegments=o.pathSegments.map((i,a)=>{let l=t.pathSegments[a].radius*e;return i.merge({radius:l})})),st(o)&&aA(t.fillImageTileSize)&&(n.fillImageTileSize=t.fillImageTileSize*e),o.set(n)})}function TT(A,j){if(!(!A||aj(A)))return A.map(e=>xs(e,{x:Dj(e.x*j,2),y:Dj(e.y*j,2),blur:Dj(e.blur*j,2),spread:Dj(e.spread*j,2)}))}function xT(A,j){let e=[],t=A.split(",");for(let r of t){let o=parseFloat(r);if(!aA(o))continue;let n=Dj(o*j,2);e.push(n)}return e.join(", ")}var wX=(A,j)=>{if(A===j)return!0;if(A.length!==j.length)return!1;let e=new Set(A);for(let t of j)if(!e.has(t))return!1;return!0},LX=(A,j,e)=>{let t=[];for(let r of A)S7(j,r,e)!==-1&&t.push(r);return t},aI=(A,j,e)=>{if(!e)return Array.from(new Set([...A,...j]));let t=[...A];for(let r of j)S7(t,r,e)===-1&&t.push(r);return t},qX=(A,j,e)=>A.filter(t=>S7(j,t,e)===-1);function S7(A,j,e){return e?A.findIndex(t=>e(t,j)):A.indexOf(j)}function PT(A,j){let e=[];for(let r of j.segmentSelection){let o=A.getNode(r.id);!o||r.index>=o.pathSegments.length||e.push(r)}let t=j.segmentHandle;if(t){let r=A.getNode(t.id);(!r||t.index>=r.pathSegments.length)&&(t=null)}return{...j,segmentSelection:e,segmentHandle:t}}var sI=class{constructor(j){this.addChanges=j;y(this,"state",{segmentSelection:[],selectionType:0,segmentHandle:null,segmentHovered:null,closestCurve:null,pointRounding:.5,snapConstraint:null})}validateSegmentSelection(j){this.state=PT(j,this.state),this.addChanges("PathSelection")}setSegmentSelection(j,e){this.state={...this.state,segmentSelection:j,selectionType:e},this.addChanges("PathSelection")}toggleSegmentSelection(j,e){this.state.selectionType!==e&&(this.state={...this.state,segmentSelection:j,selectionType:e});let t=j.filter(o=>this.state.segmentSelection.find(n=>o.id===n.id&&o.index===n.index)===void 0),r=this.state.segmentSelection.filter(o=>j.find(n=>n.id===o.id&&n.index===o.index)===void 0);this.state={...this.state,segmentSelection:aI(t,r)},this.addChanges("PathSelection")}setSegmentHandle(j){this.state={...this.state,segmentHandle:j},this.addChanges("PathSelection")}setHoveredSegment(j){this.state={...this.state,segmentHovered:j},this.addChanges("PathSelection")}setClosestCurve(j){this.state={...this.state,closestCurve:j},this.addChanges("PathSelection")}setPathPointRounding(j){this.state={...this.state,pointRounding:j},this.addChanges("PathSelection")}setPathConstraint(j){this.state={...this.state,snapConstraint:j},this.addChanges("PathSelection")}};var Ra=Xj(Td());function cI(A,j){return ca(A,"canDesign")||j.length===0?!1:j.find(e=>!(!Hn(e)&&_r(e)&&!yr(e)&&!e.originalid))===void 0}function BY(A,j,e,t){let r=j.map(o=>b7(A,o,e,t)[0]);A.stores.selectionStore.set(r)}function b7(A,j,e,t){let r=A.tree,o;$u.isBasicShape(j)?o=$u.createPath(j):o=j.calculatedPaths();let n=t$(j,o),i=ya(r,j,o),a=r.newId(),s=$e.boundingBox(n),l=pI(j),c=rB(j);if(l.fillType==="linear-gradient"&&l.fillLinearGradient){l.fillType="linear-gradient";let u=aA(j.rotation)?j.rotation:0;l.fillLinearGradient=l.fillLinearGradient.updated({angle:l.fillLinearGradient.angle+u})}if(n.length===1){let u=n[0];B(u!==void 0,"Expected first path after length === 1 check");let k=$e.offset(u,BA.reverse(s));A.createPath(j.parentid,{id:a,...k,...s,...l,...c})}else{let u=[],k=new Pl({id:a,parentid:j.parentid,pathBoolean:4,...s,...l,...c});u.push(k);for(let m of n){let I=$e.boundingBox(m),$={...I,...BA.subtract(I,s)},F=$e.offset(m,BA.reverse(I)),S=new ja({parentid:a,...$,...F,...l});u.push(S)}A.tree.insertNodes(u)}let d=r.getParent(j.id);if(d!==null&&YA(d)){let u=d.children.indexOf(j);A.moveNode(a,d.id,u)}return A.deleteNode(j.id),t||A.stores.selectionStore.set(a),e===!0&&A.setTool(35),[a,i]}function MT(A){let j={};return A.forEach(e=>{let t=j[e.id]??[];t.push(e.index),j[e.id]=t}),j}function hY(A,j){let e=1/j;return{x:Math.round(A.x*e)/e,y:Math.round(A.y*e)/e}}function gY(A,j){let e=A.getNode(j.id);if(!e||!e.pathSegments)return null;let t=e.pathSegments[j.index];if(!t)return null;let r=j.handle===0?Yj.calculatedHandleIn(t):Yj.calculatedHandleOut(t);return A.convertPointToCanvas(e,r)}function lI(A,j){return j.handle===0?{x:A.handleOutX,y:A.handleOutY}:{x:A.handleInX,y:A.handleInY}}function IY(A,j,e,t,r){let o=A.getNode(j.id),n=o.pathSegments[j.index];return B(n!==void 0,"Expected segment at handleSelector.index"),e=A.convertPointToNode(o,e),e=BA.subtract(e,n),gt.update(o.pathSegments,j.index,i=>{let a=lI(i,j),s=i.handleMirroring==="straight",l=i.handleMirroring;t&&(a=lI(t,j),s=t.handleMirroring==="straight",l=t.handleMirroring),s&&(l="symmetric"),t&&r&&(l==="disconnected"||l==="asymmetric"?l="symmetric":l="disconnected"),l==="symmetric"&&(a=BA.reverse(e));let c=j.handle===0,d=c?e.x:a.x,u=c?e.y:a.y,k=c?a.x:e.x,m=c?a.y:e.y;return i.merge({handleOutX:k,handleOutY:m,handleInX:d,handleInY:u,handleMirroring:l})})}function Fa(A,j,e=!1,t){let r=A.tree,o=(0,Ra.Map)(),n=(0,Ra.Map)();if(!_r(j)&&!_A(j))return{descendantPaths:o,descendantBasicShapes:n};let i={};C7(r,j,i);let a=Object.keys(i);for(let c=0,d=a.length;c<d;c++){let u=a[c];B(u!==void 0,"Expected id at index within loop bounds");let k=i[u];B(k!==void 0,"Expected path for id from Object.keys"),o=o.set(u,k)}let s={};v7(r,j,s,e);let l=Object.keys(s);for(let c=0,d=l.length;c<d;c++){let u=l[c];B(u!==void 0,"Expected id at index within loop bounds");let k=s[u];B(k!==void 0,"Expected points for id from Object.keys"),n=n.set(u,k)}return n.forEach((c,d)=>{if(c!==null)return;let u=r.getNode(d);if(!u||!cI(A,[u]))return;let[k,m]=b7(A,u,!1,!0),I=m[0];B(I!==void 0,"Expected pathSegment from flattenShape"),o=o.set(k,I),t&&t.includes(d)&&A.stores.selectionStore.toggle(k)}),{descendantPaths:o,descendantBasicShapes:n}}function dI(A,j){let e=A.tree,t=(0,Ra.Map)(),r=(0,Ra.Map)();if(!_A(j))return{shapeContainerDescendantPaths:t,shapeContainerDescendantBasicShapes:r};let o={};C7(e,j,o,j);let n=Object.keys(o);for(let s=0,l=n.length;s<l;s++){let c=n[s];B(c!==void 0,"Expected id at index within loop bounds");let d=o[c];B(d!==void 0,"Expected path for id from Object.keys"),t=t.set(c,d)}let i={};v7(e,j,i,!1,!1,j);let a=Object.keys(i);for(let s=0,l=a.length;s<l;s++){let c=a[s];B(c!==void 0,"Expected id at index within loop bounds");let d=i[c];B(d!==void 0,"Expected points for id from Object.keys"),r=r.set(c,d)}return r.forEach((s,l)=>{if(s!==null)return;let c=e.getNode(l);if(!c||!cI(A,[c]))return;let[d,u]=b7(A,c,!1,!0),k=u[0];B(k!==void 0,"Expected pathSegment from flattenShape");let I=Hr(e,j,[k])[0];B(I!==void 0,"Expected converted path segments at index 0"),t=t.set(d,{pathSegments:I,pathClosed:!0})}),{shapeContainerDescendantPaths:t,shapeContainerDescendantBasicShapes:r}}function C7(A,j,e,t){if(yr(j)||Gi(j)||_A(j))for(let r of j.children)_r(r)&&C7(A,r,e,t);else if(Hn(j)){let o=ya(A,j,j)[0];B(o!==void 0,"Expected path from convertPathToCanvas");let n=o.pathSegments;if(t){let a=Hr(A,t,[{pathSegments:n,pathClosed:j.pathClosed}])[0];B(a!==void 0,"Expected converted path at index 0"),n=a}e[j.id]={pathSegments:n,pathClosed:j.pathClosed}}}function v7(A,j,e,t=!1,r=!1,o){if(yr(j)||Gi(j)||_A(j))for(let n of j.children){let a=Dr(n)&&aA(n.rotation)&&n.rotation%90!==0||t;_r(n)&&v7(A,n,e,a,r,o)}else if(!Hn(j)&&_r(j))if(t||r)e[j.id]=null;else{let n=AA.pointsAtOrigin(A.getRect(j));e[j.id]=n.map(i=>{let a=A.convertPointToCanvas(j,i);return o?A.convertPointToNode(o,a,!0):a})}}function ya(A,j,e,t=1){let r=[];return Array.isArray(e)?r=e:r=[e],r.map(({pathSegments:o,pathClosed:n})=>({pathSegments:o.map(a=>G7(A,j,a,t,void 0)),pathClosed:n}))}function G7(A,j,e,t=1,r){let o=BA.multiply(A.convertPointToCanvas(j,e,!0,r),t),n=BA.multiply(A.convertPointToCanvas(j,Yj.calculatedHandleIn(e),!0,r),t),i=BA.multiply(A.convertPointToCanvas(j,Yj.calculatedHandleOut(e),!0,r),t),a=BA.subtract(n,o),s=BA.subtract(i,o);return e.merge({...o,handleOutX:s.x,handleOutY:s.y,handleInX:a.x,handleInY:a.y})}function Hr(A,j,e){return e.map(({pathSegments:t})=>t.map(r=>{let o=A.convertPointToNode(j,r),n=A.convertPointToNode(j,Yj.calculatedHandleIn(r)),i=A.convertPointToNode(j,Yj.calculatedHandleOut(r)),a=BA.subtract(n,o),s=BA.subtract(i,o);return r.merge({...o,handleOutX:s.x,handleOutY:s.y,handleInX:a.x,handleInY:a.y})}))}function uI(A,j,e,t){return t.map(({pathSegments:r})=>r.map(o=>{let n={x:o.x,y:o.y},i=A.convertPointFromNodeToDescendant(j,e,n),a=A.convertPointFromNodeToDescendant(j,e,Yj.calculatedHandleIn(o)),s=A.convertPointFromNodeToDescendant(j,e,Yj.calculatedHandleOut(o)),l=BA.subtract(a,i),c=BA.subtract(s,i);return o.merge({...i,handleOutX:c.x,handleOutY:c.y,handleInX:l.x,handleInY:l.y})}))}function T7(A,j){return j.map(({pathSegments:e})=>e.map(t=>{let r=je.convertPoint(A,t),o=je.convertPoint(A,Yj.calculatedHandleIn(t)),n=je.convertPoint(A,Yj.calculatedHandleOut(t)),i=BA.subtract(o,r),a=BA.subtract(n,r);return t.merge({...r,handleOutX:a.x,handleOutY:a.y,handleInX:i.x,handleInY:i.y})}))}function DT(A,j,e){let t=j.updateForPath(e);A.tree.current(j)?.set(t)}function RY(A,j,e,t,r){let o=A.getParent(e.id),n=e.updateForPath(t);j.createPath(o?o.id:Hj,{...n,id:r,rotation:e.rotation,...pI(e)})}function FY(A,j,e){if(e===0)return j;let t=[],r=MT(j),o=Object.keys(r);for(let n=0,i=o.length;n<i;n++){let a=o[n];B(a!==void 0,"Expected id at index within loop bounds");let s=[],l=A.getNode(a),c=r[a];B(c!==void 0,"Expected selectors for id from grouped object");let d=l.pathSegments.length;for(let u=0,k=c.length;u<k;u++){let m=c[u];B(m!==void 0,"Expected value at index of selectors within loop bounds"),s.push(m);let I=m+1;I===d?s.push(0):s.push(I)}for(let u=0,k=s.length;u<k;u++){let m=s[u];B(m!==void 0,"Expected value in indexes array within loop bounds"),t.push({id:l.id,index:m})}}return t}function yY(A,j,e){for(let t of A)if(t.id===j&&t.index===e)return!0;return!1}function SY(A,j,e,t,r,o){let n=ya(A,r,r),a=Hr(A,e,n)[0];B(a!==void 0,"Expected converted path at index 0");let s=a,l=!$e.isLastSegment(e.pathSegments,e.pathClosed,t.index),c=$e.isLastSegment(r.pathSegments,r.pathClosed,o.index);(!l&&c||l&&!c)&&(s=$e.reverse(s));let u;l?u=gt.unshift(e.pathSegments,...s):u=gt.push(e.pathSegments,...s),j.deleteNode(r.id),DT(j,e,{pathSegments:u})}function _T(A,j,e){let t=Ff(A,j);if(e===0){if(t)return BA.subtract(j,A);if(A.handleOutX!==0||A.handleOutY!==0){let o=Yj.calculatedHandleOut(A);return BA.subtract(o,A)}let r=Yj.calculatedHandleIn(j);return BA.subtract(r,A)}else{if(t)return BA.subtract(A,j);if(j.handleInX!==0||j.handleInY!==0){let o=Yj.calculatedHandleIn(j);return BA.subtract(o,j)}let r=Yj.calculatedHandleOut(A);return BA.subtract(r,j)}}function GY(A,j){let e=A.getNode(j.id);if(!e)return null;let t=e.pathSegments[j.segmentIndex];if(!t)return null;let r=e.pathSegments[j.segmentIndex+1];if(!r)return null;let o=G7(A,e,t),n=G7(A,e,r),a=j.projectedTime<.5?Yj.point(o):Yj.point(n),s=_T(o,n,0);return vm(a,BA.add(a,s))}var NT=15;function bY(A,j,e,t){let r=5/t,o=NT/t,n=j.cache.canvasRect;if(n&&(n.x-e.x>r||n.y-e.y>r||e.x-(n.x+n.width)>r||e.y-(n.y+n.height)>r))return null;let i=$e.toBezierJS(j,j),a=A.convertPointToNode(j,e),s=-1,l=1/0,c=0;for(let I=0,$=i.length;I<$;I++){let F=i[I];B(F!==void 0,"Expected bezierCurve at index within loop bounds");let S=F.project(a),P=S.d,x=S.t;P>=l||x===0||x===1||(l=P,s=I,c=x)}if(s===-1)return null;let d=i[s];B(d!==void 0,"Expected curve at shortestIndex");let u=d.get(c),k=d.get(.5),m=BA.distance(a,k)<o;return{id:j.id,segmentIndex:s,distance:l,projectedPoint:u,projectedTime:c,midPoint:k,midPointInRange:m}}function pI(A){return{strokeEnabled:A.strokeEnabled,strokeAlignment:A.strokeAlignment,strokeWidth:A.strokeWidth,strokeColor:A.strokeColor,lineJoin:A.lineJoin,lineCap:A.lineCap,strokeMiterLimit:A.strokeMiterLimit,strokeDashArray:A.strokeDashArray,strokeDashOffset:A.strokeDashOffset,fillEnabled:A.fillEnabled,fillType:A.fillType,fillColor:A.fillColor,fillLinearGradient:A.fillLinearGradient,fillRadialGradient:A.fillRadialGradient,fillImage:A.fillImage,fillImageResize:A.fillImageResize,fillImageOriginalName:A.fillImageOriginalName,fillImagePixelWidth:A.fillImagePixelWidth,fillImagePixelHeight:A.fillImagePixelHeight,fillImagePositionX:A.fillImagePositionX,fillImagePositionY:A.fillImagePositionY,fillImageTileSize:A.fillImageTileSize,boxShadows:A.boxShadows,opacity:A.opacity}}function kI(A,j){let e=A.getRect(j),t={width:e.width,height:e.height};if(!RA(j)||!nt(j))return t;let r=Pn(j);if(r.perSide)r.top&&(t.height-=r.top),r.bottom&&(t.height-=r.bottom),r.right&&(t.width-=r.right),r.left&&(t.width-=r.left);else if(r.top){let o=r.top*2;t.width-=o,t.height-=o}return t.width=Math.max(1,t.width),t.height=Math.max(1,t.height),t}function WY(A,j,e,t){A.getNodesWithTrait(e,gj).forEach(o=>{let{descendantPaths:n}=Fa(j,o,!0,e),i=n.valueSeq().toArray(),a=$e.boundingBox(i),s={...a};t==="horizontal"?(s.x=a.x+a.width,s.width=-a.width):(s.y=a.y+a.height,s.height=-a.height);let l=s.width>-1&&s.width<1?1:s.width,c=s.height>-1&&s.height<1?1:s.height,d=[a.x,a.x+a.width],u=[s.x,s.x+l],k=[a.y,a.y+a.height],m=[s.y,s.y+c],I=l/a.width,$=c/a.height;n.forEach((F,S)=>{let P=F.pathSegments.map(v=>v.merge({x:oe(v.x,d,u,!1),y:oe(v.y,k,m,!1),handleOutX:v.handleOutX*I,handleOutY:v.handleOutY*$,handleInX:v.handleInX*I,handleInY:v.handleInY*$}));B(j.tree===A);let x=A.get(S);if(!x)return;let C={pathSegments:P,pathClosed:x.pathClosed},U={pathSegments:Hr(A,x,[C])[0],pathClosed:x.pathClosed},z=x.updateForPath(U);x.set(z)})})}function XY(A,j,e){let{tree:t}=A;j.forEach(r=>{let o=t.getRect(r),n=e(o);if(n.width&&n.width<1&&(n.width=1),n.height&&n.height<1&&(n.height=1),_A(r))OT(A,r,n);else if(_r(r))wT(A,r,n);else{let i=t.getParent(r.id),a=i?kI(t,i):null,s=r.updateForSize(n,a?{sizing:a,positioning:a,viewport:r.cache.viewportRect,layout:Rt(i)}:null);t.current(r)?.set(s)}})}function OT(A,j,e){let{tree:t}=A,r=t.getParent(j.id),o=r?t.getRect(r):null,n=j.updateForSize(e,o?{sizing:o,positioning:o,viewport:null,layout:Rt(r)}:null);n.sizeToFit=!1,t.current(j)?.set(n)}function wT(A,j,e){let{tree:t}=A,r=t.getRect(j),o=Hs.update(r,e,bn(j)?aA(j.aspectRatio):!1),n={...r,...o},i=n.width>-1&&n.width<1?1:n.width,a=n.height>-1&&n.height<1?1:n.height,s=[r.x,r.x+r.width],l=[n.x,n.x+i],c=[r.y,r.y+r.height],d=[n.y,n.y+a],u=i/r.width,k=a/r.height,{descendantPaths:m,descendantBasicShapes:I}=Fa(A,j);m.forEach(($,F)=>{let P=Hr(t,j,[$])[0].map(v=>v.merge({x:oe(v.x+r.x,s,l,!1)-r.x,y:oe(v.y+r.y,c,d,!1)-r.y,handleOutX:v.handleOutX*u,handleOutY:v.handleOutY*k,handleInX:v.handleInX*u,handleInY:v.handleInY*k})),x=ya(t,j,{pathSegments:P,pathClosed:!0});B(A.tree===t);let C=t.get(F);if(!C)return;let U={pathSegments:Hr(t,C,x)[0],pathClosed:C.pathClosed},z=C.updateForPath(U);C.set(z)}),I.forEach(($,F)=>{if($===null)return;let x=$.map(X=>t.convertPointToNode(j,X)).map(X=>({x:oe(X.x+r.x,s,l,!1)-r.x,y:oe(X.y+r.y,c,d,!1)-r.y})).map(X=>t.convertPointToCanvas(j,X)),C=t.get(F);if(!C)return;let H=x.map(X=>t.convertPointToNode(C,X)),U=AA.boundingRectFromPoints(H),z=AA.center(U),v=ml(C,z),tA={x:v.x-U.width/2,y:v.y-U.height/2,width:U.width,height:U.height};C.set(tA)})}function mI(A,j,e,t,r,o){let{tree:n}=A,i=n.getNode(j.id),a=o.width>-1&&o.width<1?1:o.width,s=o.height>-1&&o.height<1?1:o.height,l=a/r.width,c=s/r.height;e.forEach((d,u)=>{let k=n.getNode(u);if(!k)return;let I={pathSegments:d.pathSegments.map(P=>P.merge({x:P.x*l,y:P.y*c,handleOutX:P.handleOutX*l,handleOutY:P.handleOutY*c,handleInX:P.handleInX*l,handleInY:P.handleInY*c})),pathClosed:d.pathClosed},F={pathSegments:uI(n,i,k,[I])[0],pathClosed:k.pathClosed},S=k.updateForPath(F);k.set(S)}),t.forEach((d,u)=>{if(d===null)return;let k=d.map(F=>({x:F.x*l,y:F.y*c})),m=n.getNode(u),I=k.map(F=>n.convertPointFromNodeToDescendant(i,m,F,!1)),$=AA.boundingRectFromPoints(I);A.tree.get(u)?.set($)})}function fI(A,j,e,t,r,o=n=>n.canvasMatrix()){let n=t.width>-1&&t.width<1?1:t.width,i=t.height>-1&&t.height<1?1:t.height,a=[e.x,e.x+e.width],s=[t.x,t.x+n],l=[e.y,e.y+e.height],c=[t.y,t.y+i],d=n/e.width,u=i/e.height,k=r?{x:0,y:0}:j.rect;j.descendantPaths&&j.descendantPaths.forEach((m,I)=>{let F=(r?m.pathSegments:T7(j.canvasMatrix.inverse(),[m])[0]??[]).map(U=>U.merge({x:oe(U.x+k.x,a,s,!1)-k.x,y:oe(U.y+k.y,l,c,!1)-k.y,handleOutX:U.handleOutX*d,handleOutY:U.handleOutY*u,handleInX:U.handleInX*d,handleInY:U.handleInY*u})),S=r?{pathSegments:F,pathClosed:m.pathClosed}:{pathSegments:T7(j.canvasMatrix,[{pathSegments:F,pathClosed:m.pathClosed}])[0]??[],pathClosed:m.pathClosed},P=A.get(I);if(!P)return;let C={pathSegments:Hr(A,P,[S])[0],pathClosed:P.pathClosed},H=P.updateForPath(C);P.set(H)}),j.descendantBasicShapes&&j.descendantBasicShapes.forEach((m,I)=>{if(m===null)return;let F=(r?m:m.map(v=>je.convertPoint(j.canvasMatrix.inverse(),v))).map(v=>({x:oe(v.x+k.x,a,s,!1)-k.x,y:oe(v.y+k.y,l,c,!1)-k.y})),S=r?F:F.map(v=>je.convertPoint(j.canvasMatrix,v)),P=A.get(I);if(!P)return;let x=S.map(v=>je.convertPoint(o(P).inverse(),v)),C=AA.boundingRectFromPoints(x),H=AA.center(C),U=ml(P,H),z={x:cd(U.x-C.width/2),y:cd(U.y-C.height/2),width:C.width,height:C.height};P.set(z)})}function $I(A,j,e,t,r){if(e!==1)for(let[o]of t.parentsInitialState){let n=t.parentsInitialState.get(o);if(!n)continue;let i=[];for(let a of j)n.selectedNodeIds.has(a.id)&&i.push(a);hI(i,e,KT(A,o,e,t,r),!0)}}function BI(A,j){let e=new Map,t=new Map,r={},o=new Set;for(let n of A.tree.withoutDescendants(j)){let i=n.parentid;if(!i)continue;let a=A.tree.getNode(i);B(a,"Parent must exist"),LT(A,n,t,o),VT(A,n,a,e),r[i]??=[],r[i].push(n)}for(let[n,i]of e){let a=r[n];B(a,"Nodes must exist"),i.selectionBoundingFrame=A.tree.getBoundingFrameForNodes(a)}return{parentsInitialState:e,nodesInitialState:t,nonScalableNodes:o}}function LT(A,j,e,t){for(let{node:r,skipChildren:o}of j.walkWithSkipChildren()){if(e.has(r.id))continue;let n=r.id===j.id,i=A.tree.isInlineVectorNode(r),a=gj(r)&&(i||n);if(!jx(r,n)){t.add(r.id),o();continue}let s=a?Fa(A,r):void 0,l=_A(r)?dI(A,r):void 0,c=_A(r)||a?iI(r.draftOrCurrent()):void 0,d=nA(r)?qT(r):void 0;e.set(r.id,{rect:AA.round(A.tree.getRect(r,!1),2),matrix:A.tree.transformMatrixToNode(r),codeComponentControlProps:d,scalableShapeStylesMap:c,...s,...l}),_A(r)&&o()}}function qT(A){let j=Y.reactComponentForIdentifier(A.codeComponentIdentifier);if(!(!j||!j.properties))return A.getControlProps(j.properties)}function VT(A,j,e,t){let r=t.get(e.id)??{matrix:A.tree.transformMatrixToNode(e).invertSelf(),selectedNodeIds:new Set,selectionBoundingFrame:{x:0,y:0,width:0,height:0}};r.selectedNodeIds.add(j.id),t.set(e.id,r)}function KT(A,j,e,t,r){let o=t.parentsInitialState.get(j);B(o,"Parent must be present in initial state");let n=o.selectionBoundingFrame,i={...n,width:n.width*e,height:n.height*e};return{initialRect:n,resizedRect:i,engine:A,tree:A.tree,initialState:t,anchorPoint:r??{x:.5,y:.5}}}function hI(A,j,e,t){if(A.length===0)return!1;let r=!1;for(let o of A){if(e.initialState.nonScalableNodes.has(o.id))continue;let n=ex(o)&&hI(o.children,j,e,!1),i=HT(o,e,j,n,t);r||=i||n}return r}function HT(A,j,e,t,r){let o=ZT(A,e,r),n=JT(A,j,e,t,r,o);return A.set(o),(n||t)&&zT(A,j,e,r),n}function JT(A,j,e,t,r,o){return uj(A)?UT(A,e,j,r,o):_A(A)?QT(A,e,j,r,o):gj(A)?tx(A,e,j):nA(A)?rx(A,e,j,r,o):Fj(A)?gI(A,e,j,t,r,o):!1}function UT(A,j,e,t,r){let o=!1;if(!A.textFitViewBoxSize){Ax(A,e.tree);let n=A.draftOrCurrent().updateForScale(j);Object.assign(r,n),o=!0}return A.widthType!==2&&(o=Ai("width",A,j,e,!1,t,r)||o),A.heightType!==2&&(o=Ai("height",A,j,e,!1,t,r)||o),o}function QT(A,j,e,t,r){let o=e.initialState.nodesInitialState.get(A.id),n=o?.shapeContainerDescendantPaths,i=o?.shapeContainerDescendantBasicShapes,a=o?.scalableShapeStylesMap;return B(a,"Shape container styles should be available in initial state"),B(n,"Shape container paths should be available in initial state"),B(i,"Shape container shapes should be available in initial state"),mI(e.engine,A,n,i,A,{width:A.width*j,height:A.height*j}),y7(e.tree,a,j),Ai("width",A,j,e,!0,t,r),Ai("height",A,j,e,!0,t,r),!0}function zT(A,j,e,t){if(t)WT(A,e,j);else if(xA(A)){let r={};A.left&&(r.left=uA(A.left,e)),A.right&&(r.right=uA(A.right,e)),A.top&&(r.top=uA(A.top,e)),A.bottom&&(r.bottom=uA(A.bottom,e)),A.set(r)}}function WT(A,j,e){if(!xA(A)&&!hl(A))return;let t=e.initialState.nodesInitialState.get(A.id);B(t,"Node must be present in initial state");let r=A.parentid?e.initialState.parentsInitialState.get(A.parentid):void 0;B(r,"Node parent must be present in the initial state"),r.selectedNodeIds.size===1?XT(A,j,e,t):YT(A,e,t,r)}function XT(A,j,e,t){let r=t.rect,o={...r,width:r.width*j,height:r.height*j},i=gj(A)||_A(A)?A.clone({rotation:0}):A,a=G6(r,e.anchorPoint),s=G6(o,e.anchorPoint),l=je.convertPoint(i.originAdjustedMatrix(null,r),a),c=je.convertPoint(i.originAdjustedMatrix(null,o),s),d=BA.subtract(l,c),u=AA.round(AA.offset(o,d),2);if(xA(A)){let{widthType:k,heightType:m,maxHeight:I,minHeight:$,maxWidth:F,minWidth:S,...P}=Zd(A.constraints(),u,e.tree.getParentSizeInfo(A,e.tree.getParent(A.id)),null,!1);A.set(P)}else A.set({x:u.x,y:u.y})}function YT(A,j,e,t){let r=BA.add(G6(j.initialRect,j.anchorPoint),j.initialRect),o=BA.add(G6(j.resizedRect,j.anchorPoint),j.resizedRect),n=BA.subtract(r,o),i=t.matrix??null,a=EI(i,j.initialRect),s=EI(i,AA.offset(j.resizedRect,n)),l=[a.x,a.x+a.width],c=[s.x,s.x+s.width],d=[a.y,a.y+a.height],u=[s.y,s.y+s.height],k=e.rect,m={x:oe(k.x,l,c,!1),y:oe(k.y,d,u,!1)},I={x:oe(k.x+k.width,l,c,!1),y:oe(k.y+k.height,d,u,!1)},$=AA.round(AA.fromTwoPoints(m,I));if(xA(A)){let F=Zd(A.constraints(),$,j.tree.getParentSizeInfo(A,j.tree.getParent(A.id)),null,!1);delete F.widthType,delete F.heightType,A.set(F)}else A.set({x:$.x,y:$.y})}function EI(A,j){if(!A)return j;let e=je.convertPointsWithClipping(A,AA.cornerPoints(j));return AA.boundingRectFromPoints(e)}function ZT(A,j,e){let t={};return jr(A)&&(t.borderWidth=uA(A.borderWidth,j),t.borderBottom=uA(A.borderBottom,j),t.borderLeft=uA(A.borderLeft,j),t.borderTop=uA(A.borderTop,j),t.borderRight=uA(A.borderRight,j)),fo(A)&&(t.boxShadows=RI(A.boxShadows,j)),Xe(A)&&(t.strokeWidth=uA(A.strokeWidth,j)),Xt(A)&&(t.padding=uA(A.padding,j),t.paddingBottom=uA(A.paddingBottom,j),t.paddingLeft=uA(A.paddingLeft,j),t.paddingTop=uA(A.paddingTop,j),t.paddingRight=uA(A.paddingRight,j)),ho(A)&&(t.radiusBottomLeft=uA(A.radiusBottomLeft,j),t.radiusBottomRight=uA(A.radiusBottomRight,j),t.radiusTopLeft=uA(A.radiusTopLeft,j),t.radiusTopRight=uA(A.radiusTopRight,j)),Nr(A)&&(t.radius=uA(A.radius,j)),Ns(A)&&(t.gridColumnMinWidth=uA(A.gridColumnMinWidth,j),t.gridColumnWidth=uA(A.gridColumnWidth,j),A.gridRowHeightType==="fixed"&&(t.gridRowHeight=uA(A.gridRowHeight,j))),nt(A)&&(t.gap=II(A.gap,j)),No(A)&&(t.formInputFontSize=FI(A.formInputFontSize,j),A.formInputFontLetterSpacingUnit==="px"&&(t.formInputFontLetterSpacing=uA(A.formInputFontLetterSpacing,j)),A.formInputFontLineHeightUnit==="px"&&(t.formInputFontLineHeight=uA(A.formInputFontLineHeight,j))),Xi(A)&&(t.blur=uA(A.blur,j,0),t.backgroundBlur=uA(A.backgroundBlur,j,0)),st(A)&&A.fillType==="image"&&A.fillImageResize==="tile"&&(t.fillImageTileSize=uA(A.fillImageTileSize??1,j)),Cn(A)&&(t.minWidth=S6(A.minWidth,j,e),t.maxWidth=S6(A.maxWidth,j,e),t.minHeight=S6(A.minHeight,j,e),t.maxHeight=S6(A.maxHeight,j,e)),t}function gI(A,j,e,t,r,o){if(!lt(A))return o.width=uA(A.width,j),o.height=uA(A.height,j),!0;let n=!1;return n=Ai("width",A,j,e,t,r,o)||n,n=Ai("height",A,j,e,t,r,o)||n,n}function Ax(A,j){let e=A.getTextStylePresets(!1);for(let t of e){let r=j.getNode(t);be(r)&&A.draftOrCurrent().detachTextStylePreset(r,!1)}}function Ai(A,j,e,t,r,o,n){let i=A==="width"?"widthType":"heightType",a=j[i],s=t.initialState.nodesInitialState.get(j.id)?.rect;B(s,"node should have cached rect");let l=A==="width"?"gridItemFillCellWidth":"gridItemFillCellHeight";if(Io(j)&&j[l]&&o)return n[l]=!1,n[A]=uA(s[A],e),n[i]=0,!0;switch(a){case 0:return n[A]=uA(j[A],e),!0;case 4:return n[A]=uA(j[A],e,4),!0;case 1:return o?(n[A]=uA(j[A],e,4),!0):!1;case 3:return o?(n[A]=uA(s[A],e),n[i]=0,!0):!1;case 2:if(!r){let d=t.tree.getNodeParent(j),k=(d&&It(d)?d.layout:void 0)==="grid"?s[A]:j[A];return n[A]=uA(k,e),n[i]=0,!0}return!1;case 5:return!0;default:EA(a)}}function jx(A,j){let e=nA(A)?A.getSupportedLayout(Y):void 0;return!(e?.width==="auto"&&e?.height==="auto"||NA(A)||Pe(A)&&!j)}function ex(A){return!(!A.children||_A(A)||gj(A))}function uA(A,j,e=2){return aA(A)?Dj(A*j,e):A}function II(A,j){return aA(A)?uA(A,j):L(A)?Zs(A,e=>uA(e,j)):A}function S6(A,j,e){if(mA(A))return A;let[t,r]=JE(A);return Number.isNaN(t)||r==="%"&&!e?A:Cr(uA(t,j,0),r)}function RI(A,j){if(!(!A||aj(A)))return A.map(e=>e.type==="realistic"?e:xs(e,{x:uA(e.x,j),y:uA(e.y,j),spread:uA(e.spread,j)}))}function tx(A,j,e){let t=e.initialState.nodesInitialState.get(A.id);return t?(fI(e.tree,{canvasMatrix:t.matrix,rect:t.rect,descendantPaths:t.descendantPaths,descendantBasicShapes:t.descendantBasicShapes},e.initialRect,e.resizedRect,!0,r=>{let o=e.initialState.nodesInitialState.get(r.id);return B(o,"Basic shape initial state must exist"),o.matrix}),t.scalableShapeStylesMap&&y7(e.tree,t.scalableShapeStylesMap,j),!0):!1}function G6(A,j){return{x:A.width*j.x,y:A.height*j.y}}function rx(A,j,e,t,r){let o=Fj(A)?gI(A,j,e,!1,t,r):!1,n=e.initialState.nodesInitialState.get(A.id)?.codeComponentControlProps;if(!n)return o;for(let i in n){let a=n[i];if(!(!a||aj(a.value)))switch(a.type){case"borderradius":r[WA(i)]={...a,value:nx(a.value,j)};break;case"padding":r[WA(i)]={...a,value:ix(a.value,j)};break;case"gap":r[WA(i)]={...a,value:II(a.value,j)};break;case"boxshadow":r[WA(i)]={...a,value:RI(a.value,j)};break;case"font":r[WA(i)]={...a,value:sx(a.value,j)};break;case"border":r[WA(i)]={...a,value:lx(a.value,j)};break;case"array":case"boolean":case"collectionreference":case"color":case"slot":case"cursor":case"customcursor":case"date":case"enum":case"eventhandler":case"file":case"link":case"linkrelvalues":case"multicollectionreference":case"number":case"object":case"pagescope":case"richtext":case"scrollsectionref":case"string":case"transition":case"fusednumber":case"image":case"trackingid":case"vectorsetitem":break;default:EA(a)}}return o}function ox(A){return A.includes("%")}function nx(A,j){return aj(A)||ox(A)?A:Zs(A,e=>uA(e,j))}function ix(A,j){return aj(A)?A:Zs(A,e=>uA(e,j))}var ax={px:2,rem:3};function FI(A,j){if(mA(A))return A;let[e,t]=aA(A)?[A,"px"]:Ys(A);return Cr(uA(e,j,ax[t]),t)}function sx(A,j){if(mA(A))return A;let e=FI(A.fontSize,j);return{...A,fontSize:e,lineHeight:A.lineHeight?.[1]==="px"?[uA(A.lineHeight[0],j),"px"]:A.lineHeight,letterSpacing:A.letterSpacing?.[1]==="px"?[uA(A.letterSpacing[0],j),"px"]:A.letterSpacing}}function lx(A,j){return!A||$A(A)?A:{...A,borderWidth:uA(A.borderWidth,j),borderTop:uA(A.borderTop,j),borderRight:uA(A.borderRight,j),borderBottom:uA(A.borderBottom,j),borderLeft:uA(A.borderLeft,j)}}var D7;(Er=>{function A(p){return p.some(E=>vI(E))}Er.canCopyNodes=A;function j(p){return p.some(E=>yI(E))}Er.canDuplicateNodes=j;function e(p,E){return A(E)&&i(p,E)}Er.canCutNodes=e;function t(p,E,f=void 0,h=!0){let{documentSettingsStore:R,codeGenerationStore:T,modalStore:M,canvasStore:_,scopeStore:D,treeStore:V}=p.stores,w=V.tree,W=w.withoutDescendants(w.getNodes(E)),bA=D.active,IA=W.length===1?W[0]:void 0;if(!mA(IA)&&Al(IA)&&!NA(IA)&&RA(IA)&&dA(bA)){let gA=w.getRect(IA),xj=la(w,bA,IA,gA),ke=Er.createVariant(p.stores,bA,IA,xj);return ke?new Set([ke.id]):void 0}let ij=W.find(gA=>NA(gA));if(ij){let gA=V.tree.getScopeNodeFor(ij);if(gA&&Q(gA)){M.set({type:"DuplicateWebPage",source:"context_menu",duplicateFromId:gA.id});return}}let TA=W.map(gA=>w.getRect(gA)),FA=new Map,qA=new Set,Rj=[],zA=new Map,KA=new Map,pe=0;if(W.forEach((gA,xj)=>{if(!yI(gA))return;let ke=w.getParent(gA.id);if(Si(gA))if(ke&&nA(ke)){if(!_E(ke,Y))return}else return;for(let mj of gA.walk())RA(mj)&&pe++;let kj=p.cloneNode(gA,!1,!0,FA);if(FA.set(gA.id,kj.id),KA.set(gA.id,kj.id),qA.add(kj.id),zA.set(gA,kj),gA.isMaster)Ju({});else if(gA.replicaInfo){let{master:mj}=gA.replicaInfo,Kj=mj&&w.getNode(mj);Kj&&Ri(Kj)||Ju({})}else lf(gA)&&(!f||f.node&&cf(f.node))&&h0(p,gA,FA);if(f){let mj=w.getParent(gA.id);if(f.node){let Kj=f.node;if(DA(f.node)&&(Kj=Ct(w,f.node),!Kj))return;if(Mr(p.tree,Kj,kj,D.active.id,Y)){let Et=mj&&dj(mj)&&dj(Kj),Ie=mj&&RA(mj)&&RA(Kj);if(Et||Ie)p.moveNode(kj.id,Kj.id,f.insertionIndex);else if(xA(kj)){p.moveNode(kj.id,Kj.id,f.insertionIndex);let cn=w.getParentSizeInfo(kj,Kj,!0,!1),ao=kj.updateForSize(TA[xj]??{},cn);mj||(ao.left=0,ao.top=0),p.tree.current(kj)?.set(ao)}else Er.convertNodeToNewParent(p,kj,mj,f.node,f.insertionIndex,gA);if(Nj(f.node)){j7(p,kj,f.node,Kj,qA,FA);let $t=yA.getReplicaForTemplateNode(w,f.node);if($t){let cn=Qe($t.id,kj.id);KA.set(gA.id,cn)}}}}else Er.convertNodeToNewParent(p,kj,mj,f.node,f.insertionIndex,gA),dj(mj)&&TA[xj]&&p.tree.current(kj)?.set(kj.updateForSize(TA[xj],null))}}),!f){let gA=W.some(ke=>w.isGroundNode(ke)),xj=W.some(ke=>Dr(ke)&&ke.resolveValue("rotation")!==0);if(W.length){let ke=W.map(me=>w.convertFrameToCanvas(me)),kj=AA.merge(...ke),mj,Kj=H(p,E),Et=U(w,W),Ie=W.some(me=>gj(me)),$t=R.lastDuplicationMap,cn=!1;if(!Ie&&Kj&&!Et&&!xj&&$t){let me=$t.keys(),Xc=p.tree.getBoundingFrameForNodes(w.getNodes(me));cn=!0,mj=BA.subtract(kj,Xc)}let ao=mj||{y:0,x:0},Wc=W[0];if(!Ie&&gA&&!cn&&Wc){let me=n0(w,D.active,Wc,kj,W.every(er)?{x:p.tree.getRect(Wc).width}:mj);ao=BA.subtract(me,kj)}for(let me of W){let{x:Xc,y:eC,width:tC,height:rC}=w.getRect(me),Mt=zA.get(me);if(!Mt)continue;let mi=p.tree.getParent(me.id),fi=p.tree.getParent(Mt.id);if(fi&&mi&&Nj(mi)){j7(p,Mt,mi,fi,qA,FA);let im=yA.getReplicaForTemplateNode(w,mi);if(im){let iC=Qe(im.id,Mt.id);KA.set(me.id,iC)}}if(fi&&dj(fi))continue;let om=Xc+ao.x,nm=eC+ao.y,oC=p.tree.getParentSizeInfo(me,mi),nC=Mt.updateForRect({rect:{x:gj(me)?om:Math.round(om),y:gj(me)?nm:Math.round(nm),width:tC,height:rC},parentSizeInfo:oC,constraintsLocked:!1,shouldGuessPinToBottom:!0,shouldGuessPinToRight:Me(p.tree,Mt,fi)});p.tree.current(Mt)?.set(nC),gA&&w.isGroundNode(Mt)&&Rj.push(Mt.rect())}}}R.lastDuplicationMap=KA;let Wj=[];for(let gA of zA.values())mt(w,gA,FA,!1),er(gA)&&Wj.push(gA);if(Wj.length&&T.createVectorSet(Wj),Rj.length){let gA=AA.merge(...Rj);_.scrollToCenter(AA.center(gA))}return h&&qA.size>0&&p.stores.selectionStore.set(qA,{sticky:!0}),pe>0&&SA("layout_frame",{source:"duplication",count:pe}),qA}Er.duplicateNodes=t;function r(p){if(p.length>=50)return!0;let f=p.length;return p.forEach(h=>{f+=F7(h)}),f>=50}function o(p,E,f){let h=p.tree.withoutDescendants(E);function R(){let T=[],M=[];h.forEach(_=>{if(Ue(_))if(dl(p.tree,_))M.push(_);else{let D=p.tree.get(_.originalid);D&&M7(D)&&T.push(D.id)}else M7(_)&&T.push(_.id)}),M.forEach(_=>_.set({visible:!1})),p.deleteNodes(T),p.stores.selectionStore.clear(),p.stores.treeStore.setHighlight(null)}f&&r(h)?p.stores.modalStore.set({type:"Confirmation",variant:"destructive",title:"Delete Selection",description:"You are about to delete the selected layers for all project collaborators.",confirmLabel:"Delete",onConfirm:R,source:"delete_node"}):R()}Er.deleteOrHideNodes=o;function n(p,E){p.tool.deleteAction?p.tool.deleteAction():E&&o(p,E,!0)}Er.deleteAction=n;function i(p,E){return p.tool.deleteAction?!!p.tool.canDelete&&p.tool.canDelete():!!E&&E.some(f=>ux(f))}Er.canDeleteOrHideNodes=i;function a(p,E){return Kt(E)?!1:Bj(E)?Ue(E):!Rn(E)}Er.canRenameNode=a;function s(p,E){return E.filter(f=>a(p,f)).length===1}Er.canRename=s;function l(p,E){return p.stores.chromeStore.contentPanelTab!=="Pages"||p.stores.scopeStore.active.id===p.tree.root.homePageNodeId||E.length!==0?!1:Q(p.stores.scopeStore.active)||Lj(p.stores.scopeStore.active)}Er.canRenameActivePage=l;function c(p,E){if(l(p,E)){let f=p.stores.scopeStore.active.id,h=$o(p.tree,f)?.id||f;Zl(h)}else E.length===1&&(p.stores.chromeStore.layersExpanded=!0,p.stores.chromeStore.contentPanelTab="Layers",p.scheduler.runBeforeNextFrame(()=>{let f=document.querySelectorAll(".layerPanelPlaceholder.active");if(f.length===1&&f[0]){let h=new MouseEvent("dblclick",{view:window,bubbles:!0,cancelable:!0}),R=f[0].parentElement;R&&R.dispatchEvent(h)}}))}Er.rename=c;async function d(p,E){if(!ga.isAvailable)return;let f=CA("generateLayerNames");QA({type:"add",key:"generate-layer-names",text:"Snapshotting layer\u2026",variant:"progress",duration:1/0});let h=await ga.whenAvailable({toastIfNot:!0},p);if(h){let R=await h.getImageData({nodeId:E.id,type:"image/png",pixelRatio:1});f.debug("imageData",R);let T=JSON.stringify(E.toJS()),M="Here is an image and the document structure for a webpage section. Please provide me a nice and short name for every node in this hierarchy to display in the layer panel. Make them specific to their visual content and avoid generic names like 'Frame' or 'Stack'. Also avoid numbering them, as they do not have to be unique.";QA({type:"add",key:"generate-layer-names",text:"Generating layer names\u2026",variant:"progress",duration:1/0});let _=await $0({messages:[{role:"user",content:M},{role:"user",content:R},{role:"user",content:T}],model:"google/gemini-2.0-flash-001",schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"array",items:{type:"object",properties:{nodeId:{type:"string"},name:{type:"string"}},required:["nodeId","name"]}}});QA({type:"add",key:"generate-layer-names",text:"Updating layers\u2026",variant:"progress",duration:1/0}),await p.scheduler.processWhenReadyAsync(()=>{for(let D of _){let{nodeId:V,name:w}=D;if(typeof V!="string"||typeof w!="string")continue;let W=p.tree.get(V);f.debug("nodeId",W,w),W&&W.set({name:w})}}),QA({type:"remove",key:"generate-layer-names"})}}Er.generateLayerNames=d;function u(p,E){let f=p.tree,h=f.withoutDescendants(E),R=ln(h);F(f,E,R)&&Zk(p,R,"front")}Er.sendToFront=u;function k(p,E){let f=p.tree,h=f.withoutDescendants(E),R=ln(h);$(f,E,R)&&Zk(p,R,"back")}Er.sendToBack=k;function m(p,E){let f=p.tree,h=f.withoutDescendants(E),R=ln(h);F(f,E,R)&&Am(p,R,1)}Er.sendForward=m;function I(p,E){let f=p.tree,h=f.withoutDescendants(E),R=ln(h);$(f,E,R)&&Am(p,R,-1)}Er.sendBackward=I;function $(p,E,f){if(Yk(E))return!1;if(!f){let h=p.withoutDescendants(E);f=ln(h)}return jm(p,f,-1)}Er.sendBackwardEnabled=$;function F(p,E,f){if(Yk(E))return!1;if(!f){let h=p.withoutDescendants(E);f=ln(h)}return jm(p,f,1)}Er.sendForwardEnabled=F;function S(p,E){return rA(p,E,0)}Er.addFrame=S;function P(p,E){return rA(p,E,1)}Er.addStack=P;function x(p,E){let f=p.stores.scopeStore.active,h=p.tree.withoutDescendants(E);return h.length>1&&PA(p,h)&&(!Q(f)||h.every(R=>p.tree.isGroundNode(R)))}Er.canWrapInAutoSizedFrame=x;function C(p,E,f){let h=S(p,E);B(h!==void 0,"new frame ID must be defined");let R=p.tree.getNode(h);B(R!==null,"new frame must exist");let T=p.tree.withoutDescendants([R]);return Yg(p,T,f),R}Er.wrapInAutoSizedFrame=C;function H(p,E){let{documentSettingsStore:f,selectionStore:h}=p.stores;if(!f.lastDuplicationMap||!ma(E,h.ids))return!1;let R=[...f.lastDuplicationMap.values()];if(!ma(h.ids,R))return!1;let T=[...f.lastDuplicationMap.keys()];return ma(h.previousIds,T)}function U(p,E){let f=p.getCommonGroundNode(E);return!!f&&dj(f)}function z(p,E,f){if(f!==null){let h=E.flatMap(_=>p.convertCornerPointsToCanvas(_)),R=p.transformMatrixToNode(f),T=(iu(f)?R:je.flatProjectionMatrix(R)).invertSelf(),M=h.map(_=>je.convertPoint(T,_));return AA.roundToOutside(AA.boundingRectFromPoints(M))}return AA.roundToOutside(AA.merge(...E.map(h=>p.convertFrameToCanvas(h))))}Er.getUntransformedBoundingRect=z;function v(p,E,f,h,R,T){let M={top:f.y,left:f.x,width:f.width,height:f.height,fillEnabled:!1},_=R.length===1?R[0]:null;B(_!==void 0,"node must be defined",R),h&&Object.assign(M,tA(E,f,h,_,T));let D=h===null,V=Q(p.stores.scopeStore.active);return M.overflow=D||V?St():"visible",M}function tA(p,E,f,h,R){let T=p.getViewportRect(f),M=p.getRect(f),_=h?p.getParentSizeInfo(h,f):{sizing:M,positioning:M,viewport:T,layout:Rt(f)},D=!!h&&xA(h),V=X(h,R),w=h$({rect:E,parentSizeInfo:_,currentConstraints:V,constraintsLocked:D,shouldGuessPinToBottom:or(p,null,f),shouldGuessPinToRight:Me(p,null,f),floatingPosition:null});return R&&f?{...xn(h,f),...N(h),...w,widthType:nt(f)?3:1,heightType:2,width:1,left:0}:{...xn(h,f),...N(h),...w}}function X(p,E){let h=!!p&&xA(p)?p.constraints():void 0;if(!h)return;let R={...h};return E?(R.widthType===5&&(R.widthType=2),R.heightType===5&&(R.heightType=2)):(Bi(R.widthType)&&(R.widthType=0),Bi(R.heightType)&&(R.heightType=0)),R}function N(p){if(!(!p||!Fj(p)))return{width:p.width,height:p.height}}function K(p,E,f,h,R,T,M,_,D){let V=T?.id??Hj;switch(E){case 0:{let w=p.createFrame(V,{id:f,...D},h);return p.moveNode(w.id,V,M),B(w&&YA(w),"Fail to create a wrapping frame: the created frame should have the `children` field"),_.forEach(W=>{let bA=O(p.tree,W,T,w);p.moveNode(W.id,w.id),p.tree.current(W)?.set(bA)}),w}case 1:{let w=q(p,f,V,D,_,R);return p.moveNode(w.id,V,M),w}case 2:{let w=p.createShapeContainer(V,{id:f,...D});return p.moveNode(w.id,V,M),B(w&&YA(w),"Fail to create a wrapping frame: the created frame should have the `children` field"),_.forEach(W=>{let bA=O(p.tree,W,T,w);p.moveNode(W.id,w.id),p.tree.current(W)?.set(bA)}),w}default:EA(E)}}function q(p,E,f,h,R,T,M){let _=i7(p,R,T),D=p.createNode(dt,{id:E,...h,..._},f,M);B(it(D),"Fail to create stack: the created node should have stack layout");let{stackDirection:V}=_;return H0(p,E,T,R,V),D}function rA(p,E,f){let h=p.tree;if(!PA(p,E))return;let R=h.sortVisually(h.withoutDescendants(E)),T=R[0]?h.getParent(R[0].id):null,M=T&&Nj(T),_=M?p.tree.getNode(T.originalid):T,D=!0,V=M?R.map(FA=>{if(!Bj(FA))return FA;let qA=p.tree.getNode(FA.originalid);return B(qA,"Fail to create a wrapping frame: the original node must exist"),D&&(D=!qA.cache.visible),qA}):R,w=T?.children.findIndex(FA=>R.includes(FA))??-1,W=h.newId(),bA=z(h,V,_),IA=v(p,h,bA,_,V,f===1),ij=K(p,f,W,V[0]?.id,bA,_,w,V,IA),TA=W;if(M){B(T,"Fail to create a wrapping frame: parentNode should not be null"),B(DA(T),"Fail to create a wrapping frame: parentNode should be a replica node"),D&&ua(p,ij,T,_);let FA=yA.getReplicaForTemplateNode(p.tree,T);B(FA,"Fail to create a wrapping frame: replica must exist");let qA=z(h,R,T),Rj=v(p,h,qA,T,R,f===1);ea(h,FA,ij.id,Rj),yA.replicaWithChanges(p.tree,FA.draftOrCurrent());let zA=Qe(FA.id,W);TA=zA;let KA=p.tree.get(zA);if(B(KA&&YA(KA),"Fail to create a wrapping frame: replica wrapping node should exist and should have the `children` field"),f===0||f===2)R.forEach(pe=>{let Wj=O(h,pe,T,KA);p.tree.current(pe)?.set(Wj)});else if(f===1){B(RA(ij),"Fail to create a wrapping frame: the wrapping node should be a FrameNode"),B(it(ij),"Fail to create a wrapping frame: the wrapping node should have stack layout");let pe=i7(p,R,qA);ea(h,FA,ij.id,pe),V0(p,ij,pe.stackDirection,R,qA)}}return p.stores.selectionStore.set(TA),W}function sA(p){return Ti(p)||XA(p)||Ae(p)||Ks(p)||Kt(p)||Si(p)?!1:Bj(p)?Ue(p):!0}function PA(p,E){if(E.length===0)return!1;switch(p.tool.enum){case 0:case 1:case 6:break;default:return!1}if(!E.every(M=>sA(M)))return!1;let f=p.tree,h=f.withoutDescendants(E),[R,T]=h.reduce(([M,_],D)=>{let V=f.isInlineVectorNode(D)||!gj(D)&&!Ae(D),w=h[0]?f.getParentId(h[0]):void 0,W=f.getParentId(D);return[M&&w===W,_&&V]},[!0,!0]);return R&&T}Er.wrappingEnabled=PA;function MA(p){return p.some(Jt)}Er.overflowEnabled=MA;function G(p){p.stores.chromeStore.removePanelOverrides(),p.stores.chromeStore.chromeIsVisible=!0,p.stores.chromeStore.pagesExpanded=!0,p.stores.chromeStore.contentPanelTab="Pages";let E=new Set(p.stores.scopeStore.getDesignPageNodes().map(h=>h.name??"")),f=p.createNode(iB,{name:te("Design",E,{startIndex:E.size+1,omitCountIfFirst:!0})},p.tree.root.id);return p.stores.scopeStore.select(f.id,{keepHistory:!1}),p.scheduler.runAtEndOfFrame(()=>Zl(f.id)),f.id}Er.createDesignPage=G;function wA(p){p.stores.chromeStore.removePanelOverrides(),p.stores.chromeStore.chromeIsVisible=!0,p.stores.chromeStore.pagesExpanded=!0,p.stores.chromeStore.contentPanelTab="Pages";let E=new Set(p.stores.scopeStore.getCanvasPageNodes().map(T=>T.name??"")),f=p.createNode(k$,{name:te("Canvas",E,{startIndex:E.size+1,omitCountIfFirst:!1})},p.tree.root.id),h=kB("iPhone_390_844"),R=p.createFrame(f.id,{width:h.screenWidth,height:h.screenHeight,name:h.title,framePreset:h.id,isScreen:!0});p.stores.codeGenerationStore.updateComponent(R.id).catch(LA),p.stores.scopeStore.select(f.id,{keepHistory:!1}),Wh({pageId:f.id}),p.scheduler.runAtEndOfFrame(()=>Zl(f.id))}Er.createCanvasPage=wA,Er.toggleContentManagementScope=p=>{let{chromeStore:E,selectionStore:f,scopeStore:h,analyticsStore:R,siteSettingsStore:T,codeEditorStore:M}=p.stores,_=E.mainView;if(_===2){h.selectPreviousActiveScope();return}switch(_){case 0:p.cancelTool();break;case 5:E.setLocalizationsVisible(!1);break;case 6:R.close();break;case 4:T.close();break;case 1:M.closeEditor();break;case 3:break;default:EA(_)}let D=p.tree.getContentManagementNode()?.loaded;if(D&&D.children.length>0){let V=h.active,w=f.nodes.at(0);h.select(D.id,{keepHistory:!1});let W=px(p,V,w);if(W){f.set(W);return}if(f.ids.length===0){let bA=D.children[0];bA&&f.set(bA.id)}}else E.toggleContentManagementSidebar()};function b(p,E){p.stores.chromeStore.chromeIsVisible=!0,p.stores.scopeStore.select(So,{keepHistory:!1}),p.stores.selectionStore.set(E)}Er.openContentCollection=b;function cj(p,E,f,h){p.stores.modalStore.set({type:"CreateComponent",source:E,onSuccess:R=>{if(ie(R.name)||ie(p.tree.getEntityRootNode()))return;let T=e6(p.tree,R.name,f??qi);Lo(p.tree,T,R.id),h?.(R)}})}Er.makeComponent=cj;function ue(p,E){return AC(p,E)}Er.canMakeComponent=ue;function ur(p,E){if(E.length!==1||go(p.stores.scopeStore.active))return;let f=E[0];f&&Ds(f)&&yA.canMakeMaster(f)&&p.tree.current(f)?.set({isMaster:!0,replicaInfo:null,originalid:null})}Er.makeMaster=ur;function pr(p,E){for(let f of E)if(f.originalid&&DA(f)&&yA.overrideKeys(p,[f]).size>0)return!0;return!1}Er.canResetToMasterValues=pr;function Tj(p,E){for(let f of E){if(!f.originalid)continue;let R=yA.getReplicaForTemplateNode(p,f);R&&yA.resetOverrides(p,R,f)}}Er.resetToMasterValues=Tj;function kr(p,E,f){for(let h of E){if(!DA(h))continue;let R=yA.getReplicaForTemplateNode(p,h);R&&yA.resetOverridesByProperty(p,R,h,f)}}Er.resetPropertiesToMasterValues=kr;function we(p,E){if(E.length===0)return!1;for(let f of E){if(_j(f))return!1;if(Al(f)){let h=p.tree.getScopeNodeFor(f);if(!h)return!1;if(dA(h)){let{hover:R,pressed:T}=h.getGesturesForTopLevelVariant(f);return!(R||T)}return Q(h)&&!NA(f)}if(Cj(f))return!0}return!1}Er.canDetachFromMaster=we;function At(p,E){let f=new Map;E.filter(Cj).forEach(R=>{if(!y6(R,{allowVariants:!0}))return;let T=R.clone({parentid:null});T.replicaInfo=null,AE(T)&&(T.isVariant=void 0);for(let D of T.walk())D.originalid=null;B(R.id!==T.id),p.tree.insertNode(T);let M=p.tree.getParent(R.id)||p.stores.scopeStore.active,_=M.children.indexOf(R);p.tree.removeNode(R),p.moveNode(T.id,M.id,_),p.tree.current(T)?.set(T.constraintValues()),f.set(R.id,T.id)}),mt(p.tree,p.tree.root,f,!1);let h=p.stores.selectionStore.ids.map(R=>f.get(R)??R);return p.stores.selectionStore.set(h),f}Er.detachFromMaster=At;function jt(p,E){if(!mr(E))return;let f=oo(E);E.filter(wn).forEach(R=>R.set({visible:!f})),p.stores.treeStore.setHighlight(Hj)}Er.visibility=jt;function mr(p){return p.some(wn)}Er.visibilityEnabled=mr;let oo=p=>p.every(E=>E.isVisible());function no(p){return oo(p)?"Hide":"Show"}Er.visibilityTitle=no;function Jc(p,E){let f=p.withoutDescendants(E);if(!ps(f))return;let h=!ks(f),R=new Set;for(let T of f){if(!To(T))continue;let M=T.cache.lockedByParent,_=h===M?void 0:h;T.set({locked:_});for(let D of T.descendants())R.add(D)}for(let T of R)To(T)&&T.locked!==void 0&&T.set({locked:void 0})}Er.toggleLock=Jc;function ps(p){return p.some(To)}Er.toggleLockEnabled=ps;function ks(p){return p.some(E=>To(E)&&wr(E))}function Uc(p){return ks(p)?"Unlock":"Lock"}Er.toggleLockTitle=Uc;function Qc(p){return p.every(er)}Er.copyURLEnabled=Qc;function zk(p){return p.length>0&&p.every(R=>ms(R))?`Remove ${p.length>1?"Viewboxes":"Viewbox"}`:`Remove ${p.length>0&&p.find(R=>!dj(R))===void 0?"Stack":"Frame"}${p.length>1?"s":""}`}Er.removeFrameTitle=zk;function Wk(p,E){zc(p,E)&&Jb(p,E)}Er.removeFrame=Wk;function zc(p,E){if(E.length===0)return!1;let f=p.stores.scopeStore.active.id;return E.every(h=>{if(!RA(h)&&!dj(h)&&!ms(h)||!h.children||h.children.length===0||ye(h)||Cj(h)||Bj(h)&&!Ue(h))return!1;let R=p.tree.getParent(h.id);if(!R)return!0;for(let T of h.children)if(!Mr(p.tree,R,T,f,Y))return!1;return!0})}Er.removeFrameEnabled=zc;function ms(p){return _A(p)&&!er(p)}function Xk(p,E){E.forEach(f=>{let h=p.getParentSizeInfo(f);if(f.intrinsicWidth!==null&&f.intrinsicHeight!==null){let R={width:f.intrinsicWidth,height:f.intrinsicHeight},T=R.width/R.height;if(Ti(f))f.set(Ah(f,R,{aspectRatio:T}),p);else if(bn(f)&&f.aspectRatio){f=f.set({aspectRatio:null},p);let M=f.updateForSize(R,h);M.aspectRatio=T,f.set(M,p)}else f.set(f.updateForSize(R,h),p)}})}Er.resetToIntrinsicSize=Xk;function O(p,E,f,h){let R=p.getRect(E),T=p.getOriginPoint(E),M=p.convertPointToCanvas(E,{x:R.width*T.x,y:R.height*T.y});if(h){let w=p.transformMatrixToNode(h),W=iu(h)?w:je.flatProjectionMatrix(w);M=je.convertPoint(W.inverse(),M)}let _={...R,x:M.x-R.width*T.x,y:M.y-R.height*T.y},D=E.updateForRect({rect:_,parentSizeInfo:p.getParentSizeInfo(E,h),constraintsLocked:!1,shouldGuessPinToBottom:h?or(p,E,h):!0,shouldGuessPinToRight:Me(p,E,h)});if(dj(h)||(D.widthType===3&&(D.widthType=0,D.width=R.width),D.heightType===3&&(D.heightType=0,D.height=R.height)),Dr(E)){let w=E.resolveValue("rotation")-Hb(p,f,h);w!==0&&(D.rotation=w)}return h&&nt(h)&&!pl(E)&&!kl(E)&&(D.top=null,D.left=null,D.bottom=null,D.right=null),Object.assign(D,xn(E,h)),D}Er.convertNodeToNewParentUpdate=O;function Z(p,E,f,h,R=-1,T){let{tree:M}=p,_=E;if(Bj(E)&&(_=Ct(M,E),!_))return null;let D=h;if(h&&DA(h)&&(D=Ct(M,h),!D))return null;let V=f;if(f&&DA(f)&&(V=Ct(M,f),!V))return null;let w=O(M,T??_,Bj(E)?V:f,Bj(E)?D:h);if(p.tree.current(_)?.set(w),p.moveNode(_.id,D?D.id:p.stores.scopeStore.active.id,R),_.id!==E.id){B(f,"Current parent must exist when editing variants");let bA=yA.getReplicaForTemplateNode(M,f);B(bA,"The current parent should located in a variant node");let IA=h?yA.getReplicaForTemplateNode(M,h):null;if(bA.id===IA?.id){let ij=O(M,E,f,h);M.current(E)?.set(ij)}}return{originalNode:_,originalCurrentParent:V,originalNewParent:D}}Er.convertNodeToNewParent=Z;function fA(p,E){if(!fn(p)&&!wr(p)&&(E.push(p.id),!!p.children))for(let f of p.children)fA(f,E)}function GA(p,E){let f=new Set;return E.forEach(h=>{let R=p.getParent(h.id);R&&f.add(R.id)}),f}function tj(p,E){let f=p.withoutDescendants(p.getNodes(E));return GA(p,f).size>0}Er.canSelectAncestor=tj;function Le(p,E){qe(p,E,"parent")}Er.selectParent=Le;function fr(p,E){qe(p,E,"groundNode")}Er.selectGroundNode=fr;function qe(p,E,f){let{tree:h}=p,R=h.withoutDescendants(h.getNodes(E)),T=null;if(f==="groundNode"){let w=new Set(R.map(W=>h.getGroundNodeFor(W).id));w.size>0&&(T=Array.from(w))}else{let w=GA(h,R);w.size>0&&(T=Array.from(w))}if(!T)return!1;let{selectionStore:M,overlayStore:_,treeStore:D}=p.stores;M.set(T,{sticky:!0,switchToLayers:!0});let V=R.length===1?R[0]:null;return V&&_.activeOverlays.has(V.id)&&_.exitEditMode(M,!1),D.setHighlight(null),!0}Er.selectAncestor=qe;function an(p,E){let f=p.tree,h=[];if(p.tool.selectAll){p.tool.selectAll();return}else{let R=E.map(T=>{let M=f.get(T);if(gj(M)){let D=JB(f,M);return D&&f.isGroundNode(D)?D.id:Hj}let _=f.getGroundFrameAncestor(T,!0);return _!==null?_.id:Hj});if(new Set(R).size===1&&R[0]!==null){let T=R[0];h=f.getSubtreeNodes(T).filter(M=>wr(M)?!1:M.id!==T).map(M=>M.id)}if(h.length===0)for(let T of p.stores.scopeStore.active.children)fA(T,h)}p.stores.selectionStore.set(h)}Er.selectAll=an;function sn(p,E){let f=new Set;for(let h of E){let R=p.tree.get(h);if(!R)continue;let T=p.tree.getSiblingsIncludingSelf(R);for(let M of T)f.add(M.id)}p.stores.selectionStore.set(f)}Er.selectAllSiblings=sn;function ge(p,E){return p.tree.getNodes(E).some(f=>YA(f)&&f.children.length>0)}Er.canSelectChildren=ge;function io(p,E){let f=new Set;for(let h of E){let R=p.tree.get(h);if(!R)continue;let T=Tn(R);for(let M of T)f.add(M.id)}f.size>0&&p.stores.selectionStore.set(f)}Er.selectAllChildren=io;function ft(p,E){let f=E.length>0?p.tree.getNodes(E):p.stores.scopeStore.active.getGroundNodes(),h=[];f.map(_=>{ae(_)?h.push(...p.tree.getSiblingsIncludingSelf(_)):h.push(_)});let R=new Set,T=new Set,M=_=>{if(!R.has(_.id)){if(ae(_)&&T.add(_.id),_.children)for(let D of _.children)M(D);R.add(_.id)}};for(let _ of h)M(_);p.stores.selectionStore.set(T)}Er.selectAllTextNodes=ft;function Iw(p,E){let[f]=p.tree.getNodes(E);if(!f||!ae(f))return;let h=[],R=uj(f)?Lt(f.getTextStylePresets(!1)):void 0,T=Lt(f.getFonts(!1)),M=Lt(f.getFontSizes(!1).map(D=>Pi(D)?Cr(...D):aA(D)?Cr(D,"px"):D)),_=Lt(f.getTextColors(!1));if(!(gr(R)||Ve(R))&&!(gr(T)||Ve(T))&&!(gr(M)||Ve(M))&&!(gr(_)||Ve(_))){for(let D of p.stores.scopeStore.active.walk())Nj(D)||!ae(D)||(uj(D)?Lt(D.getTextStylePresets(!1)):void 0)!==R||Lt(D.getFonts(!1))!==T||Lt(D.getFontSizes(!1).map(IA=>Pi(IA)?Cr(...IA):aA(IA)?Cr(IA,"px"):IA))!==M||Lt(D.getTextColors(!1))!==_||h.push(D);p.stores.selectionStore.set(h)}}Er.selectAllTextNodesWithSameFontStyles=Iw;function Rw(p,E){let f=p.tree.getNodes(E);B(E.length===1,"Cannot have multiple layers selected");let[h]=f;if(!h||!RA(h))return;let R=[],M=eE(p.tree,h.id)??p.stores.scopeStore.active;for(let _ of M.walk())RA(_)&&qb(h,_,p.tree)&&R.push(_);p.stores.selectionStore.set(R)}Er.selectAllLayersWithSameFill=Rw;function qb(p,E,f){if(br(p)&&!p.fillEnabled||br(E)&&!E.fillEnabled)return!1;let{fillType:h}=p;if(h!==E.fillType||h===void 0)return!1;switch(h){case"color":return!L(p.fillColor)||!L(E.fillColor)?!1:Gs.equals(e7(p.fillColor,f,void 0),e7(E.fillColor,f,void 0));case"linear-gradient":return p.fillLinearGradient&&E.fillLinearGradient?p.fillLinearGradient.equals(E.fillLinearGradient):!1;case"radial-gradient":return p.fillRadialGradient&&E.fillRadialGradient?p.fillRadialGradient.equals(E.fillRadialGradient):!1;case"conic-gradient":return p.fillConicGradient&&E.fillConicGradient?p.fillConicGradient.equals(E.fillConicGradient):!1;case"image":return p.fillImage===E.fillImage;default:EA(h)}}function Yk(p){return p.some(E=>fl(E)?Bj(E)?!Ue(E):!1:!0)}function ln(p){let E={};return p.forEach(f=>{let h=f.parentid?f.parentid:Ii,R=E[h];R||(R=[],E[h]=R),R.push(f)}),E}function Zk(p,E,f){let h=p.tree;for(let R in E){let T=R===Ii?h.root:h.get(R);if(!T||!E[R])continue;let M=h.sortVisually(E[R]);f==="back"&&M.reverse();let _=f==="front"?-1:0,D=Nj(T)&&at(T);M.forEach(V=>{let w=V.originalid?h.get(V.originalid):V;B(w,"Cannot send",V.id,"backward/forward: original node must exist."),D&&fl(w)?Qd(w.id,T,_):p.tree.moveNodeIndex(w,_)})}}function Vb(p,E,f){let h=p.tree.getParent(f.id);if(!h)return null;let R=h.children.indexOf(f),T=E==="backward"?R-1:R+1,M=h.children[T];if(!M||!Ar(M))return null;let _=p.tree.convertFrameToCanvas(f),D=p.tree.convertFrameToCanvas(M);if(E==="backward")return{..._,y:D.y};let V=D.height-_.height;return{..._,y:D.y+V}}function Kb(p,E,f){let h=Vb(p,E,f),{canvasStore:R}=p.stores;!h||AA.containsRect(R.getCanvasVisibleRectTakingOverlaysIntoAccount(),h)||R.zoomToCenter(h,{zoom:R.zoom,maxZoom:.5,animated:!0})}function Am(p,E,f){let h=p.tree,R=Object.keys(E).length===1;for(let T in E){let M=T===Ii?h.root:h.get(T);if(!M||!YA(M))continue;let _=Nj(M)&&at(M),D=E[T],V=R&&D?.length===1,w=Fo(M)?M.getChildrenInVisualOrder():M.children,W=!1;for(let bA=0,IA=w.length;bA<IA;bA++){let ij=f===1?IA-bA-1:bA,TA=w[ij];if(!D?.includes(TA))W=!0;else if(W)if(_&&fl(TA))B(TA.originalid,"Cannot send nodes: nodes in a replica variant parent must have originalid."),Qd(TA.originalid,M,ij+f);else{V&&a6(h,TA)&&Kb(p,f===-1?"backward":"forward",TA);let qA=TA.originalid?h.get(TA.originalid):TA,Rj=M.originalid?h.get(M.originalid):M;B(qA,"Cannot send node",TA.id,": original child node does not exist."),B(Rj,"Cannot send node",M.id,": original parent node does not exist."),p.moveNode(qA.id,Rj.id,ij+f)}}}}function jm(p,E,f){for(let h in E){let R=h===Ii?p.root:p.get(h);if(!R||!YA(R))continue;let T=E[h],M=Fo(R)?R.getChildrenInVisualOrder():R.children,_=!1;for(let D=0,V=M.length;D<V;D++){let w=f===1?V-D-1:D,W=M[w];if(!T?.includes(W))_=!0;else if(_)return!0}}return!1}function Hb(p,E,f){let h=0,R=0;return E&&(h=p.totalAncestorRotation(E)),f&&(R=p.totalAncestorRotation(f)),Math.round(R-h)}function Fw(p){if(p.length!==1)return!1;let E=p[0];return E&&Hn(E)&&!E.originalid}Er.reversePathDirectionEnabled=Fw;function yw(p,E){let f=p.current(E);f&&f.set({pathSegments:$e.reverse(f.pathSegments)})}Er.reversePathDirection=yw;function Sw(p,E){let f=ka(E,p);return f.length===0?!1:f.every(h=>gj(h)&&!h.originalid&&Tn(h).length>0)}Er.canUngroup=Sw;function Jb(p,E){if(E.length===0)return;let f=p.tree,h=f.sortVisually(ka(E,f)),R=f.withoutDescendants(h),T=[];return R.forEach(M=>{if(!YA(M))return;let _=M,D=null;if(Bj(M)){if(_=Ct(f,M),!_)return;D=yA.getReplicaForTemplateNode(f,M)}let V=f.getParent(M.id);if(M.children.length>0){let w=f.getIndex(M),W=_?.id??M.id;[...Tn(M)].forEach((IA,ij)=>{let TA=IA;if(Bj(IA)&&(TA=Ct(f,IA),!TA))return;if(Pe(TA)){f.removeNode(TA);return}let FA=V,qA=FA;if(FA&&DA(FA)&&(qA=Ct(f,FA),!qA))return;let Rj=Er.convertNodeToNewParentUpdate(f,TA,_,qA);if(p.moveNode(TA.id,qA?.id??null,w+ij,W),p.tree.current(TA)?.set(Rj),W=TA.id,D){let zA=Er.convertNodeToNewParentUpdate(f,IA,M,FA);p.tree.current(IA)?.set(zA)}T.push(IA.id)}),p.deleteNode(_.id)}}),p.stores.selectionStore.set(T),T}Er.ungroup=Jb;function Gw(p){return!p.hasPreferredSize(Y)}Er.canSetDefaultSize=Gw;function bw(p,E){if(E.hasPreferredSize(Y))return;let f=E.getPreferredSize(Y),h={aspectRatio:null};f.width==="auto"?(h.width=1,h.widthType=2):aA(f.width)&&(h.width=f.width,h.widthType=0),f.height==="auto"?(h.height=1,h.heightType=2):aA(f.height)&&(h.height=f.height,h.heightType=0),xA(E)&&aA(E.top)&&aA(E.bottom)&&(h.bottom=null),xA(E)&&aA(E.left)&&aA(E.right)&&(h.right=null),Cg(E,h,"context_menu_default_size_item"),E.set(h,p.tree)}Er.setDefaultSize=bw;function Ub(p,E){if(!p.stores.toolStore.isDefaultToolActive)return!1;let f=ka(E,p.tree);return f.length===0?!1:f.every(h=>gj(h)&&!h.originalid)}Er.canJoinInGroup=Ub;function Cw(p,E){let f=p.tree;if(B(E.length>0,"No nodes"),!Ub(p,E))return;let h=ka(E,f),R=f.sortVisually(f.withoutDescendants(h)),T=R[0],M=T?f.getParent(T.id):void 0,_=M?M.id:Hj,D=T?f.getIndex(T):void 0,V=f.newId();p.createShapeGroup(_,{id:V},D),R.forEach(w=>{let W=Er.convertNodeToNewParentUpdate(f,w,f.getParent(w.id),M);p.moveNode(w.id,V),p.tree.current(w)?.set(W)}),p.stores.selectionStore.set(V)}Er.joinInGroup=Cw;function vw(p,E){if(E.originalid)return null;let f={width:E.width,height:E.height},h=Fg(E.svg,Ml.createEmpty,f,E);if(h){h.name=E.name||E.originalFilename,h.parentid=E.parentid;let R=p.cloneNode(h),T=E.parentid===null,M=T?"rgb(255,255,255)":"transparent",{aspectRatio:_,...D}=E.constraintValues();p.tree.current(R)?.set({...D,width:h.width,height:h.height,fillEnabled:T,fillColor:M});let V=p.tree.getParent(E.id);if(V!==null&&YA(V)){let w=V.children.indexOf(E);p.moveNode(R.id,V.id,w)}return em(p,R.id,f),p.deleteNode(E.id),R.id}return null}Er.convertSVGToShape=vw;function em(p,E,f){let h=p.tree.get(E);if(!_A(h))return;let R=h.width>=h.height?"width":"height",T=R==="width"?"height":"width",M=f[R]/h[R];if(M===1)return;$I(p,[h],M,BI(p,[h]),Qb(h));let _=p.tree.current(h);B(_,"Node must exist after scaling");let D=f[T]-_[T];if(D===0)return;_.set({[T]:f[T]});let V=T==="width"?"x":"y";for(let w of _.children){let W=p.tree.current(w);!W||!hl(W)||W.set({[V]:W[V]+D/2})}}Er.scaleVector=em;function Qb(p){let E=p.constraints(),f=0,h=0;return E.top===!1&&E.bottom===!1?h=.5:E.top===!1&&(h=1),E.left===!1&&E.right===!1?f=.5:E.left===!1&&(f=1),{x:f,y:h}}function Tw(p,E){if(E.length>1)return!1;let f=yA.getReplicaForTemplateNode(p,E[0]);if(!f)return!1;let h=yA.getMaster(p,f);if(fn(h))return!1;for(let R=0,T=E.length;R<T;R++){let M=E[R];if(yA.overrideKeys(p,[M]).size>0)return!0}return!1}Er.canUpdateMasterFromInstance=Tw;function xw({tree:p},E){function f(D,V){for(let w of["id","update","cache","children","mutable","parentid","originalid","isMaster","isVariant","isBreakpoint","replicaInfo","duplicatedFrom","gesture"])delete D[w];if(V)for(let w of yA.positionKeysToIgnore)delete D[w];return D}function h(D,V){let w;if(V)for(let W of yA.positionKeysToIgnore)D[W]!==void 0&&(w=w||{},w[W]=D[W]);return D.gesture&&(w||(w={}),w.gesture=D.gesture),w}let R=yA.getReplicaForTemplateNode(p,E[0]);if(!R)return;let T=yA.getMaster(p,R);if(fn(T))return;let M={...R.replicaInfo.overrides},_={...R.replicaInfo,overrides:M};for(let D=0,V=E.length;D<V;D++){let w=E[D];if(!w?.originalid)continue;let W=p.get(w.originalid),bA=f(w.raw(),Cj(w));W?.set(bA);let IA=h(M[w.originalid]??{},Cj(w));IA?M[w.originalid]=IA:delete M[w.originalid]}R.asDraft().replicaInfo=_}Er.updateMasterFromInstance=xw;function Pw(p,E){let f=tm(p,E);return!f||Ri(f)?0:sf(f)?2:1}Er.canGoToMaster=Pw;let tm=(p,E)=>{let f=null;for(let R=0,T=E.length;R<T;R++){let M=E[R],_=yA.getReplicaForTemplateNode(p,M);if(_){if(!f)f=_.originalid;else if(f!==_.originalid)return null}}if(!f)return null;let h=p.getNode(f);return!h||!ye(h)?null:h};function Mw(p,E){if(E.length===1){let h=p.tree.getNode(E[0]?.originalid);if(!h)return;rm(p,h);return}let f=tm(p.tree,E);f&&(yA.showMaster(p.tree,f),rm(p,f))}Er.goToMaster=Mw;function rm(p,E){let f=p.tree.getScopeNodeFor(E),h=p.stores.scopeStore.active;ye(E)&&yA.showMaster(p.tree,E),f===null&&(p.moveNode(E.id,h.id),f=h),p.stores.scopeStore.select(f.id,{keepHistory:!1}),p.stores.selectionStore.set(E);let R=p.tree.convertFrameToCanvas(E);p.stores.canvasStore.scrollToCenter(AA.center(R))}Er.showNodeOnCanvas=rm;function Dw(p,E){p.exitMode(),p.stores.modalStore.set({type:"CodeFileCreation",source:"main_menu",creationType:"Component",parentId:E})}Er.createCodeComponent=Dw;function _w(p){p.exitMode(),p.stores.modalStore.set({type:"CodeFileCreation",source:"main_menu",creationType:"Override"})}Er.createCodeOverride=_w;function Nw(p,E,f,h,{gesture:R,overrides:T,overrideSize:M,variantName:_,viewportHeight:D,selectAndCenter:V=!0}={}){R&&B(Al(f),"gesture variant should inherit from top level variant");let{treeStore:w,scopeStore:W,selectionStore:bA,canvasStore:IA}=p,ij=E.getPrimaryVariant(),TA=null;if(!R){let Rj=new Set(E.getTopLevelVariants().map(zA=>zA.name??""));_?TA=te(_,Rj):TA=te(NA(f)?"Breakpoint":"Variant",Rj,{startIndex:Rj.size+1,omitCountIfFirst:!1})}if(T||(T=R?void 0:f.replicaInfo?.overrides),TA&&NA(f)){let Rj=v0(w,TA,f);Rj&&(T?T=Ro(Rj,T):T=Rj);let zA={};f.children.forEach(KA=>{if(!at(KA)||xA(KA)&&KA.widthType===2||!(KA.originalid?w.tree.getNode(KA.originalid):KA))return;let Wj=w.tree.getRect(KA);n7(w.tree,KA,Wj,f,h.width,zA)}),T||(T={}),T=Ro(T,zA)}let FA=yA.create(w.tree,ij,{overrides:T,inheritsFrom:R?f.id:void 0,duplicatedFrom:Ni(f)});if(W.insertNode(FA,E.id,-1),!FA)return;let qA={top:h.y,left:h.x,gesture:R,isBreakpoint:Fn(E)?!0:void 0,name:TA};if(D&&(qA.viewportHeight=D),M&&(qA.width=h.width,qA.widthType=0,NA(FA)||(qA.height=h.height,qA.heightType=0)),FA.set(qA),dA(E)){let Rj=_l(R)?"variant":R??"variant";A0({variantId:FA.id,variantType:Rj,componentId:E.id})}else NA(FA)&&SA("breakpoint_create",{scopeId:E.id,breakpointId:FA.id,width:FA.width});return V&&(bA.set(FA.id),IA.scrollToCenter(AA.center(h))),FA}Er.createVariant=Nw;function zb(p,E){return p.filter(f=>Fl(f)?U$(f)!==E:ir(f)?g0(f)!==E:!0)}function Ow(p,E,f){for(let h of E.walk()){let R=Gl(h);for(let[T,M]of Object.entries(R)){let _=zb(M,f);if(_.length!==M.length){if(Gt(h))p.tree.current(h)?.set({[T]:_});else if(nA(h)){let D={type:"eventhandler",value:_};p.tree.current(h)?.set({[T]:D})}}}}}Er.removeActionsWithTarget=Ow;function ww(p,E){let f=p.tree.getParent(E.id)||p.stores.scopeStore.active;if(DA(f))return!1;let h=p.stores.treeStore.getPartialIndexes();return E.codeComponentIdentifier in h.localSmartComponentNameByIdentifier}Er.canDetachVariantInstance=ww;function Lw(p,E,f,h){if(!f)return null;let R={...t6(E,Y),...Xg(E)},T=new Map;f.getTopLevelVariants().forEach(zA=>T.set(zA.id,zA));let M=L(R.variant)&&T.get(R.variant)||f.getPrimaryVariant();B(RA(M),"Variant must be a frame node");let _=p.tree.getParent(E.id)||p.tree.getScopeNodeFor(E)||p.stores.scopeStore.active;if(DA(_))return null;let D=new Map,V=Jo(M,new Map,new Map,D);D.set(E.id,V.id);let w=p.tree.getScopeNodeFor(_);if(Q(w)||dA(w)){let zA=w.getTopLevelReplicaVariants();for(let KA of zA){let pe=Qe(KA.id,E.id),Wj=p.tree.getNode(pe);if(!Wj||!nA(Wj))continue;let gA=Wj.getResolvedControlPropValues(Y).variant;if(!L(gA))continue;if(h){let Ie=h.get(gA);Ie&&(gA=Ie)}let xj=L(gA)?T.get(gA):void 0;if(!xj||!RA(xj)||!XA(xj))continue;let ke=Yn(zg(xj,p.tree,Wj,f.id),D),kj={},mj=D.get(M.id)??M.id;if(Mi(xj)){let Ie=Yn(xj.replicaInfo.overrides,D,!0);Object.assign(kj,{...Ie,[mj]:Wg(Ie[mj]??{})})}let Kj=Ro(ke,kj);if(Mi(xj)){let{opacity:Ie,rotation:$t}=KA.replicaInfo.overrides?.[E.id]||{};R6(Kj[mj]??{},{opacity:Ie,rotation:$t})}else if(KA.replicaInfo.overrides?.[E.id]){let{opacity:Ie,rotation:$t}=xj;R6(KA.replicaInfo.overrides[E.id]??{},{opacity:Ie,rotation:$t})}let Et={};Wj.heightType===2&&(Et.heightType=xj.heightType,Et.height=xj.height),Wj.widthType===2&&(Et.widthType=xj.widthType,Et.width=xj.width),p.tree.current(KA)?.set({replicaInfo:{...KA.replicaInfo,overrides:Ro({...KA.replicaInfo.overrides,[E.id]:{}},{...Kj,[mj]:{...KA.replicaInfo.overrides[E.id],...Kj[mj],...Et}})}})}}let W=n6(p.tree,E,V,_);R6(W,{opacity:$A(M.opacity)?R[M.opacity.id]:M.opacity,rotation:$A(M.rotation)?R[M.rotation.id]:M.rotation});let bA=E.constraintValues(),IA=M.constraintValues();bA.widthType===2&&IA.widthType!==2&&(bA.widthType=IA.widthType),bA.heightType===2&&IA.heightType!==2&&(bA.heightType=IA.heightType),V.set({...bA,...W,..._?xr(E):void 0,isVariant:!1,isMaster:!1,gesture:void 0,replicaInfo:null,originalid:null,name:E.name??ut(E)});let ij=yB(f),TA=new Map([...ij??[],...Object.entries(R)]),FA=new Map;FA.set(f.id,TA);let qA={};for(let zA of V.walk()){if(zA.originalid=null,Q$(zA))for(let[KA,pe]of Object.entries(zA.getActions(Y)))pe&&zA.set({[KA]:pe.filter(Wj=>il(Wj)||Ts(Wj))});if(TA.size>0){let KA=vl(p.tree,f.id,zA,FA,qA);KA&&zA.set(KA)}}B(V.id!==M.id);let Rj=_.children.indexOf(E);p.tree.insertNode(V,_.id,Rj);for(let zA of E.children)Pe(zA)&&p.tree.moveNode(zA,qA[zA.id]??V.id);return mt(p.tree,_,D,Pe(_)||cl(_)),p.deleteNode(E.id),Ae(V)&&p.scheduler.runBeforeNextFrame(()=>{p.stores.overlayStore.showOverlay(p.stores.selectionStore,V,V.parentid)}),V}Er.detachSmartComponentOrWebPageInstance=Lw;function qw(p){Wb(p,{openLibrary:!0})}Er.toggleTeamLibrary=qw;function Wb(p,{openLibrary:E}={}){let{modalStore:f,popoverStore:h}=p.stores;f.active.type==="QuickActions"?f.dismiss():(p.cancelTool(),h.active=0,f.set({type:"QuickActions",source:"main_menu",initialCategory:E?{type:"TeamLibraryCategory"}:void 0}),E?SA("ui_interaction",{page:"main-menu",id:"team-library"}):SA("ui_interaction",{page:"main-menu",id:"quick-actions"}))}Er.toggleQuickActions=Wb;function Vw(p){return!!NA(p)}Er.canCreateBreakpoint=Vw;function Kw(p,E,f,h,R){let{modalStore:T}=p.stores;T.active.type!=="CustomBreakpoint"&&(p.cancelTool(),T.set({type:"CustomBreakpoint",actionType:E,baseNodeId:f,name:h,width:R,source:"undefined"}))}Er.showCustomBreakpointModal=Kw;function Hw(p,E,f,h,R,T,M,_){let D={...h,width:R},V=Er.createVariant(p.stores,f,E,D,{overrideSize:!0,variantName:T,viewportHeight:M,selectAndCenter:_});return B(NA(V),"Created node is not a breakpoint variant"),V}Er.createBreakpoint=Hw;function Xb(p){return p.some(E=>E!==p&&ye(E))}Er.containsMaster=Xb;function Yb(p){return RA(p)||Fr(p)||_A(p)||ae(p)||Ls(p)||kf(p)||qs(p)}Er.nodeTypeCanBePrimaryVariantSource=Yb;function Zb(p,E){return!(!Yb(E)||S0(p,E)||XA(E)||Cj(E)||ye(E)||Xb(E))}Er.canConvertNodeToSmartComponentPrimaryVariant=Zb;function AC(p,E){let f=E.length;if(f===0)return!0;let h=E[0];return B(h,"node must be defined",E),f===1&&Zb(p.tree,h)}Er.canMakeSmartComponent=AC;function jC(p,E){if(E.length!==1)return!1;let h=E[0];if(B(h,"node must be defined",E),!RA(h)||DA(h))return!1;let R=p.tree.get(h.parentid);return Se(R)}Er.canMakeWebPagePrimaryBreakpoint=jC;async function Jw(p,E){if(!jC(p,E))return;let f=E[0];return B(f,"node must be defined",E),p.createWebPage({primaryBreakpointTemplateId:f.id,shouldRemovePanelOverrides:!1,startEditingPageTitle:!1,preferredPath:f.name?Mg(f.name):void 0})}Er.convertNodeToWebPagePrimaryBreakpoint=Jw;function Uw(p,E,f="Template",h,R){let T=new dt({...Jr,...cx(h),isMaster:!0,isVariant:!0,isBreakpoint:!0,widthType:0,heightType:0,width:h?.width??1200,name:h?.name??"Desktop"}),M=new QB;T.addChild(M);let _=te(f,dx(p)),D=new GB({baseVariantId:T.id,name:_});B(D.isLoaded(),"A newly created LayoutTemplateNode must be loaded."),D.addChild(T),p.latestTree().insertNode(D);let V=e6(p,_,R??Vi);return Lo(p,V,D.id),SA("layout_template_create",{source:E}),D}Er.createLayoutTemplate=Uw;function Qw(p,E,f=!0,h=null,R=Jj(),T="context_menu",M=0){let _=new mu({name:E,id:R});if(B(_.isLoaded(),"A newly created VectorSetNode must be loaded"),p.tree.latestTree().insertNode(_),Lo(p.tree,h??vn,_.id),f)for(let V of fx())p.tree.latestTree().insertNode(V,_.id);let D=p.tree.current(_);return B(D,"A newly created VectorSetNode must exist"),p.stores.codeGenerationStore.createVectorSet(D.getVectorSetItems()),SA("vector_set_create",{source:T,items:f?3:M}),_}Er.createVectorSet=Qw;async function zw(p,E,f){let h=p.tree.get(f);if(!Je(h))return;let R=h.isLoaded()?h:await h.load();if(!R)return;let T=R.children.find(er);if(!er(T))return;let M=p.tree.getRect(T);p.scheduler.process(()=>{let _=GI(p,E),D=[],V=br(T)?{fillEnabled:T.fillEnabled,fillType:T.fillType,fillColor:T.fillColor}:void 0;for(let w of _){let W=p.tree.get(w);if(!W)continue;let bA=p.tree.getIndex(W),IA=la(p.tree,R,W,M,M.width),ij=SI(W,IA,V);if(er(ij)){if(p.tree.insertNode(ij,R.id),D.push(ij),em(p,ij.id,M),SA("vector_set_item_create",{source:"context_menu"}),f!==p.stores.scopeStore.active.id){let TA=new Po({...bI(W),codeComponentIdentifier:lo("vector",ij.id,"default").value,width:W.width,height:W.height,widthType:0,heightType:0,slotsAreChildNodes:VA.isOn("componentSlotsAreChildNodes"),name:W.name});p.tree.insertNode(TA,W.parentid,bA)}p.tree.removeNode(W)}}D.length!==0&&(p.stores.scopeStore.select(h.id,{keepHistory:!1}),p.stores.selectionStore.set(D),p.stores.chromeStore.layersExpanded=!0,p.stores.chromeStore.contentPanelTab="Layers",p.stores.codeGenerationStore.createVectorSet(D))})}Er.addToVectorSet=zw;function Ww(p,E,f="Icon Set",h="context_menu"){let R=new mu({name:f});B(R.isLoaded(),"A newly created VectorSetNode must be loaded");let T=GI(p,E),M=0,_=[];for(let D of T){let V=p.tree.get(D);if(!V)continue;let w=p.tree.getRect(V),W=SI(V,{x:M,y:0});if(!er(W))continue;let bA=p.tree.getIndex(V);_.push(W),R.addChild(W),M+=w.width*2;let IA=new Po({...bI(V),codeComponentIdentifier:lo("vector",W.id,"default").value,width:V.width,height:V.height,widthType:0,heightType:0,slotsAreChildNodes:VA.isOn("componentSlotsAreChildNodes"),name:V.name});p.tree.insertNode(IA,V.parentid,bA),p.tree.removeNode(V)}p.tree.latestTree().insertNode(R),Lo(p.tree,vn,R.id),p.stores.codeGenerationStore.createVectorSet(_),p.stores.scopeStore.select(R.id,{keepHistory:!1}),p.stores.selectionStore.set(_),p.stores.chromeStore.layersExpanded=!0,p.stores.chromeStore.contentPanelTab="Layers",SA("vector_set_create",{source:h,items:T.size})}Er.createVectorSetFromNodes=Ww;function Xw(p,E,f,h,R){let T=f.clone({children:[],name:"Vector"}),{scopeStore:M,codeGenerationStore:_,selectionStore:D,canvasStore:V}=p;M.insertNode(T,E.id),B(xA(T),"Vector must be pinnable."),T.set({top:h.y,left:h.x}),_.createVectorSet([T]),D.set(T.id),V.scrollToCenter(AA.center(h)),SA("vector_set_item_create",{source:R})}Er.createVectorSetItem=Xw})(D7||={});var Jr={height:SB,left:0,top:0,layout:"stack",stackDirection:"vertical",stackAlignment:"center",stackDistribution:"start",stackWrapEnabled:!1,gap:0,padding:0,paddingPerSide:!1,paddingLeft:0,paddingBottom:0,paddingTop:0,paddingRight:0,overflow:St()};function cx(A){if(!A||!It(A)||!Xt(A)||!br(A))return;let j=Pn(A);return{gap:A.resolveValue("gap")??Jr.gap,padding:j.perSide?Jr.padding:j.top,paddingPerSide:j.perSide??Jr.paddingPerSide,paddingLeft:j.left??Jr.paddingLeft,paddingBottom:j.bottom??Jr.paddingBottom,paddingTop:j.top??Jr.paddingTop,paddingRight:j.right??Jr.paddingRight,fillEnabled:A.resolveValue("fillEnabled"),fillType:A.resolveValue("fillType"),fillColor:A.resolveValue("fillColor"),fillLinearGradient:A.resolveValue("fillLinearGradient"),fillRadialGradient:A.resolveValue("fillRadialGradient"),fillConicGradient:A.resolveValue("fillConicGradient"),fillImage:aj(A.fillImage)?void 0:A.fillImage,fillImageOriginalName:A.resolveValue("fillImageOriginalName"),fillImageResize:A.resolveValue("fillImageResize"),fillImagePixelWidth:A.resolveValue("fillImagePixelWidth"),fillImagePixelHeight:A.resolveValue("fillImagePixelHeight"),fillImagePositionX:A.resolveValue("fillImagePositionX"),fillImagePositionY:A.resolveValue("fillImagePositionY"),fillImageTileSize:A.resolveValue("fillImageTileSize")}}function dx(A){let j=new Set;return A.root.children.forEach(e=>{!Ej(e)||!e.name||j.add(e.name)}),j}function vI(A){return!(Rn(A)||Ks(A)||Kt(A))}function M7(A){return!(_j(A)||Ks(A)||Kt(A)||Bj(A))}function ux(A){return Ue(A)&&A.isVisible()?!0:M7(A)}function yI(A){return vI(A)?Bj(A)?Ue(A):!0:!1}function Sa(A,j){if(fe(j)){let e=Eo(A.tree,j.dataIdentifier);if(e)return e.id}return null}function px(A,j,e){if(e){let r=Sa(A,e);if(r)return r;for(let o of e.ancestors()){let n=Sa(A,o);if(n)return n}}let t=Sa(A,j);if(t)return t;if(e)for(let r of e.walk()){let o=Sa(A,r);if(o)return o}for(let{node:r,skipChildren:o}of j.walkWithSkipChildren())if(e&&r.id===e.id)o();else{let n=Sa(A,r);if(n)return n}return null}function SI(A,{x:j,y:e},t){if(gj(A)){let r=new Do({...t,isVectorSetItem:!0,width:A.width,height:A.height,left:j,top:e,name:A.name}),o=A.clone({x:0,y:0});return r.addChild(o),r}return A.clone({...t,isVectorSetItem:!0,left:j,top:e})}function GI(A,j){return new Set(j.map(e=>{if(!e)return null;if(_A(e))return e.originalid??e.id;let t=A.tree.getAncestorThatMatches(e,o=>kx(A,o),!0,!0);if(!t)return null;let r=A.tree.getNodeParent(t);return r&&_A(r)?r.originalid??r.id:t.originalid??t.id}))}function kx(A,j){return gj(j)&&A.tree.isRootVectorNode(j)}function bI(A){return xA(A)?{top:A.top,bottom:A.bottom,left:A.left,right:A.right,centerAnchorX:A.centerAnchorX,centerAnchorY:A.centerAnchorY,constraintsLocked:A.constraintsLocked}:{top:A.y,left:A.x}}var mx="rgb(0, 153, 255)",x7={fillType:"color",fillColor:mx,fillEnabled:!0},P7={isVectorSetItem:!0,top:0,width:40,height:40,autoSize:!1},fx=()=>{let A=new Bu({...x7,x:-3,y:-3,width:46,height:46,polygonSides:3,centered:!0,radius:1}),j=new Bu({...x7,x:0,y:0,width:40,height:40,polygonSides:4,centered:!0,radius:1}),e=new WB({...x7,x:2,y:2,width:36,height:36}),t=new Do({...P7,name:"Triangle"});t.addChild(A);let r=new Do({...P7,left:80,name:"Diamond"});r.addChild(j);let o=new Do({...P7,left:160,name:"Oval"});return o.addChild(e),[t,r,o]};function b6(A){let j={},e=A.getPresetsListNode();if(!e)return j;for(let t of e.children)if(!Cj(t)){if(be(t)){let r=TB(t.tag);j[r]??=t.id;continue}if(Ee(t)){j.stylePresetLink??=t.id;continue}if(xe(t)){j.stylePresetInlineCode??=t.id;continue}if(Ft(t)){j.stylePresetImage??=t.id;continue}if(Sr(t)){j.stylePresetBlockquote??=t.id;continue}if(Vs(t)){j.stylePresetTable??=t.id;continue}if($n(t)){let r=_i(t.componentIdentifier);j[r]??=t.id;continue}EA(t)}return j}function deA(A,j){let e=b6(A),t={};for(let r in e){let o=j[r];A.get(o)||(t[r]=e[r])}Object.keys(t).length>0&&j.set(t)}function ueA(A,j,e="",t={}){let r=document.createElement(j);r.innerText=e;let o=xl(A,j);if(o)$E(r,o.id);else{let n=d$[j],i=n.fontSize,a;Xf(i)?a=Ys(i):aA(i)&&(a=[i,"px"]),mE(r.style,kE.transforms,{...n,fontSize:a})}return new LB({html:r.outerHTML,...b6(A),...t})}function TI(A,j,e,t){let r=`${t}/${e.segment}`;A.add(r);for(let o of e.children)TI(A,j,o,r)}function xI(A){let j=new Set,e=gn(A);if(!e)return j;for(let t of e.children)TI(j,A,t,"");return j}function PI(A){A=[...A].sort((e,t)=>e[0]-t[0]||e[1]-t[1]);let j=[];for(let e of A){if(e[0]===e[1])continue;let t=j[j.length-1];if(!t){j.push(e);continue}if(e[0]<=t[1]){t[1]<e[1]&&(t[1]=e[1]);continue}j.push(e)}return j}function MI(A,j){let e=[],t=0;for(let[r,o]of A){if(r<=t){t=o;continue}e.push([t,r]),t=o}return j!==void 0&&t<j&&e.push([t,j]),e}var Ex=/\/+/gu,$x=/\/{2,}/gu,Bx=new RegExp(`-?${qm}-?`,"g"),hx=/\s+/gu,gx=/[?#[\]@!$&'()*+,;="<>%{}|\\^`]/gu;function Ix(A){return A.startsWith("/")?A:"/"+A}function Rx(A){return A.replace($x,"/")}function Fx(A){return A.toLowerCase().replaceAll(gx,"").replaceAll(hx,"-")}function C6(A){let j=yx(A,Ex,Bx),e=MI(j,A.length);return A.startsWith("/")?A=DI(A,e,Fx):A=DI(A,e,Rf),A=Ix(A),A=Rx(A),A}function yx(A,...j){let e=[];for(let t of j)for(let r of A.matchAll(t))B(r.index!==void 0),e.push([r.index,r.index+r[0].length]);return PI(e)}function DI(A,j,e){let t="",r=0;for(let[o,n]of j)o>r&&(t+=A.substring(r,o)),t+=e(A.substring(o,n)),r=n;return r<A.length&&(t+=A.substring(r)),t}var _I=":missing-slug";function _7(A,j){if(!j)return"/unknown";let e=Y.dataForIdentifier(A);if(!e)return j;let t=e.properties;if(!t)return j;let r=new Set(Object.keys(t)),o=0,n=j.replace(bs,(a,s)=>{if(o++,r.has(s))return a;for(let[c,d]of Object.entries(t))if(s.toLowerCase()===(d?.title??c).toLowerCase())return`:${c}`;let l=e.annotations?.framerSlug;return l?`:${l}`:_I});if(o>0)return n;n.endsWith("/")||(n+="/");let i=e.annotations?.framerSlug;return i?n+`:${i}`:n+_I}function Sx(A){if(Xs(A.tree)){let j=xI(A.tree),e=new Set(A.stores.scopeStore.getWebPageNodesWithCollection().map(t=>Or(A.tree,t)).filter(L));return new Set([...j,...e])}return new Set(A.stores.scopeStore.getWebPageNodes().map(j=>Or(A.tree,j)).filter(L))}function Gx(A){let j=A.split("/"),e=j[j.length-1];return e?rl(e):!1}var N7=(A,j,e,t=!1)=>{A=C6(A);let r=Sx(j),o=j.tree.root.homePageNodeId,n=!!e&&e.id===o;A==="/"&&!n&&(A="/page"),e?.dataIdentifier&&(A=_7(e.dataIdentifier,A));let i=A.endsWith("/")&&!n,a=A;i&&(a=A.slice(0,-1));let s=Or(j.tree,e);return r.has(A)&&(t||A!==s)&&(r.add(a),Gx(a)&&(a+="/copy"),a=te(a,r,{withDash:!0})),{path:i?`${a}/`:a,suggestedName:Zn(A)}};var sr=Xj(kn()),NI="dismissedInstantNPMToast",OI="showedInstantNPMToast",wI="instant-npm-toast",_eA=()=>window.localStorage.getItem(OI)==="true",LI=()=>window.localStorage.getItem(NI)==="true";function bx(){return(0,sr.jsxs)(sr.Fragment,{children:[(0,sr.jsx)(gu,{children:"You installed an external NPM library."}),(0,sr.jsxs)("a",{href:"https://www.framer.com/developers/#faq",target:"_blank",children:[" ",(0,sr.jsx)(gu,{children:"Learn More"})]})]})}function qI(){window.localStorage.setItem(OI,"true"),QA({type:"add",variant:"info",text:(0,sr.jsx)(bx,{}),key:wI,duration:1/0,action:{title:"Dismiss",onClick:()=>window.localStorage.setItem(NI,"true")}})}function NeA(){QA({type:"remove",key:wI})}function Cx(A){if(A.length>=255)throw new TypeError("Alphabet too long");let j=new Uint8Array(256);for(let s=0;s<j.length;s++)j[s]=255;for(let s=0;s<A.length;s++){let l=A.charAt(s),c=l.charCodeAt(0);if(j[c]!==255)throw new TypeError(l+" is ambiguous");j[c]=s}let e=A.length,t=A.charAt(0),r=Math.log(e)/Math.log(256),o=Math.log(256)/Math.log(e);function n(s){if(s instanceof Uint8Array||(ArrayBuffer.isView(s)?s=new Uint8Array(s.buffer,s.byteOffset,s.byteLength):Array.isArray(s)&&(s=Uint8Array.from(s))),!(s instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(s.length===0)return"";let l=0,c=0,d=0,u=s.length;for(;d!==u&&s[d]===0;)d++,l++;let k=(u-d)*o+1>>>0,m=new Uint8Array(k);for(;d!==u;){let F=s[d],S=0;for(let P=k-1;(F!==0||S<c)&&P!==-1;P--,S++)F+=256*m[P]>>>0,m[P]=F%e>>>0,F=F/e>>>0;if(F!==0)throw new Error("Non-zero carry");c=S,d++}let I=k-c;for(;I!==k&&m[I]===0;)I++;let $=t.repeat(l);for(;I<k;++I)$+=A.charAt(m[I]);return $}function i(s){if(typeof s!="string")throw new TypeError("Expected String");if(s.length===0)return new Uint8Array;let l=0,c=0,d=0;for(;s[l]===t;)c++,l++;let u=(s.length-l)*r+1>>>0,k=new Uint8Array(u);for(;l<s.length;){let F=s.charCodeAt(l);if(F>255)return;let S=j[F];if(S===255)return;let P=0;for(let x=u-1;(S!==0||P<d)&&x!==-1;x--,P++)S+=e*k[x]>>>0,k[x]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");d=P,l++}let m=u-d;for(;m!==u&&k[m]===0;)m++;let I=new Uint8Array(c+(u-m)),$=c;for(;m!==u;)I[$++]=k[m++];return I}function a(s){let l=i(s);if(l)return l;throw new Error("Non-base"+e+" character")}return{encode:n,decodeUnsafe:i,decode:a}}var VI=Cx;var O7="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",vx=VI(O7),Tx=8/Math.log2(62),qeA=A=>vx.encode(A).padStart(Math.ceil(A.length*Tx),"0"),Ga=(A=20)=>Array(A).fill(0).map(()=>O7[Math.floor(Math.random()*O7.length)]).join("");var KI="https://app.framerstatic.com/framer_compiler_bg-UTRYLQ4Z.wasm";var lr=CA("compiler");async function ttA(){await Ca()}function HI(A){return{code:`const err = new Error(${JSON.stringify(String(A))}); err.name = "CompilationError"; throw err;`,sourceMap:void 0,annotations:{},exportedNames:[],reExportedModules:[],imports:{absolute:[],relative:[],bare:[]}}}function JI(A,j,e){let t={...j.exports};e&&(t.__FramerMetadata__={type:"variable"},A=A.concat(`
export const __FramerMetadata__ = `,JSON.stringify({exports:t})));let r=Object.entries(t).filter(([,n])=>n.type!=="tsType").map(([n])=>n),o={};for(let[n,i]of Object.entries(j.exports))i.annotations&&(o[n]=i.annotations);return{moduleCode:A,annotations:o,exportedNames:r}}async function UI({localId:A,name:j,source:e,includeSourceMap:t=!0}){let r=await Ca();try{let{code:o,metadata:n,map:i}=await r.transformSync(e,{fileName:_e(j).source,framerContractVersion:1,mediaType:"tsx",minify:!1,compress:!1,mangle:!1,sourceMap:t,useReactRefresh:!0}),a=`
if (!window.$RefreshReg$) throw new Error("React refresh preamble was not loaded. Something is wrong.");
const prevRefreshReg = window.$RefreshReg$;
const prevRefreshSig = window.$RefreshSig$;
window.$RefreshReg$ = window.reactRefreshRuntime.getRefreshReg("${A}");
window.$RefreshSig$ = window.reactRefreshRuntime.createSignatureFunctionForTransform;

${o}

window.$RefreshReg$ = prevRefreshReg;
window.$RefreshSig$ = prevRefreshSig;`,{moduleCode:s,annotations:l,exportedNames:c}=JI(a,n,!0);return{code:s,sourceMap:i??void 0,imports:n.requestedModules,annotations:l,exportedNames:c,reExportedModules:n.reExportedModules}}catch(o){let n=`Failed to compile development module ${j}: ${o}`;return lr.debug(n,"(enable trace logging to see full source)"),lr.trace(e),A.startsWith("codeFile/")||(lr.reportCriticalError(new Error(n),{moduleName:j,moduleSource:e}),SA("application_error",{message:n,area:"compiler"})),HI(o)}}async function rtA(A,j){await(await Ca()).transformSync(j,{fileName:_e(A).source,framerContractVersion:1,mediaType:"tsx",minify:!0,compress:!1,mangle:!1,sourceMap:!1,useReactRefresh:!1})}async function QI({name:A,source:j,type:e,includeSourceMap:t=!0,addFramerMetadata:r=!0,telemetrySession:o}){let n=Ga(10),i=`compile-${A}-${n}`,a=`\u{1F4DD} Compile ${A}`;lr.debug("Compiling module",A,"; with source map:",t),ra(i);let s=await Ca(),l=o?.start("transform"),c=e==="collection";try{let{code:d,map:u,metadata:k}=await s.transformSync(j,{fileName:_e(A).source,framerContractVersion:1,mediaType:"tsx",minify:!0,compress:c,mangle:c,sourceMap:t,useReactRefresh:!1}),{moduleCode:m,annotations:I,exportedNames:$}=JI(d,k,r);return{code:m,sourceMap:u??void 0,imports:k.requestedModules,annotations:I,exportedNames:$,reExportedModules:k.reExportedModules}}catch(d){let u=`Failed to compile module ${A}: ${d}`;return lr.debug(u,"(enable trace logging to see full source)"),lr.trace(j),A.startsWith("codeFile/")||(lr.reportCriticalError(new Error(u),{moduleName:A,moduleSource:j}),SA("application_error",{message:u,area:"compiler"})),HI(d)}finally{l?.end(),WI(a,i)}}async function zI(A){let e=`analyze-imports-${Ga(10)}`,t="\u{1F575}\u{1F3FB} Analyze Imports";ra(e);try{return{ok:!0,value:await(await Ca()).analyzeImports(A)}}catch(r){return lr.warn("Failed to analyze imports:",r),r instanceof Error?{ok:!1,error:r}:{ok:!1,error:new Error(`${r}`)}}finally{WI(t,e)}}var v6;async function Ca(){if(!v6){let A=new Worker(R$("./modulesCompilerWorker.js")),j=g$(A);v6=j.initWithPathToWasm(KI).then(()=>({transformSync:j.transformSync,analyzeImports:j.analyzeImports})),v6.catch(()=>{if(sh()||!lm.isProduction)throw new Error(`\u274C Your dev setup is struggling to run the compiler\u2019s WASM binary.
To fix it, run "make clean" followed by "make dev".`)})}return v6}function WI(A,j){Nl(A,j),performance.getEntriesByName(A,"measure").forEach(({name:e,duration:t})=>{lr.debug(e,"took",t.toFixed(2),"ms"),fh(e)}),Ol(j)}function XI(A,j){if(!nA(A))return;let e=A.getSupportedLayout(Y),t=A.getCurrentVariantSize(Y);od(e.width)&&t?.widthType!==0&&(j.widthType=2,j.left!==null&&j.right!==null&&(j.right=null)),od(e.height)&&t?.heightType!==0&&(j.heightType=2,j.top!==null&&j.bottom!==null&&(j.bottom=null))}function YI(A,j,e=!0){A.scheduler.processWhenReady(()=>{let{overlayStore:t,selectionStore:r,scopeStore:o,canvasStore:n,persistedUserDefaults:i}=A.stores;o.selectByNode(j.id),r.set(j.id);let a=A.tree.get(j.cache.overlayAncestorId);if(Pe(a)?t.showOverlay(r,a,a.parentid):t.hideAll(),e){let s=A.tree.getBoundingFrameForNodes([j]);n.zoomToCenter(s,{animated:i.animateOnZoom,maxZoom:1})}})}var Uo=class extends Error{constructor(e,t,r,o=!1){super(e);this.missing=t;this.error=r;this.wasTimeout=o}};function utA(A){return A instanceof Uo}var w7=CA("ensureComponentsInLoader"),Px=500,Mx=30*1e3;async function T6(A,j,e,t){let r=ZI(j,A).length;if(r===0)return;let o=t??Mx+r*2e3;w7.debug("modules:",j.length,", new:",r,", timeout:",o),await Dx(A,e,o);let n=ZI(j,A);if(n.length===0)return;let i=_x(j,A);throw w7.debug("components loaded, but some are missing",{missing:n,errors:i}),new Uo("ensureComponentsInLoader: Some modules are missing.",n,i)}async function Dx(A,j,e){let t=performance.now(),r=await Nx(async()=>(await Zc(e),"timeout"),async()=>{await j.whenIdle();let o=j.revision;return B(o>=0,"moduleStore.revision cannot be negative"),await j.loadAllLocalModules(),o});if(r==="timeout")throw new Uo("ensureComponentsInLoader: Modules store not ready in time.",[],[],!0);for(let o=0;o<1e3;o++){let n=A.modulesRevision;if(r<=n)break;if(performance.now()-t>e)throw w7.debug("component loader not updated in time: want:",r,"got:",n),new Uo("ensureComponentsInLoader: Component loader not updated in time.",[],[],!0);await Zc(Px)}}function ZI(A,j){let e=new Set;for(let t of A)j.componentForIdentifier(t)||e.add(t);return Array.from(e)}function _x(A,j){let e=new Set;for(let t of A)ie(j.errorForIdentifier(t))||e.add(t);return Array.from(e)}async function Nx(...A){return Promise.race(A.map(async j=>j()))}async function AR(A,j){let e=[];A.forEach(t=>{let r=cA(t);r&&r.kind==="externalModuleExport"&&e.push(r)}),e.length&&await j.preloadExternalModules(e),await T6(Y,A,j)}function x6(A,j,e,t,r){if($A(e.htmlContent))return;let o=A.getScopeNodeFor(j);B(o&&Fn(o),"Can't find scope with breakpoints");let i=o.getTopLevelVariants().map(a=>{let s=_j(a)?e.id:Qe(a.id,e.id),l=A.get(s);return B(l&&uj(l),"Can't find rich text node in breakpoint"),[a,l]});for(let[a,s]of i){B(Fj(a),"Can't read width attribute of node");let l=Tl(t,c=>(c.breakpointWidth??0)>a.width)??r;s.detachTextStylePreset(l,!0)}}var L7=["formButtonSuccessVariant","formButtonPendingVariant","formButtonErrorVariant","formButtonIncompleteVariant","whileOpenEffectVariant","appearEffectVisibleVariantId","appearEffectObscuredVariantId","dataLoaderLoadingVariant","dataLoaderDisabledVariant"];function eR(A,j,e){let t=j.tokenOverrides;!t||Bt(t)||(tR(A,e,t),j.set({tokenOverrides:void 0}))}function tR(A,j,e){Ox(A,j.id,e);let t=[];for(let r of j.variables){if(!nR(r)){t.push(r);continue}switch(r.type){case"border":t.push(mo(r.initialValue)?{...r,initialValue:{...r.initialValue,borderColor:jj(r.initialValue.borderColor,e)}}:r);break;case"color":t.push({...r,initialValue:jj(r.initialValue,e)});break;default:EA(r,"Unsupported variable type.")}}j.set({variables:t})}function Ox(A,j,e){let t=A.tree.get(j);if(t)for(let{node:r,skipChildren:o}of t.walkWithSkipChildren()){if(DA(r)){o();continue}if(rR(A,r,e),wx(A,r,e),!nA(r)||r.isVectorInstance)continue;let n=r.getLocalSmartComponentNodeId();if(!n){r.set({tokenOverrides:e});continue}let i=A.tree.get(n);dA(i)&&i.isLoaded()&&(tR(A,i,e),A.stores.codeGenerationStore.updateComponent(i.id))}}function wx(A,j,e){let t=Pr(A.tree,j);for(let r of t){let{relatedNode:o,replicaRoot:n}=r;n.replicaInfo.overrides[j.id]&&rR(A,o,e)}}function rR(A,j,e){if(st(j)){let t=jj(j.fillColor,e);t&&j.set({fillColor:t})}if(jr(j)){let t=jj(j.borderColor,e);t&&j.set({borderColor:t})}if(Xe(j)){let t=jj(j.strokeColor,e);t&&j.set({strokeColor:t})}if(uj(j))if(j.htmlContent)Lx(A,j,e);else{let t=new Map;for(let r in e){if(!Md(r))continue;let o=e[r],n=Pf(r);n&&t.set(n,`var(${r}, ${o})`)}j.replaceColorTokenVariables(t),j.hasLinks()&&j.remapLinkStylePresets(r=>{let o=oR(A,r,e);if(Ee(o))return o})}else if(nA(j)){let t=Y.componentForIdentifier(j.codeComponentIdentifier);if(!t)return;let r=j.getControlProps(t.properties);if(!r)return;for(let o in r){let n=r[o];if(!(!n||!nR(n)))switch(n.type){case"border":if(!mo(n.value))break;j.setControlProp(o,{...n,value:{...n.value,borderColor:jj(n.value.borderColor,e)}});break;case"color":j.setControlProp(o,{...n,value:jj(n.value,e)});break;default:EA(n,"Unsupported control type.")}}}}function Lx(A,j,e){for(let t of Vn){let r=j[t];if(!r)continue;let o=oR(A,r,e);Aa(o)&&j.set({[t]:o.id})}}function oR(A,j,e){let t=A.tree.getNodeWithTrait(j,Aa);if(!t)return;let r=qx(t,e);if(jR(t,r))return t;let o=rr(A.tree),n=o.getStylePresets().filter(i=>i.id!==j&&jR(i,r));return n.length?n?.[0]:(A.tree.insertNode(r,o.id),A.stores.codeGenerationStore.createModuleFromComponentSource(r).catch(LA),r)}function jR(A,j){return A.__class!==j.__class?!1:be(A)&&be(j)||Ee(A)&&Ee(j)||Sr(A)&&Sr(j)||xe(A)&&xe(j)||Ft(A)&&Ft(j)?A.equals(j):!1}function qx(A,j){let e=A.clone();return Vx(e,j),e}function Vx(A,j){be(A)?(A.textColor=jj(A.textColor,j),A.textStrokeColor=jj(A.textStrokeColor,j),A.textDecorationColor=jj(A.textDecorationColor,j)):Ee(A)?(A.linkTextColor=jj(A.linkTextColor,j),A.linkTextDecorationColor=jj(A.linkTextDecorationColor,j),A.linkTextBackgroundColor=jj(A.linkTextBackgroundColor,j),A.linkHoverTextColor=jj(A.linkHoverTextColor,j),A.linkHoverTextDecorationColor=jj(A.linkHoverTextDecorationColor,j),A.linkHoverTextBackgroundColor=jj(A.linkHoverTextBackgroundColor,j),A.linkCurrentTextColor=jj(A.linkCurrentTextColor,j),A.linkCurrentTextDecorationColor=jj(A.linkCurrentTextDecorationColor,j),A.linkCurrentTextBackgroundColor=jj(A.linkCurrentTextBackgroundColor,j)):Ft(A)?A.borderColor=jj(A.borderColor,j):Sr(A)?(A.textColor=jj(A.textColor,j),A.textDecorationColor=jj(A.textDecorationColor,j),A.textStrokeColor=jj(A.textStrokeColor,j),A.borderColor=jj(A.borderColor,j),A.fillColor=jj(A.fillColor,j),A.lineColor=jj(A.lineColor,j)):xe(A)&&(A.inlineCodeTextColor=jj(A.inlineCodeTextColor,j),A.inlineCodeFillColor=jj(A.inlineCodeFillColor,j),A.borderColor=jj(A.borderColor,j))}function jj(A,j){if(ie(A)||!Ut(A))return A;let{customProperty:e,metadata:t}=xf(A);if(!Md(e))return A;let r=j[e];if(!r)return A;let o=`var(${e}, ${r})`;return t?`${o} ${t}`:o}function nR(A){switch(A.type){case"color":case"border":return!0;case"array":case"boolean":case"number":case"string":case"richtext":case"eventhandler":case"image":case"file":case"scrollsectionref":case"customcursor":case"cursor":case"transition":case"boxshadow":case"gap":case"padding":case"borderradius":case"collectionreference":case"multicollectionreference":case"trackingid":case"vectorsetitem":case"date":case"enum":case"link":case"linkrelvalues":case"fusednumber":case"object":case"font":case"pagescope":case"slot":case"slug":case"controlReference":case"nodePropertyControlReference":return!1;default:EA(A,"Check if we support this variable type.")}}function iR(A){if(!Q(A))return!1;for(let j of A.children)if(!NA(j)||YA(j)&&j.children.length>0)return!1;return!0}function aR(A,j,e){if(fe(e))return;let t;A.stores.scopeStore.removeNode(j);let r=$o(A.tree,e.id);r&&A.tree.removeNode(r);let o=A.tree.root.homePageNodeId,n=$o(A.tree,j.id);n&&(j.id===o?A.tree.removeNode(n):n.set({webPageId:e.id})),A.tree.current(e)?.set({name:j.name,pagePath:j.pagePath}),A.tree.has(o)||(t??={},t.homePageNodeId=e.id),t&&A.tree.root.set(t)}function va(A,j){return A.filter(e=>e.originalid===j.id).sort((e,t)=>(t.breakpointWidth??0)-(e.breakpointWidth??0))}function nrA(A,j){let e=A.getPresetsListNode();B(e,"Can't find PresetsListNode");let t=e.children.filter(be);return va(t,j)}function TrA(A,j,e){if(!uj(e))return;let t=e.getStylePresetsForCodeGeneration(A);for(let r of t){let o=A.getNodes(r.cache.replicaInstances??[]);for(let n of o)j[n.id]??=n.toJS();j[r.id]??=r.toJS()}}function q7(A,j,e){for(let t of j){let r=A[t];if(!r)continue;let o=e(r);o&&o.id!==r&&A.set({[t]:o.id})}}function lR({engine:A,node:j,pastedPresetMap:e,stylePresetNodes:t,fromSameProject:r,breakpointVariantIds:o,shouldCreateNewPresets:n}){if(!t)return;let i={pastedPresetMap:e,stylePresetNodes:t,shouldCreateNewPresets:n},a=c=>Kx(A,c,i);if(q7(j,vB,a),j.remapTextStylePresets(a),r)return;let s=Fi(j),l=A.tree.getGroundNodeFor(j);for(let c of j.getStylePresetIdsForCodeGeneration()){let d=t.find(k=>k.id===c);if(!d||!Bn(d))continue;let u=va(t,d);if(s){x6(A.tree,s,j,u,d);continue}if(o?.has(l.id)&&Fj(l)){let k=Tl(u,m=>(m.breakpointWidth??0)>l.width)??d;j.detachTextStylePreset(k,!1);continue}j.detachTextStylePreset(d,!1)}}function Kx(A,j,{pastedPresetMap:e,stylePresetNodes:t,shouldCreateNewPresets:r}){if(!t)return;let o=t.find(d=>d.id===j);if(!o)return;let n=A.tree.get(j);if(n&&Bn(n)&&n.equals(o))return e.set(j,n),n;if(!r)return;let a=rr(A.tree),s=a.getTextStylePresets().find(d=>d.equals(o));if(s&&Bn(s))return e.set(j,s),s;let l=n?o.clone():o.cloneWithIds();A.tree.insertNode(l,a.id),e.set(j,l);let c=t.filter(d=>d.originalid===j);for(let d of c){let u=A.tree.get(j);if(u&&mf(u)&&u.equals(d)){e.set(j,u);continue}let m=u?d.clone():d.cloneWithIds();A.tree.insertNode(m,a.id),e.set(j,m)}return l}function cR({engine:A,node:j,pastedPresetMap:e,stylePresetNodes:t}){if(!t)return;let r={pastedPresetMap:e,stylePresetNodes:t},o=n=>Hx(A,n,r);q7(j,xB,o),j.remapLinkStylePresets(o)}function Hx(A,j,{pastedPresetMap:e,stylePresetNodes:t}){if(!t)return;let r=t.find(l=>l.id===j);if(!r||!Ee(r))return;let o=A.tree.get(j);if(o&&Ee(o)&&o.equals(r))return e.set(j,o),o;let i=rr(A.tree),a=i.getLinkStylePresets().find(l=>l.equals(r));if(a&&Ee(a))return e.set(j,a),a;let s=o?r.clone():r.cloneWithIds();return A.tree.insertNode(s,i.id),e.set(j,s),s}function dR({engine:A,node:j,pastedPresetMap:e,stylePresetNodes:t}){if(!t)return;let r={pastedPresetMap:e,stylePresetNodes:t},o=n=>Jx(A,n,r);q7(j,PB,o),j.remapInlineCodeStylePresets(o)}function Jx(A,j,{pastedPresetMap:e,stylePresetNodes:t}){if(!t)return;let r=t.find(l=>l.id===j);if(!r||!xe(r))return;let o=A.tree.get(j);if(o&&xe(o)&&o.equals(r))return e.set(j,o),o;let i=rr(A.tree),a=i.getInlineCodeStylePresets().find(l=>l.equals(r));if(a&&xe(a))return e.set(j,a),a;let s=o?r.clone():r.cloneWithIds();return A.tree.insertNode(s,i.id),e.set(j,s),s}function xrA(A){if(Q(A))return{id:A.id,pagePath:A.pagePath,webMetadata:A.webMetadata,customHTML:A.customHTML,dataIdentifier:A.dataIdentifier}}function PrA(A,j,e,t){let r={},o=new Set;function n(i){g6(i,a=>{if(t.has(a))return;let s=Ux(A,a);s&&(r[a]=s);let l=J$(a,A.tree,A.stores.modulesStore,o);l&&Object.assign(r,l)})}for(let i of j.walk())n(i);return Q(e)&&n(e),{moduleData:r}}function Ux(A,j){let e=cA(j);if(e&&e.kind==="localModuleExport"){let t=A.stores.modulesStore.getPersistedModuleByLocalId(e.localId);return t?(B(t.files.module,"expected module typed file in persisted module"),Ke(t.id,t.saveId,t.files.module,e.exportSpecifier)):void 0}if(e&&e.kind==="externalModuleExport")return e}function Qx(A,j,e){let t=cA(j);if(fj(t))return B(A.stores.modulesStore.initialized,"Cannot paste modules before modulesStore has been initialized."),A.stores.modulesStore.getPersistedModuleByLocalId(t.localId)?.id===e.moduleId?null:e.value;if(et(t)&&t.kind==="externalModuleExport"){let r=A.stores.modulesStore.getPersistedModuleByGlobalId(t.moduleId)?.localId;return r?un(t,r).value:null}return null}function zx(A,j,e,t,r){let o=t.cloneWithIds();o.set(r),A.removeNode(t),A.insertNode(o,j,e)}function MrA(A,j,e){if(!e)return j;for(let t of j.root.walk())YA(t)&&t.children.forEach((r,o)=>{if(e){let n=I6(r,a=>{let s=e[a];if(!s)return;let l=Qx(A,a,s);return l||void 0});if(!n)return;let i=j.current(r);if(!i)return;zx(j,t.id,o,i,n)}});return j.commit()}function Wx(A){return Cj(A)&&Fj(A)}function DrA(A,j,e){let t=A.get(e.id);if(!t)return;let r=Fi(t);if(!r||!NA(r))return;let o=A.getNodes(r.cache.replicaInstances??[]).filter(Wx);for(let{width:n,replicaInfo:i}of o){let a=j.get(n)??{},s=i.overrides[e.id];s&&(a[e.id]=s),j.set(n,a)}Fj(r)&&!j.get(r.width)&&j.set(r.width,{})}function nj(A,j,e,t){if(j){if(Ut(j)){let r=Us(j),o=A.get(r);if(o&&!(o.id in e)){let n=o.cloneWithIds();e[n.id]=n.toJS(),t&&(t[o.id]=vr())}return}if(jf(j)){nj(A,j.color,e,t);return}if(o$(j)||r$(j)||i$(j)){for(let r of j.stops)nj(A,r.value,e,t);return}if(bj(j)){for(let r of j)nj(A,r,e,t);return}if(mo(j)){nj(A,j.borderColor,e,t);return}}}function _rA(A,j,e,t){if(uj(j)){let r=j.getInlineStyleTokenVariables();if(nj(A,r,e,t),j.htmlContent)Xx(A,j,e,t);else if(j.hasLinks()){let o=j.getLinkStylePresets(!0);for(let n of o){let i=A.getNodeWithTrait(n,Ee);i&&uR(A,i,e,t)}}}for(let r in j)nj(A,j[r],e,t)}function Xx(A,j,e,t){for(let r of Vn){let o=j[r];if(!o)continue;let n=A.getNodeWithTrait(o,Aa);n&&(be(n)?(nj(A,n.textColor,e,t),nj(A,n.textStrokeColor,e,t),nj(A,n.textDecorationColor,e,t)):Ee(n)?uR(A,n,e,t):Sr(n)?(nj(A,n.textColor,e,t),nj(A,n.textDecorationColor,e,t),nj(A,n.textStrokeColor,e,t),nj(A,n.borderColor,e,t),nj(A,n.fillColor,e,t),nj(A,n.lineColor,e,t)):xe(n)?(nj(A,n.inlineCodeTextColor,e,t),nj(A,n.inlineCodeFillColor,e,t),nj(A,n.borderColor,e,t)):Ft(n)&&nj(A,n.borderColor,e,t))}}function uR(A,j,e,t){nj(A,j.linkTextColor,e,t),nj(A,j.linkTextDecorationColor,e,t),nj(A,j.linkTextBackgroundColor,e,t),nj(A,j.linkHoverTextColor,e,t),nj(A,j.linkHoverTextDecorationColor,e,t),nj(A,j.linkHoverTextBackgroundColor,e,t),nj(A,j.linkCurrentTextColor,e,t),nj(A,j.linkCurrentTextDecorationColor,e,t),nj(A,j.linkCurrentTextBackgroundColor,e,t)}function NrA(A,j,e){let t=e-j;return Math.ceil(A/100*t+j)}function sR({collectedCollections:A,node:j,tree:e}){if(fe(j)){let t=cA(j.dataIdentifier);if(!fj(t))return;let r=e.getNodeWithTrait(t.localIdName,hj);r&&(A.set(j.dataIdentifier,r),sR({collectedCollections:A,node:r,tree:e}))}if(hj(j))for(let t of j.variables){if(!zs(t))continue;let r=cA(t.dataIdentifier);if(!fj(r))continue;let o=e.getNodeWithTrait(r.localIdName,hj);o&&(A.has(t.dataIdentifier)||(A.set(t.dataIdentifier,o),sR({collectedCollections:A,node:o,tree:e})))}}function HrA(A){return Lj(A)?A.getGroundNodes().length===0:!1}function JrA(A){if(!Q(A))return!1;let j=A.getGroundNodes();return j.length>1?!1:j.length===0?!0:j[0]?.children?.length===0}function UrA(A){return A?!A.children||A.children.length===0:!1}function V7(A,j=!0){let e=A.trim().split("/").filter(Boolean).map(t=>{let r="/"+t,o=C6(r);return o.startsWith("/")?o.slice(1):o});return A.endsWith("/")&&j&&e.push(""),e}function QrA(A){return`/${V7(A).join("/")}`}function Yx(A){return A===""}function zrA(A){return!!(A.webPageId&&Yx(A.segment))}function Zx(A,j){let e=j.get(A);if(!Vt(e))return;let t=j.get(e.webPageId);if(Q(t)||e.children.length>0)return;let r=e.parentid;j.removeNode(e),r&&Zx(r,j)}function WrA(A,j){if(!A)return;let e=Y.dataForIdentifier(A);if(e)return Sh(void 0,e,j??wm)}function pR(A,j,e,t,r){let o=V7(t,Q(j,!0));B(o.length>0,"Path must have at least one segment");let n=gn(A.tree,{shouldAssert:!0});return o.forEach((i,a)=>{let s=a===o.length-1,l=s?r?.positionInParent:void 0,c=rl(i)?e:void 0;c&&(i=_7(c,i));let d=n.children.find(k=>k.segment===i),u=d&&s&&j;if(!d||u&&d.webPageId){let k=new VB({segment:i,webPageId:s?j?.id:void 0,dataIdentifier:c});A.tree.insertNode(k,n.id,l),n=k}else u&&d.set({webPageId:j.id,dataIdentifier:c}),n=d}),B(Vt(n),"Current parent should be the created RouteSegmentNode"),n}function kR(A,j){let e=$o(A,j);return A.get(e?.parentid)?.children.findIndex(r=>r.id===e?.id)}function AP(A,j,e){let t=new Set(A.stores.scopeStore.getSmartComponentNodes().map(r=>r.name).filter(L));return e||j===null?te(e??"Component",t):te(j,t)}function K7(A,j,e,t,{insertionIndex:r,preferredName:o,enterIsolation:n=!0,localIdsToExternalIdentifiers:i=new Map,externalModuleIdsToLocalIds:a=new Map,instance:s,renamedIds:l=new Map,isAutoDetach:c=!1,intrinsicSize:d,textStylePresets:u,linkStylePresets:k,inlineCodeStylePresets:m,pastedPresetMap:I=new Map,fromInsertSidebar:$=!1,abTesting:F=!1}={}){let S=c?Ml.createEmpty():A.tree,P={children:[]};if(Q(j)){let N=j.id===A.tree.root.homePageNodeId?"Home":Or(A.tree,j),{suggestedName:K,path:q}=N7(o??N??"Page",A,j,!0);P.pagePath=q,P.name=K}else P.name=AP(A,j.name,o);let x=j.clone(P);l.set(j.id,x.id),dA(j)&&Yh({componentId:x.id,source:t});let C=x.instanceIdentifier,H=NA(e),U=Jo(e,i,a,l,H),z=[U];x.baseVariantId=U.id,x.addChild(U);for(let N of j.children)if(!(N.id===e.id||Rn(N)))if(Cj(N)&&XA(N)){let K=Yn(N.replicaInfo.overrides,l,!0);if(xA(N)){K[U.id]??={};let rA=K[U.id];rA.top=N.top,rA.left=N.left,rA.right=N.right,rA.bottom=N.bottom,rA.centerAnchorX=N.centerAnchorX,rA.centerAnchorY=N.centerAnchorY}let q=yA.create(A.tree,U,{overrides:K,duplicatedFrom:Ni(N)});l.set(N.id,q.id),z.push(q),x.addChild(q)}else{let K=Jo(N,i,a,void 0,H);z.push(K),l.set(N.id,K.id),x.addChild(K)}S.insertNode(x,void 0,r);for(let N=0;N<j.children.length;N++){let K=j.children[N];if(!Rn(K))continue;let q=yA.create(S,U,{overrides:Yn(K.replicaInfo.overrides,l,!0),inheritsFrom:l.get(K.replicaInfo.inheritsFrom),duplicatedFrom:Ni(K)});l.set(K.id,q.id),z.push(q),S.insertNode(q,x.id,N)}let v=b6(S);for(let N of z){if(mt(S,N,l,!1),!u&&!k&&!m)continue;let K=[];for(let q of N.walk())uj(q)&&K.push(q);for(let q of K){let rA=q.getStylePresetIdsForCodeGeneration();if(k&&cR({engine:A,node:q,pastedPresetMap:I,stylePresetNodes:k}),m&&dR({engine:A,node:q,pastedPresetMap:I,stylePresetNodes:m}),u){if($)lR({engine:A,node:q,pastedPresetMap:I,stylePresetNodes:u,fromSameProject:!0,shouldCreateNewPresets:$});else for(let sA of u)if(rA.has(sA.id))if(Q(j)&&NA(N)){if(ye(N)){let PA=va(u,sA);x6(S,U,q,PA,sA)}}else(ye(N)||pj(S,q,"html"))&&q.detachTextStylePreset(sA,!1)}}for(let q of K){pj(S,q,"html")&&(q.remapTextStylePresets((rA,sA)=>{let PA=c$(sA)?sA:"p",MA=q.getNodeTextStylePreset(S,PA)??xl(S,PA)??p$.createDefault(PA);return wB(A,MA),MA}),q.remapLinkStylePresets(()=>{let rA=q.getNodeLinkStylePreset(S)??NB(S)??bB.createDefault();return OB(A,rA),rA}),q.remapInlineCodeStylePresets(()=>{let rA=q.getNodeInlineCodeStylePreset(S)??DB(S)??new BB;return _B(A,rA),rA}));for(let rA in v)pj(S,q,rA)&&q.set({[rA]:v[rA]})}}let{codeGenerationStore:tA}=A.stores;for(let N of I.values())DA(N)||tA.createModuleFromComponentSource(N).catch(LA);if(c)return S.commit(),x.draftOrCurrent();{let N=S.get(x.baseVariantId);if(N&&_j(N))for(let K of x.children)Mi(K)&&K.replicaInfo.master===N.id&&yA.registerInInheritedNode(N,K)}A.scheduler.process(()=>{if(!s)return;let N=A.tree.current(s);if(!N)return;let K={},q={},rA=s.getRawControlProps();if(rA.variant?.value&&L(rA.variant.value)){let sA=l.get(rA.variant.value)??U.id,PA={type:"enum",value:sA};K.variant=PA}for(let sA of L7){let PA=s[sA];L(PA)&&(q[sA]=l.get(PA)??void 0)}Pr(A.tree,N).forEach(({relatedNode:sA,replicaRoot:PA})=>{let MA=PA.replicaInfo.overrides[sA.originalid];if(!MA)return;let G={};for(let cj of L7){if(!(cj in MA))continue;let ue=MA[cj];L(ue)&&(q[cj]=l.get(ue)??void 0)}if(sA.set(G),!(WA("variant")in MA))return;let wA=sA.getRawControlProp("variant");if(!wA||!L(wA.value))return;let lj=l.get(wA.value);if(!lj)return;let b={type:"enum",value:lj};sA.set(hn({variant:b}))}),N.set({codeComponentIdentifier:C,...q,...hn(K)})});let X=tA.createModuleFromComponentSource(x,d);if(s&&X.then(A.scheduler.wrapHandler(()=>{if(s=A.tree.get(s?.id),!s)return;let N=A.stores.treeStore.tree.getScopeNodeFor(s)?.loaded;if(!N||!go(N))return;let K=A.stores.treeStore.tree.get(N.baseVariantId);K&&_j(K)&&tA.updateComponent(N.id).catch(LA)})).catch(LA),n&&(A.stores.chromeStore.contentPanelTab="Layers",A.stores.scopeStore.select(x.id,{keepHistory:!0})),Xs(A.tree)&&Q(x)&&!F){B(L(P.pagePath),"pagePath should be a string");let N=kR(A.tree,j.id),K=aA(N)?N+1:void 0;pR(A,x,x.dataIdentifier,P.pagePath,{positionInParent:K})}return x.draftOrCurrent()}async function mR(A,{identifier:j,enterIsolation:e,instance:t,isAutoDetach:r,renamedIds:o=new Map,info:n}){let{node:i,dependencies:a}=await Ug(A,j);B(A6(i),"Should be a generated node.");let s=A.tree.get(t?.originalid??t?.id);B(!s||nA(s),"instance should be a code component.");let l=i.children.find($=>$.id===i.baseVariantId);B(l&&_j(l),"Unlink: Can't unlink a tree which doesn't have a Primary Variant node");let{identifiers:c,localIdsToExternalIdentifiers:d,externalModuleIdsToLocalIds:u}=Hg(i,A.stores.modulesStore,a);if(await AR(c.map($=>$.value),A.stores.modulesStore),c.some($=>{let F=Y.dataForIdentifier($.value);return F?zf(F):!1})){QA({type:"add",variant:"info",text:"Remove collection references before unlinking"});return}let m=await Kg(a.imports);return await Qg(A,a,j),await A.stores.modulesStore.addExternalModulesToProject(c,{onTreeUpdate:()=>{let $=A.tree.current(s),F=Zt(n.module.metadata.intrinsicWidth)??200,S=Zt(n.module.metadata.intrinsicHeight)??200,P=K7(A,i,l,"unlink",{enterIsolation:e,localIdsToExternalIdentifiers:d,externalModuleIdsToLocalIds:u,instance:$,renamedIds:o,isAutoDetach:r,intrinsicSize:{width:F,height:S},textStylePresets:m});return $&&dA(P)&&eR(A,$,P),P}})}async function fR(A,j){let e=await mR(A,j);if(!e)return;B(dA(e),"node should be a smart component");let{isAutoDetach:t}=j;return t||await A.stores.codeGenerationStore.untilCompiled(e.id),e.draftOrCurrent()}async function ER(A,j){let[e]=await A.stores.modulesStore.preloadExternalModules([j]);if(!e)return;let t=await mR(A,{identifier:j,enterIsolation:!1,info:e});B(Q(t),"node should be a web page");let{path:r,suggestedName:o}=N7(t.name??"Page",A,t,!0);return A.scheduler.processWhenReady(()=>{A.tree.current(t)?.set({name:o,pagePath:r});let n=A.stores.scopeStore.active;iR(n)&&aR(A,n,t),A.stores.scopeStore.select(t.id,{keepHistory:!1})}),t}function $R(A,j,e,t){let r=K7(A,j,e,"duplicate",{enterIsolation:!1,preferredName:t,insertionIndex:A.tree.root.children.findIndex(o=>o.id===j.id)+1});A.stores.persistedUserDefaults.newContentAsDraft&&r.set({isDraft:!0,duplicatedFrom:nl(r.duplicatedFrom,j.id)}),A.stores.scopeStore.select(r.id,{keepHistory:!1})}async function snA(A,j){let e=new Map,t=new Set(A.stores.scopeStore.getDesignPageNodes().map(a=>a.name).filter(L)),r=te(j.name??"Design",t),o=j.isLoaded()?j:await j.load();if(!o)return;let n=o.clone({name:r,children:[]});e.set(o.id,n.id);let i=[];for(let a of o.children){let s=Jo(a,new Map,new Map,e,!1);i.push(s),e.set(a.id,s.id),n.addChild(s)}A.tree.insertNode(n,void 0,A.tree.root.children.findIndex(a=>a.id===j.id)+1);for(let a of i)mt(A.tree,a,e,!1);return SA("design_page_create",{pageId:n.id,source:"duplicate"}),n}function BR(A,j){let[e,...t]=j.stores.selectionStore.ids;if(!e||t.length)return null;let r=j.tree,o=r.getNode(e),n=!1;for(;!n&&o&&(n=Mr(r,o,A,j.stores.scopeStore.active.id,Y),!n);)o=r.getParent(o.id);return o}function H7(A){let j={};for(let[e,t]of A)IR(j,e,t);return j}function ei(A,j,e){return Ij(A,t=>{IR(t,j,e)})}function M6(A,j){return A[j]?Ij(A,e=>{let t=e[j];if(t){for(let r of t.dependents){let o=e[r];o&&(o.dependencies.delete(j),P6(o)&&delete e[r])}for(let r of t.dependencies){let o=e[r];o&&(o.dependents.delete(j),P6(o)&&delete e[r])}delete e[j]}}):A}function Qo(A,j,e,t,r){let o=new Set,n=[j];for(t=t||new Set,r=r||new Set;n.length>0;){let i=n.pop();if(!i||o.has(i))continue;o.add(i);let a=A[i];if(a){if(t.has(i))r.add(i);else if(!t.size)e.add(i);else{let s=!1;for(let l of a.dependents)if(t.has(l)||r.has(l)){s=!0;break}s?r.add(i):e.add(i)}for(let s of a.dependents)o.has(s)||n.push(s)}}}function gR(A,j){let e=new Set,t=[j];for(;eP(t);){let r=t.shift(),o=A[r];if(o){for(let n of o.dependents)e.has(n)||(e.add(n),t.push(n));if(e.has(j))return!0}}return!1}function jP(A,j){let e=ct(A,j);if(e)return e.startsWith("collection")&&!j.startsWith("collection")&&!j.startsWith("draftCollection")?e.replace("collection","draftCollection"):e}function IR(A,j,e){let t=A[j];if(!t){if(e.length===0)return;t=hR(A,j)}let r=new Set(t.dependencies);for(let o of e){let n=jP(o,j);if(!n)continue;t.dependencies.add(n);let i=A[n];i||(i=hR(A,n)),i.dependents.add(j),t.dependencies.add(n),r.delete(n)}for(let o of r){let n=A[o];n&&(n.dependents.delete(j),P6(n)&&delete A[o])}P6(t)&&delete A[j]}function P6(A){return A.dependents.size===0&&A.dependencies.size===0}function hR(A,j){let e={dependents:new Set,dependencies:new Set};return A[j]=e,e}function eP(A){return A.length>0}var Ur=".tsx";var tP=["arguments","await","break","case","catch","class","const","continue","debugger","default","delete","do","else","enum","eval","export","extends","false","finally","for","function","if","implements","import","in","instanceof","interface","let","new","null","package","private","protected","public","return","static","super","switch","this","throw","true","try","typeof","var","void","while","with","yield","Infinity","NaN","document","undefined","window"],rP=["toolbar"],oP=/^[$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10140}-\u{10174}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{10300}-\u{1031F}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{103A0}-\u{103C3}\u{103C8}-\u{103CF}\u{103D1}-\u{103D5}\u{10400}-\u{1049D}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10860}-\u{10876}\u{10880}-\u{1089E}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{10900}-\u{10915}\u{10920}-\u{10939}\u{10980}-\u{109B7}\u{109BE}\u{109BF}\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A60}-\u{10A7C}\u{10A80}-\u{10A9C}\u{10AC0}-\u{10AC7}\u{10AC9}-\u{10AE4}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B60}-\u{10B72}\u{10B80}-\u{10B91}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10D00}-\u{10D23}\u{10F00}-\u{10F1C}\u{10F27}\u{10F30}-\u{10F45}\u{10FE0}-\u{10FF6}\u{11003}-\u{11037}\u{11083}-\u{110AF}\u{110D0}-\u{110E8}\u{11103}-\u{11126}\u{11144}\u{11150}-\u{11172}\u{11176}\u{11183}-\u{111B2}\u{111C1}-\u{111C4}\u{111DA}\u{111DC}\u{11200}-\u{11211}\u{11213}-\u{1122B}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A8}\u{112B0}-\u{112DE}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}\u{11350}\u{1135D}-\u{11361}\u{11400}-\u{11434}\u{11447}-\u{1144A}\u{1145F}\u{11480}-\u{114AF}\u{114C4}\u{114C5}\u{114C7}\u{11580}-\u{115AE}\u{115D8}-\u{115DB}\u{11600}-\u{1162F}\u{11644}\u{11680}-\u{116AA}\u{116B8}\u{11700}-\u{1171A}\u{11800}-\u{1182B}\u{118A0}-\u{118DF}\u{118FF}\u{119A0}-\u{119A7}\u{119AA}-\u{119D0}\u{119E1}\u{119E3}\u{11A00}\u{11A0B}-\u{11A32}\u{11A3A}\u{11A50}\u{11A5C}-\u{11A89}\u{11A9D}\u{11AC0}-\u{11AF8}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2E}\u{11C40}\u{11C72}-\u{11C8F}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D89}\u{11D98}\u{11EE0}-\u{11EF2}\u{12000}-\u{12399}\u{12400}-\u{1246E}\u{12480}-\u{12543}\u{13000}-\u{1342E}\u{14400}-\u{14646}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16AD0}-\u{16AED}\u{16B00}-\u{16B2F}\u{16B40}-\u{16B43}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16E40}-\u{16E7F}\u{16F00}-\u{16F4A}\u{16F50}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{17000}-\u{187F7}\u{18800}-\u{18AF2}\u{1B000}-\u{1B11E}\u{1B150}-\u{1B152}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E14E}\u{1E2C0}-\u{1E2EB}\u{1E800}-\u{1E8C4}\u{1E900}-\u{1E943}\u{1E94B}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{20000}-\u{2A6D6}\u{2A700}-\u{2B734}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2F800}-\u{2FA1D}]+/u,nP=/[\0-#%-/:-@[-^`{-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482\u0488\u0489\u0530\u0557\u0558\u055A-\u055F\u0589-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05EB-\u05EE\u05F3-\u060F\u061B-\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070F\u074B\u074C\u07B2-\u07BF\u07F6-\u07F9\u07FB\u07FC\u07FE\u07FF\u082E-\u083F\u085C-\u085F\u086B-\u089F\u08B5\u08BE-\u08D2\u08E2\u0964\u0965\u0970\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09F2-\u09FB\u09FD\u09FF\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF0-\u0AF8\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B55\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B70\u0B72-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BF0-\u0BFF\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5B-\u0C5F\u0C64\u0C65\u0C70-\u0C7F\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0CFF\u0D04\u0D0D\u0D11\u0D45\u0D49\u0D4F-\u0D53\u0D58-\u0D5E\u0D64\u0D65\u0D70-\u0D79\u0D80\u0D81\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DE5\u0DF0\u0DF1\u0DF4-\u0E00\u0E3B-\u0E3F\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F17\u0F1A-\u0F1F\u0F2A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F48\u0F6D-\u0F70\u0F85\u0F98\u0FBD-\u0FC5\u0FC7-\u0FFF\u104A-\u104F\u109E\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u1360-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u170D\u1715-\u171F\u1735-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17D4-\u17D6\u17D8-\u17DB\u17DE\u17DF\u17EA-\u180A\u180E\u180F\u181A-\u181F\u1879-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191F\u192C-\u192F\u193C-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DA-\u19FF\u1A1C-\u1A1F\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1AAF\u1ABE-\u1AFF\u1B4C-\u1B4F\u1B5A-\u1B6A\u1B74-\u1B7F\u1BF4-\u1BFF\u1C38-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C89-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CCF\u1CD3\u1CFB-\u1CFF\u1DFA\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u200C\u200E-\u203E\u2041-\u2053\u2055-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u20CF\u20DD-\u20E0\u20E2-\u20E4\u20F1-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u215F\u2189-\u220B\u220D-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E00-\u2E2E\u2E30-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u3040\u3097\u3098\u309B\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u319F\u31BB-\u31EF\u3200-\u33FF\u4DB6-\u4DFF\u9FF0-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA670-\uA673\uA67E\uA6F2-\uA716\uA720\uA721\uA789\uA78A\uA7C0\uA7C1\uA7C7-\uA7F6\uA828-\uA83F\uA874-\uA87F\uA8C6-\uA8CF\uA8DA-\uA8DF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA954-\uA95F\uA97D-\uA97F\uA9C1-\uA9CE\uA9DA-\uA9DF\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAAC3-\uAADA\uAADE\uAADF\uAAF0\uAAF1\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB68-\uAB6F\uABEB\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFDFF\uFE10-\uFE1F\uFE30-\uFE32\uFE35-\uFE4C\uFE50-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF3E\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF\u{1000C}\u{10027}\u{1003B}\u{1003E}\u{1004E}\u{1004F}\u{1005E}-\u{1007F}\u{100FB}-\u{1013F}\u{10175}-\u{101FC}\u{101FE}-\u{1027F}\u{1029D}-\u{1029F}\u{102D1}-\u{102DF}\u{102E1}-\u{102FF}\u{10320}-\u{1032C}\u{1034B}-\u{1034F}\u{1037B}-\u{1037F}\u{1039E}\u{1039F}\u{103C4}-\u{103C7}\u{103D0}\u{103D6}-\u{103FF}\u{1049E}\u{1049F}\u{104AA}-\u{104AF}\u{104D4}-\u{104D7}\u{104FC}-\u{104FF}\u{10528}-\u{1052F}\u{10564}-\u{105FF}\u{10737}-\u{1073F}\u{10756}-\u{1075F}\u{10768}-\u{107FF}\u{10806}\u{10807}\u{10809}\u{10836}\u{10839}-\u{1083B}\u{1083D}\u{1083E}\u{10856}-\u{1085F}\u{10877}-\u{1087F}\u{1089F}-\u{108DF}\u{108F3}\u{108F6}-\u{108FF}\u{10916}-\u{1091F}\u{1093A}-\u{1097F}\u{109B8}-\u{109BD}\u{109C0}-\u{109FF}\u{10A04}\u{10A07}-\u{10A0B}\u{10A14}\u{10A18}\u{10A36}\u{10A37}\u{10A3B}-\u{10A3E}\u{10A40}-\u{10A5F}\u{10A7D}-\u{10A7F}\u{10A9D}-\u{10ABF}\u{10AC8}\u{10AE7}-\u{10AFF}\u{10B36}-\u{10B3F}\u{10B56}-\u{10B5F}\u{10B73}-\u{10B7F}\u{10B92}-\u{10BFF}\u{10C49}-\u{10C7F}\u{10CB3}-\u{10CBF}\u{10CF3}-\u{10CFF}\u{10D28}-\u{10D2F}\u{10D3A}-\u{10EFF}\u{10F1D}-\u{10F26}\u{10F28}-\u{10F2F}\u{10F51}-\u{10FDF}\u{10FF7}-\u{10FFF}\u{11047}-\u{11065}\u{11070}-\u{1107E}\u{110BB}-\u{110CF}\u{110E9}-\u{110EF}\u{110FA}-\u{110FF}\u{11135}\u{11140}-\u{11143}\u{11147}-\u{1114F}\u{11174}\u{11175}\u{11177}-\u{1117F}\u{111C5}-\u{111C8}\u{111CD}-\u{111CF}\u{111DB}\u{111DD}-\u{111FF}\u{11212}\u{11238}-\u{1123D}\u{1123F}-\u{1127F}\u{11287}\u{11289}\u{1128E}\u{1129E}\u{112A9}-\u{112AF}\u{112EB}-\u{112EF}\u{112FA}-\u{112FF}\u{11304}\u{1130D}\u{1130E}\u{11311}\u{11312}\u{11329}\u{11331}\u{11334}\u{1133A}\u{11345}\u{11346}\u{11349}\u{1134A}\u{1134E}\u{1134F}\u{11351}-\u{11356}\u{11358}-\u{1135C}\u{11364}\u{11365}\u{1136D}-\u{1136F}\u{11375}-\u{113FF}\u{1144B}-\u{1144F}\u{1145A}-\u{1145D}\u{11460}-\u{1147F}\u{114C6}\u{114C8}-\u{114CF}\u{114DA}-\u{1157F}\u{115B6}\u{115B7}\u{115C1}-\u{115D7}\u{115DE}-\u{115FF}\u{11641}-\u{11643}\u{11645}-\u{1164F}\u{1165A}-\u{1167F}\u{116B9}-\u{116BF}\u{116CA}-\u{116FF}\u{1171B}\u{1171C}\u{1172C}-\u{1172F}\u{1173A}-\u{117FF}\u{1183B}-\u{1189F}\u{118EA}-\u{118FE}\u{11900}-\u{1199F}\u{119A8}\u{119A9}\u{119D8}\u{119D9}\u{119E2}\u{119E5}-\u{119FF}\u{11A3F}-\u{11A46}\u{11A48}-\u{11A4F}\u{11A9A}-\u{11A9C}\u{11A9E}-\u{11ABF}\u{11AF9}-\u{11BFF}\u{11C09}\u{11C37}\u{11C41}-\u{11C4F}\u{11C5A}-\u{11C71}\u{11C90}\u{11C91}\u{11CA8}\u{11CB7}-\u{11CFF}\u{11D07}\u{11D0A}\u{11D37}-\u{11D39}\u{11D3B}\u{11D3E}\u{11D48}-\u{11D4F}\u{11D5A}-\u{11D5F}\u{11D66}\u{11D69}\u{11D8F}\u{11D92}\u{11D99}-\u{11D9F}\u{11DAA}-\u{11EDF}\u{11EF7}-\u{11FFF}\u{1239A}-\u{123FF}\u{1246F}-\u{1247F}\u{12544}-\u{12FFF}\u{1342F}-\u{143FF}\u{14647}-\u{167FF}\u{16A39}-\u{16A3F}\u{16A5F}\u{16A6A}-\u{16ACF}\u{16AEE}\u{16AEF}\u{16AF5}-\u{16AFF}\u{16B37}-\u{16B3F}\u{16B44}-\u{16B4F}\u{16B5A}-\u{16B62}\u{16B78}-\u{16B7C}\u{16B90}-\u{16E3F}\u{16E80}-\u{16EFF}\u{16F4B}-\u{16F4E}\u{16F88}-\u{16F8E}\u{16FA0}-\u{16FDF}\u{16FE2}\u{16FE4}-\u{16FFF}\u{187F8}-\u{187FF}\u{18AF3}-\u{1AFFF}\u{1B11F}-\u{1B14F}\u{1B153}-\u{1B163}\u{1B168}-\u{1B16F}\u{1B2FC}-\u{1BBFF}\u{1BC6B}-\u{1BC6F}\u{1BC7D}-\u{1BC7F}\u{1BC89}-\u{1BC8F}\u{1BC9A}-\u{1BC9C}\u{1BC9F}-\u{1D164}\u{1D16A}-\u{1D16C}\u{1D173}-\u{1D17A}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D241}\u{1D245}-\u{1D3FF}\u{1D455}\u{1D49D}\u{1D4A0}\u{1D4A1}\u{1D4A3}\u{1D4A4}\u{1D4A7}\u{1D4A8}\u{1D4AD}\u{1D4BA}\u{1D4BC}\u{1D4C4}\u{1D506}\u{1D50B}\u{1D50C}\u{1D515}\u{1D51D}\u{1D53A}\u{1D53F}\u{1D545}\u{1D547}-\u{1D549}\u{1D551}\u{1D6A6}\u{1D6A7}\u{1D6C1}\u{1D6DB}\u{1D6FB}\u{1D715}\u{1D735}\u{1D74F}\u{1D76F}\u{1D789}\u{1D7A9}\u{1D7C3}\u{1D7CC}\u{1D7CD}\u{1D800}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA9A}\u{1DAA0}\u{1DAB0}-\u{1DFFF}\u{1E007}\u{1E019}\u{1E01A}\u{1E022}\u{1E025}\u{1E02B}-\u{1E0FF}\u{1E12D}-\u{1E12F}\u{1E13E}\u{1E13F}\u{1E14A}-\u{1E14D}\u{1E14F}-\u{1E2BF}\u{1E2FA}-\u{1E7FF}\u{1E8C5}-\u{1E8CF}\u{1E8D7}-\u{1E8FF}\u{1E94C}-\u{1E94F}\u{1E95A}-\u{1EDFF}\u{1EE04}\u{1EE20}\u{1EE23}\u{1EE25}\u{1EE26}\u{1EE28}\u{1EE33}\u{1EE38}\u{1EE3A}\u{1EE3C}-\u{1EE41}\u{1EE43}-\u{1EE46}\u{1EE48}\u{1EE4A}\u{1EE4C}\u{1EE50}\u{1EE53}\u{1EE55}\u{1EE56}\u{1EE58}\u{1EE5A}\u{1EE5C}\u{1EE5E}\u{1EE60}\u{1EE63}\u{1EE65}\u{1EE66}\u{1EE6B}\u{1EE73}\u{1EE78}\u{1EE7D}\u{1EE7F}\u{1EE8A}\u{1EE9C}-\u{1EEA0}\u{1EEA4}\u{1EEAA}\u{1EEBC}-\u{1FFFF}\u{2A6D7}-\u{2A6FF}\u{2B735}-\u{2B73F}\u{2B81E}\u{2B81F}\u{2CEA2}-\u{2CEAF}\u{2EBE1}-\u{2F7FF}\u{2FA1E}-\u{E00FF}\u{E01F0}-\u{10FFFF}]+/gu,iP=/^\.+$/u,$nA=(A,j)=>{if(A===null||A.trim().length===0)return null;let e=1,t=A.replace(/_\d+$/u,""),r=A;for(;j.includes(r)||aP(r);)r=`${t}_${e}`,e++;return r},aP=A=>tP.includes(A)||window.hasOwnProperty(A)&&!rP.includes(A);function J7(A,j){if(!j)return null;let e=j.trim();if(e.length===0)return null;let t=A==="selector"?"_":"$";if(A==="directory"){if(iP.test(e))return null}else oP.test(e)||(e=t+e);return e=e.replace(nP,"_"),e=e.replace(/_+/gu,"_"),e=e.replace(/^\$_/u,t),e}function ti(A){return J7("variable",A)}function BnA(A){let j=J7("selector",A);return j&&(j=j.replace(/^\$/gu,"_")),j}function RR(A){return J7("directory",A)}function FR(A){let e=ti(A)||"MyComponent",t=e+Ur,r=sP(e);return{name:t,content:r}}function sP(A){return`// Get Started: https://www.framer.com/developers

import { addPropertyControls, ControlType } from "framer"
import { motion } from "framer-motion"

/**
 * @framerSupportedLayoutWidth auto
 * @framerSupportedLayoutHeight auto
 */
export default function ${A}(props) {
    const { tint } = props

    return (
        <motion.div
            style={{
                margin: 50,
                width: 100,
                height: 100,
                borderRadius: 25,
                backgroundColor: tint,
            }}
            animate={{ scale: 1.5 }}
            whileHover={{ rotate: 90 }}
        />
    )
}

addPropertyControls(${A}, {
    tint: {
        title: "Tint",
        type: ControlType.Color,
        defaultValue: "#09F",
    },
})
`}function lP(A){return`import { forwardRef, type ComponentType } from "react"
import { createStore } from "https://framer.com/m/framer/store.js@^1.0.0"
import { randomColor } from "https://framer.com/m/framer/utils.js@^0.9.0"

// Learn more: https://www.framer.com/developers/overrides/

const useStore = createStore({
    background: "#0099FF",
})

export function withRotate(Component): ComponentType {
    return forwardRef((props, ref) => {
        return (
            <Component
                ref={ref}
                {...props}
                animate={{ rotate: 90 }}
                transition={{ duration: 2 }}
            />
        )
    })
}

export function withHover(Component): ComponentType {
    return forwardRef((props, ref) => {
        return <Component ref={ref} {...props} whileHover={{ scale: 1.05 }} />
    })
}

export function withRandomColor(Component): ComponentType {
    return forwardRef((props, ref) => {
        const [store, setStore] = useStore()

        return (
            <Component
                ref={ref}
                {...props}
                animate={{
                    background: store.background,
                }}
                onClick={() => {
                    setStore({ background: randomColor() })
                }}
            />
        )
    })
}
`}function yR(A){let e=ti(A)||"MyOverrides",t=e+Ur,r=lP(e);return{name:t,content:r}}function Ta(A){return A.endsWith(".json")?!0:/\.[tj]sx?$/u.test(A)}var cP=/^(?:[\w-]+\/)*[\w-]+(?:\.[\w-]+)*$/u;function PnA(A){let{path:j}=SR(A);return cP.test(j)}function dP(A,j){if(Ta(A))return A;let[e,t]=ys(j);return t&&(t=`.${t}`),(!t||!Ta(t))&&(t=Ur),A+t}function MnA(A){return Ta(A)||(A+=".tsx"),A}function uP(A){let j=A.lastIndexOf("/");return j<0?"":A.slice(0,j)}function pP(A){let j=A.lastIndexOf("/")+1;return A.slice(j)}function U7(...A){let j="";return A.forEach(e=>{for(;e.startsWith("/");)e=e.slice(1);for(;e.endsWith("/");)e=e.slice(0,-1);e!==""&&(j!==""&&(j+="/"),j+=e)}),j}function SR(A,j=!0){A=A.trim();let[e,t]=ys(pP(A));t&&(t=`.${t}`);let r=uP(A).split("/").map(i=>RR(i)).filter(i=>!!i).join("/"),o=ti(e)||"MyComponent";return(!Ta(t)||t===Ur)&&j&&(o=Jm(o)),{path:U7(r,o+t),dirName:r,name:o,extension:t}}function DnA(A,j="component",e=!0){A=A.trim();let{dirName:t,name:r,extension:o}=SR(A,e);if(Ta(o)&&o!==Ur){let a=r+o;return{path:U7(t,a),content:""}}let n=j==="component"?FR(r):yR(r),i=dP(r+o,n.name);return{path:U7(t,i),content:n.content}}function GR(A,j){if(!A.has(j))return j;let e=1,t,[r,o]=ys(j);o&&(o=`.${o}`);do t=r+"_"+String(e++)+o;while(A.has(t));return t}function _nA(A){return A==="typescript"||A==="javascript"}var kP=1;function mP(A){return A==="screen"||A==="canvasComponent"}function Q7(A){let j=A.metadata.compatibleCmsVersion;return aA(j)?j:0}function fP(A){let j=UA(A);return A.imports.relative.some(e=>{let t=ct(e,j);return L(t)&&t.startsWith("collection")})}function z7(A){return mP(A.type)&&fP(A)}function VnA(A){return z7(A)&&Q7(A)<kP}var ri,xa,oi=class{constructor(j){this.limit=j;rj(this,ri,0);rj(this,xa,[])}async run(j,e){if(kA(this,ri)===this.limit){let t=new Promise(r=>{kA(this,xa).push(r)});e&&(t=Promise.race([t,EP(e)])),await t}CR(e),Yc(this,ri)._++;try{return await j()}finally{Yc(this,ri)._--,kA(this,xa).shift()?.()}}};ri=new WeakMap,xa=new WeakMap;var bR=new WeakMap;function EP(A){let j=bR.get(A);return j||(CR(A),j=new Promise((e,t)=>{A.addEventListener("abort",()=>{t(A.reason)},{once:!0})}),bR.set(A,j)),j}function CR(A){if(A?.aborted)throw A.reason}function Pa(A){let j=new Set;if(!A)return j;if(Q(A)&&jl(A)){let e=vR(A.layoutTemplateIdentifier);e&&j.add(e)}for(let{node:e,skipChildren:t}of A.walkWithSkipChildren()){if(!nA(e))continue;if(DA(e)){t();continue}let r=vR(e.codeComponentIdentifier);r&&j.add(r)}return j}function vR(A){let j=cA(A);if(!(!j||!fj(j)))return UA({type:j.type,name:j.localIdName})}var TR;(function(A){A[A.Static=1]="Static",A[A.Dynamic=2]="Dynamic",A[A.ImportMeta=3]="ImportMeta",A[A.StaticSourcePhase=4]="StaticSourcePhase",A[A.DynamicSourcePhase=5]="DynamicSourcePhase"})(TR||(TR={}));var $P=new Uint8Array(new Uint16Array([1]).buffer)[0]===1;function X7(A,j="@"){if(!ej)return Y7.then(()=>X7(A));let e=A.length+1,t=(ej.__heap_base.value||ej.__heap_base)+4*e-ej.memory.buffer.byteLength;t>0&&ej.memory.grow(Math.ceil(t/65536));let r=ej.sa(e-1);if(($P?hP:BP)(A,new Uint16Array(ej.memory.buffer,r,e)),!ej.parse())throw Object.assign(new Error(`Parse error ${j}:${A.slice(0,ej.e()).split(`
`).length}:${ej.e()-A.lastIndexOf(`
`,ej.e()-1)}`),{idx:ej.e()});let o=[],n=[];for(;ej.ri();){let a=ej.is(),s=ej.ie(),l=ej.it(),c=ej.ai(),d=ej.id(),u=ej.ss(),k=ej.se(),m;ej.ip()&&(m=i(A.slice(d===-1?a-1:a,d===-1?s+1:s))),o.push({n:m,t:l,s:a,e:s,ss:u,se:k,d,a:c})}for(;ej.re();){let a=ej.es(),s=ej.ee(),l=ej.els(),c=ej.ele(),d=A.slice(a,s),u=d[0],k=l<0?void 0:A.slice(l,c),m=k?k[0]:"";n.push({s:a,e:s,ls:l,le:c,n:u==='"'||u==="'"?i(d):d,ln:m==='"'||m==="'"?i(k):k})}function i(a){try{return(0,eval)(a)}catch{}}return[o,n,!!ej.f(),!!ej.ms()]}function BP(A,j){let e=A.length,t=0;for(;t<e;){let r=A.charCodeAt(t);j[t++]=(255&r)<<8|r>>>8}}function hP(A,j){let e=A.length,t=0;for(;t<e;)j[t]=A.charCodeAt(t++)}var ej,Y7=WebAssembly.compile((W7="AGFzbQEAAAABKwhgAX8Bf2AEf39/fwBgAAF/YAAAYAF/AGADf39/AX9gAn9/AX9gA39/fwADMTAAAQECAgICAgICAgICAgICAgICAgIAAwMDBAQAAAUAAAAAAAMDAwAGAAAABwAGAgUEBQFwAQEBBQMBAAEGDwJ/AUHA8gALfwBBwPIACwd6FQZtZW1vcnkCAAJzYQAAAWUAAwJpcwAEAmllAAUCc3MABgJzZQAHAml0AAgCYWkACQJpZAAKAmlwAAsCZXMADAJlZQANA2VscwAOA2VsZQAPAnJpABACcmUAEQFmABICbXMAEwVwYXJzZQAUC19faGVhcF9iYXNlAwEKm0EwaAEBf0EAIAA2AoAKQQAoAtwJIgEgAEEBdGoiAEEAOwEAQQAgAEECaiIANgKECkEAIAA2AogKQQBBADYC4AlBAEEANgLwCUEAQQA2AugJQQBBADYC5AlBAEEANgL4CUEAQQA2AuwJIAEL0wEBA39BACgC8AkhBEEAQQAoAogKIgU2AvAJQQAgBDYC9AlBACAFQSRqNgKICiAEQSBqQeAJIAQbIAU2AgBBACgC1AkhBEEAKALQCSEGIAUgATYCACAFIAA2AgggBSACIAJBAmpBACAGIANGIgAbIAQgA0YiBBs2AgwgBSADNgIUIAVBADYCECAFIAI2AgQgBUEANgIgIAVBA0EBQQIgABsgBBs2AhwgBUEAKALQCSADRiICOgAYAkACQCACDQBBACgC1AkgA0cNAQtBAEEBOgCMCgsLXgEBf0EAKAL4CSIEQRBqQeQJIAQbQQAoAogKIgQ2AgBBACAENgL4CUEAIARBFGo2AogKQQBBAToAjAogBEEANgIQIAQgAzYCDCAEIAI2AgggBCABNgIEIAQgADYCAAsIAEEAKAKQCgsVAEEAKALoCSgCAEEAKALcCWtBAXULHgEBf0EAKALoCSgCBCIAQQAoAtwJa0EBdUF/IAAbCxUAQQAoAugJKAIIQQAoAtwJa0EBdQseAQF/QQAoAugJKAIMIgBBACgC3AlrQQF1QX8gABsLCwBBACgC6AkoAhwLHgEBf0EAKALoCSgCECIAQQAoAtwJa0EBdUF/IAAbCzsBAX8CQEEAKALoCSgCFCIAQQAoAtAJRw0AQX8PCwJAIABBACgC1AlHDQBBfg8LIABBACgC3AlrQQF1CwsAQQAoAugJLQAYCxUAQQAoAuwJKAIAQQAoAtwJa0EBdQsVAEEAKALsCSgCBEEAKALcCWtBAXULHgEBf0EAKALsCSgCCCIAQQAoAtwJa0EBdUF/IAAbCx4BAX9BACgC7AkoAgwiAEEAKALcCWtBAXVBfyAAGwslAQF/QQBBACgC6AkiAEEgakHgCSAAGygCACIANgLoCSAAQQBHCyUBAX9BAEEAKALsCSIAQRBqQeQJIAAbKAIAIgA2AuwJIABBAEcLCABBAC0AlAoLCABBAC0AjAoL3Q0BBX8jAEGA0ABrIgAkAEEAQQE6AJQKQQBBACgC2Ak2ApwKQQBBACgC3AlBfmoiATYCsApBACABQQAoAoAKQQF0aiICNgK0CkEAQQA6AIwKQQBBADsBlgpBAEEAOwGYCkEAQQA6AKAKQQBBADYCkApBAEEAOgD8CUEAIABBgBBqNgKkCkEAIAA2AqgKQQBBADoArAoCQAJAAkACQANAQQAgAUECaiIDNgKwCiABIAJPDQECQCADLwEAIgJBd2pBBUkNAAJAAkACQAJAAkAgAkGbf2oOBQEICAgCAAsgAkEgRg0EIAJBL0YNAyACQTtGDQIMBwtBAC8BmAoNASADEBVFDQEgAUEEakGCCEEKEC8NARAWQQAtAJQKDQFBAEEAKAKwCiIBNgKcCgwHCyADEBVFDQAgAUEEakGMCEEKEC8NABAXC0EAQQAoArAKNgKcCgwBCwJAIAEvAQQiA0EqRg0AIANBL0cNBBAYDAELQQEQGQtBACgCtAohAkEAKAKwCiEBDAALC0EAIQIgAyEBQQAtAPwJDQIMAQtBACABNgKwCkEAQQA6AJQKCwNAQQAgAUECaiIDNgKwCgJAAkACQAJAAkACQAJAIAFBACgCtApPDQAgAy8BACICQXdqQQVJDQYCQAJAAkACQAJAAkACQAJAAkACQCACQWBqDgoQDwYPDw8PBQECAAsCQAJAAkACQCACQaB/ag4KCxISAxIBEhISAgALIAJBhX9qDgMFEQYJC0EALwGYCg0QIAMQFUUNECABQQRqQYIIQQoQLw0QEBYMEAsgAxAVRQ0PIAFBBGpBjAhBChAvDQ8QFwwPCyADEBVFDQ4gASkABELsgISDsI7AOVINDiABLwEMIgNBd2oiAUEXSw0MQQEgAXRBn4CABHFFDQwMDQtBAEEALwGYCiIBQQFqOwGYCkEAKAKkCiABQQN0aiIBQQE2AgAgAUEAKAKcCjYCBAwNC0EALwGYCiIDRQ0JQQAgA0F/aiIDOwGYCkEALwGWCiICRQ0MQQAoAqQKIANB//8DcUEDdGooAgBBBUcNDAJAIAJBAnRBACgCqApqQXxqKAIAIgMoAgQNACADQQAoApwKQQJqNgIEC0EAIAJBf2o7AZYKIAMgAUEEajYCDAwMCwJAQQAoApwKIgEvAQBBKUcNAEEAKALwCSIDRQ0AIAMoAgQgAUcNAEEAQQAoAvQJIgM2AvAJAkAgA0UNACADQQA2AiAMAQtBAEEANgLgCQtBAEEALwGYCiIDQQFqOwGYCkEAKAKkCiADQQN0aiIDQQZBAkEALQCsChs2AgAgAyABNgIEQQBBADoArAoMCwtBAC8BmAoiAUUNB0EAIAFBf2oiATsBmApBACgCpAogAUH//wNxQQN0aigCAEEERg0EDAoLQScQGgwJC0EiEBoMCAsgAkEvRw0HAkACQCABLwEEIgFBKkYNACABQS9HDQEQGAwKC0EBEBkMCQsCQAJAAkACQEEAKAKcCiIBLwEAIgMQG0UNAAJAAkAgA0FVag4EAAkBAwkLIAFBfmovAQBBK0YNAwwICyABQX5qLwEAQS1GDQIMBwsgA0EpRw0BQQAoAqQKQQAvAZgKIgJBA3RqKAIEEBxFDQIMBgsgAUF+ai8BAEFQakH//wNxQQpPDQULQQAvAZgKIQILAkACQCACQf//A3EiAkUNACADQeYARw0AQQAoAqQKIAJBf2pBA3RqIgQoAgBBAUcNACABQX5qLwEAQe8ARw0BIAQoAgRBlghBAxAdRQ0BDAULIANB/QBHDQBBACgCpAogAkEDdGoiAigCBBAeDQQgAigCAEEGRg0ECyABEB8NAyADRQ0DIANBL0ZBAC0AoApBAEdxDQMCQEEAKAL4CSICRQ0AIAEgAigCAEkNACABIAIoAgRNDQQLIAFBfmohAUEAKALcCSECAkADQCABQQJqIgQgAk0NAUEAIAE2ApwKIAEvAQAhAyABQX5qIgQhASADECBFDQALIARBAmohBAsCQCADQf//A3EQIUUNACAEQX5qIQECQANAIAFBAmoiAyACTQ0BQQAgATYCnAogAS8BACEDIAFBfmoiBCEBIAMQIQ0ACyAEQQJqIQMLIAMQIg0EC0EAQQE6AKAKDAcLQQAoAqQKQQAvAZgKIgFBA3QiA2pBACgCnAo2AgRBACABQQFqOwGYCkEAKAKkCiADakEDNgIACxAjDAULQQAtAPwJQQAvAZYKQQAvAZgKcnJFIQIMBwsQJEEAQQA6AKAKDAMLECVBACECDAULIANBoAFHDQELQQBBAToArAoLQQBBACgCsAo2ApwKC0EAKAKwCiEBDAALCyAAQYDQAGokACACCxoAAkBBACgC3AkgAEcNAEEBDwsgAEF+ahAmC/4KAQZ/QQBBACgCsAoiAEEMaiIBNgKwCkEAKAL4CSECQQEQKSEDAkACQAJAAkACQAJAAkACQAJAQQAoArAKIgQgAUcNACADEChFDQELAkACQAJAAkACQAJAAkAgA0EqRg0AIANB+wBHDQFBACAEQQJqNgKwCkEBECkhA0EAKAKwCiEEA0ACQAJAIANB//8DcSIDQSJGDQAgA0EnRg0AIAMQLBpBACgCsAohAwwBCyADEBpBAEEAKAKwCkECaiIDNgKwCgtBARApGgJAIAQgAxAtIgNBLEcNAEEAQQAoArAKQQJqNgKwCkEBECkhAwsgA0H9AEYNA0EAKAKwCiIFIARGDQ8gBSEEIAVBACgCtApNDQAMDwsLQQAgBEECajYCsApBARApGkEAKAKwCiIDIAMQLRoMAgtBAEEAOgCUCgJAAkACQAJAAkACQCADQZ9/ag4MAgsEAQsDCwsLCwsFAAsgA0H2AEYNBAwKC0EAIARBDmoiAzYCsAoCQAJAAkBBARApQZ9/ag4GABICEhIBEgtBACgCsAoiBSkAAkLzgOSD4I3AMVINESAFLwEKECFFDRFBACAFQQpqNgKwCkEAECkaC0EAKAKwCiIFQQJqQbIIQQ4QLw0QIAUvARAiAkF3aiIBQRdLDQ1BASABdEGfgIAEcUUNDQwOC0EAKAKwCiIFKQACQuyAhIOwjsA5Ug0PIAUvAQoiAkF3aiIBQRdNDQYMCgtBACAEQQpqNgKwCkEAECkaQQAoArAKIQQLQQAgBEEQajYCsAoCQEEBECkiBEEqRw0AQQBBACgCsApBAmo2ArAKQQEQKSEEC0EAKAKwCiEDIAQQLBogA0EAKAKwCiIEIAMgBBACQQBBACgCsApBfmo2ArAKDwsCQCAEKQACQuyAhIOwjsA5Ug0AIAQvAQoQIEUNAEEAIARBCmo2ArAKQQEQKSEEQQAoArAKIQMgBBAsGiADQQAoArAKIgQgAyAEEAJBAEEAKAKwCkF+ajYCsAoPC0EAIARBBGoiBDYCsAoLQQAgBEEGajYCsApBAEEAOgCUCkEBECkhBEEAKAKwCiEDIAQQLCEEQQAoArAKIQIgBEHf/wNxIgFB2wBHDQNBACACQQJqNgKwCkEBECkhBUEAKAKwCiEDQQAhBAwEC0EAQQE6AIwKQQBBACgCsApBAmo2ArAKC0EBECkhBEEAKAKwCiEDAkAgBEHmAEcNACADQQJqQawIQQYQLw0AQQAgA0EIajYCsAogAEEBEClBABArIAJBEGpB5AkgAhshAwNAIAMoAgAiA0UNBSADQgA3AgggA0EQaiEDDAALC0EAIANBfmo2ArAKDAMLQQEgAXRBn4CABHFFDQMMBAtBASEECwNAAkACQCAEDgIAAQELIAVB//8DcRAsGkEBIQQMAQsCQAJAQQAoArAKIgQgA0YNACADIAQgAyAEEAJBARApIQQCQCABQdsARw0AIARBIHJB/QBGDQQLQQAoArAKIQMCQCAEQSxHDQBBACADQQJqNgKwCkEBECkhBUEAKAKwCiEDIAVBIHJB+wBHDQILQQAgA0F+ajYCsAoLIAFB2wBHDQJBACACQX5qNgKwCg8LQQAhBAwACwsPCyACQaABRg0AIAJB+wBHDQQLQQAgBUEKajYCsApBARApIgVB+wBGDQMMAgsCQCACQVhqDgMBAwEACyACQaABRw0CC0EAIAVBEGo2ArAKAkBBARApIgVBKkcNAEEAQQAoArAKQQJqNgKwCkEBECkhBQsgBUEoRg0BC0EAKAKwCiEBIAUQLBpBACgCsAoiBSABTQ0AIAQgAyABIAUQAkEAQQAoArAKQX5qNgKwCg8LIAQgA0EAQQAQAkEAIARBDGo2ArAKDwsQJQvcCAEGf0EAIQBBAEEAKAKwCiIBQQxqIgI2ArAKQQEQKSEDQQAoArAKIQQCQAJAAkACQAJAAkACQAJAIANBLkcNAEEAIARBAmo2ArAKAkBBARApIgNB8wBGDQAgA0HtAEcNB0EAKAKwCiIDQQJqQZwIQQYQLw0HAkBBACgCnAoiBBAqDQAgBC8BAEEuRg0ICyABIAEgA0EIakEAKALUCRABDwtBACgCsAoiA0ECakGiCEEKEC8NBgJAQQAoApwKIgQQKg0AIAQvAQBBLkYNBwsgA0EMaiEDDAELIANB8wBHDQEgBCACTQ0BQQYhAEEAIQIgBEECakGiCEEKEC8NAiAEQQxqIQMCQCAELwEMIgVBd2oiBEEXSw0AQQEgBHRBn4CABHENAQsgBUGgAUcNAgtBACADNgKwCkEBIQBBARApIQMLAkACQAJAAkAgA0H7AEYNACADQShHDQFBACgCpApBAC8BmAoiA0EDdGoiBEEAKAKwCjYCBEEAIANBAWo7AZgKIARBBTYCAEEAKAKcCi8BAEEuRg0HQQBBACgCsAoiBEECajYCsApBARApIQMgAUEAKAKwCkEAIAQQAQJAAkAgAA0AQQAoAvAJIQQMAQtBACgC8AkiBEEFNgIcC0EAQQAvAZYKIgBBAWo7AZYKQQAoAqgKIABBAnRqIAQ2AgACQCADQSJGDQAgA0EnRg0AQQBBACgCsApBfmo2ArAKDwsgAxAaQQBBACgCsApBAmoiAzYCsAoCQAJAAkBBARApQVdqDgQBAgIAAgtBAEEAKAKwCkECajYCsApBARApGkEAKALwCSIEIAM2AgQgBEEBOgAYIARBACgCsAoiAzYCEEEAIANBfmo2ArAKDwtBACgC8AkiBCADNgIEIARBAToAGEEAQQAvAZgKQX9qOwGYCiAEQQAoArAKQQJqNgIMQQBBAC8BlgpBf2o7AZYKDwtBAEEAKAKwCkF+ajYCsAoPCyAADQJBACgCsAohA0EALwGYCg0BA0ACQAJAAkAgA0EAKAK0Ck8NAEEBECkiA0EiRg0BIANBJ0YNASADQf0ARw0CQQBBACgCsApBAmo2ArAKC0EBECkhBEEAKAKwCiEDAkAgBEHmAEcNACADQQJqQawIQQYQLw0JC0EAIANBCGo2ArAKAkBBARApIgNBIkYNACADQSdHDQkLIAEgA0EAECsPCyADEBoLQQBBACgCsApBAmoiAzYCsAoMAAsLIAANAUEGIQBBACECAkAgA0FZag4EBAMDBAALIANBIkYNAwwCC0EAIANBfmo2ArAKDwtBDCEAQQEhAgtBACgCsAoiAyABIABBAXRqRw0AQQAgA0F+ajYCsAoPC0EALwGYCg0CQQAoArAKIQNBACgCtAohAANAIAMgAE8NAQJAAkAgAy8BACIEQSdGDQAgBEEiRw0BCyABIAQgAhArDwtBACADQQJqIgM2ArAKDAALCxAlCw8LQQBBACgCsApBfmo2ArAKC0cBA39BACgCsApBAmohAEEAKAK0CiEBAkADQCAAIgJBfmogAU8NASACQQJqIQAgAi8BAEF2ag4EAQAAAQALC0EAIAI2ArAKC5gBAQN/QQBBACgCsAoiAUECajYCsAogAUEGaiEBQQAoArQKIQIDQAJAAkACQCABQXxqIAJPDQAgAUF+ai8BACEDAkACQCAADQAgA0EqRg0BIANBdmoOBAIEBAIECyADQSpHDQMLIAEvAQBBL0cNAkEAIAFBfmo2ArAKDAELIAFBfmohAQtBACABNgKwCg8LIAFBAmohAQwACwuIAQEEf0EAKAKwCiEBQQAoArQKIQICQAJAA0AgASIDQQJqIQEgAyACTw0BIAEvAQAiBCAARg0CAkAgBEHcAEYNACAEQXZqDgQCAQECAQsgA0EEaiEBIAMvAQRBDUcNACADQQZqIAEgAy8BBkEKRhshAQwACwtBACABNgKwChAlDwtBACABNgKwCgtsAQF/AkACQCAAQV9qIgFBBUsNAEEBIAF0QTFxDQELIABBRmpB//8DcUEGSQ0AIABBKUcgAEFYakH//wNxQQdJcQ0AAkAgAEGlf2oOBAEAAAEACyAAQf0ARyAAQYV/akH//wNxQQRJcQ8LQQELLgEBf0EBIQECQCAAQaYJQQUQHQ0AIABBlghBAxAdDQAgAEGwCUECEB0hAQsgAQtGAQN/QQAhAwJAIAAgAkEBdCICayIEQQJqIgBBACgC3AkiBUkNACAAIAEgAhAvDQACQCAAIAVHDQBBAQ8LIAQQJiEDCyADC4MBAQJ/QQEhAQJAAkACQAJAAkACQCAALwEAIgJBRWoOBAUEBAEACwJAIAJBm39qDgQDBAQCAAsgAkEpRg0EIAJB+QBHDQMgAEF+akG8CUEGEB0PCyAAQX5qLwEAQT1GDwsgAEF+akG0CUEEEB0PCyAAQX5qQcgJQQMQHQ8LQQAhAQsgAQu0AwECf0EAIQECQAJAAkACQAJAAkACQAJAAkACQCAALwEAQZx/ag4UAAECCQkJCQMJCQQFCQkGCQcJCQgJCwJAAkAgAEF+ai8BAEGXf2oOBAAKCgEKCyAAQXxqQcoIQQIQHQ8LIABBfGpBzghBAxAdDwsCQAJAAkAgAEF+ai8BAEGNf2oOAwABAgoLAkAgAEF8ai8BACICQeEARg0AIAJB7ABHDQogAEF6akHlABAnDwsgAEF6akHjABAnDwsgAEF8akHUCEEEEB0PCyAAQXxqQdwIQQYQHQ8LIABBfmovAQBB7wBHDQYgAEF8ai8BAEHlAEcNBgJAIABBemovAQAiAkHwAEYNACACQeMARw0HIABBeGpB6AhBBhAdDwsgAEF4akH0CEECEB0PCyAAQX5qQfgIQQQQHQ8LQQEhASAAQX5qIgBB6QAQJw0EIABBgAlBBRAdDwsgAEF+akHkABAnDwsgAEF+akGKCUEHEB0PCyAAQX5qQZgJQQQQHQ8LAkAgAEF+ai8BACICQe8ARg0AIAJB5QBHDQEgAEF8akHuABAnDwsgAEF8akGgCUEDEB0hAQsgAQs0AQF/QQEhAQJAIABBd2pB//8DcUEFSQ0AIABBgAFyQaABRg0AIABBLkcgABAocSEBCyABCzABAX8CQAJAIABBd2oiAUEXSw0AQQEgAXRBjYCABHENAQsgAEGgAUYNAEEADwtBAQtOAQJ/QQAhAQJAAkAgAC8BACICQeUARg0AIAJB6wBHDQEgAEF+akH4CEEEEB0PCyAAQX5qLwEAQfUARw0AIABBfGpB3AhBBhAdIQELIAEL3gEBBH9BACgCsAohAEEAKAK0CiEBAkACQAJAA0AgACICQQJqIQAgAiABTw0BAkACQAJAIAAvAQAiA0Gkf2oOBQIDAwMBAAsgA0EkRw0CIAIvAQRB+wBHDQJBACACQQRqIgA2ArAKQQBBAC8BmAoiAkEBajsBmApBACgCpAogAkEDdGoiAkEENgIAIAIgADYCBA8LQQAgADYCsApBAEEALwGYCkF/aiIAOwGYCkEAKAKkCiAAQf//A3FBA3RqKAIAQQNHDQMMBAsgAkEEaiEADAALC0EAIAA2ArAKCxAlCwtwAQJ/AkACQANAQQBBACgCsAoiAEECaiIBNgKwCiAAQQAoArQKTw0BAkACQAJAIAEvAQAiAUGlf2oOAgECAAsCQCABQXZqDgQEAwMEAAsgAUEvRw0CDAQLEC4aDAELQQAgAEEEajYCsAoMAAsLECULCzUBAX9BAEEBOgD8CUEAKAKwCiEAQQBBACgCtApBAmo2ArAKQQAgAEEAKALcCWtBAXU2ApAKC0MBAn9BASEBAkAgAC8BACICQXdqQf//A3FBBUkNACACQYABckGgAUYNAEEAIQEgAhAoRQ0AIAJBLkcgABAqcg8LIAELPQECf0EAIQICQEEAKALcCSIDIABLDQAgAC8BACABRw0AAkAgAyAARw0AQQEPCyAAQX5qLwEAECAhAgsgAgtoAQJ/QQEhAQJAAkAgAEFfaiICQQVLDQBBASACdEExcQ0BCyAAQfj/A3FBKEYNACAAQUZqQf//A3FBBkkNAAJAIABBpX9qIgJBA0sNACACQQFHDQELIABBhX9qQf//A3FBBEkhAQsgAQucAQEDf0EAKAKwCiEBAkADQAJAAkAgAS8BACICQS9HDQACQCABLwECIgFBKkYNACABQS9HDQQQGAwCCyAAEBkMAQsCQAJAIABFDQAgAkF3aiIBQRdLDQFBASABdEGfgIAEcUUNAQwCCyACECFFDQMMAQsgAkGgAUcNAgtBAEEAKAKwCiIDQQJqIgE2ArAKIANBACgCtApJDQALCyACCzEBAX9BACEBAkAgAC8BAEEuRw0AIABBfmovAQBBLkcNACAAQXxqLwEAQS5GIQELIAELnAQBAX8CQCABQSJGDQAgAUEnRg0AECUPC0EAKAKwCiEDIAEQGiAAIANBAmpBACgCsApBACgC0AkQAQJAIAJFDQBBACgC8AlBBDYCHAtBAEEAKAKwCkECajYCsAoCQAJAAkACQEEAECkiAUHhAEYNACABQfcARg0BQQAoArAKIQEMAgtBACgCsAoiAUECakHACEEKEC8NAUEGIQAMAgtBACgCsAoiAS8BAkHpAEcNACABLwEEQfQARw0AQQQhACABLwEGQegARg0BC0EAIAFBfmo2ArAKDwtBACABIABBAXRqNgKwCgJAQQEQKUH7AEYNAEEAIAE2ArAKDwtBACgCsAoiAiEAA0BBACAAQQJqNgKwCgJAAkACQEEBECkiAEEiRg0AIABBJ0cNAUEnEBpBAEEAKAKwCkECajYCsApBARApIQAMAgtBIhAaQQBBACgCsApBAmo2ArAKQQEQKSEADAELIAAQLCEACwJAIABBOkYNAEEAIAE2ArAKDwtBAEEAKAKwCkECajYCsAoCQEEBECkiAEEiRg0AIABBJ0YNAEEAIAE2ArAKDwsgABAaQQBBACgCsApBAmo2ArAKAkACQEEBECkiAEEsRg0AIABB/QBGDQFBACABNgKwCg8LQQBBACgCsApBAmo2ArAKQQEQKUH9AEYNAEEAKAKwCiEADAELC0EAKALwCSIBIAI2AhAgAUEAKAKwCkECajYCDAttAQJ/AkACQANAAkAgAEH//wNxIgFBd2oiAkEXSw0AQQEgAnRBn4CABHENAgsgAUGgAUYNASAAIQIgARAoDQJBACECQQBBACgCsAoiAEECajYCsAogAC8BAiIADQAMAgsLIAAhAgsgAkH//wNxC6sBAQR/AkACQEEAKAKwCiICLwEAIgNB4QBGDQAgASEEIAAhBQwBC0EAIAJBBGo2ArAKQQEQKSECQQAoArAKIQUCQAJAIAJBIkYNACACQSdGDQAgAhAsGkEAKAKwCiEEDAELIAIQGkEAQQAoArAKQQJqIgQ2ArAKC0EBECkhA0EAKAKwCiECCwJAIAIgBUYNACAFIARBACAAIAAgAUYiAhtBACABIAIbEAILIAMLcgEEf0EAKAKwCiEAQQAoArQKIQECQAJAA0AgAEECaiECIAAgAU8NAQJAAkAgAi8BACIDQaR/ag4CAQQACyACIQAgA0F2ag4EAgEBAgELIABBBGohAAwACwtBACACNgKwChAlQQAPC0EAIAI2ArAKQd0AC0kBA39BACEDAkAgAkUNAAJAA0AgAC0AACIEIAEtAAAiBUcNASABQQFqIQEgAEEBaiEAIAJBf2oiAg0ADAILCyAEIAVrIQMLIAMLC+wBAgBBgAgLzgEAAHgAcABvAHIAdABtAHAAbwByAHQAZgBvAHIAZQB0AGEAbwB1AHIAYwBlAHIAbwBtAHUAbgBjAHQAaQBvAG4AcwBzAGUAcgB0AHYAbwB5AGkAZQBkAGUAbABlAGMAbwBuAHQAaQBuAGkAbgBzAHQAYQBuAHQAeQBiAHIAZQBhAHIAZQB0AHUAcgBkAGUAYgB1AGcAZwBlAGEAdwBhAGkAdABoAHIAdwBoAGkAbABlAGkAZgBjAGEAdABjAGYAaQBuAGEAbABsAGUAbABzAABB0AkLEAEAAAACAAAAAAQAAEA5AAA=",typeof Buffer<"u"?Buffer.from(W7,"base64"):Uint8Array.from(atob(W7),A=>A.charCodeAt(0)))).then(WebAssembly.instantiate).then(({exports:A})=>{ej=A}),W7;function Z7(A){return A!==void 0?{ok:!0,value:A}:{ok:!0}}function Ap(A){return{ok:!1,error:A}}function xR(A){return A.then(j=>Z7(j),j=>Ap(j))}var gP=/^\s*(['"](\..*)['"])\s*$/mu,Ma=class extends Error{constructor(e){super();this.persistedMissingRelativeImports=e;this.name="RewriteRelativeImportsError"}};function D6(A){return A instanceof Ma}async function _6(A,j){await Y7;let[e]=X7(A),t=A,r=new Set,o=[...e].reverse();for(let{s:n,e:i,d:a}of o){if(a===-2)continue;if(a===-1){let I=A.substring(n,i);if(!I.startsWith("."))continue;let $=j[I];$===void 0&&(r.add(I),$=MR(I)),t=PR(t,$,n,i);continue}let s=A.substring(n,i),c=s.replace(/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,"$1").trim().match(gP);if(!c)continue;let d=c[1],u=c[2];if(d===void 0||u===void 0)continue;let k=j[u];k===void 0&&(r.add(u),k=MR(u));let m=s.replace(new RegExp(jp(d),"g"),JSON.stringify(k));t=PR(t,m,n,i)}return r.size>0?Ap({partiallyProcessedCode:t,unresolvedRelativeImports:r,parsedImports:e}):Z7(t)}function PR(A,j,e,t){return A.slice(0,e)+j+A.slice(t)}function jp(A){return A.replace(/[.*+\-?^${}()|[\]\\]/gu,"\\$&")}function MR(A){return`!missing/${A}`}var iA=CA("modules-storage"),IP="kit",_R=Object.freeze({}),NR=Object.freeze({});function wiA(A){return A&&A.type==="codeFile"?(B(L(A.sourceContent),"code module entry is missing source content"),!0):!1}function ep(A){return A.name===jd&&A.type===pm}function RP(A){return A.id===_t}function OR(A,j){return!!A&&A.saveId===j.saveId&&A.id===j.moduleId}var N6=class extends Error{constructor(){super("A circular dependency was detected."),this.name="CircularDependencyError"}},Da="update-modules-storage",FP=0;async function $j(A){let j=performance.now(),e=`acquire-modules-storage-lock-${FP++}`;return ra(e),Su.request(Da,()=>{let t=performance.now()-j;return Nl(`\u{1F513} Acquire ${Da} lock`,e),Ol(e),iA.debug("\u{1F513} Acquired the",Da,"lock in",t.toFixed(2),"ms"),t>1e3&&iA.warn("\u2757 Long wait: it took",t.toFixed(0),"ms to acquire the",Da,"lock."),A()})}var O6=class{constructor(j,e,t,r){this.storage=j;this.localId=e;this.type=t;this.debugModuleStoreAndComponentLoaderRevisionsMatch=r}get id(){let j=this.storage.getPersistedModuleByLocalId(this.localId);if(j)return j.id;let e=this.storage.getModuleTreeData(this.localId);return B(e,"Module must exist"),e.moduleId}get saveId(){let j=this.storage.getTransientSaveByLocalId(this.localId);if(j)return j.saveId;let e=this.storage.getPersistedModuleByLocalId(this.localId);return B(e,"Module must exist"),e.saveId}get transientSVGIcon(){let j=this.storage.getTransientSaveByLocalId(this.localId);if(j)return j.svgIcon}externalModuleIdentifier(j="default"){let e=this.storage.getTransientSaveByLocalId(this.localId);if(e){let r=_e(e.name);return Ke(this.id,e.saveId,r.module,j)}let t=this.storage.getPersistedModuleByLocalId(this.localId);return B(t?.files.module,"ModulesStorage: Expected module typed file in persisted module."),Ke(this.id,t.saveId,t.files.module,j)}delete(){return this.storage.delete(this.localId)}publish(j,e,t){return this.storage.publish(this.localId,{namespace:j,name:e,version:t})}sourceRevision(){let j=this.storage.getTransientSaveByLocalId(this.localId);if(j)return j.sourceRevision;let e=this.storage.getPersistedModuleByLocalId(this.localId);if(e)return np(e)}annotations(j,e){let t=this.storage.getTransientSaveByLocalId(this.localId),r=t?.annotations?Nn(t.annotations):this.storage.getModuleTreeData(this.localId)?.annotations;return j&&this.debugModuleStoreAndComponentLoaderRevisionsMatch()&&yP(r,j),e?r?.[e]:r}},rp=class extends O6{constructor(e,t,r,o,n){super(e,t,r,o);this.name=n}currentSourceEquals(e,t){let r=this.storage.getPersistedModuleByLocalId(this.localId);return!r||r.submodules.length||t.submodules?.size?!1:r.sourceContent===e}updateSource(e,t={}){return this.storage.updateSources([{localId:this.localId,source:e,options:{...t,stableName:!0}}])}persist(e){return this.storage.upsert(this.localId,{...e,type:this.type,name:this.name})}getKitSectionsStructure(){let e=this.storage.getTransientSaveByLocalId(this.localId);return e?e.kitSectionsStructure:this.storage.getKitSectionsStructure(this.name)}};function yP(A,j){if(!A)return;let e=cA(j.identifier);B(fj(e)&&Pj(e),"Entity must have an identifier."),j.annotations&&e.exportSpecifier in A&&!Br(A[e.exportSpecifier],Nn({default:j.annotations}).default,!0)&&iA.reportError("Static annotations are not synchronized with runtime annotations.",{identifier:j.identifier})}function np(A){let j=A?.metadata.sourceRevision;return aA(j)?j:void 0}var op=class extends O6{updateSource(j,e){return this.storage.updateSources([{localId:this.localId,source:j,options:e??{}}])}persist(j){return this.storage.update(this.localId,j)}rename(j){return this.storage.rename(this.localId,j)}},w6=class{constructor(j,e,t=()=>!0){this.storage=j;this.type=e;this.moduleStoreAndComponentLoaderRevisionsMatch=t}async create(j){return this.storage.create({...j,type:this.type})}getByStableName(j){return new rp(this.storage,Dt(this.type,j),this.type,this.moduleStoreAndComponentLoaderRevisionsMatch,j)}getByLocalId(j){return new op(this.storage,j,this.type,this.moduleStoreAndComponentLoaderRevisionsMatch)}getUniqueName(j){return this.storage.getUniqueNameForType(this.type,j)}},L6=class{constructor(j,e,t,r,o,n,i,a){this.getModulesService=j;this.compile=e;this.process=t;this.processWhenReady=r;this.runWhenIdle=o;this.treeStore=n;this.getActiveScope=i;this.makeDocumentReadOnly=a;y(this,"useTreeAsLocalModuleList",!1);y(this,"writeLocalModulesToTree",!1);y(this,"dependenciesModule");y(this,"persistedModules",new Map);y(this,"persistedLocalIdsByTypeSlashNameCache",new WeakMap);y(this,"transientSaves",new Map);y(this,"lastSnapshot",{dependenciesModule:void 0,modules:new Map,depsGraph:{},initialized:!1});y(this,"modulesService");y(this,"lazyServerModulesForTransientSaves",new Map);y(this,"backgroundJob",null);y(this,"backgroundAbortController",null);y(this,"initialized",!1);y(this,"initializationStarted",!1);y(this,"readOnlyTree",!1);y(this,"resolveInitialization",()=>{throw new Error("initializationPromise has not executed yet")});y(this,"rejectInitialization",()=>{throw new Error("initializationPromise has not executed yet")});y(this,"initializationPromise",new Promise((j,e)=>{this.resolveInitialization=j,this.rejectInitialization=e}));y(this,"didSetupModuleEventStream",!1);y(this,"transientInfo",null);y(this,"previousLocalModuleNodes",[]);y(this,"treeNodesToUpdate",new Map);y(this,"treeNodesToDelete",[]);y(this,"goingToStartUsingLocalModulesInTree",!1);y(this,"listeners",new Set);y(this,"transientSaveRetries",new Map);y(this,"transientSaveRelativeImportRetries",new Set);y(this,"downloadQueue",new oi(1200))}hasPendingServerModules(){return this.lazyServerModulesForTransientSaves.size>0}processOnePendingServerModule(){return this.lazyServerModulesForTransientSaves.size===0?Promise.resolve(!1):$j(async()=>{for(let[,j]of this.lazyServerModulesForTransientSaves)for(let e of j){let t=this.persistedModules.get(e)?.localId;if(!t)continue;let r=this.persistedModules.get(t);if(r?.kind!=="server")continue;iA.debug("\u{1F343} Process one server \u2192 local module",e);let o=await this.createLocalModuleFromModule(r),n=Ij(this.persistedModules,i=>{i.set(r.localId,o)});return this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:n,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!1,transientSaves:this.transientSaves}),!0}return!1})}async changeScope(j){if(!this.hasPendingServerModules())return;let e=Pa(j);!e||e.size===0||(await $j(async()=>{let t=new Set,r=this.lastSnapshot.depsGraph;for(let[a,s]of this.lazyServerModulesForTransientSaves)Qo(r,a,s,e,t);let o=[];for(let a of t){let s=this.getModuleWithTypeSlashName(a);s?.kind==="server"&&o.push(this.createLocalModuleFromModule(s))}if(iA.debug("\u{1F343} Prioritizing making visible modules local after changing scope:",j.id,"/ Visible:",e,"/ Visible Dependencies:",t,"/ Server modules:",o.length),o.length===0)return;let n=await Promise.all(o),i=Ij(this.persistedModules,a=>{for(let s of n)a.set(s.localId,s)});this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:i,depsGraph:r,didRemoteChange:!1,transientSaves:this.transientSaves})}),this.makeLazyServerModulesLocalWhenIdle().catch(LA))}async makeVisibleDependentServerModulesLocal(j){if(!VA.isOn("prioritizedModuleEvaluation"))return;let e=this.getActiveScope(),t=new Set,r=Pa(e),o=new Set;for(let a of j){let s=this.typeAndNameFromLocalId(a.localId,a.options.stableName),l=UA(s),c=this.lastSnapshot.depsGraph;Qo(c,l,o,r,t),this.lazyServerModulesForTransientSaves.set(l,o),t.delete(l)}let n=[];for(let a of t){let s=this.getModuleWithTypeSlashName(a);s?.kind==="server"&&n.push(this.createLocalModuleFromModule(s))}iA.debug("\u{1F343} Prioritizing dependent server modules after updating:",j.map(a=>a.localId),"/ Visible:",t,"/ Lazy:",o,"/ Server modules:",n.length);let i=this.persistedModules;if(n.length>0){let a=await Promise.all(n);i=Ij(i,s=>{for(let l of a)s.set(l.localId,l)})}this.persistedModules=i}async makeLazyServerModulesLocalWhenIdle(){this.cancelBackgroundJob(),this.backgroundAbortController=new AbortController;let{signal:j}=this.backgroundAbortController;return this.backgroundJob=(async()=>{try{for(;this.hasPendingServerModules()&&!j.aborted;){let e=new Bs;if(this.runWhenIdle(()=>{if(j.aborted){e.resolve(!1);return}this.processOnePendingServerModule().then(e.resolve,e.reject)}),!await e)break}}finally{this.backgroundJob=null,this.backgroundAbortController=null}})(),this.backgroundJob}cancelBackgroundJob(){this.backgroundAbortController&&this.backgroundAbortController.abort()}getTransientSave(j){return this.transientSaves.get(j)}resetModuleStateAndPermissions(j){this.readOnlyTree=j==="readonly",this.useTreeAsLocalModuleList=this.readOnlyTree,!this.readOnlyTree&&this.modulesService&&this.setupModuleEventStreamIfNeeded(),this.treeNodesToUpdate.clear(),this.treeNodesToDelete=[],this.transientSaves.size>0&&(iA.reportErrorOncePerMinute(new Error("Discarding transient saves"),{count:this.transientSaves.size}),this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:this.persistedModules,transientSaves:new Map,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!0}))}async waitForModulesToSave(){let j=Array.from(this.transientSaves.keys());for(let t of j)this.transientSaves.has(t)&&await this.update(t,{});let e=this.transientSaves.size;e>0&&iA.warn("waitForModulesToSave: transientSaves seems to be growing, ignoring rest:",e)}async initialize(){return this.initializationStarted?this.initializationPromise:(this.initializationStarted=!0,this.initializeInternal().then(this.resolveInitialization,j=>{iA.reportError(j,{context:"Failed to initialize ModulesStorage: "}),this.rejectInitialization(j)}),this.initializationPromise)}setupModuleEventStreamIfNeeded(){this.didSetupModuleEventStream||(this.didSetupModuleEventStream=!0,B(this.modulesService,"ModulesStorage.useModuleEventStream: expected modules service to be initialized"),this.modulesService.moduleEventsStream().read(async({events:j})=>{let e=j.filter(bP);this.handleRemoteModuleSaveEvents(e).catch(iA.reportError);let t=j.filter(CP);this.handleRemoteModuleDeleteEvents(t).catch(iA.reportError)}).catch(j=>{iA.reportError(j,{context:"Failed to read ModulesAPI event stream: "})}))}async initializeInternal(){if(this.modulesService=await this.getModulesService(),!this.modulesService)return;let j=this.treeStore.tree.getLocalModuleNodes();this.writeLocalModulesToTree=!!j,this.useTreeAsLocalModuleList||this.setupModuleEventStreamIfNeeded();let e,t=performance.now();if(wl("modulesStorageStart"),this.useTreeAsLocalModuleList&&j){iA.info("init from tree data"),this.previousLocalModuleNodes=j;let s=j.map(l=>({moduleId:l.save.moduleId,saveId:l.save.saveId}));e=await this.modulesService.lookUpModules({queries:s})}else iA.info("init from module list"),e=await this.modulesService.list({});wl("modulesStorageInit"),iA.debug("listing modules took:",performance.now()-t,"millis");let r=e.data.find(ep);r&&await this.updateDependenciesModule(r);let o=new Map,n=0,i=new Set;await Promise.all(e.data.map(async s=>{if(UA(s)===_t)return;let l=await this.createServerModuleFromData(s);iA.trace("init - create module",l.localId,l.id,l.saveId,l.savedAt),o.set(l.localId,l),TP(j,s)&&(n+=1),i.add(l.localId)}));let a=this.createDependencyGraph(o);this.initialized=!0,this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:o,transientSaves:this.transientSaves,depsGraph:a,didRemoteChange:!0}),wl("modulesStorageFirstPublish"),this.processTreeUpdates(),n>0&&iA.reportError("Data loss detected based on modules saves and modules in tree.",{dataLossCount:n})}createDependencyGraph(j){let e=[];for(let t of j.values()){let r=UA(t),o=t.imports.relative;e.push([r,o])}return H7(e)}processTreeUpdates(){if(this.initialized){if(this.readOnlyTree)if(this.useTreeAsLocalModuleList){if(!this.treeStore.tree.has(We)){iA.info("detected removal of local modules list node, stopping to use tree as local module list"),this.useTreeAsLocalModuleList=!1,this.setupModuleEventStreamIfNeeded();return}}else{if(!this.treeStore.tree.has(We))return;iA.info("detected insertion of a local modules list node, starting to use tree as local module list"),this.useTreeAsLocalModuleList=!0}this.syncLocalModules(),this.tryWriteTreeData()}}async syncLocalModules(){if(!this.useTreeAsLocalModuleList)return;let j=this.treeStore.tree.getLocalModulesListNode()?.children;if(!j||this.previousLocalModuleNodes===j)return;let e=[],t=sm(this.previousLocalModuleNodes,r=>[r.id,r]);this.previousLocalModuleNodes=j;for(let r of j){let o=t.get(r.id);if(t.delete(r.id),o===r)continue;let n=r.save,i=this.persistedModules.get(r.id);OR(i,n)||RP(r)&&OR(this.dependenciesModule,n)||(e.push({moduleId:n.moduleId,saveId:n.saveId}),iA.debug("syncLocalModules to update:",r.id))}if(t.size>0&&(iA.debug("syncLocalModules removing:",t.keys()),this.handleRemoteModuleDeletes(Array.from(t.values()).map(r=>r.save.moduleId))),e.length>0){iA.debug("syncLocalModules updating:",e),B(this.modulesService,"ModulesStorage.refresh: expected modules service to be initialized");let r=performance.now(),o=await this.modulesService.lookUpModules({queries:e});iA.debug("lookupModules took:",performance.now()-r,"millis"),await this.handleRemoteModuleSaves(o.data)}}canWriteTree(){return!this.treeStore.tree.isViewOnly}tryWriteTreeData(){this.canWriteTree()&&(this.treeNodesToUpdate.size===0&&this.treeNodesToDelete.length===0||this.processWhenReady(()=>{if(!this.canWriteTree())return;let j=this.treeStore.tree;j.lineage.setEditReason("localmodules"),this.createLocalModulesListNodeIfNeeded(j);for(let e of this.treeNodesToDelete)this.persistedModules.get(e)||(iA.debug("tryWriteTreeData, remove:",e),j.remove(e));this.treeNodesToDelete=[];for(let[e,{treeVersion:t,errors:r,persistedModule:o}]of this.treeNodesToUpdate.entries())this.persistedModules.get(e)?.saveId===o.saveId&&(iA.debug("tryWriteTreeData, write:",e,t,o.id,o.saveId,r),this.updateNode(j,e,t,o,r));this.treeNodesToUpdate.clear()},"nonUserEvent"))}updateTreeNodeWithOwnTreeVersion(j,e){!this.writeLocalModulesToTree&&!this.maybeUpgradeDocument()||this.process(()=>{this.treeStore.tree.lineage.setEditReason("localmodules"),this.createLocalModulesListNodeIfNeeded(this.treeStore.tree);let r=this.treeStore.tree.get(j)?.save.treeVersion??this.treeStore.remoteTreeVersion;iA.debug("updateTreeNodeWithCurrentTreeVersion:",j,r,e.id,e.saveId),this.updateNode(this.treeStore.tree,j,r,e)},"nonUserEvent")}updateTreeNode(j,e,t,r,o){return!this.writeLocalModulesToTree&&!this.maybeUpgradeDocument()?!0:this.canWriteTree()?(this.process(()=>{this.treeStore.tree.lineage.setEditReason("localmodules"),this.createLocalModulesListNodeIfNeeded(this.treeStore.tree),iA.debug("updateTreeNode:",j,e,t.id,t.saveId),this.updateNode(this.treeStore.tree,j,e,t,r,o)},"nonUserEvent"),!0):(iA.debug("updateTreeNode - readonly, buffering change"),this.treeNodesToUpdate.set(j,{treeVersion:e,persistedModule:t,errors:r,kitSectionsStructure:o}),!0)}removeTreeNode(j){this.writeLocalModulesToTree&&(this.canWriteTree()?this.process(()=>{iA.debug("removeTreeNode:",j),this.treeStore.tree.remove(j)}):this.treeNodesToDelete.push(j))}updateNode(j,e,t,r,o,n){B(this.writeLocalModulesToTree,"not using tree for local modules");let i=j.get(e)?.asDraft()??new ru({id:e});B(i instanceof ru);let a=r.metadata.pluginId,s={treeVersion:t,moduleId:r.id,saveId:r.saveId,imports:r.imports?.relative,title:r.title,name:r.name,type:r.type,sourceRevision:r.sourceRevision,annotations:r.annotations?Nn(r.annotations):i.save.annotations,pluginId:L(a)?a:i.save.pluginId};i.set({save:s}),i.tree()||j.insertNode(i,We);let l=r.name;if(!j.has(l))return;if(bj(n)){let u=j.get(l);Q(u)&&u.set({kitSectionsStructure:n})}if(!o)return;let c=j.get(sB);if(iA.debug("Writing serialization errors from artifacts to tree for",l),c?.children?.forEach(u=>{let k=u.sourceNodeId??u.scopeId,m=mA(u.sourceNodeModuleType)||r.type===u.sourceNodeModuleType;!k||k!==l||!m||!lB(u.type)||j.remove(u.id)}),o.length===0)return;let d=j.ensureErrorListNode();o.forEach(u=>j.insertNode(u,d.id))}getModuleTreeData(j){return this.treeStore.tree.getNodeWithTrait(j,vo)?.save}getKitSectionsStructure(j){return this.treeStore.tree.getNodeWithTrait(j,Q)?.kitSectionsStructure}createLocalModulesListNodeIfNeeded(j){if(B(this.writeLocalModulesToTree,"not using tree for local modules"),j.has(We)||!this.canWriteTree())return;iA.debug("ensureAllModulesExistInTree:",this.persistedModules.size),j.insertNode(new K$);let e=this.treeStore.remoteTreeVersion;this.persistedModules.forEach(t=>{this.updateNode(j,t.localId,e,t)}),this.dependenciesModule&&this.updateNode(j,_t,e,this.dependenciesModule)}usingLocalModulesInTree(){return this.treeStore.tree.has(We)||this.goingToStartUsingLocalModulesInTree}async startUsingLocalModulesInTree(){if(!this.canWriteTree())throw Error("Project is read only.");this.goingToStartUsingLocalModulesInTree=!0,this.process(()=>{if(this.startUsingLocalModulesInTree){if(!this.canWriteTree())throw Error("Project is read only.");this.treeStore.tree.lineage.setEditReason("startUsingLocalModulesInTree"),this.goingToStartUsingLocalModulesInTree=!1,this.writeLocalModulesToTree=!0,this.createLocalModulesListNodeIfNeeded(this.treeStore.tree)}})}stopUsingLocalModulesInTree(){this.goingToStartUsingLocalModulesInTree=!1,this.process(()=>{if(!this.canWriteTree())throw Error("Project is read only.");this.treeStore.tree.lineage.setEditReason("stopUsingLocalModulesInTree"),this.treeStore.tree.remove(We),this.writeLocalModulesToTree=!1,this.setupModuleEventStreamIfNeeded()})}maybeUpgradeDocument(){return this.process(()=>{if(!this.canWriteTree()){iA.warn("cannot upgrade document if we cannot write, but should not be saving modules either");return}iA.info("upgrading document to use local modules list node"),this.treeStore.tree.lineage.setEditReason("maybeUpgradeDocument"),this.writeLocalModulesToTree=!0,this.createLocalModulesListNodeIfNeeded(this.treeStore.tree)},"nonUserEvent"),this.writeLocalModulesToTree}getModuleWithTypeSlashName(j){let e=this.findPersistedModuleLocalIdByTypeSlashName(this.persistedModules,j);if(e)return this.persistedModules.get(e)}async updateDependenciesModule(j){B(ep(j),"updateDependenciesModule called with non dependencies module data");let e=await this.getDependenciesFiles(j),t=e?.dependenciesMapContent;if(!t){let r=JSON.parse(e.importMapContent),o=_n(r);t=JSON.stringify(o),this.readOnlyTree?iA.reportError(new Error("modules storage is read only"),{context:"modules storage is read only while calling updateDependenciesModule"}):(await this.updateDependenciesLocked(r,o),iA.info("The missing dependencies file has now been created."))}this.dependenciesModule={kind:"dependencies",...j,id:j.id,localId:j.localId,type:"config",name:j.name,importMapContent:e.importMapContent,dependenciesMapContent:t}}async createServerModuleFromData(j){let e={kind:"server",...j,id:j.id,localId:j.localId,moduleURL:j.baseURL+(j.type==="kit"?j.files.source:j.files.module),update:performance.now()};if((e.type==="codeFile"||e.type==="webPageMetadata")&&(e.sourceContent=await this.fetchSourceContentFromData(j)),z7(e)&&Q7(e)===0){e.sourceContent=await this.fetchSourceContentFromData(j);let t=e.sourceContent.includes("useQueryData")?1:0;e.metadata={...e.metadata,compatibleCmsVersion:t}}return e}async fetchSourceContentFromData(j){return this.downloadQueue.run(async()=>{let e=j.baseURL+j.files.source;return(await fetch(e)).text()})}async refresh(){if(this.initialized&&!this.useTreeAsLocalModuleList)return iA.debug("refresh: acquiring lock"),$j(()=>this.refreshLocked())}async refreshLocked(){iA.debug("refresh: start"),B(this.modulesService,"ModulesStorage.refresh: expected modules service to be initialized");let{data:j}=await this.modulesService.list({});iA.debug("refresh: there's",j.length,"modules to process");let e=new Map,t=new Set;await Promise.all(j.map(async o=>{let n=o.localId;if(ep(o)){this.dependenciesModule?.saveId!==o.saveId&&await this.updateDependenciesModule(o);return}let i=this.persistedModules.get(n);if(i?.saveId===o.saveId)e.set(n,i);else{let a=await this.createServerModuleFromData(o);iA.debug("refresh - updating module",a.localId,a.id,a.saveId,a.savedAt),e.set(n,a)}t.add(n)}));let r=this.createDependencyGraph(e);this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:e,transientSaves:this.transientSaves,depsGraph:r,didRemoteChange:!0}),iA.debug("refresh: finish")}whenInitialized(){return this.initializationPromise}async whenIdle(){await Promise.all([this.whenInitialized(),$j(()=>{})])}isProcessing(){return!!(!this.initialized||this.transientSaves.size>0||Su.isLocked(Da))}hasLocalChanges(){return this.transientSaves.size>0}hasLocalCodeFileChanges(){if(this.transientSaves.size===0)return!1;for(let j of this.transientSaves.values())if(j.type==="codeFile"||j.type==="config")return!0;return!1}addListener(j){this.listeners.add(j)}removeListener(j){this.listeners.delete(j)}notifyListeners(j){this.listeners.forEach(e=>{try{e(j)}catch(t){iA.reportError(t)}})}subscribe(j){return this.addListener(j),j(wR(this.dependenciesModule,void 0,this.persistedModules,this.transientSaves,this.lastSnapshot.depsGraph,new Map,this.initialized,!1,!1)),()=>this.removeListener(j)}getDependentsOfModule(j){return this.lastSnapshot.depsGraph[j]?.dependents}getUniqueNameForType(j,e){let t=new Set;for(let r of this.persistedModules.values())r.type===j&&t.add(r.name);return GR(t,e)}async updateSources(j){return $j(async()=>{let e=!1;for(let{localId:t,source:r,options:o}of j){let n=Date.now();try{await this.updateSourceLocked(t,{...o,source:r}),e=!0}catch(i){i instanceof N6&&QA({type:"add",variant:"error",text:"Instances of your component won't update if they are nested within themselves.",key:"component-circular-dependency",icon:"error",duration:Number.POSITIVE_INFINITY}),iA.reportError(i)}finally{let i=Date.now()-n;iA.debug("\u23F1 update source",t,"in",i,"ms")}}return await this.makeVisibleDependentServerModulesLocal(j),this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:this.persistedModules,transientSaves:this.transientSaves,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!1}),this.makeLazyServerModulesLocalWhenIdle().catch(LA),e})}async updateDependenciesSource(j,e){return $j(async()=>{B(this.dependenciesModule,"Dependency files must already exist to be updated.");let t=j===km?e:this.dependenciesModule.importMapContent,r=j===mm?e:this.dependenciesModule.dependenciesMapContent;return this.updateDependenciesLocked(JSON.parse(t),JSON.parse(r))})}async compileSubmodules(j,e){let t={};return await Promise.all([...e].map(async([r,o])=>{let n=await this.compile({name:r,source:o,type:j,includeSourceMap:!1,addFramerMetadata:!1});for(let a of n.imports.relative){let s=hh(a);if(!(s&&e.has(s)))throw new Error("Submodules only support relative imports of other submodules")}let i=Ll(r);t[i]=n.code})),t}typeAndNameFromLocalId(j,e=!1){if(e)return Es(j);for(let t of this.lastSnapshot.modules.values())if(t?.localId===j)return t;throw new Error(`Module entry for local id ${j} missing in internal snapshot`)}async updateSourceLocked(j,{source:e,submodules:t,binaryAssets:r=NR,stableName:o=!1,assets:n,preventCircularImports:i,telemetrySession:a,treeVersion:s,sourceRevision:l,svgIcon:c,kitSectionsStructure:d}){await this.whenInitialized();let u=this.typeAndNameFromLocalId(j,o),k=UA(u),m=await this.compile({localId:j,name:k,source:e,type:u.type,includeSourceMap:tp(u.type),telemetrySession:a}),I=_R;t&&(I=await this.compileSubmodules(u.type,t));let $=ei(this.lastSnapshot.depsGraph,k,m.imports.relative);if(i&&gR($,k))throw new N6;let F=vP(u.type,m.annotations),S=Ij(this.transientSaves,P=>{let x=P.get(j),C,H=F?.framerIntrinsicWidth;H&&(C={...C,intrinsicWidth:Number.parseInt(H,10)});let U=F?.framerIntrinsicHeight;if(U&&(C={...C,intrinsicHeight:Number.parseInt(U,10)}),C={...C,compilerContractVersion:1,treeAnnotations:!0,localModuleImportMapEntries:this.moduleUsesLocalImportMapSpecifiers(k)},x)x.saveId=Qr(),x.moduleContent=m.code,x.sourceContent=e,x.sourceMapContent=m.sourceMap,x.submoduleContents=I,x.binaryAssetContents=r,x.imports=m.imports,x.exports=m.exportedNames,x.reExportedModules=m.reExportedModules,x.treeVersion=s??this.treeStore.remoteTreeVersion,x.sourceRevision=l??x.sourceRevision,x.annotations=m.annotations,x.svgIcon=c??x.svgIcon,x.kitSectionsStructure=d??x.kitSectionsStructure,x.update=performance.now(),n&&(x.assets=Array.from(n)),C&&(x.metadata={...x.metadata,...C});else{let z={localId:j,type:u.type,name:u.name,saveId:Qr(),moduleContent:m.code,sourceContent:e,sourceMapContent:m.sourceMap,submoduleContents:I,binaryAssetContents:r,imports:m.imports,exports:m.exportedNames,reExportedModules:m.reExportedModules,treeVersion:s,sourceRevision:l,svgIcon:c,kitSectionsStructure:d,annotations:m.annotations,update:performance.now()};n&&(z.assets=Array.from(n)),C&&(z.metadata=C),P.set(j,z)}});this.transientInfo||=new Set,this.transientInfo.add(j),this.transientSaves=S,this.lastSnapshot={...this.lastSnapshot,depsGraph:$}}async create(j){return $j(()=>this.createLocked(j))}async createLocked(j){await this.whenInitialized();let{type:e,name:t,source:r,...o}=j,n=UA({type:e,name:t}),i=await this.compile({name:n,source:r,type:e,includeSourceMap:tp(e)}),a={localId:void 0,type:e,name:t,saveId:Qr(),moduleContent:i.code,sourceContent:r,sourceMapContent:i.sourceMap,submoduleContents:_R,binaryAssetContents:NR,imports:i.imports,exports:i.exportedNames,reExportedModules:i.reExportedModules,treeVersion:j.treeVersion||this.treeStore.remoteTreeVersion,sourceRevision:j.sourceRevision,svgIcon:j.svgIcon,kitSectionsStructure:j.kitSectionsStructure,annotations:i.annotations,update:performance.now()},s=await this.createBatchSaveForUpdatedModule("$new",a,this.persistedModules,new Map,new Map,{type:e,name:t,...o});B(!this.readOnlyTree,"modules storage is read only"),B(this.modulesService);let{data:l}=await this.modulesService.saveBatch({batch:[s]}),{updatedModuleLocalId:c,nextPersistedModules:d}=this.processTransientSaveData({nextPersistedModules:this.persistedModules,transientSave:a,data:l}),u=ei(this.lastSnapshot.depsGraph,n,i.imports.relative);return this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:d,transientSaves:this.transientSaves,depsGraph:u,didRemoteChange:!0}),c}async update(j,e){let t=this.persistedModules.get(j);return B(t,"Trying to update an unknown module with localId:",j),$j(async()=>{let r=Date.now();try{return await this.whenInitialized(),await this.upsertBatchLocked({[j]:{...e,name:t.name,type:t.type}})}finally{let o=Date.now()-r;iA.debug("\u23F1 update",j,"in",o,"ms")}})}async rename(j,e){return $j(()=>this.renameLocked(j,e))}async renameLocked(j,e){await this.whenInitialized();let t=this.persistedModules,r=this.lastSnapshot.depsGraph,o=t.get(j);B(o,"Trying to rename an unknown module with localId:",j);let n=this.treeStore.remoteTreeVersion,i=UA(o);B(!this.readOnlyTree,"modules storage is read only"),B(this.modulesService);let a=await this.modulesService.update({moduleId:o.id,name:e});B(a,"invalid update reply");let s=r[i]?.dependents,l=[],c={},d=UA(a);if(i!==d&&(r=M6(r,i),r=ei(r,d,o.imports.relative)),s){let u=[],k=[];for(let $ of t.values()){let F=UA($);s.has(F)&&($.kind==="local"?u.push($):k.push($))}if(k.length>0){let $=await Promise.all(k.map(F=>this.createLocalModuleFromModule(F)));t=Ij(t,F=>{for(let S of $)F.set(S.localId,S),u.push(S)})}let m=[];for(let $ of u){let F=UA($),S=eu(F,`${o.type}/${e}`);B(S,"Failed to create relative path to",o.type,"/",e);let P=eu(F,i);B(P);let x=$.imports.relative.indexOf(P);if(x===-1){iA.warn($.localId,"doesn't import",P);continue}let C=[...$.imports.relative];C[x]=S;let H={absolute:$.imports.absolute,bare:$.imports.bare,relative:C},U=VR($.sourceContent,P,S),z=VR($.moduleContent,P,S);c[$.localId]={sourceContent:U,moduleContent:z,imports:H},B($.files.source);let v={type:$.type,moduleId:$.id,name:$.name,saveId:Qr(),patchSaveId:$.saveId,files:[{name:$.files.source,type:"source",content:U}],imports:H};m.push(v)}B(!this.readOnlyTree,"modules storage is read only");let{data:I}=await this.modulesService.saveBatch({batch:m});l=I}t=Ij(t,u=>{if(this.updateTreeNode(j,n,a)){o.kind==="server"?u.set(j,{...a,kind:"server",localId:a.localId,id:a.id,moduleURL:a.baseURL+a.files.module,sourceContent:o.sourceContent,update:performance.now()}):u.set(j,{...a,kind:"local",localId:a.localId,id:a.id,moduleURL:a.baseURL+a.files.module,sourceContent:o.sourceContent,moduleContent:o.moduleContent,sourceMapContent:o.sourceMapContent,submoduleContents:o.submoduleContents,binaryAssetContents:o.binaryAssetContents,update:performance.now()});for(let m of l){let I=m.localId,$=u.get(I);B($?.kind==="local","dependent module must be local:",I);let F=c[I];B(F,"dependent module update must exist:",I),this.updateTreeNode(I,n,m)&&(u.set(I,{...m,kind:"local",localId:I,id:m.id,moduleURL:m.baseURL+m.files.module,moduleContent:F.moduleContent,sourceContent:F.sourceContent,sourceMapContent:$.sourceMapContent,submoduleContents:$.submoduleContents,binaryAssetContents:$.binaryAssetContents,imports:F.imports,exports:m.exports,reExportedModules:m.reExportedModules,submodules:m.submodules,binaryAssets:m.binaryAssets,sourceRevision:$.sourceRevision,update:$.update}),r=ei(r,UA(m),F.imports.relative))}}}),this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:t,transientSaves:this.transientSaves,depsGraph:r,didRemoteChange:!0})}async upsert(j,e){return $j(async()=>{let t=Date.now();try{return await this.whenInitialized(),await this.upsertBatchLocked({[j]:e})}finally{let r=Date.now()-t;iA.debug("\u23F1 upsert",j,"in",r,"ms")}})}async upsertBatch(j){return $j(async()=>{let e=Date.now();try{return await this.whenInitialized(),await this.upsertBatchLocked(j)}finally{let t=Date.now()-e;iA.debug("\u23F1 upsert batch in",t,"ms")}})}async delete(j){return $j(()=>this.deleteLocked(j))}async deleteLocked(j){let e=Array.isArray(j)?j:[j];if(!e.length)return;await this.whenInitialized();let t=e.map(c=>{let d=this.persistedModules.get(c);return B(d,"Trying to delete an unknown module",c,"It was never persisted."),d}),{modulesService:r}=this;B(r);let o=await Promise.allSettled(t.map(c=>r.delete({moduleId:c.id}))),n=new Set,i=new Set;for(let c of o){if(c.status==="rejected"){iA.warn(String(c.reason));continue}n.add(c.value.localId),i.add(c.value.id)}e=e.filter(c=>n.has(c)),t=t.filter(c=>i.has(c.id)),B(e.length>0,"Failed to delete module(s)");let a=this.lastSnapshot.depsGraph;for(let c of t){let d=UA(c);a=M6(a,d)}let s=Ij(this.persistedModules,c=>{for(let d of e)c.delete(d),this.removeTreeNode(d)}),l=Ij(this.transientSaves,c=>{for(let d of e)c.delete(d)});this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:s,transientSaves:l,depsGraph:a,didRemoteChange:!0})}async publish(j,e){return $j(()=>this.publishLocked(j,e))}async publishLocked(j,{namespace:e,name:t,version:r}){await this.whenInitialized();let o=this.persistedModules.get(j);B(o,"Trying to publish an unknown module",j,"It was never persisted."),B(!this.readOnlyTree,"modules storage is read only"),B(this.modulesService);let n=await this.modulesService.publish({moduleId:o.id,saveId:o.saveId,namespace:e,name:t,version:r}),i=Ij(this.persistedModules,a=>{let s=a.get(j);s&&a.set(j,{...s,lastPublish:{namespaceId:n.namespaceId,name:n.name,version:n.version,importURL:n.importURL}})});return this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:i,transientSaves:this.transientSaves,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!0}),n}async addNpmDependencies(j){return $j(async()=>{await this.whenInitialized();let e;this.dependenciesModule?.importMapContent?e=JSON.parse(this.dependenciesModule?.importMapContent):e={imports:{}};let t;this.dependenciesModule?.dependenciesMapContent?t=JSON.parse(this.dependenciesModule?.dependenciesMapContent):t={dependencies:{}};let r=Array.isArray(j)?j:[j];if(r=r.filter(a=>{if(Ui.has(a.target)||Wi(a.target))return!1;let s=zi(a);return!e.imports[s]}),r.length===0)return{dependenciesMap:t};r=r.map(a=>{if(t.dependencies[a.target]){let l=e.imports[a.target]??Object.entries(e?.imports).find(([d])=>d.startsWith(a.target))?.[1];B(l,"The import map should contain a import that is in the dependencies map");let c=v$(l)?.version;return c?{...a,target:`${a.target}@${c}`}:a}let s=Qi[a.target];return s?{...a,target:`${a.target}@${s}`}:a});let{importMap:o,resolvedDependencies:n}=await F$(e,r,Ui,Qi),i=await this.extendCurrentDependenciesMap(n);return n.forEach(({name:a,version:s})=>SA("npm_dependency_add",{name:a,semver:s})),iA.debug({newImportMap:o,newDependenciesMap:i}),await this.updateDependenciesLocked(o,i),{dependenciesMap:i}})}async reinstallNpmDependencies(){return $j(async()=>{let{currentImportMap:j,currentDependenciesMap:e}=this.getCurrentDependencies();delete j.scopes;let{importMap:t}=await y$(j,Ui,Qi);return await this.updateDependenciesLocked(t,e),t})}async uninstallBlockedNpmDependencies(){return $j(async()=>{let{currentImportMap:j,currentDependenciesMap:e}=this.getCurrentDependencies(),t=ju(e),r=await G$(j);return await this.updateDependenciesLocked(r,t),r})}async clearNpmDependencies(){return $j(async()=>this.updateDependenciesLocked({imports:{}},{dependencies:{}}))}async removeBlockedNpmDependencies(){return $j(async()=>{let{currentImportMap:j,currentDependenciesMap:e}=this.getCurrentDependencies(),t=ju(e);return await this.updateDependenciesLocked(j,e),t})}async rebuildImportMapFromDependencies(){return $j(async()=>{let j=this.dependenciesModule?.dependenciesMapContent,e=j?JSON.parse(j):{dependencies:{}},t=await C$(e,Ui,Qi);return await this.updateDependenciesLocked(t,e),t})}async unsafeUpgradeDependency(j,e,t){return $j(async()=>{let{currentImportMap:r,currentDependenciesMap:o}=this.getCurrentDependencies(),n=await b$(r,j,e,t),i=_n(n),a=Dn(i,o);return await this.updateDependenciesLocked(n,a),n})}async extendCurrentImportMap(j,e){return $j(async()=>{let{currentImportMap:t,currentDependenciesMap:r}=this.getCurrentDependencies(),o=Mn(t,j),n=Dn(r,e);return this.updateDependenciesLocked(o,n)})}async extendCurrentDependenciesMap(j){let e={};for(let r of j)e[r.name]=r.version;let t=this.dependenciesModule?.dependenciesMapContent?JSON.parse(this.dependenciesModule?.dependenciesMapContent):{dependencies:{}};return t.dependencies=Object.assign(e,t.dependencies),t}getCurrentDependencies(){let j=this.dependenciesModule?.importMapContent?JSON.parse(this.dependenciesModule?.importMapContent):{imports:{}},e=this.dependenciesModule?.dependenciesMapContent?JSON.parse(this.dependenciesModule?.dependenciesMapContent):{dependencies:{}};return{currentImportMap:j,currentDependenciesMap:e}}async updateDependenciesLocked(j,e){let t=JSON.stringify(j,null,4),r=JSON.stringify(e,null,4);if(t===this.dependenciesModule?.importMapContent&&r===this.dependenciesModule?.dependenciesMapContent)return;let o={moduleId:"$upsertName",name:jd,saveId:Qr(),type:"config",files:[{name:"importMap.json",type:"importMap",content:t},{name:"dependencies.json",type:"dependencies",content:r}],imports:{absolute:[],relative:[],bare:[]}};B(!this.readOnlyTree,"modules storage is read only"),B(this.modulesService);let{data:[n]}=await this.modulesService.saveBatch({batch:[o]});B(n,"Modules API must return an updated import map after savebatch"),this.updateTreeNodeWithOwnTreeVersion(_t,n);let i={kind:"dependencies",importMapContent:t,dependenciesMapContent:r,...n,id:n.id,localId:n.localId,type:n.type,name:n.name};this.setNextInternalState({dependenciesModule:i,persistedModules:this.persistedModules,transientSaves:this.transientSaves,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!0})}getPersistedDependenciesModule(){return this.dependenciesModule}getPersistedModuleByGlobalId(j){for(let e of this.persistedModules.values())if(e.id===j)return e}getPersistedModuleByLocalId(j){return this.persistedModules.get(j)}getTransientSaveByLocalId(j){return this.transientSaves.get(j)}async handleRemoteModuleDeleteEvents(j){if(!this.useTreeAsLocalModuleList)return this.handleRemoteModuleDeletes(j.map(e=>e.id))}async handleRemoteModuleDeletes(j){await $j(async()=>{let e=[],t=[];for(let i of j){let a=this.getPersistedModuleByGlobalId(i);a&&(t.push(UA(a)),e.push(a.localId))}let r=Ij(this.persistedModules,i=>{for(let a of e)i.delete(a)}),o=Ij(this.transientSaves,i=>{for(let a of e)i.delete(a)}),n=this.lastSnapshot.depsGraph;for(let i of t)n=M6(n,i);this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:r,transientSaves:o,depsGraph:n,didRemoteChange:!0})})}async handleRemoteModuleSaveEvents(j){if(!this.useTreeAsLocalModuleList)return this.handleRemoteModuleSaves(j.map(e=>e.module))}async handleRemoteModuleSaves(j){let e=[],t=[];for(let n of j)UA(n)===_t?e.push(n):t.push(n);let r,o=e.length>0?e[e.length-1]:void 0;if(o){let{importMapContent:n,dependenciesMapContent:i}=await this.getDependenciesFiles(o);B(i,"No dependencies file exists for the remote update!"),r={kind:"dependencies",...o,id:o.id,localId:o.localId,type:"config",name:o.name,importMapContent:n,dependenciesMapContent:i}}await $j(async()=>{r&&(this.dependenciesModule=r);let n=this.persistedModules,i=this.lastSnapshot.depsGraph,a=await Promise.all(t.map(s=>this.createServerModuleFromData(s)));for(let s of a){let l=UA(s),c=s.localId;n=Ij(n,d=>{d.set(c,s)}),this.transientSaves.has(c)||(i=ei(this.lastSnapshot.depsGraph,l,s.imports.relative))}this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:n,transientSaves:this.transientSaves,depsGraph:i,didRemoteChange:!0,multiplayerChange:!0})})}getPatchTransientSave(j,e,t){return{saveId:t,type:e.type,name:e.name,localId:j,moduleContent:e.moduleContent,sourceContent:e.sourceContent,sourceMapContent:e.sourceMapContent,submoduleContents:e.submoduleContents,binaryAssetContents:e.binaryAssetContents,imports:e.imports,exports:e.exports,reExportedModules:e.reExportedModules,sourceRevision:e.sourceRevision,update:e.update}}async upsertBatchLocked(j){if(this.readOnlyTree)return;let e=this.persistedModules,t=new Map,r=[],o=new Map;for(let c of e.values()){let d=UA(c);o.set(d,c.localId),r.push([d,c.imports.relative])}let n=new Map;for(let c in j){let d=c,u=j[d];B(u,"No persist params found for",d);let k=this.transientSaves.get(d),m=k??e.get(d);B(m,"No module found for",d);let I=UA(m);n.set(I,k?.saveId??Qr()),t.set(I,_e(u.name)),o.set(I,d),k&&r.push([I,k.imports.relative])}let i=H7(r),a=new Map,s=Ij(this.transientSaves,c=>{for(let d in j)c.delete(d)}),l;try{let{batch:c,nextPersistedModules:d}=await this.createBatch(j,a,e,i,o,n,t);B(!this.readOnlyTree,"modules storage is read only"),B(this.modulesService);let{data:u}=await this.modulesService.saveBatch({batch:c});e=Ij(d,k=>{for(let m of u.values()){let I=m.localId,$=a.get(I);if(!$){let H=k.get(I);B(H,I,"is not in persistedModules"),this.updateTreeNodeWithOwnTreeVersion(I,m),H.saveId=m.saveId,H.moduleURL=m.baseURL+m.files.module;continue}let F={kind:"local",...m,id:m.id,localId:m.localId,imports:$.imports,moduleURL:m.baseURL+m.files.module,sourceContent:$.sourceContent,sourceMapContent:$.sourceMapContent,moduleContent:$.moduleContent,submoduleContents:$.submoduleContents,binaryAssetContents:$.binaryAssetContents,sourceRevision:$.sourceRevision,annotations:$.annotations,update:$.update},S=j[I]?.errors,P=$.kitSectionsStructure,x=$.treeVersion??this.treeStore.remoteTreeVersion;if(!this.updateTreeNode(m.localId,x,F,S,P))return;k.set(I,F)}})}catch(c){e=this.persistedModules;let d=Array.from(a.values()).map(I=>I.saveId).join("-"),u=this.transientSaveRetries.get(d)??0,{error:k,dropTransient:m}=this.handlePersistenceError(c,u,()=>{this.transientSaveRetries.set(d,u+1),setTimeout(async()=>{let I=Object.entries(a).every(([$,F])=>{let S=$,P=this.transientSaves.get(S);return P&&P.saveId===F.saveId});D6(k)&&(this.transientSaveRelativeImportRetries.add(d),await this.refresh()),I&&(iA.debug("retrying saving batchId with id:",d),this.upsertBatchLocked(j))},1e3+u*1e3)});if(!m)return;l=k}if(this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:e,transientSaves:s,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!0}),l)throw l}async createBatch(j,e,t,r,o,n,i){let a=[];for(let d in j){let u=d,k=j[u];B(k,"No persist params found for",u);let m=this.transientSaves.get(u);if(!m){let $=t.get(u);B($,`Trying to persist ${u} but it doesn't have neither a corresponding transient save nor an existing persisted module.`),$.kind==="server"&&($=await this.createLocalModuleFromModule($),t=Ij(t,S=>{$&&S.set($.localId,$)}));let F=n.get(u);B(F,"No save id found for",u),m=this.getPatchTransientSave(u,$,F)}e.set(u,m);let I=await this.createBatchSaveForUpdatedModule(this.persistedModules.get(u)?.id??"$upsertName",m,t,n,i,k);a.push(I)}let s=new Map;for(let d in j){let u=d,k=j[u];B(k,"No persist params found for",u);let m=UA(k),I=new Set;Qo(r,m,I),s.set(u,I)}let l=[];for(let d of s.values())for(let u of d){let k=o.get(u);B(k,"Cannot find localId for",u);let m=t.get(k);m?.kind==="server"&&l.push(this.createLocalModuleFromModule(m))}if(l.length>0){let d=await Promise.all(l);t=Ij(t,u=>{for(let k of d)u.set(k.localId,k)})}for(let d of s.values())for(let u of d)n.has(u)||n.set(u,Qr());let c=new Set;for(let[d,u]of s){let[k]=Il(d);for(let m of u){let I=o.get(m);if(B(I,"Cannot find localId for",m),e.has(I)||c.has(m)||t.get(I)?.metadata.localModuleImportMapEntries===!0&&this.moduleUsesLocalImportMapSpecifiers(m)&&(k!=="codeFile"||!r[m]?.dependencies.has(d)))continue;c.add(m);let S=await this.createBatchSaveForDependentModule(I,t,n,i);a.push(S)}}return{batch:a,nextPersistedModules:t}}handlePersistenceError(j,e,t){let r=j instanceof Error?j.message:"",o=j instanceof ed?j.code:0,n=j instanceof ed?j.status:0,i=o===1002,a=o===-1e3,s=n>=300&&n!==400&&n!==403,l=a||s||D6(j),c=20,d=2;if(D6(j)&&VA.isOn("retryRelativeImportRewriting"))return!l||e>=d?(iA.reportError("Relative imports error, exceeded max retries, making document read only:",{missing:j.persistedMissingRelativeImports}),this.makeDocumentReadOnly(),QA({type:"add",variant:"warning",text:"Framer can\u2019t save your latest changes. Please reload the page to continue working.",key:"client-outdated",duration:Number.POSITIVE_INFINITY,icon:"warning",showCloseButton:"never",action:{title:"Reload",onClick:()=>{iA.reportError("ModulesStorage: Reloaded due to relative imports error.",{missing:j.persistedMissingRelativeImports}),window.top.location.reload()}}}),{error:j,dropTransient:!0}):(iA.debug("Relative imports error, will retry:",{missing:j.persistedMissingRelativeImports}),t(),{error:j,dropTransient:!1});if(i&&e>0)iA.debug("Ignoring duplicated save id.");else{if(i)return iA.debug("Duplicate save id error, will drop transient save:",j),{error:j,dropTransient:!0};if(l&&e<c)return iA.info("Connection error, will retry:",{message:r,code:o,status:n,retryCount:e}),t(),{dropTransient:!1};if(l)iA.error("Error saving: too many retries, will drop transient save:",{message:r,code:o,status:n,retryCount:e});else return iA.debug("Error saving, will drop transient save:",j),{error:j,dropTransient:!0}}return{dropTransient:!1}}moduleUsesLocalImportMapSpecifiers(j){let[e,t]=Il(j);if(e==="layoutTemplate")return!0;if(e==="collection")return VA.isOn("collectionLocalModuleImportMapEntries");if(e==="screen"){let r=this.treeStore.tree.get(t);if(ie(r)||Q(r))return!0}return!1}processTransientSaveData({nextPersistedModules:j,transientSave:e,data:t},r,o){let n=e.treeVersion??this.treeStore.remoteTreeVersion,i;return j=Ij(j,a=>{let s=t.values(),l=s.next().value;i=l.localId;let c={kind:"local",...l,id:l.id,localId:i,imports:e.imports,moduleURL:l.baseURL+l.files.module,sourceContent:e.sourceContent,sourceMapContent:e.sourceMapContent,moduleContent:e.moduleContent,submoduleContents:e.submoduleContents,binaryAssetContents:e.binaryAssetContents,sourceRevision:e.sourceRevision,annotations:e.annotations,update:e.update};if(this.updateTreeNode(l.localId,n,c,r,o)){a.set(i,c);for(let u of s){let k=a.get(u.localId);B(k,u.localId,"is not in persistedModules"),this.updateTreeNodeWithOwnTreeVersion(u.localId,u),k.saveId=u.saveId,k.moduleURL=u.baseURL+u.files.module}}}),B(i,"Updated module",e,"is not found in the response"),{nextPersistedModules:j,updatedModuleLocalId:i}}setNextInternalState({dependenciesModule:j,persistedModules:e,transientSaves:t,depsGraph:r,didRemoteChange:o,multiplayerChange:n=!1}){this.dependenciesModule=j,this.persistedModules=e,this.transientSaves=t;let i=wR(j,this.lastSnapshot.dependenciesModule,e,t,r,this.lastSnapshot.modules,this.initialized,o,n),a=this.lastSnapshot.initialized;this.lastSnapshot={dependenciesModule:i.dependenciesModule,modules:i.modules,depsGraph:i.depsGraph,initialized:i.initialized},!(i.metadata.patches.length===0&&i.initialized===a)&&this.notifyListeners(i)}async createLocalModuleFromModule(j){iA.debug("compiling server module:",j.localId);let e=j.sourceContent;e||(e=await this.fetchSourceContentFromData(j));let t={},r={},o=this.downloadQueue,n=new Array;for(let s of j.submodules)n.push(o.run(async()=>{let l=await fetch(j.baseURL+s);t[s]=await l.text()}));for(let s of j.binaryAssets)n.push(o.run(async()=>{let c=await(await fetch(j.baseURL+s)).arrayBuffer();r[s]=new Uint8Array(c)}));await Promise.all(n);let i=UA(j),a=await this.compile({localId:j.localId,name:i,source:e,type:j.type,includeSourceMap:tp(j.type)});for(let[s,l]of this.lazyServerModulesForTransientSaves)l.delete(i),l.size===0&&this.lazyServerModulesForTransientSaves.delete(s);return{...j,kind:"local",id:j.id,localId:j.localId,sourceContent:e,moduleContent:a.code,sourceMapContent:a.sourceMap,submoduleContents:t,binaryAssetContents:r,imports:a.imports,sourceRevision:np(j),annotations:a.annotations}}async createBatchSaveForUpdatedModule(j,e,t,r,o,n){let i=UA(e),{localId:a,moduleContent:s,sourceContent:l,sourceMapContent:c,submoduleContents:d={},binaryAssetContents:u={},metadata:k,sourceRevision:m,imports:I,type:$,name:F,annotations:S,update:P,...x}=e;switch(j){case"$new":B(a===void 0,`Attempted to create ${i} but it already has localId: ${a}`);break;case"$upsertName":default:B(a!==void 0,`The transient save for the provided moduleId: ${j} doesn't have localId`)}let{type:C,name:H,metadata:U,files:z,...v}=n;B(C===$&&H===F,`Mismatched type/name between save and parameters: ${C}/${H} !== ${$}/${F}`);let tA=_e(H),X=s;I.relative.length>0&&(X=await this.replaceRelativeImportsWithAbsolute(i,s,I.relative,t,r,hi(d),o)),c&&(X+=`
//# sourceMappingURL=./${tA.sourceMap}`);let N=(z??[]).concat([{name:tA.module,type:"module",content:X},{name:tA.source,type:"source",content:l}]);c&&N.push({name:tA.sourceMap,type:"sourceMap",content:c});for(let[q,rA]of Object.entries(d))N.push({name:q,type:"submodule",content:rA});for(let[q,rA]of Object.entries(u))N.push({name:q,type:"binaryAsset",bytes:rA});let K={};if(k||U)if(a){let q=t.get(a);B(q||j==="$upsertName",`Cannot safely update metadata for ${j} (${a})`),K.metadata={...q?.metadata,...k,...U,sourceRevision:m}}else K.metadata={...k,...U,sourceRevision:m};return{...x,moduleId:j,type:C,name:H,files:N,imports:I,...v,...K}}async createBatchSaveForDependentModule(j,e,t,r){let o=e.get(j);B(o,j,"is not found in persistedModules"),B(o.kind==="local","persisted module is not a local module");let n=UA(o),i=_e(o.name),a=o.imports,s=o.moduleContent;a.relative.length>0&&(s=await this.replaceRelativeImportsWithAbsolute(n,o.moduleContent,a.relative,e,t,hi(o.submoduleContents),r));let l=t.get(n);B(l,"newSaveIds don't contain saveId for",n);let c={},d=this.moduleUsesLocalImportMapSpecifiers(n);return o.metadata.localModuleImportMapEntries!==d&&(c.metadata={...o.metadata,localModuleImportMapEntries:d}),{type:o.type,moduleId:o.id,name:o.name,saveId:l,patchSaveId:o.saveId,files:[{name:i.module,type:"module",content:s}],imports:a,...c}}findPersistedModuleLocalIdByTypeSlashName(j,e){return this.ensurePersistedLocalIdsByTypeSlashNameCacheFor(j).get(e)}ensurePersistedLocalIdsByTypeSlashNameCacheFor(j){let e=this.persistedLocalIdsByTypeSlashNameCache.get(j);if(!e){e=new Map;for(let[t,r]of j.entries())e.set(UA(r),t);this.persistedLocalIdsByTypeSlashNameCache.set(j,e)}return e}async replaceRelativeImportsWithAbsolute(j,e,t,r,o,n,i){let{modulesCDN:a}=ht(),s={};for(let m of n){let I=ql(m);s[I]=I}let l=this.moduleUsesLocalImportMapSpecifiers(j),c=new Set;for(let m of t){if(m in s)continue;let I=ct(m,j);if(!I)continue;let $=this.findPersistedModuleLocalIdByTypeSlashName(r,I);if(!$){c.add(I),iA.error("Cannot resolve",m,"from",j);continue}let F=r.get($);B(F);let{id:S,files:P}=F,x=o.get(I)??F.saveId,C=i?.get(I)?.module??P.module;B(L(C),"Must have a module file name to build a local module import map specifier."),s[m]=l?$s($,C):`${a}/${S}/${x}/${C}`}let d=await _6(e,s);if(d.ok)return d.value;if(j.startsWith("codeFile"))return d.error.partiallyProcessedCode;let u=new Set,k=this.treeStore.tree;for(let m of d.error.unresolvedRelativeImports){let I=ct(m,j);if(!I)continue;let[$]=Il(I);if(!($==="codeFile"||!k.getNodeWithTrait(I,vo))){u.add(I);break}}if(u.size===0)return iA.reportError("Failed to rewrite relative imports due to unpersisted relative dependencies",{relativeImports:t,unresolved:Array.from(d.error.unresolvedRelativeImports)}),d.error.partiallyProcessedCode;if(iA.reportError("Failed to rewrite relative imports",{typeSlashName:j,missing:Array.from(u)}),!VA.isOn("retryRelativeImportRewriting"))return d.error.partiallyProcessedCode;throw new Ma(u)}async getDependenciesFiles({baseURL:j,files:e}){let[t,r]=await Promise.allSettled([this.downloadQueue.run(async()=>{let i=await fetch(j+e.importMap);if(i.ok!==!0)throw new Error("failed to load importMap file");return i.text()}),this.downloadQueue.run(async()=>{let i=await fetch(j+e.dependencies);if(i.ok!==!0)throw new Error("failed to load dependencies file");return i.text()})]);B(t.status==="fulfilled","The importMap has to exist on the module");let o=t.value,n;return r.status==="fulfilled"?n=r.value:iA.warn("No dependencies file was found!"),{importMapContent:o,dependenciesMapContent:n}}async upsertKit(j,e){return $j(async()=>{let t=JSON.stringify(j),r=[{name:"kit.json",type:"source",content:t},...e.map(s=>({name:`${s.id}.json`,type:"kitSection",content:JSON.stringify(s.content)}))],o=performance.now(),n="kit/kit",i={type:"kit",files:r,name:IP,moduleId:this.persistedModules.get(n)?.id??"$upsertName",saveId:Qr(),metadata:{title:j.title,icon:j.icon,prompt:j.prompt},imports:{absolute:[],relative:[],bare:[]}};B(this.modulesService);let{data:a}=await this.modulesService.saveBatch({batch:[i]});this.setNextInternalState({dependenciesModule:this.dependenciesModule,transientSaves:this.transientSaves,persistedModules:Ij(this.persistedModules,s=>{for(let l of a.values()){if(l.localId!==n)continue;let c={kind:"local",...l,id:l.id,localId:l.localId,imports:l.imports,moduleURL:l.baseURL+l.files.source,sourceContent:t,sourceMapContent:void 0,moduleContent:t,submoduleContents:{},binaryAssetContents:{},sourceRevision:void 0,annotations:void 0,update:o};s.set(n,c)}}),depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!0})})}};function SP(A,j){return`${ht().modulesCDN}/${j.id}/${A.saveId}/${j.files.module}`}function wR(A,j,e,t,r,o,n,i,a){let s=new Set(o.keys()),l=new Set(t.keys()),c=[],[d,u]=Kl(o,I=>{for(let $ of e.values()){let F=$.localId,S=UA($),P=t.get(F),x=P?.type??$.type;if(!P$(x))continue;let C;if(P)C={kind:"local",localId:F,type:P.type,name:P.name,moduleURL:SP(P,$),moduleContent:P.moduleContent,sourceContent:P.sourceContent,sourceMapContent:P.sourceMapContent,submoduleContents:P.submoduleContents,binaryAssetContents:P.binaryAssetContents,relativeImports:P.imports.relative,files:$.files,sourceRevision:P.sourceRevision,kitSectionsStructure:P.kitSectionsStructure,svgIcon:P.svgIcon,update:P.update};else{let H=np($);C=$.kind==="local"?{kind:"local",localId:F,type:$.type,name:$.name,moduleURL:$.moduleURL,moduleContent:$.moduleContent,sourceContent:$.sourceContent,sourceMapContent:$.sourceMapContent,submoduleContents:$.submoduleContents,binaryAssetContents:$.binaryAssetContents,relativeImports:$.imports.relative,files:$.files,sourceRevision:H,svgIcon:void 0,kitSectionsStructure:void 0,update:$.update}:{kind:"server",localId:F,type:$.type,name:$.name,moduleURL:$.moduleURL,sourceContent:$.sourceContent,relativeImports:$.imports.relative,files:$.files,sourceRevision:H,update:$.update}}LR(I,S,C),l.delete(F),s.delete(S)}for(let $ of l){let F=t.get($);if(B(F),!F.localId)continue;let S=_e(F.name),P={kind:"local",localId:F.localId,type:F.type,name:F.name,moduleURL:`./transient/${F.saveId}/${S.module}`,moduleContent:F.moduleContent,sourceContent:F.sourceContent,sourceMapContent:F.sourceMapContent,submoduleContents:F.submoduleContents,binaryAssetContents:F.binaryAssetContents,relativeImports:F.imports.relative,files:S,sourceRevision:F.sourceRevision,svgIcon:F.svgIcon,kitSectionsStructure:F.kitSectionsStructure,update:F.update};LR(I,$,P),s.delete(UA(P))}for(let $ of s)I.delete($),c.push($)}),k={};for(let I of c){let $=o.get(I);$&&(k[I]=$.localId)}let m=Ij(j,I=>{if(A){if(!I)return{kind:"dependencies",localId:_t,type:A.type,name:A.name,importMapContent:A.importMapContent,dependenciesMapContent:A.dependenciesMapContent};I.importMapContent=A.importMapContent,I.dependenciesMapContent=A.dependenciesMapContent}});return m&&m!==j&&u.push({op:j?"replace":"add",path:[UA(m)],value:m}),{dependenciesModule:m,modules:d,deletedLocalIdsByTypeSlashNames:k,depsGraph:r,initialized:n,metadata:{patches:u,hasLocalChanges:t.size>0,didRemoteChange:i,multiplayerChange:a}}}function LR(A,j,e){let t=A.get(j);if(!t){A.set(j,e);return}if(t.kind!==e.kind){A.set(j,e);return}if(t.kind==="server"){B(e.kind==="server"),qR(t,e);return}B(e.kind==="local"),GP(t.relativeImports,e.relativeImports)||(t.relativeImports=e.relativeImports),Hm(t.files,e.files)||(t.files=e.files);let{relativeImports:r,files:o,...n}=e;qR(t,n)}function qR(A,j){Object.assign(A,j)}function GP(A,j){if(!A&&!j)return!0;if(A&&j){let e=A.length;if(e!==j.length)return!1;for(let t=0;t<e;t++)if(A[t]!==j[t])return!1;return!0}else return!1}function bP(A){return A.type==="save"}function CP(A){return A.type==="delete"}function Qr(){return Ga()}function tp(A){return A==="codeFile"||A==="canvasComponent"}function VR(A,j,e){return A.replace(new RegExp(`\\b(from\\s*)(["'])${jp(j)}\\2`,"g"),`$1${JSON.stringify(e)}`)}function vP(A,j){switch(A){case"canvasComponent":case"layoutTemplate":case"screen":case"prototype":case"collection":case"draftCollection":case"webPageMetadata":case"siteMetadata":case"vector":case"vectorSet":case"kit":return j.default;case"codeFile":case"css":case"componentPresets":case"config":case"localization":case"design":return Object.values(j)[0];default:EA(A)}}var KR={start:new Date("2025-09-03T10:00:00Z").getTime(),end:new Date("2025-09-07T13:00:00Z").getTime()};function TP(A,j){for(let e of A){if(e.id!==j.localId)continue;if(e.save.saveId===j.saveId)return!1;let t=new Date(j.savedAt).getTime();return Number.isNaN(t)?!1:t>KR.start&&t<KR.end}return!1}function HR(A,j){if(!A||A.length===0)return j?.placeholder??"";if(A.length===1)return A[0]&&A[0]!==""?A[0]:j?.placeholder??"";let e=[...A],t="";if(j?.max&&j.max<A.length){let r=A.length-j.max;e=e.slice(0,j.max),t=`${r} ${r>1?"others":"other"}`}else t=e.pop()??"";return e.length>1?`${e.join(", ")}, and ${t}`:`${e.join(", ")} and ${t}`}var ZiA=Dt("componentPresets","componentPresets");function JR(A,j){let e=A.getPresetsListNode();return e?e.getComponentPresets().find(t=>t.componentIdentifier===j)??null:null}function UR(A,j){let{treeStore:e}=A.stores;if(e.tree.has(j.id))return;let t=JR(e.tree,j.componentIdentifier),r=rr(e.tree),o=MB(r.children,i=>$n(i)&&i.componentIdentifier!==j.componentIdentifier);o!==-1&&(o+=1),e.tree.insertNode(j,r.id,o),yn(A)&&A.stores.codeGenerationStore.createModuleFromComponentSource(r).catch(LA),et(j.componentIdentifier)&&A.stores.modulesStore.addExternalModulesToProject([j.componentIdentifier],{onTreeUpdate(){}});let n=_i(j.componentIdentifier);t||A.scheduler.runWithFullyLoadedTree(()=>{let i=e.getLoadedIndexes();for(let a of i.richTextNodes)a.htmlContent&&pj(e.tree,a,n)&&a.setComponentPreset(j.componentIdentifier,j.id)},{runInBackground:!0,name:"insertComponentPreset"})}function xP(A,j){if(JR(A.tree,j.componentIdentifier))return;let t=cu.createDefault(j);UR(A,t)}function AaA(A,j,e){A.scheduler.processWhenReady(()=>{let r=rr(A.tree).getComponentPresets(),o=new Set;for(let i of r)i.name&&o.add(i.name);let n=cu.createDefault(j,{name:te(j.name,o)});UR(A,n);try{e&&e(n)}catch{}})}function jaA(A,j){return A.getPresetsListNode()?.getComponentPresets().filter(t=>t.componentIdentifier===j)??[]}function QR(A,j,e){let t=cA(j);function r(n){let i=cA(n);return i.kind==="externalModuleExport"&&t.kind==="externalModuleExport"&&i.moduleId===t.moduleId&&i.exportSpecifier===t.exportSpecifier}let o=A.getPresetsListNode();if(o){let n=o.getComponentPresets();for(let i of n)r(i.componentIdentifier)&&i.set({componentIdentifier:e})}B(!A.getService("loader"),"Tree should be fully loaded");for(let n of A.root.walk()){if(!uj(n))continue;let i=n.getComponentPresets();for(let[a,s]of i){let l=_i(a);r(a)&&pj(A,n,l)&&(n.setComponentPreset(e,s),n.setComponentPreset(a,void 0))}}}function eaA(A,j,e){let t=j.find(r=>r.componentIdentifier===e);t&&xP(A,t)}function _a(A){let j=cA(A);if(!(!j||!Pj(j)||!et(j)))return`${j.moduleId}:${j.exportSpecifier}`}function zR(A){let j=new Map;for(let e of A){let t=_a(e);t&&j.set(t,e)}return j}function WR(A,j){let e=A.getRawControlProps();for(let t in e){let r=e[t]?.type,o=e[t]?.value;if(r!=="vectorsetitem"||!L(o)||!Pj(o))continue;let n=_a(o);if(!n||!j.has(n))continue;let i=j.get(n);i&&A.setControlProp(t,{type:"vectorsetitem",value:i})}}function XR(A,j){for(let e of j){WR(e,A);let t=_a(e.codeComponentIdentifier);if(!t||!A.has(t))continue;let r=A.get(t);r&&e.set({codeComponentIdentifier:r})}}function YR(A,j){let e=j.getContentManagementNode();if(e){B(e.isLoaded(),"CMS Should always be loaded.");for(let{node:t,skipChildren:r}of e.walkWithSkipChildren()){if(hj(t)){if(!t.variables.some(i=>i.type==="vectorsetitem")){r();continue}ZR(t,A)}if(!Ge(t))continue;let o=t.getControlProps();for(let n in o){let i=o[n]?.value;if(o[n]?.type!=="vectorsetitem"||!L(i)||!Pj(i))continue;let s=_a(i);if(!s||!A.has(s))continue;let l=A.get(s);l&&t.setControlProp(n,{...o[n],value:l})}}}}function ZR(A,j){let e=!1,t=A.variables.map(r=>{if(r.type!=="vectorsetitem")return r;let{initialValue:o}=r,n=o.identifier;if(!n)return r;let i=_a(n);if(!i||!j.has(i))return r;let a=j.get(i);return a?(e=!0,{...r,initialValue:{...o,identifier:a}}):r});e&&A.set({variables:t})}function AF(A,j){for(let e of j.root.children){if(Q(e)){WR(e,A);continue}(dA(e)||Ej(e))&&ZR(e,A)}}var re=CA("modules-store"),jF=new Set(["codeFile","canvasComponent","screen","layoutTemplate","vector"]),PP=500;function ip(A){let{module:j,exportSpecifier:e}=A,{id:t,saveId:r,files:o}=j;return B(o.module,"module file must exist for a saved module"),Ke(t,r,o.module,e)}var ni,Na,Oa,zr,eF=class extends ze{constructor(e,t,r,o,n,i,a,s){super();this.scheduler=e;this.treeStore=t;this.loadedExternalModulesStore=r;this.chromeStore=o;this.modulesAPIServicePromise=n;this.makeDocumentReadOnly=i;this.insertTemporaryImportMap=a;this.loadAllLocalModules=s;y(this,"dependenciesModule");y(this,"localModules",new Map);y(this,"fastRefreshModules",new Map);y(this,"externalModulesDynamicInfo",new Map);y(this,"revision",0);rj(this,ni,new Map);y(this,"moduleDepsGraph",{});y(this,"modulesStorage");y(this,"moduleUpdatesEmitter",new Nt);y(this,"fastRefreshModulesEmitter",new Nt);rj(this,Na);rj(this,Oa,new Map);rj(this,zr,new Map);y(this,"debugModuleStoreAndComponentLoaderRevisionsMatch",()=>this.revision===Y.modulesRevision);y(this,"checkForExternalModuleUpdates",async()=>{if(this.treeStore.tree.isViewOnly)return;let e=this.treeStore.tree.getExternalModulesListNode();if(!e||!e.children?.length)return;let t=[],r=new Map;e.children.forEach(a=>{let s=cA(a.codeComponentIdentifier);if(B(s?.kind==="externalModuleExport","expected ExternalModuleNode identifier to be of kind externalModuleExport"),a.type==="vector"){let l=a.annotation("framerVector");if(!Bl(l))return;let c=l.set.moduleId,d=r.get(c)??[];d.push(s),r.set(c,d)}else t.push(s)});for(let[a,s]of r){let l=this.treeStore.tree.get(a);if(!Ht(l))continue;let c=l.annotation("framerVectorSet");Xd(c)&&(f$(c)||t.push(...s))}let o=t.map(({moduleId:a,saveId:s})=>({moduleId:a,saveId:s}));if(!o.length)return;let n=[],i=[];for(let a=0;a<o.length;a++){let s=o[a];if(B(s,"query is expected to be defined."),n.push(s),n.length<PP&&a<o.length-1)continue;let{modules:l}=await this.lookUpModules(n,{includeStatus:!0});i.push(...l),n=[]}this.treeStore.tree.isViewOnly||this.updateExternalModuleNodes(i.map((a,s)=>{let l=t[s];return B(l,"External module missing a matching identifier"),{module:a,exportSpecifier:l.exportSpecifier}}),{onTreeUpdate(){}}).catch(LA)});y(this,"updatesPollId");y(this,"compileFastRefreshModule",async({localId:e,name:t,source:r,includeSourceMap:o=!0})=>{let{type:n,name:i}=Es(e);if(!jF.has(n))return;let a=n==="codeFile"?_e(t).source:i,{code:s,imports:l,sourceMap:c}=await UI({localId:e,source:r,name:a,includeSourceMap:o}),d={kind:"fast-refresh",localId:e,type:n,name:a,sourceContent:r,moduleContent:s,relativeImports:l.relative,sourceMapContent:c,binaryAssetContents:void 0,submoduleContents:{},update:0},[u,k]=Kl(this.fastRefreshModules,m=>{m.set(t,d)});this.fastRefreshModules=u,this.fastRefreshModulesEmitter.emit({patches:k,dependentModules:[],prioritizedModules:[],revision:++this.revision,initialized:!0})});y(this,"compile",({localId:e,name:t,source:r,includeSourceMap:o=!0,type:n,telemetrySession:i})=>{let a=QI({name:t,source:r,includeSourceMap:o,type:n,telemetrySession:i});return this.fastRefreshEnabled&&e&&this.compileFastRefreshModule({localId:e,name:t,source:r,includeSourceMap:o}).catch(LA),a});this.modulesStorage=new L6(()=>this.modulesAPIServicePromise.catch(l=>{throw re.error(l,{context:"Failed to discover ModulesAPI service:"}),l}),this.compile,this.scheduler.process.bind(this.scheduler),this.scheduler.processWhenReady.bind(this.scheduler),this.scheduler.runWhenIdle.bind(this.scheduler),t,()=>this.getActiveScope(),()=>this.makeDocumentReadOnly()),this.fastRefreshModulesEmitter.onNewStream=l=>(re.debug("onNewStream - fast refresh",l),{latest:this.getAllModulesAsUpdateEvent(!0)}),this.moduleUpdatesEmitter.onNewStream=l=>(re.debug("onNewStream - module updates",l),{latest:this.getAllModulesAsUpdateEvent(!1)}),this.modulesStorage.subscribe(l=>{let c=l.dependenciesModule?.importMapContent,d=this.dependenciesModule?.importMapContent,u=!1,k=!1,m=!1,I=!1;if(c&&d&&c!==d){let z=JSON.parse(c),v=d?JSON.parse(d):void 0;for(let[tA,X]of Object.entries(z.imports??{})){kA(this,ni).set(tA,"success");let N=v?.imports?.[tA];if(!N){u=!0;continue}N!==X&&(k=!0)}m=!k&&!u,I=l.metadata.multiplayerChange||k||m}I&&l.metadata.multiplayerChange,this.dependenciesModule=l.dependenciesModule,this.localModules=l.modules;let $=this.moduleDepsGraph;this.moduleDepsGraph=l.depsGraph;let F=l.metadata.patches,S=new Set,P=[],x=[],C;for(let z of F){let v=z.path[0];if(B(typeof v=="string"),v===_t){C=z;for(let tA of l.modules.keys())S.add(tA);break}z.op==="remove"&&z.path.length===1?x.push(v):P.push(v)}let H=new Set;if(!C){let z=this.getActiveScope(),v=Pa(z);re.debug("Calculated visible code component module typeSlashNames",v);for(let tA of P)Qo(l.depsGraph,tA,S,v,H);for(let tA of x)Qo($,tA,S,v,H);P.forEach(tA=>{S.delete(tA)}),x.forEach(tA=>{S.delete(tA),H.delete(tA)})}re.debug("prioritized evaluation sending to sandbox",{dependentModules:S,visibleDependentModules:H},"highprio size",H.size,"dep size",S.size);let U={patches:F,dependentModules:Array.from(S),prioritizedModules:Array.from(H),revision:++this.revision,initialized:l.initialized};this.moduleUpdatesEmitter.emit(U),this.fastRefreshEnabled&&C&&this.fastRefreshModulesEmitter.emit({patches:[C],dependentModules:[],prioritizedModules:[],revision:U.revision,initialized:l.initialized})})}getActiveScope(){if(this.chromeStore.mainView===5)return;let e=this.treeStore.tree.getNode(kA(this,Na));if(e)return B(e?.loaded,"Active scope node should be loaded"),e.loaded}setActiveScope(e){OA(this,Na,e)}getLatestDependencyGraph(){return this.moduleDepsGraph}initialize(){return this.initialized?this.modulesStorage.refresh():(this.setupPollingExternalModulesUpdates(),this.modulesStorage.initialize())}get initialized(){return this.modulesStorage.initialized}whenInitialized(){return this.modulesStorage.whenInitialized()}whenIdle(){return this.modulesStorage.whenIdle()}refresh(){return this.modulesStorage.refresh()}deleteModules(e){return this.modulesStorage.delete(e)}upsertBatch(e){return this.modulesStorage.upsertBatch(e)}forType(e){return new w6(this.modulesStorage,e,this.debugModuleStoreAndComponentLoaderRevisionsMatch)}getNpmDependencyInstallStatus(e){return kA(this,ni).get(zi(e))??"unknown"}async addNpmDependencies(e){let r=typeof this.dependenciesModule>"u"&&!LI(),o=await xR(this.modulesStorage.addNpmDependencies(e)),n=Array.isArray(e)?e:[e],i=n.filter(({target:l})=>!Wi(l));for(let l of i)kA(this,ni).set(zi(l),o.ok?"success":"failure");if(!o.ok)throw o.error;r&&qI();let a=Object.keys(o.value.dependenciesMap.dependencies),s=n.map(({target:l})=>l).filter(l=>!a.includes(l)&&Wi(l));if(s.length>0){let l=HR(s,{max:5,placeholder:"package"});QA({type:"add",variant:"warning",text:`${l} ${s.length===1?"is":"are"} incompatible with Framer`,duration:5e3})}return o.value}changeScope(e){this.setActiveScope(e.id),this.modulesStorage.changeScope(e)}async reinstallNpmDependencies(){return{importMap:await this.modulesStorage.reinstallNpmDependencies()}}async uninstallBlockedNpmDependencies(){return{importMap:await this.modulesStorage.uninstallBlockedNpmDependencies()}}async unsafeUpgradeDependency(e,t,r){return{importMap:await this.modulesStorage.unsafeUpgradeDependency(e,t,r)}}async clearNpmDependencies(){return this.modulesStorage.clearNpmDependencies()}async removeBlockedNpmDependencies(){return{dependenciesMap:await this.modulesStorage.removeBlockedNpmDependencies()}}async rebuildImportMapFromDependencies(){return{importMap:await this.modulesStorage.rebuildImportMapFromDependencies()}}async updateSources(e){return this.modulesStorage.updateSources(e)}async updateKit(...e){return this.modulesStorage.upsertKit(...e)}async updateDependenciesSource(e,t){await this.modulesStorage.updateDependenciesSource(e,t)}getDependentsOfModule(e){return this.modulesStorage.getDependentsOfModule(e)}subscribeToModulesStorage(e){return this.modulesStorage.subscribe(e)}async getModuleDependencies(e){let t=await this.modulesAPIServicePromise;return B(t,"Modules API service not initialized correctly"),await t.getModuleDependencies(e)}getModuleEntryByLocalId(e){for(let t of this.localModules.values())if(t.localId===e)return t}getModuleEntryByUniqueName(e){for(let t of this.localModules.values())if(t.name===e)return t}getPersistedDependenciesModule(){return this.modulesStorage.getPersistedDependenciesModule()}getPersistedModuleByGlobalId(e){return this.modulesStorage.getPersistedModuleByGlobalId(e)}getPersistedModuleByLocalId(e){return this.modulesStorage.getPersistedModuleByLocalId(e)}getPersistedModuleByLocalIdentifier(e){let t=cA(e);if(fj(t))return this.getPersistedModuleByLocalId(t.localId)}tryConvertExternalCodeComponentIdentifierToLocal(e){let t=cA(e);if(t?.kind!=="externalModuleExport")return;let r=this.getPersistedModuleByGlobalId(t.moduleId);if(r)return fs(r.localId,t.exportSpecifier).value}async listNamespaces(){let e=await this.modulesAPIServicePromise;return B(e,"Modules API service not initialized correctly"),await e.listNamespaces()}async createNamespace(e,t){let r=await this.modulesAPIServicePromise;return B(r,"Modules API service not initialized correctly"),await r.createNamespace({ownerId:e,ownerType:t})}async lookUpModule(e,t){let{modules:r,dependencies:o}=await this.lookUpModules([e],t),n=r[0];B(n,"Module does not exist, looking up:",e);let i={module:n};return o&&(i.dependencies=o[n.ownerType]?.[n.ownerId]),i}async lookUpModules(e,t){let r=await this.modulesAPIServicePromise;if(!r)return re.error("Modules API service not initialized correctly"),{modules:[],dependencies:{}};let{data:o,dependencies:n}=await r.lookUpModules({queries:e,...t}),i=new Map(this.externalModulesDynamicInfo);for(let s of o){let l=s.id,{localId:c,title:d,description:u,lastPublish:k,status:m}=s;i.set(l,{localId:c,title:d,description:u,lastPublish:k,status:m??i.get(l)?.status})}this.externalModulesDynamicInfo=i;let a={modules:o};return n&&(a.dependencies=n),a}trackExternalComponentInsert(e,t){let r=vr();for(let o of e)j0({insertId:r,insertType:t,codeComponentId:o})}async installExternalModulesDependencies(e){let t=[],r=[];for(let o of e){let n=kA(this,Oa).get(o);n?r.push(n):t.push(o)}if(t.length>0){let o=this.installDependenciesForModuleURLs(t);for(let n of t)kA(this,Oa).set(n,o);r.push(o)}return Promise.allSettled(r).then(o=>{for(let n of o)n.status!=="fulfilled"&&re.error("Failed to install external module",n.reason)})}isProcessingModules(){return this.modulesStorage.isProcessing()}hasLocalCodeFileChanges(){return this.modulesStorage.hasLocalCodeFileChanges()}resetModuleStateAndPermissions(e){this.modulesStorage.resetModuleStateAndPermissions(e)}getTransientSave(e){return this.modulesStorage.getTransientSave(e)}startUsingLocalModulesInTree(){return this.modulesStorage.startUsingLocalModulesInTree()}stopUsingLocalModulesInTree(){return this.modulesStorage.stopUsingLocalModulesInTree()}usingLocalModulesInTree(){return this.modulesStorage.usingLocalModulesInTree()}createFastRefreshModuleFromModule(e){if(jF.has(e.type)){if(e.kind==="server"){let t=this.getPersistedModuleByLocalId(e.localId);B(t?.kind==="server","Only server modules should have no sourceContent"),this.modulesStorage.createLocalModuleFromModule(t).catch(LA);return}this.compileFastRefreshModule({name:UA(e),localId:e.localId,source:e.sourceContent}).catch(LA)}}getModuleWithTypeSlashName(e){return this.modulesStorage.getModuleWithTypeSlashName(e)}waitForModulesToSave(){return this.modulesStorage.waitForModulesToSave()}installDependenciesForModuleURLs(e){return re.info(`\u{1F986} Installing external modules:
	`,e.join(`
	`)),this.lookUpModules(e.map(t=>({url:t})),{includeDependencies:!0}).then(async({dependencies:t={}})=>{let r=Object.values(t).flatMap(i=>Object.values(i)),o,n;for(let{dependencies:i,importMap:a}of r)if(a){o=Mn(o??{imports:{}},a);let s=i??_n(a);n=Dn(n??{dependencies:{}},s)}o&&n&&await this.modulesStorage.extendCurrentImportMap(o,n)})}async addOrUpdateExternalVectors(e){await this.modulesStorage.whenInitialized();let{modules:t}=await this.lookUpModules(e.filter(n=>{let i=this.treeStore.tree.getNodeWithTrait(n.moduleId,Ht);return i?cA(i.codeComponentIdentifier).saveId!==n.saveId:!0}),{includeDependencies:!1,includeStatus:!0}),r=new Map,o="default";for(let n of t){let i=ip({module:n,exportSpecifier:o}),a=this.treeStore.tree.getNodeWithTrait(n.id,Ht);Pj(a?.codeComponentIdentifier)&&cA(a.codeComponentIdentifier).saveId===n.saveId||r.set(i.value,{module:n,exportSpecifier:o})}await Promise.all(Array.from(r.keys(),n=>{let i=cA(n);return B(i,"Identifier must be a valid module identifier"),this.loadedExternalModulesStore.ensureModuleEvaluatedInSandbox(i).catch(a=>{re.error(`Failed to evaluate external module "${n}"`,a)})})),await new Promise((n,i)=>{this.scheduler.runWithFullyLoadedTree(()=>{this.updateExternalModuleNodes(Array.from(r.values()),{onTreeUpdate:()=>{let a=zR(r.keys());XR(a,this.treeStore.getLoadedIndexes().codeComponents),YR(a,this.treeStore.tree),AF(a,this.treeStore.tree)},updateSave:!0}).then(n).catch(i)},{name:"update_external_module_version",runInBackground:!0})})}async addOrUpdateVectorSetAndVectors(e){await this.addOrUpdateExternalVectors([e]);let r=this.treeStore.tree.getNodeWithTrait(e.moduleId,Ht)?.annotation("framerVectorSet");Xd(r)&&await this.addOrUpdateExternalVectors(r.items.map(o=>({moduleId:o.moduleId,saveId:o.saveId??""})))}async addExternalModulesToProject(e,t){let r=e.map(n=>typeof n=="string"?cA(n):n),o=await this.preloadExternalModules(r);return this.updateExternalModuleNodes(o,t)}async preloadExternalModules(e){await this.modulesStorage.whenInitialized();let t=new Map;for(let s of e)t.set(s.bareValue,s);let r=[],o=[],n=[];for(let[s,l]of t){let{moduleId:c,saveId:d}=l;if(!!this.modulesStorage.getPersistedModuleByGlobalId(c)){re.reportError("Attempted to treat local module as external module",{identifier:l});continue}let k=this.treeStore.tree.getNode(c);if(k&&cA(k.codeComponentIdentifier).saveId===d&&!this.loadedExternalModulesStore.hasModuleForIdentifier(l)){o.push(l);continue}let m=kA(this,zr).get(s);if(m){n.push({identifier:l,preloadPromise:m});continue}kA(this,zr).set(s,co()),r.push(l)}let i=new Map;for(let{identifier:s,preloadPromise:l}of n)try{let c=await l;i.set(s.value,c)}catch{kA(this,zr).set(s.bareValue,co()),r.push(s)}if(r.length)try{let s=Array.from(r.values(),({moduleId:u,saveId:k})=>({moduleId:u,saveId:k})),{modules:l,dependencies:c}=await this.lookUpModules(s,{includeDependencies:!0,includeStatus:!0}),d=0;for(let u of r){let k=l[d++];B(k,"Module must be defined"),i.set(u.value,{module:k,dependencies:c?.[k.ownerType]?.[k.ownerId],exportSpecifier:u.exportSpecifier}),o.push(u)}}catch(s){re.reportError(s);for(let l of r)kA(this,zr).get(l.bareValue)?.reject(s);throw Error(`Failed to preload modules: ${s}`)}let a;for(let s of o){let l=i.get(s.value);if(!l)continue;let{dependencies:c}=l;c?.importMap&&(a=Mn(a??{imports:{}},c.importMap))}a&&await this.insertTemporaryImportMap(a),await Promise.all(Array.from(o.values(),s=>this.loadedExternalModulesStore.ensureModuleEvaluatedInSandbox(s).catch(l=>{re.error(`Failed to evaluate external module "${s.value}"`,l)})));for(let s of r){let l=i.get(s.value);B(l,"Expected to have module information for:",s.value);let c=kA(this,zr).get(s.bareValue);B(c,"Expected to find a preload promise for:",s.bareValue),c.resolve(l)}return[...i.values()]}async updateExternalModuleNodes(e,{onTreeUpdate:t,updateSave:r=!1}){let o,n;for(let{dependencies:i}of e)if(i?.importMap){o=Mn(o??{imports:{}},i.importMap);let a=i.dependencies??_n(i?.importMap);n=Dn(n??{dependencies:{}},a)}return o&&!S$(o)&&n&&await this.modulesStorage.extendCurrentImportMap(o,n),await Promise.all(e.map(i=>this.loadedExternalModulesStore.ensureModuleEvaluatedInSandbox(ip(i)))),this.scheduler.processWhenReadyAsync(()=>{if(this.treeStore.tree.isViewOnly)throw Error("unable to edit");for(let i of e){let{id:a,type:s,metadata:l,ownerId:c,ownerType:d}=i.module,u=ip(i),{title:k,status:m}=this.externalModulesDynamicInfo.get(u.moduleId)??i.module,I=this.treeStore.tree.getExternalModulesListNode();I||(I=new dB,this.treeStore.tree.insertNode(I,this.treeStore.tree.root.id)),B(Bf(I));let $=l.pluginId,F={codeComponentIdentifier:u.value,type:s,scopeNodeId:x$(i.module),intrinsicWidth:Zt(l.intrinsicWidth)??200,intrinsicHeight:Zt(l.intrinsicHeight)??200,ownerId:c,ownerType:d,group:m?.group,updateSaveId:m?.updateSaveId,namespaceId:i.module.lastPublish?.namespaceId,pluginId:L($)?$:void 0},S=Y.componentForIdentifier(u.value);B(S,"Component not found in the component loader",u.value);let P=S.annotations??void 0;F.annotations=uB(s)?Nn({default:P}).default:P;let x=S.name??k;F.title=x;let C=this.treeStore.tree.getNode(a);if(C)if(r)C.set(F);else{let{group:H,updateSaveId:U}=F;C.set({group:H,updateSaveId:U})}else C=new pB({id:a,...F}),this.treeStore.tree.insertNode(C,I.id)}return t()})}setupPollingExternalModulesUpdates(){let e=Gh(()=>{this.checkForExternalModuleUpdates().catch(re.reportError)},1e4),t=()=>{e(),this.updatesPollId===void 0&&(this.updatesPollId=window.setInterval(this.checkForExternalModuleUpdates,6e4))},r=()=>{window.clearInterval(this.updatesPollId),this.updatesPollId=void 0};function o(){return!document.hidden&&navigator.onLine}o()&&t();function n(){setTimeout(()=>{o()?t():r()},500)}document.addEventListener("visibilitychange",n),window.addEventListener("offline",n),window.addEventListener("online",n)}getCodeComponentNodesForExternalModuleExport(e){return this.treeStore.getLoadedIndexes().codeComponents.filter(t=>{if(!nA(t)||DA(t)&&!t.isVectorInstance)return!1;let r=cA(t.codeComponentIdentifier);return r?.kind!=="externalModuleExport"?!1:r.moduleId===e.moduleId&&r.exportSpecifier===e.exportSpecifier})}get fastRefreshEnabled(){return this.chromeStore.codeEditorPreviewVisible}async updateExternalModuleComponentInstances(e){let t=cA(e);B(t?.kind==="externalModuleExport","parsed 'ExternalModuleNodes.id' should be of kind externalModuleExport");let{moduleId:r,exportSpecifier:o}=t,n=this.externalModulesDynamicInfo.get(r)?.status?.updateSaveId;if(!n){re.warn("Could not update module",r,"latest status missing");return}let{module:i,dependencies:a}=await this.lookUpModule({moduleId:r,saveId:n},{includeDependencies:!0,includeStatus:!0});B(i.files.module,"Module file must be defined");let s=Ke(r,n,i.files.module,o);try{await this.loadedExternalModulesStore.ensureModuleEvaluatedInSandbox(s).catch(re.reportError),await new Promise((l,c)=>{this.scheduler.runWithFullyLoadedTree(()=>{this.updateExternalModuleNodes([{module:i,dependencies:a,exportSpecifier:o}],{onTreeUpdate:()=>{this.getCodeComponentNodesForExternalModuleExport(t).forEach(u=>u.set({codeComponentIdentifier:s.value})),Ng(this.treeStore.tree,t.value,s.value),QR(this.treeStore.tree,t.value,s.value)},updateSave:!0}).then(l).catch(c)},{name:"update_external_module_version",modalTitle:"Updating the module version"})}),this.trackExternalComponentInsert([s.value],"update")}catch(l){re.reportError(l)}}async replaceRelativeImportsWithImportMapSpecifiers(e,t,r){let o={};for(let i of r){let a=ct(i,e);if(!a)continue;let s;if(s=this.fastRefreshModules.get(a),s||(s=this.modulesStorage.getModuleWithTypeSlashName(a)),!s){re.error("Cannot resolve",i,"from",e);continue}let l,{name:c,localId:d}=s;if(s.kind==="fast-refresh")l=_e(c).module;else{let{files:u}=s;B(L(u.module),"Must have a module file name to build a local module import map specifier."),l=u.module}o[i]=$s(d,l)}let n=await _6(t,o);return B(n.ok),n.value}getModules(e=!1){let t={};for(let[r,o]of this.localModules)t[r]=o;if(e)for(let[r,o]of this.fastRefreshModules)t[r]=o;return{dependenciesModule:this.dependenciesModule,modules:t,revision:this.revision,initialized:this.modulesStorage.initialized}}getAllModulesAsUpdateEvent(e=!1){let{dependenciesModule:t,modules:r,initialized:o,revision:n}=this.getModules(e),i=[];t&&i.push({op:"add",path:[`${t.type}/${t.name}`],value:t});for(let a of Object.values(r))i.push({op:"add",path:[`${a.type}/${a.name}`],value:a});return{patches:i,dependentModules:[],prioritizedModules:[],initialized:o,revision:n}}getModulesUpdatesService(e=!1){return{moduleUpdatesStream:()=>e?this.fastRefreshModulesEmitter.newStream({replay:"latest"}):this.moduleUpdatesEmitter.newStream({replay:"latest"})}}hasScreenModuleLoaded(e){let t=lo("screen",e,"default").value;return Y.componentForIdentifier(t)!==null}postProcess(){this.modulesStorage.processTreeUpdates()}};ni=new WeakMap,Na=new WeakMap,Oa=new WeakMap,zr=new WeakMap;var DP={defaultComponent:{insert:"insert-default",drag:"insert-default-drag"},libraryModule:{insert:"insert-library",drag:"insert-library-drag"},externalModuleComponent:{insert:"insert",drag:"insert-drag"}},ap="default_component_",q6="external_",sp="local_",tF="legacy_design_component",rF="legacy_code_component",oF=`${sp}${rF}`,_P=`${q6}${rF}`,nF=`${sp}${tF}`,iF=`${q6}${tF}`;var NP=new Set(["form","frame","image-frame","stack","repeater"]),OP=A=>A.startsWith(ap),aF=A=>A===nF||A===iF,wP=A=>NP.has(A);function sF({canvasNode:A,source:j,isDrag:e,engine:t}){let r=LP(A,t);switch(SA("component_instance",{componentType:r.type,source:j}),j){case"insert_menu":{let o=qP(r);SA("insert_menu_add",{type_added:o});break}}if(r.type==="local_module_canvasComponent_component"&&SA("component_canvas_instance",{componentId:A.id}),aF(r.type)&&SA("component_design_instance",{}),nA(A)&&et(A.codeComponentIdentifier)){let o=r.type.startsWith(ap)?"defaultComponent":j==="team_library"?"libraryModule":"externalModuleComponent",n=DP[o][e?"drag":"insert"];t.stores.modulesStore.trackExternalComponentInsert([A.codeComponentIdentifier],n)}}function LP(A,j){if(nA(A)){let r=A.codeComponentIdentifier,o=cA(r);if(!o)return{type:A.codeComponentIdentifier.startsWith(".")?oF:_P,codeComponentIdentifier:r};if(fj(o))return{type:`${sp}module_${o.type}_component`,codeComponentIdentifier:r};if(et(o)){let n=j.stores.treeStore.tree.getNode(o.moduleId);return Vl(j.stores.treeStore.tree,r)?{type:`${ap}${n?.title}`,codeComponentIdentifier:r}:{type:`${q6}module_${n?.type??"unknown"}_component`,codeComponentIdentifier:r}}}let t=A.replicaInfo?.master&&j.tree.getNode(A.replicaInfo.master)||A;return ye(t)?Ri(t)?{type:iF}:{type:nF}:Os(A)?{type:"repeater"}:Gn(A)?{type:"form"}:dj(A)?{type:"stack"}:RA(A)?A.fillType==="image"?{type:"image-frame"}:{type:"frame"}:{type:"unknown"}}function qP({type:A}){return A.startsWith("local_module_")||A===oF?"code_component":aF(A)?"design_component":A.startsWith(q6)?"package":OP(A)||wP(A)?A:"unknown"}function lF(A,j){let e=A.children;return nt(A)?!e||e.length===0?[]:j.getChildrenRects(A.id)??[]:null}function cF(A,j,e){if(A>=j&&A<=e||A<=j&&A>=e)return 0;let t=Math.abs(j-A),r=Math.abs(e-A);return Math.min(t,r)}function VP(A,j,e){let t=A?"y":"x",r=A?"height":"width",o=j[t],n=0,i=1/0;return e.forEach((a,s)=>{if(i===0)return;let l=a[t],c=l+a[r],d=cF(o,l,c);d<i&&(n=s,i=d)}),n}function KP(A,j,e,t){let r=Math.max(A,e),o=Math.min(j,t);return r<o}function HP(A,j,e){let t=A?"y":"x",r=A?"height":"width",o=e[j];B(o,"Out of bound access to childRects:",j,e);let n=o[t],i=n+o[r],a=new Set([j]);return e.forEach((s,l)=>{if(l===j)return;let c=s[t],d=c+s[r];KP(n,i,c,d)&&a.add(l)}),{startIndex:Math.min(...a),endIndex:Math.max(...a)}}function JP(A,j,e,t,r,o){if(r)return t.startIndex;if(o)return t.endIndex;let n=j?"x":"y",i=j?"width":"height",a=A[n],s=1/0,l=t.startIndex;for(let c=t.startIndex;c<=t.endIndex;c++){let d=e[c];B(d,"Ouf of bound access to childRects:",c,t,e);let u=d[n],k=u+d[i],m=cF(a,u,k);m<s&&(s=m,l=c)}return l}function UP(A,j){let e=[];for(let t=j.startIndex;t<=j.endIndex;t++){let r=A[t];B(r,"Ouf of bound access to childRects:",t,j,A),e.push(r)}return AA.merge(...e)}function QP(A,j,e,t){let r=qt(A)||A.resolveValue("stackDirection")==="horizontal",o=AA.merge(...j),n=r?"x":"y",i=r?"y":"x",a=r?"width":"height",s=r?"height":"width",l=e[n],c=e[i],d=o[i],u=d+o[s],k=c<d,m=!k&&c>u,I=VP(r,e,j),$=HP(r,I,j),F=JP(e,r,j,$,k,m),S=j[F];B(S,"Closest rect is not defined:",F);let P=S[n]+S[a]/2,x=k||m?k:l<P,C=x?F:F+1;k&&(C=0),m&&(C=j.length);let H=S[n],U=H+S[a],z=x?H:U,v=null,tA=x?F-1:F+1;if(tA>=$.startIndex&&tA<=$.endIndex){let wA=j[tA];if(wA){let lj=wA[n],b=lj+wA[a];v=x?b:lj}}let X=z;aA(v)&&(X=Math.round((X+v)/2));let N=UP(j,$),K=Math.round(N[i]+N[s]/2),q={[n]:X,[i]:K},rA={...q},sA={...q},PA=t[s],MA=Math.round(PA/2);return r?(rA.y-=MA,sA.y+=MA):(rA.x-=MA,sA.x+=MA),{index:C,line:{a:rA,b:sA}}}function dF(A,j,e,t,r){if(B(j.length,"childInsertion only works correctly if there are more than 0 child rects"),qt(A)||A.stackWrapEnabled)return QP(A,j,t,r);let o=1/0,n=null,i=A.stackDirection==="vertical";j.forEach((c,d)=>{let u=Math.abs(i?t.y-c.y:t.x-c.x);u>o||(o=u,n=d)});let a=0;if(n!==null){let c=j[n];B(c,"Closest child rect is not defined:",n);let d=AA.center(c);(i?t.y>d.y:t.x>d.x)&&n++,a=Math.min(Math.max(0,n),j.length)}let s=WP(A),l=XP(A.resolveValue("stackDirection"),A.resolveValue("stackAlignment"),s,e,j,a,r);return{index:zP(A,a),line:l}}function zP(A,j){B(YA(A),"A node must support children to consider an insertion index.");let e=j;for(let t=0;t<A.children.length&&t!==j;t++){let r=A.children[t];r&&(Ar(r)||e++)}return e}function WP(A){let j=A.resolveValue("stackDirection"),e=A.resolveValue("stackAlignment");if(e==="center")return 0;let t=Pn(A);if(!t.perSide)return t.top;let r=e==="start";return j==="vertical"?r?t.left:t.right:r?t.top:t.bottom}function XP(A,j,e,t,r,o,n){let i=r[o-1],a=r[o],s=A==="vertical",l={x:t.width/2,y:t.height/2};if(!(!i&&!a)){if(r.length===1){let c=i||a;B(c,"Child rect must be defined"),o===0?s?l.y=c.y-10:l.x=c.x-10:s?l.y=c.y+c.height+10:l.x=c.x+c.width+10}else if(i&&a){let c=Math.abs(s?i.y+i.height-a.y:i.x+i.width-a.x);s?l.y=a.y-c/2:l.x=a.x-c/2}else if(i){let c=r[o-2];B(c,"Child rect must be defined");let d=Math.abs(s?c.y+c.height-i.y:c.x+c.width-i.x);s?l.y=i.y+i.height+d/2:l.x=i.x+i.width+d/2}else if(a){let c=r[o+1];B(c,"Child rect must be defined");let d=Math.abs(s?a.y+a.height-c.y:a.x+a.width-c.x);s?l.y=a.y-d/2:l.x=a.x-d/2}}return l.x=Math.min(Math.max(4,l.x),t.width-4),l.y=Math.min(Math.max(4,l.y),t.height-4),YP(A,j,e,l,t,n)}function YP(A,j,e,t,r,o){let n=A==="vertical",i,a,s=e??0;switch(j){case"center":i={x:n?t.x-o.width/2:t.x,y:n?t.y:t.y-o.height/2},a={x:n?t.x+o.width/2:t.x,y:n?t.y:t.y+o.height/2};break;case"start":i={x:n?s:t.x,y:n?t.y:s},a={x:n?o.width+s:t.x,y:n?t.y:o.height+s};break;case"end":default:i={x:n?r.width-o.width-s:t.x,y:n?t.y:r.height-o.height-s},a={x:n?r.width-s:t.x,y:n?t.y:r.height-s};break}return{a:i,b:a}}var uF=6;function ZP(A,j){for(let e of A)if(j.includes(e))return!0;return!1}function AM(A,j,e,t,r){if(r.length===0||A.stackWrapEnabled||XA(A)||DA(A))return null;let{tree:o}=j,{zoom:n}=j.stores.canvasStore,i=o.getParent(A.id);if(i&&dj(i)&&(i.stackDirection!==A.stackDirection||i.stackWrapEnabled))return null;let a=o.convertPointToNode(A,e),s=o.getRect(A),l=A.stackDirection==="vertical",c=l?"x":"y",d=l?"y":"x",u=l?"width":"height",k=l?"height":"width",m=s[u],I=s[k],$=m*n,F=m*n;if($<40||F<40)return null;let S=a[c],P=10/n,x=AA.merge(...r),C=x[c],H=C+x[u],U=Math.max(P,C/2),z=Math.max(P,(m-H)/2),v=S<=U,tA=S>=m-z;if(!v&&!tA)return null;let X=v?0:1,N=t[k],K=4/n,q=v?K:m-K,rA=I/2,sA=N/2,PA=I/3,MA=a[d],G="end";N>I?G="center":MA<PA?G="start":MA<2*PA&&(G="center");let wA,lj;switch(G){case"start":{wA=0,lj=N;break}case"end":{lj=I,wA=lj-N;break}case"center":default:{wA=rA-sA,lj=rA+sA;break}}let b={[c]:q,[d]:wA},cj={[c]:q,[d]:lj},ue=o.convertPointToCanvas(A,b),ur=o.convertPointToCanvas(A,cj);return{insertionIndex:X,insertionLine:{a:ue,b:ur},wrap:{wrapAlignment:G}}}function lp(A,j,e,t,{allowWrapping:r=!0}={}){if(!YA(A))return{insertionIndex:null,insertionLine:null};let o=lF(A,j.stores.layoutCache);if(!o)return{insertionIndex:null,insertionLine:null};if(dj(A)&&r){let d=AM(A,j,e,t,o);if(d)return d}let n=j.tree,i=n.getRect(A),a=n.convertPointToNode(A,e);if(o.length===0)return{insertionIndex:0,insertionLine:null};let{index:s,line:l}=dF(A,o,i,a,t),c={a:n.convertPointToCanvas(A,l.a),b:n.convertPointToCanvas(A,l.b)};return{insertionIndex:s,insertionLine:c}}var jM={width:10,height:10};function pF(A,j,e,t,r,o=!1){B(e.length,"getStackOrGridInRange(): expects at least a single selected node");let n=A.stores.scopeStore.active;if(e.some(Ae))return null;let a=A.tree.getNodesAtPoint(n,j).filter(c=>!(To(c)&&c.locked||!YA(c)||Zg(c)||QE(A.tree,A.stores.overlayStore.activeOverlays,c))).reverse();if(t){let c=t.id,d=a.find(u=>u.id===c);if(d)return d}let s=null,l=e.map(c=>c.id);for(let c of a){if(!bf(c)||o&&!NA(c))continue;let d=A.tree.getAncestors(c.id);if(d.push(c.id),ZP(d,l)||(s||(s=c),!at(c)))continue;let{insertionLine:k}=lp(c,A,j,jM);if(!k)continue;if(k.a.x===k.b.x){if(Math.abs(j.x-k.a.x)*A.stores.canvasStore.zoom>uF)continue}else if(k.a.y===k.b.y){if(Math.abs(j.y-k.a.y)*A.stores.canvasStore.zoom>uF)continue}else continue;if(e.every(I=>Mr(A.tree,c,I,n.id,r)))return c}if(at(s)){let c=s;if(e.every(u=>Mr(A.tree,c,u,n.id,r)))return s}return null}function kF(A,j,{wrapAlignment:e}){let t=D7.addStack(A,[j]);if(!t)return null;let r=A.tree.getNode(t);return!r||!dj(r)?null:(r.set({stackDirection:j.stackDirection==="horizontal"?"vertical":"horizontal",stackAlignment:e}),r)}function cp(A,j){let{width:e,height:t}=A.tree.getRect(j);return xA(j)&&Fj(j)&&(j.widthType===2&&j.width>0&&(e=j.width),j.heightType===2&&j.height>0&&(t=j.height)),{width:e,height:t}}function eM(A,j,e){let t=cp(A,j);return{...t,x:e.x-t.width/2,y:e.y-t.height/2}}function tM(A,j){let e=cp(A,j),t=A.stores.scopeStore.active,r=A.tree.getCommonGroundNode(A.stores.selectionStore.nodes),o,n;if(r){let a=A.tree.convertFrameToCanvas(r);o=AA.center(a).x-e.width/2,n=a.y}else if(Q(t)||dA(t)){let a=t.getPrimaryVariant(),s=A.tree.convertFrameToCanvas(a);o=AA.center(s).x-e.width/2,n=s.y}else{let a=A.stores.canvasStore.getCanvasCenter();o=a.x-e.width/2,n=a.y-e.height/2}let i={x:o,y:n};for(;;){let a={...e,...i},s=A.tree.getNodesInRect(t,a,!0);if(s.length===0)return a;let l=A.tree.getBoundingFrameForNodes(s);i.x=l.x-e.width-100}}function rM(A,j,e,t=!1){let{tree:r}=A,o=r.getPotentialParents(A.stores.scopeStore.active,A.stores.overlayStore.activeOverlays,AA.cornerPoints({...e,width:1,height:1}),e,Y,j);return t&&(o=o.filter(NA)),o=r.sortVisually(o).reverse(),o.length>0&&o[0]?o[0]:null}var mF={width:1,widthType:1,heightType:2,left:0,right:null};function fF({engine:A,component:j,canvasPoint:e,source:t,type:r,shouldBecomeFullWidthForVariants:o=new Set,isLayoutSection:n=!1,notDraggedOntoCanvas:i=!1,insertAsGroundNode:a=!1,insertAsOverlayType:s,imageToUpload:l}){sF({canvasNode:j,source:r==="libraryModule"?"team_library":t,isDrag:!0,engine:A});let{selectionStore:c,canvasStore:d,scopeStore:u}=A.stores,k=a?tM(A,j):eM(A,j,e);s===1&&Tr(j)&&j.set({floatingPositionEnabled:!0,floatingPlacement:al,floatingAlignment:sl,floatingOffsetX:0,floatingOffsetY:10});let m=F6(A,j),I=pF(A,e,[m],null,Y,n);if(i&&n&&!I){let X=d.getCanvasVisibleRectTakingOverlaysIntoAccount(),N=c.ids.length===1&&c.ids[0]?A.tree.getNode(c.ids[0]):null,K=N?A.tree.getGroundNodeFor(N):null;at(K)&&AA.intersects(A.tree.convertFrameToCanvas(K),X)&&(I=K)}let $=I??rM(A,j,e,n),F=c.ids.length===0,S=u.active,P=Fn(S)?S.getPrimaryVariant():null;if(i&&n&&P&&F&&($=P),s===1&&$&&Tr(m)&&!NA($)){B($,"Parent should exist");let X=$.originalid??$.id,N=m6(A.stores,"framer/useShowRelativeOverlay",X,m.draftOrCurrent());if(!N)return;A.tree.move(N.id,X);return}else Tr(m)&&m.set(VE);if(a&&($=null,I=null,!AA.containsRect(d.getCanvasVisibleRectTakingOverlaysIntoAccount(),k))){let X=AA.center(k),N=d.zoom,K=Math.min(N,1);d.scrollToCenter(X,{animate:!0,zoom:K})}let x=-1,C=null;if($){z0(A,$,j,k),W0(A,$,j);let X=$.draftOrCurrent();dj(X)&&(I=X)}if(I){let X=cp(A,j),{insertionIndex:N,wrap:K}=lp(I,A,e,X);if(K&&(C=K),aA(N)&&(x=N),i&&n){if(x=I.children.length,c.ids.length===1){let At=c.ids[0],jt=At&&A.tree.getNode(At);if(jt){let mr=new Set([jt.id]);for(let no of jt.ancestors())mr.add(no.id);let oo=I.children.findIndex(no=>mr.has(no.id));oo>=0&&(x=oo+1)}}let q,rA=I.children[x-1];rA?(q=A.tree.convertFrameToCanvas(rA),q.y+=q.height):q=A.tree.convertFrameToCanvas(I),q.height=X.height;let sA=A.tree.convertFrameToCanvas(I),PA=Math.min(q.x,sA.x),MA=Math.max(AA.maxX(q),AA.maxX(sA));q.x=PA,q.width=MA-PA;let{zoom:G}=d,wA=d.getCanvasVisibleRectTakingOverlaysIntoAccount(),lj=wA.width*G,b=wA.height*G,cj=40,ue=Math.max(lj-cj*2,100),ur=Math.max(b-cj*2,100),pr=ue/(q.width||1),Tj=ur/(q.height||1),kr=Math.min(pr,Tj,.5),we=AA.center(q);d.scrollToCenter(we,{animate:!0,zoom:kr})}X0(A,I,j,k)}let H;if($){let{width:X,height:N}=k;H={...A.tree.convertCanvasFrameToNode($,k),width:X,height:N}}else H=k;let U=m.updateForRect({rect:H,parentSizeInfo:null,constraintsLocked:!1,shouldGuessPinToBottom:$?or(A.tree,m,$):!0,shouldGuessPinToRight:$?Me(A.tree,m,$):!0});$&&dj($)&&Fj(m)&&xA(m)&&(U=nM(m,U)),XI(m,U),m.set(U,A.tree);let z=m.id,v=!1,tA=null;if($){if(tA=$,Nj($)&&(tA=A.tree.getNode($.originalid),v=!0,B(tA,"Fail to insert node into variants: the original parent should exist")),C&&!DA(tA)&&dj(tA)){let K=kF(A,tA,C);if(!K)return;tA=K}A.moveNode(m.id,tA.id,x),v&&(B(DA($),"Fail to insert node into variants: the new parent should be a replica node"),z=ua(A,m,$,tA));let X=A.tree.getGroundNodeFor(tA),N=!!(X.name&&o.has(X.name.toLowerCase()));if(RA(m)&&N&&m.set({left:0,width:1,widthType:1},A.tree),nA(m)&&_j(X)&&NA(X)){let q={width:m.width,widthType:m.widthType,left:m.left,right:m.right};N&&m.set(mF);let rA=r7(m);if(rA){let sA=A.tree.getScopeNodeFor(X);Q(sA)&&sA.getTopLevelReplicaVariants().forEach(MA=>{if(!MA.name)return;let G=o7(MA.name,rA);if(!G||G===rA.defaultVariant)return;let wA={...MA.replicaInfo.overrides},lj={...MA.replicaInfo,overrides:wA},b={...wA[m.id]},cj=oM(N,o,MA.name,q);cj&&Object.assign(b,cj),b[WA(rA.key)]={type:"enum",value:G},wA[m.id]=b,MA.set({replicaInfo:lj})})}}qt($)&&Io(m)&&(N||m.set({gridItemFillCellWidth:!0}),m.set({gridItemFillCellHeight:!0}))}l&&RA(j)&&$h(l,j,A).catch(LA),c.set(z,{switchToLayers:!0})}function oM(A,j,e,t){let r=j.has(e.toLowerCase());if(A!==r)return r?mF:t}function nM(A,j){let e={...j};return(A.widthType===3||A.widthType===1)&&aA(j.width)&&j.widthType!==A.widthType&&(delete e.width,delete e.widthType),(A.heightType===3||A.heightType===1)&&aA(j.height)&&j.heightType!==A.heightType&&(delete e.height,delete e.heightType),e}function V6({engine:A,module:j,identifier:e,position:t,centerInParent:r,insertAsGroundNode:o,update:n}){let i={width:Zt(j.metadata.intrinsicWidth)??200,height:Zt(j.metadata.intrinsicHeight)??200},a=new Po({codeComponentIdentifier:e,slotsAreChildNodes:VA.isOn("componentSlotsAreChildNodes"),...i});n&&n(a);let s=t;if(r&&!o){let l=BR(a,A),c=l?AA.center(A.tree.convertFrameToCanvas(l)):null,d=A.stores.canvasStore.getCanvasVisibleRectTakingOverlaysIntoAccount();c&&AA.containsPoint(d,c)&&(s=c)}return fF({engine:A,component:a,canvasPoint:s,source:"context_menu",insertAsGroundNode:o}),a}var wa=CA("unlinking");async function iM(A,j,e){let{codeEditorStore:t,selectionStore:r,treeStore:o}=A.stores;t.closeEditor();let[n]=r.nodes;if(r.nodes.length===1&&nA(n)&&n.codeComponentIdentifier===j)return!0;let i=await A.runWithFullyLoadedTreeAsync(()=>{for(let a of o.treeIndex.codeComponentNodeIds){let s=A.tree.getNodeWithTrait(a,nA);if(s?.codeComponentIdentifier===j)return s}},{runInBackground:!0,name:`findCodeComponentInstance: ${j}`});return i?(YI(A,i),!0):(QA({type:"add",variant:"info",key:"add-component-instance-to-edit-in-plugin",text:`Add this Component to Canvas to edit in ${e.name}`}),!1)}async function EF(A,j,e){return await iM(A,j,e)?(A.stores.pluginStore.openPlugin(e,A,{mode:"canvas"}),!0):!1}function $F(A,j){let e=A.componentForIdentifier(j);if(e)return e;let t=cA(j);return!fj(t)||!Pj(t)?null:A.componentForIdentifier(dm(t))}function aM(A,j,e){let t=fj(e)?e.localId:e?.moduleId,r=A.get(t);if(Ht(r))return r.pluginId;if(!vo(r))return;if(!mA(r.save.pluginId))return r.save.pluginId;let o=j.getPersistedModuleByLocalId(r.id);if(!o)return;let n=o.metadata.pluginId;if(L(n))return n}function BF(A,j,e,t){let r=aM(A.tree,j,t);if(!mA(r))return e.manifestById.get(r)}function IlA(A){return`Edit in ${A.name}`}var sM=0;async function K6(A,j,e=sM){if(e===0){let r=cA(j),o=BF(A.stores.treeStore,A.stores.modulesStore,A.stores.pluginStore,r);if(o&&await EF(A,j,o))return}let t=$F(Y,j);t&&A.stores.codeEditorStore.editFile(t.file)}async function hF(A,{identifier:j,info:e,instance:t,enterIsolation:r,codeComponentIsolationMode:o}){let n=e.module.baseURL+e.module.files.source,a=await(await fetch(n)).text(),[s,l]=await Promise.all([zI(a),A.stores.modulesStore.getModuleDependencies(j)]);if(s.ok){let m=new Map;for(let $ of s.value.relative){let F=ct($.specifier,`${e.module.type}/`);if(!F){wa.warn("Failed to normalize relative import",$.specifier);continue}let S=m.get(F)??[];S.push($),m.set(F,S)}let I;for(let $ of l.imports){if($.type!=="local")continue;let F=`${$.moduleType}/${$.moduleName}`,S=m.get(F);if(!S){wa.warn("Unable to get source location of import",F,"when unlinking");continue}for(let P of S){I||(I=a.split(`
`));let x=P.specifierLine;I[x]=I[x].replace(JSON.stringify(P.specifier),JSON.stringify($.importURL))}}I&&(a=I.join(`
`))}let c=A.stores.modulesStore.forType("codeFile"),d=c.getUniqueName(e.module.name),u=await c.create({name:d,source:a,metadata:{pluginId:e.module.metadata.pluginId}}),k=un(j,u).value;return t&&A.scheduler.processWhenReady(()=>{let m=A.tree.get(t.originalid??t.id);m&&m.set({codeComponentIdentifier:k})}),r&&(A.stores.chromeStore.contentPanelTab="Assets",K6(A,k,o)),k}var gF={canvasComponent:fR,codeFile:hF};function lM(A){return L(A)?A in gF:!1}async function up(A,{identifier:j,moduleType:e,instance:t,enterIsolation:r=!0,codeComponentIsolationMode:o,renamedIds:n=new Map,isAutoDetach:i=!1}){if(!lM(e))throw Error(`Cannot import external module of type ${e}`);let[a]=await A.stores.modulesStore.preloadExternalModules([j]);B(a,"external module must exist on preload");let s={identifier:j,info:a,instance:t,enterIsolation:r,codeComponentIsolationMode:o,renamedIds:n,isAutoDetach:i},l=gF[e],c=await l(A,s);if(!mA(c))return!L(c)&&dA(c)?{...a,codeComponentIdentifier:c.instanceIdentifier,node:c}:{...a,codeComponentIdentifier:c,node:void 0}}var dp=new Set;async function cM(A,j){let{instance:e,withUnlinkModal:t,...r}=j,o=Vl(A.stores.treeStore.tree,j.identifier),n=A.stores.insertSidebarStore.getEditBehavior(j.identifier.moduleId);if(t&&n!=="autoUnlink"&&(!o||bt.isOn("openPrimaryForBuiltInModules"))){A.stores.modalStore.set({type:"UnlinkComponent",source:"edit_action",...r,nodeId:e?.id});return}if(!dp.has(j.identifier)){dp.add(j.identifier),A.scheduler.process(()=>{A.beginUndoGroup()});try{return(await up(A,{instance:e,enterIsolation:n!=="autoDetach",...r}))?.codeComponentIdentifier}catch(i){wa.reportError(i),QA({type:"add",variant:"error",text:"Failed to unlink component",key:"external-component-unlink-error",icon:"error"})}finally{A.scheduler.processWhenReady(()=>{A.endUndoGroup()}),dp.delete(j.identifier)}}}async function r6A(A,j){let{instance:e,moduleType:t,enterIsolation:r,codeComponentIsolationMode:o}=j;if(!nA(e))return;let n=await cM(A,{...j,enterIsolation:!1});if(!n)return;await T6(Y,[n],A.stores.modulesStore);let i=Y.componentForIdentifier(n);if(!i)return;let a=oI(i);a&&A.scheduler.processWhenReady(()=>{if(A.tree.getNodes(Array.from(A.stores.treeStore.treeIndex.codeComponentNodeIds)).forEach(l=>{if(!a||a.id===l.id||!nA(l)||l.codeComponentIdentifier!==e.codeComponentIdentifier||DA(l)||!y6(l,{allowLockedNodes:!0}))return;let c=A.cloneNode(a,!1,!1);rI(A,l,c).catch(LA)}),!!r)if(t==="canvasComponent"){let l=ul(n);l&&A.stores.scopeStore.select(l,{keepHistory:!1})}else t==="codeFile"&&K6(A,n,o)})}var dM=CA("clipboard:modules");async function E6A(A,j,e){if(!j||!T$(j))return!1;let t="insert-external-component";try{await pM({engine:A,moduleURL:j,position:e,centerInParent:!0,toastKey:t}),QA({type:"remove",key:t})}catch(r){console.error("Failed to insert external component",r),QA({type:"add",variant:"error",key:t,text:"Failed to insert external component",icon:"error"})}return!0}async function uM(A,j){let e=new URL(j),t=e.hash.substring(1).split(","),r=t[0]||"default",o=t.some((c,d)=>d>0&&c==="unlink"),{module:n}=await A.stores.modulesStore.lookUpModule({url:e.href}),i=n.id,a=A.stores.modulesStore.getPersistedModuleByGlobalId(i);B(n.files.module,"Module file must be defined");let s=Ke(i,n.saveId,n.files.module,r),l=a?fs(a.localId,r):s;return{module:n,moduleIdentifier:l,externalIdentifier:s,insertUnlinked:o}}async function pM({engine:A,moduleURL:j,position:e,centerInParent:t,insertAsGroundNode:r,toastKey:o,update:n}){let{module:i,moduleIdentifier:a,externalIdentifier:s,insertUnlinked:l}=await uM(A,j);if(i.type==="screen")if(fj(a)){let c=ul(a.value);if(!c)return;let d=A.tree.getNode(c);if(!Q(d))return;await A.loadScopesThenProcess([d],([u])=>{u&&$R(A,u,u.getPrimaryVariant())})}else o&&QA({type:"add",variant:"progress",key:o,text:"Inserting Web Page",icon:"reconnecting",duration:1/0,showCloseButton:"never"}),await ER(A,s);else if(l){o&&QA({type:"add",variant:"progress",key:o,text:"Inserting external component",icon:"reconnecting",duration:1/0,showCloseButton:"never"});let c=await up(A,{identifier:s,moduleType:i.type,enterIsolation:!1});await A.scheduler.processWhenReadyAsync(()=>{c&&V6({engine:A,module:i,identifier:c.codeComponentIdentifier,position:e,centerInParent:t,insertAsGroundNode:r,update:n})})}else{if(o&&QA({type:"add",variant:"progress",key:o,text:"Inserting external component",icon:"reconnecting",duration:1/0,showCloseButton:"never"}),!et(a)){await A.scheduler.processWhenReadyAsync(()=>{V6({engine:A,module:i,identifier:a.value,position:e,centerInParent:t,insertAsGroundNode:r,update:n})});return}await A.stores.modulesStore.addExternalModulesToProject([a],{onTreeUpdate:()=>{if(V6({engine:A,module:i,identifier:a.value,position:e,centerInParent:t,insertAsGroundNode:r,update:n}),i.type!=="vector")return;let c=A.tree.getNodeWithTrait(i.id,Ht)?.annotation("framerVector");Bl(c)&&A.stores.modulesStore.addOrUpdateVectorSetAndVectors({moduleId:c.set.moduleId,saveId:""}).catch(LA)}}).catch(dM.reportError),A.stores.modulesStore.trackExternalComponentInsert([a.value],"paste-url")}return i}function IF(A,j){let e=VA.isOn("newPricing");if(A.stores.projectStore.projectLicenseType===jh(e))return A.stores.modalStore.set({type:"UpsellEnterprise",source:"upsell",description:"Sign up for an Enterprise plan to increase your file upload limit to 150MB and unlock other powerful features that help scale your site.",upsell:"file-limit-enterprise-upsell",upsellFeatures:["Advanced Permissions","Custom Limits","Custom Hosting","Custom Proxy Support","Enterprise Security","Dedicated Support"]});let t=A.stores.projectStore.resourceLimits?.fileUploadLimitInMB;B(typeof t=="number","fileUploadLimitInMB is not a number");let r=t.toLocaleString()+"MB",o=(j/bh).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:1})+"MB";return A.stores.modalStore.set({source:"upsell",type:"UpsellFeature",upsellFeature:"fileUploadLimitInMB",title:"File Upload Limit",description:`Your current plan limits file uploads to ${r}, and you\u2019re trying to upload a file that\u2019s ${o}. Upgrade your site to increase the limit and upload your file.`})}var RF=class{constructor(j,{concurrency:e=5,silent:t=!1}={}){this.engine=j;y(this,"uploads",new Map);y(this,"completed",0);y(this,"failed",0);y(this,"generating",!1);y(this,"resolveStatusUpdate");y(this,"limiter");y(this,"silent");this.limiter=new oi(e),this.silent=t}add(j){return this.createTask(j,e=>e)()}createTask(j,e){let t=this.uploads.get(j);t||(t={task:async()=>{try{return typeof j=="string"?j.startsWith("data:")?await this.uploadFile(await Eh(j,"imported")):await oa.uploadAssetByURL(j,{silent:this.silent,refreshAssetService:!1}):await this.uploadFile(j)}catch(n){throw this.failed++,n}finally{this.completed++,this.resolveStatusUpdate?.()}}},this.uploads.set(j,t));let r=t;return async()=>{r.resultPromise||(r.resultPromise=this.limiter.run(r.task),this.resolveStatusUpdate?.());let o=await r.resultPromise;return this.engine.stores.assetStore.assetService?.addAssets([o.asset]),e(o)}}async uploadFile(j){let e=this.engine.stores.projectStore.resourceLimits?.fileUploadLimitInMB??void 0,t={silent:this.silent,maxFileSize:e,onExceedsCustomMaxSize:o=>IF(this.engine,o),refreshAssetService:!1},r;if(j.type.startsWith("image/")?r=await oa.uploadImage(j,t):j.type.startsWith("video/")?r=await oa.uploadVideo(j,t):r=await oa.uploadFile(j,t),!r)throw Error("Failed to upload file");return r}get active(){return[...this.uploads.values()].map(({resultPromise:j})=>j).filter(He)}get status(){let{active:j,completed:e,failed:t}=this;return{started:j.length,completed:e,failed:t}}async*statusUpdates(){if(this.generating)throw Error("`statusUpdates` is in use by another call");for(this.generating=!0,yield this.status;this.completed<this.active.length;)await new Promise(j=>{this.resolveStatusUpdate=()=>{j(),this.resolveStatusUpdate=void 0}}),yield this.status;await this.engine.stores.assetStore.assetService?.refresh().catch(LA),this.generating=!1}async results(){let j=await Promise.allSettled(this.active).then(e=>e.filter(Dm).map(t=>t.value));return await this.engine.stores.assetStore.assetService?.refresh().catch(LA),j}};function Wr(A,j){return`${A??""}.${j}`}function La(A,j){return`${A??""}[${j}]`}function w6A(A){let j=[],e=A.split(".");for(let t of e){let[r,o]=t.split("[");if(r.length!==0&&j.push({type:"object",key:r}),o){let n=o.slice(0,-1);B(n.length>0),j.push({type:"array",id:n})}}return j}function FF(A){return dA(A)||Q(A)||Ej(A)}var kM=512,Xr,pp,kp,qa=class{constructor(j){this.assetMap=j;rj(this,Xr);y(this,"keys",new Set)}addAsset(j){this.keys.add(j)}resolve(j){if(!Ei(this,Xr,pp).call(this,j))return;let e=Ei(this,Xr,kp).call(this,j);if(e!==null)return e&&(j=e.identifier),{src:Fm(j)}}resolveResponsiveImage(j,{layerMaxSidePixelSize:e,focalPoint:t,srcSetVariantDimensions:r}={}){if(!Ei(this,Xr,pp).call(this,j))return;let o=Ei(this,Xr,kp).call(this,j);if(o===null)return;let n;o&&(j=o.identifier,n=o.preferredSize);let i=this.assetMap.assetForKey(j),a=i?.properties?.image,s=o?.intrinsicSize??a,l=r??Sm(a?.width,a?.height),d={src:i?Gm(i,n,e,l).url:Rm(j,void 0,void 0,s),positionX:void 0,positionY:void 0,srcSet:this.generateSrcSet(i,l,n),pixelWidth:s?.width,pixelHeight:s?.height};return t&&L(t.positionX)&&L(t.positionY)&&(d.positionX=t.positionX,d.positionY=t.positionY),d}generateSrcSet(j,e,t){if(!j)return;let r;if((!t||t==="auto"||t==="lossless")&&e?.length&&j.properties?.image){r="";for(let{maxSideSize:n,width:i}of e)i<kM||(r+=`${ad(j,n,t)} ${i}w,`);r+=`${ad(j,void 0,t)} ${j.properties.image.width}w`}return r}};Xr=new WeakSet,pp=function(j){return!(rt(j)||j.startsWith("https:"))},kp=function(j){let e=ym(j);return e&&(j=e.identifier),j===""?null:(this.addAsset(j),e)};function mp(A,j){let e=[],t=Km(A,o=>{let n=j.create(o);return e.push(o),"${"+n+"}"});return{templatedUrl:new jA("`"+t+"`"),usedVariables:e}}function H6(A,j,e,t=void 0){if(aj(A.value))return uo(!mn(A.value),"Computed values should not be possible in fetch fallback"),j.create(A.value);switch(A.type){case"color":return A.value?g`${A.value}`:g`undefined`;case"string":return g`${A.value}`;case"boolean":return new jA(A.value);case"number":return new jA(A.value);case"image":{if(A.value===void 0)return g`undefined`;let r=e.resolveResponsiveImage(A.value);return r?g`${r.src}`:g`undefined`}case"link":{if(!A.value||!t)return g`undefined`;let r=t.create(A.value);return r?new jA(oj(r)):g`undefined`}default:Rs(A)}}function J6(A,j,e,t=void 0){let{templatedUrl:r}=mp(A,j),o=Cs(A);return new Uj({url:r,resultKeyPath:A.resultKeyPath,fallbackValue:H6(o.controlProp,j,e,t),errorFallbackValue:o.errorControlProp?H6(o.errorControlProp,j,e,t):void 0,resultOutputType:o.controlProp.type,cacheDuration:A.cacheDuration,credentials:A.credentials})}var Va=class{constructor(j,e,t,r,o){this.bindings=j;this.variables=e;this.preload=t;this.assets=r;this.links=o;y(this,"fetchesByNode",new Map);y(this,"resultBindingsByNode",new Map)}createFetchBinding(j,e){let t=Cs(e);if(!Vm(t))return H6(t.controlProp,this.variables,this.assets,this.links);let r=j.originalid??j.id,o=this.resultBindingsByNode.get(r)??this.bindings.create("fetchResult");this.resultBindingsByNode.set(r,o),this.preload.addFetch(j,t);let n=this.fetchesByNode.get(j.id)??[];return n.push(J6(t,this.variables,this.assets,this.links)),this.fetchesByNode.set(j.id,n),g`${o}[${n.length-1}]`}getResultBinding(j){return this.resultBindingsByNode.get(j.originalid??j.id)}getFetchesForNode(j){return this.fetchesByNode.get(j.id)}};var fp=class{constructor(j,e,t,r){this.moduleType=j;this.modulesStore=e;this.submoduleName=t;this.sourceCode=r;y(this,"submoduleFilename");y(this,"submoduleImport");y(this,"bindings",new bo);y(this,"imports");y(this,"declarations",new xo(this.bindings));this.submoduleFilename=Ll(this.submoduleName),this.submoduleImport=ql(this.submoduleFilename),this.imports=new Co(this.moduleType,this.modulesStore,this.bindings)}get estimatedSize(){return this.declarations.declarationsByteSize}serialize(){let j=Zj.linesFrom(this.imports.statements),e=this.declarations.list();return Zj.sections(j,this.sourceCode,...e)}},U6=class{constructor(j,e,t){this.moduleType=j;this.modulesStore=e;this.componentSourceNodeId=t;y(this,"submodules",new Set)}create(j){let e=Bh(this.componentSourceNodeId,this.submodules.size),t=new fp(this.moduleType,this.modulesStore,e,j);return this.submodules.add(t),t}delete(j){this.submodules.delete(j)}serialize(){let j=new Map;for(let e of this.submodules){let t=e.serialize();j.set(e.submoduleName,t)}return j}};function yF(A){return`${A}ToDisplayName`}var SF="enumToDisplayNameFunctions";function GF(A){if(A?.type!=="enum"||!A.optionTitles)return g`(value) => value`;let j=A.optionTitles;return new jA(Zj.lines(g`(value, _locale) => {`,g`switch (value) {`,...A.options.map((e,t)=>{let r=j[t];return g`case ${e}: return ${mA(r)?g`undefined`:r};`}),g`default: return "";`,g`}`,g`}`))}function bF(A){let{locale:j,grouping:e,notation:t,compactDisplay:r,style:o,currency:n,currencyDisplay:i,unit:a,unitDisplay:s,minimumFractionDigits:l,maximumFractionDigits:c,minimumIntegerDigits:d}=A,u={locale:j,notation:t,style:o};switch(hr(e)&&(u.useGrouping=e),aA(l)&&(u.minimumFractionDigits=l),aA(c)&&(u.maximumFractionDigits=c),aA(d)&&(u.minimumIntegerDigits=d),t==="compact"&&(u.compactDisplay=r),o){case"currency":u.currency=n,u.currencyDisplay=i;break;case"unit":u.unit=a,u.unitDisplay=s;break}return new Uj(u)}var CF=g`(value, options = {}, activeLocale) => {
    const fallbackLocale = "en-US";
    const locale = options.locale || activeLocale || fallbackLocale;
    const {
        useGrouping,
        notation,
        compactDisplay,
        style,
        currency,
        currencyDisplay,
        unit,
        unitDisplay,
        minimumFractionDigits,
        maximumFractionDigits,
        minimumIntegerDigits,
    } = options;
    const formatOptions = {useGrouping, notation, compactDisplay, style, currency, currencyDisplay, unit, unitDisplay, minimumFractionDigits, maximumFractionDigits, minimumIntegerDigits};
    const number = Number(value);
    try {
        return number.toLocaleString(locale, formatOptions);
    } catch {
        try {
            return number.toLocaleString(fallbackLocale, formatOptions);
        } catch {
            return number.toLocaleString();
        }
    }
};
`;function vF(A,j){if(j.length===0)return null;B(A);let e=new Set;for(let r of j){let o=A.create(r);e.add(oj(o))}let t=`{${Array.from(e).join(", ")}}`;return new jA(t)}function TF(A,j,e,t){let r=A.name;switch(r){case"contains":case"endsWith":case"equals":case"startsWith":case"greaterThan":case"lessThan":case"isBefore":case"isAfter":case"isIncludedIn":return $A(A.value)?(B(e),[e.create(A.value)]):[mA(A.value)?g`undefined`:A.value];case"prefix":case"suffix":{if($A(A.value))return B(e),[e.create(A.value)];let n=mA(A.value)?g`undefined`:A.value;return A.valueLocalized?(B(t,"LocalizedValueCollector is required"),[t.add(n,A.valueLocalized,i=>A.valueLocalized?.[i]?.value)]):[n]}case"toDateString":return[j.getActiveLocaleCode()];case"extractDateSegment":return[A.segment];case"numberToString":return[bF(A),j.getActiveLocaleCode()];case"offsetAndLimitArray":return[A.startOffset,aA(A.limit)?A.limit:g`undefined`];case"isBetweenDates":{let n=[];return $A(A.start)?(B(e),n.push(e.create(A.start))):n.push(mA(A.start)?g`undefined`:A.start),$A(A.end)?(B(e),n.push(e.create(A.end))):n.push(mA(A.end)?g`undefined`:A.end),n}case"convertFromEnum":case"convertFromString":{let i=function(l){Fe(l)&&wt(l,c=>i(c)),$A(l)&&n.push(l)};var o=i;let n=[];i(A.default);for(let l of A.cases)i(l.to);let a=vF(e,n),s=e?.getLocale()??g`undefined`;return a?[s,a]:[s]}case"convertFromBoolean":{let i=function(c){Fe(c)&&wt(c,d=>i(d)),$A(c)&&n.push(c)};var o=i;let n=[];i(A.truthy),i(A.falsy);let a=e?.getLocale()??g`undefined`,s=vF(e,n);return s?[a,s]:[a]}case"enumToDisplayName":return j.variables?[j.variables.getLocale()]:[];case"toString":case"toBoolean":case"toNumber":case"isSet":case"negate":case"reverseArray":case"toResponsiveImage":case"toImageSrc":case"jsonStringify":case"htmlEscape":case"htmlUnescape":case"addImageAlt":case"toZIndex":case"toAxisOverflow":case"toOverflowWithClipFallback":case"numberToPixelString":case"radiusForCorner":case"arrayToArray":case"arrayLength":case"isEven":case"isOdd":case"getGridColumnCSSValue":case"getGridRowCSSValue":case"getNumericColumnGap":return[];default:EA(r,"All value transforms should define their arguments")}}var xF=g`(image, alt) => {
    if (!image || typeof image !== "object") {
        return;
    };
    return { ...image, alt };
};
`;var PF=g`(value) => {
    return Array.isArray(value) ? value.length : 0
}
`;function MF(A){let j=g`item`,e={[Mo]:g`${j}?.[${Mo}]`};for(let t in A.mapping){let r=A.mapping[t];if(B(He(r)),Qm(r.value)){e[t]=g`${j}?.[${r.value.id}]`;continue}r.value}return g`(value) => {
      if (!Array.isArray(value)) return
      return value.map((${j}) => (${e}))
    }`}var DF=g`(a, b) => {
    if (typeof a === "string" && typeof b === "string") {
        return a.toLowerCase().includes(b.toLowerCase());
    }

    if (Array.isArray(a) && typeof b === "string") {
        return a.includes(b);
    }

    return false;
};
`;function mM(A){let j=Gr(A.outputType);return oj(g`return ${tr(j)?j:g`undefined`};`)}function _F(A,j,e,t,r,o,n){if(e==="link")return!n||!Fe(A)&&!$A(A)?void 0:n.create(A);if(!Fe(A))return $A(A)?r.create(A):cE(e,A,t)?o&&j&&e==="string"?o.add(A,j,i=>j?.[i]?.value):A:dE(e,t)}function fM(A,j,e,t,r){if(!lE(A.outputType))return mM(A);let o=_F(A.truthy,A.truthyLocalized,A.outputType,j,e,t,r),n=_F(A.falsy,A.falsyLocalized,A.outputType,j,e,t,r);return Zj.lines(g`if (value) {`,g`return ${o===void 0?g`undefined`:o};`,g`} else {`,g`return ${n===void 0?g`undefined`:n};`,g`}`)}function NF(A,j,e,t,r){B(e),B(t),B(r);let o=new Set;function n(a){if(Fe(a)&&wt(a,s=>n(s)),$A(a)){B(e);let s=e.create(a);o.add(oj(s))}}n(A.truthy),n(A.falsy);let i=[g`value`,ZA.activeLocale];if(o.size>0){let a=`{${Array.from(o).join(", ")}}`;i.push(new jA(a))}return new jA(Zj.lines(g`(${new jA(i.map(oj).join(", "))}) => {`,new jA(fM(A,j,e,t,r)),g`}`))}function ii(A,j,e,t,r,o,n){if(e==="link")return!n||!Fe(A)&&!$A(A)?void 0:n.create(A);if(!Fe(A))return $A(A)?r.create(A):aE(e,A,t)?o&&e==="string"&&L(A)&&j?o.add(A,j,i=>j?.[i]?.value):A:sE(e,t)}function OF(A){let j=Gr(A.outputType);return oj(g`return ${tr(j)?j:g`undefined`};`)}function EM(A,j,e,t,r,o){if(j?.type!=="enum"||!nE(A.outputType))return OF(A);let n=new Set,i=ii(A.default,A.defaultLocalized,A.outputType,e,t,r,o);return Zj.lines(g`switch (value) {`,...A.cases.filter(a=>n.has(a.from)||!j.options.includes(a.from)?!1:(n.add(a.from),!0)).map(a=>{let s=ii(a.to,a.toLocalized,A.outputType,e,t,r,o);return g`case ${a.from}: return ${s===void 0?g`undefined`:s};`}),g`default: return ${i===void 0?g`undefined`:i};`,g`}`)}function wF(A,j,e,t,r,o){B(t),B(r),B(o);let n=new Set;function i(s){if(Fe(s)&&wt(s,l=>i(l)),$A(s)){B(t);let l=t.create(s);n.add(oj(l))}}A.cases.forEach(s=>{i(s.to)}),i(A.default);let a=[g`value`,ZA.activeLocale];if(n.size>0){let s=`{${Array.from(n).join(", ")}}`;a.push(new jA(s))}return new jA(Zj.lines(g`(${new jA(a.map(oj).join(", "))}) => {`,new jA(EM(A,j,e,t,r,o)),g`}`))}function $M(A){let j=Gr(A.outputType);return oj(g`return ${tr(j)?j:g`undefined`};`)}function BM(A,j,e,t,r){if(!iE(A.outputType))return $M(A);let o=new Set,n=ii(A.default,A.defaultLocalized,A.outputType,j,e,t,r);return Zj.lines(g`switch (typeof value === "string" ? value.toLowerCase() : value) {`,...A.cases.filter(i=>{let a=i.from.toLowerCase();return o.has(a)?!1:(o.add(a),!0)}).map(i=>{let a=ii(i.to,i.toLocalized,A.outputType,j,e,t,r);return g`case ${i.from.toLowerCase()}: return ${a===void 0?g`undefined`:a};`}),g`default: return ${n===void 0?g`undefined`:n};`,g`}`)}function LF(A,j,e,t,r){B(e),B(t),B(r);let o=new Set;function n(a){if(Fe(a)&&wt(a,s=>n(s)),$A(a)){B(e);let s=e.create(a);o.add(oj(s))}}A.cases.forEach(a=>{n(a.to)}),n(A.default);let i=[g`value`,ZA.activeLocale];if(o.size>0){let a=`{${Array.from(o).join(", ")}}`;i.push(new jA(a))}return new jA(Zj.lines(g`(${new jA(i.map(oj).join(", "))}) => {`,new jA(BM(A,j,e,t,r)),g`}`))}var qF=g`(a, b) => {
    return typeof a === "string" && typeof b === "string" && a.toLowerCase().endsWith(b.toLowerCase());
};
`;var VF=g`(a, b) => {
    return (typeof a === "string" && typeof b === "string") ? a.toLowerCase() === b.toLowerCase() : a === b;
};
`;var KF=g`(value, segment = "year") => {
    if (typeof value !== "string") return;
    const date = new Date(value);
    if (isNaN(date.getTime())) return;
    if (segment === "year") return date.getUTCFullYear();
    if (segment === "month") return date.getUTCMonth() + 1;
    if (segment === "day") return date.getUTCDate();
    if (segment === "hour24") return date.getUTCHours();
    if (segment === "hour12") {
        const hour = date.getUTCHours();
        return hour === 0 ? 12 : hour > 12 ? hour - 12 : hour;
    }
    if (segment === "minute") return date.getUTCMinutes();
};
`;var Ep=g`spanCount`,Q6=g`optionalColumnCount`,HF=g`(columnSpan, ${Q6}) => {
    if (columnSpan === "all") return "-1 / 1";
    const ${Ep} = Number.isFinite(columnSpan) && columnSpan > 0 ? columnSpan : 1;
    if (Number.isFinite(${Q6}) && ${Ep} > ${Q6}) {
        return ${Bo`span ${Q6}`};
    }
    return ${Bo`span ${Ep}`};
};
`;var JF=g`spanCount`,UF=g`(rowSpan) => {
    const ${JF} = Number.isFinite(rowSpan) && rowSpan > 0 ? rowSpan : 1;
    return ${Bo`span ${JF}`}
};
`;var QF=g`(gap) => {
    if (Number.isFinite(gap) && gap >= 0) return gap;
    if (typeof gap !== "string") return 0;
    const firstSegment = gap.split(" ")[0];
    const parsedGap = parseFloat(firstSegment);
    return Number.isFinite(parsedGap) && parsedGap >= 0 ? parsedGap : 0;
};
`;var zF=g`(a, b) => {
    return (typeof a === "number" && typeof b === "number") ? a > b : false;
};
`;var WF=g`(value) => {
    if (typeof value !== "string") return "";
    return value.replaceAll("&", "&amp;").replaceAll("<", "&lt;").replaceAll(">", "&gt;").replaceAll('"', "&quot;").replaceAll("'", "&#39;");
};
`;var XF=g`(value) => {
    if (typeof value !== "string") return "";
    const entities = /&(?:[gl]t|quot|#39|amp|#6[02]|#34|apos|#38);/gu;
    const replacers = { "&lt;": "<", "&gt;": ">", "&quot;": '"', "&#39;": "'", "&amp;": "&", "&#60;": "<", "&#62;": ">", "&#34;": '"', "&apos;": "'", "&#38;": "&" };
    return value.replace(entities, match => replacers[match]);
};
`;var YF=g`(dateString, minDateString) => {
    if (typeof dateString !== "string" || typeof minDateString !== "string") return false;

    const date = new Date(dateString);
    if (isNaN(date.getTime())) return false;

    const minDate = new Date(minDateString);
    if (isNaN(minDate.getTime())) return false;

    return date >= minDate;
};
`;var ZF=g`(dateString, maxDateString) => {
    if (typeof dateString !== "string" || typeof maxDateString !== "string") return false;

    const date = new Date(dateString);
    if (isNaN(date.getTime())) return false;

    const maxDate = new Date(maxDateString);
    if (isNaN(maxDate.getTime())) return false;

    return date <= maxDate;
};
`;var Ay=g`(value, start, end) => {
    if (typeof value !== "string" || typeof start !== "string" || typeof end !== "string") return false;

    const date = new Date(value);
    if (isNaN(date.getTime())) return false;

    const startDate = new Date(start);
    if (isNaN(startDate.getTime())) return false;

    const endDate = new Date(end);
    if (isNaN(endDate.getTime())) return false;

    return date >= startDate && date <= endDate;
};
`;var jy=g`(value) => {
    return typeof value === "number" && value % 2 === 0;
};
`;var ey=g`(a, b) => {
    return b.includes(a);
};
`;var ty=g`(value) => {
    return typeof value === "number" && value % 2 === 1;
};
`;var ry=g`(value) => {
    if (Array.isArray(value)) return value.length > 0;
    return value !== undefined && value !== null && value !== "";
};
`;var oy=g`(value) => {
    const result = JSON.stringify(value)
    if (typeof result === 'string') return result.replace(/<\\/(script|style)/gi, '<\\\\/$1')
    return result
};
`;var ny=g`(a, b) => {
    return (typeof a === "number" && typeof b === "number") ? a < b : false;
};
`;var iy=g`(value) => {
    return !value;
};
`;var ay=g`(value) => {
    if (typeof value !== "number") return value;
    if (!Number.isFinite(value)) return undefined;
    return Math.max(0, value) + "px";
};
`;var sy=g`(value, offset, limit) => {
    if (!Array.isArray(value)) return []
    const end = typeof limit === "number" ? offset + limit : undefined
    return value.slice(offset, end);
};
`;var ly=g`(value, prefix) => {
    if (typeof value === "string" && typeof prefix === "string") {
        return prefix + value;
    } else if (typeof value === "string") {
        return value;
    } else if (typeof prefix === "string") {
        return prefix;
    }
    return "";
};
`;var cy=g`(value, cornerIndex) => {
    if (typeof value === "number" && Number.isFinite(value)) return Math.max(0, value) + "px";
    if (typeof value !== "string" || typeof cornerIndex !== "number") return undefined;
    const segments = value.split(" ");
    return segments[cornerIndex] || segments[cornerIndex - 2] || segments[0];
};
`;var dy=g`(value) => {
    return Array.isArray(value) ? Array.from(value).reverse() : [];
}
`;var uy=g`(a, b) => {
    return typeof a === "string" && typeof b === "string" && a.toLowerCase().startsWith(b.toLowerCase());
};
`;var py=g`(value, suffix) => {
    if (typeof value === "string" && typeof suffix === "string") {
        return value + suffix;
    } else if (typeof value === "string") {
        return value;
    } else if (typeof suffix === "string") {
        return suffix;
    }
    return "";
};
`;var ky=g`(value, overflow) => {
    const isNonScrollable = (o) => o === "visible" || o === "clip" || o === undefined
    return isNonScrollable(value) === isNonScrollable(overflow) ? value : undefined
}`;var my=g`(value) => {
    return Boolean(value);
};
`;var fy=g`value`,Ey=g`activeLocale`;function $y(A,j){let e=j.dedupe("sharedDateFormatter",new jA(Zj.lines(g`(value, formatOptions, locale) => {`,g`  if (typeof value !== "string") return "";`,g`  const date = new Date(value);`,g`  if (isNaN(date.getTime())) return "";`,g`  const fallbackLocale = "en-US";`,g`  try {`,g`      return date.toLocaleString(locale || fallbackLocale, formatOptions);`,g`  } catch {`,g`      return date.toLocaleString(fallbackLocale, formatOptions);`,g`  }`,g`};`))),t=pE(A.display,A.format,A.dateStyle),r={...uE[t].options,timeZone:"UTC"},o=j.dedupe("dateOptions",new jA(oj(r)));return new jA(Zj.lines(g`(${fy}, ${Ey}) => {`,g`return ${jA.fn(e,fy,o,A.locale||Ey)};`,g`};`))}var By=g`(value) => {
    if (typeof value === "object" && value !== null && typeof value.src === "string") {
        return value.src;
    };
    return typeof value === "string" ? value : undefined;
};
`;var hy=g`(value) => {
    if (typeof value === "number" && Number.isFinite(value)) return value;
    if (typeof value !== "string") return 0;
    const parsedNumber = parseFloat(value);
    return (typeof parsedNumber === "number" && Number.isFinite(parsedNumber)) ? parsedNumber : 0;
};
`;var hM=`var(${xm}, clip)`,gy=g`(value) => {${g.joinLines(g`if (value === "clip") return ${hM}`,g`return value`)}};`;var Iy=g`(value) => {
    if (typeof value === "object" && value !== null && typeof value.src === "string") {
        return value;
    };
    return typeof value === "string" ? {src: value} : undefined;
};
`;var Ry=g`(value) => {
    return typeof value === "string" ? value : String(value);
};
`;var Fy=g`(value) => {${g.joinLines(g`if (value < -1) return -1`,g`if (value > 11) return 11`,g`return value`)}};`;function yy(A){switch(A){case"isAfter":return YF;case"isBefore":return ZF;case"isBetweenDates":return Ay;case"contains":return DF;case"endsWith":return qF;case"equals":return VF;case"isSet":return ry;case"greaterThan":return zF;case"lessThan":return ny;case"negate":return iy;case"numberToString":return CF;case"startsWith":return uy;case"toString":return Ry;case"toNumber":return hy;case"toBoolean":return my;case"extractDateSegment":return KF;case"reverseArray":return dy;case"offsetAndLimitArray":return sy;case"arrayLength":return PF;case"prefix":return ly;case"suffix":return py;case"toResponsiveImage":return Iy;case"toImageSrc":return By;case"jsonStringify":return oy;case"htmlEscape":return WF;case"htmlUnescape":return XF;case"addImageAlt":return xF;case"toZIndex":return Fy;case"toAxisOverflow":return ky;case"toOverflowWithClipFallback":return gy;case"numberToPixelString":return ay;case"radiusForCorner":return cy;case"isIncludedIn":return ey;case"isEven":return jy;case"isOdd":return ty;case"getGridColumnCSSValue":return HF;case"getGridRowCSSValue":return UF;case"getNumericColumnGap":return QF;default:EA(A,"All constant transform names should be implemented")}}function Sy(A,j,e,t,r,o,n){switch(A.name){case"enumToDisplayName":return GF(j);case"convertFromEnum":return wF(A,j,e,t,r,o);case"convertFromString":return LF(A,e,t,r,o);case"convertFromBoolean":return NF(A,e,t,r,o);case"arrayToArray":return MF(A);case"toDateString":return $y(A,n);default:EA(A,"All dynamic transform names should be implemented")}}var ve=dn(),gM={name:"toString"},IM={name:"toNumber"},RM={name:"toBoolean"},FM={name:"toResponsiveImage"},yM={name:"toImageSrc"},SM={name:"toZIndex"},GM={name:"numberToPixelString"},bM={name:"radiusForCorner"},CM={name:"toAxisOverflow"},vM={name:"toOverflowWithClipFallback"},TM={name:"jsonStringify"},xM={name:"htmlEscape"},PM={name:"htmlUnescape"},MM={name:"addImageAlt"},DM={name:"getGridColumnCSSValue"},_M={name:"getGridRowCSSValue"},NM={name:"getNumericColumnGap"};function OM(A){return Wm(A.name)}var Yr=class{constructor(j,e,t,r,o,n,i,a,s){this.fileDeclarations=j;this.componentDeclarations=e;this.imports=t;this.variables=r;this.localizedValues=o;this.links=n;this.fetches=i;this.modulesStore=a;this.type=s}wrapInTransformFunction(j,e,t,r,o){if(zm(e.name)){let n=this.fileDeclarations.dedupe(e.name,yy(e.name));return jA.fn(n,j,...t)}if(OM(e)){if(e.name==="enumToDisplayName"&&r&&r.type==="enum"){let i=this.getImportedEnumToDisplayNameIfPossible(j,r);if(i)return i}let n=Sy(e,r,o,this.variables,this.localizedValues,this.links,this.fileDeclarations);return jA.fn(new jA(this.fileDeclarations.dedupe(e.name,n)),j,...t)}EA(e.name,"All value transforms should be handled in wrapInTransformFunction")}getImportedEnumToDisplayNameIfPossible(j,e){let t=this.imports,r=this.modulesStore;if(!t||!r)return;let o=Wf(e);if(!o)return;let{dataIdentifier:n,enumFieldKey:i}=o;if(n===XE)return i===WE?this.variables?.getLayoutDirectionName()??g`undefined`:this.variables?.getLocaleName()??g`undefined`;let a=Y.dataForIdentifier(n);if(!a||!a.annotations)return;let s="framerEnumToDisplayNameUtils",l=a.annotations?.[s];if(!L(l))return;let c=Number.parseInt(l,10);if(!aA(c))return;let d=cA(n);if(!Pj(d))return;let{importSpecifier:u}=_$(d,this.type,r);if(!u)return;let k=this.variables?.getLocale()??g`undefined`;switch(c){case 1:{let m=yF(i),I=t.addImport(u,{exportSpecifier:m});return jA.optionalFn(I,j,k)}case 2:{let m=SF,I=t.addImport(u,{exportSpecifier:m});return jA.optionalFn(g`${I}[${i}]`,j,k)}default:throw new Error(`Enum to display name utils, unsupported version: ${c}`)}}wrapInValueTransform(j,e,t,r){return this.wrapInTransformFunction(j,e,TF(e,this,this.variables,this.localizedValues),t,r)}makeTypeSafe(j,e){switch(e){case"string":case"color":return this.wrapInTransformFunction(j,gM,ve);case"number":return this.wrapInTransformFunction(j,IM,ve);case"boolean":return this.wrapInTransformFunction(j,RM,ve);case"array":case"enum":case"link":case"gap":case"padding":case"borderradius":case"image":return j;default:return j}}getActiveLocaleCode(){if(!this.componentDeclarations||!this.imports)return g`undefined`;let j=this.imports.addImport("framer",{exportSpecifier:"useLocaleCode"});return this.componentDeclarations.dedupe("activeLocaleCode",jA.fn(j))}createComputedValue(j,e,t){B(this.variables);let r=gi(j)?e.cache.getVariableControlByReference(j.startValue):void 0,o=gi(j)?this.variables.create(j.startValue):this.fetches.createFetchBinding(e,j.startValue),n;j.transforms.forEach(a=>{Xm(a.name)&&(o=this.wrapInValueTransform(o,a,r,t),n=a)});let i=n?Ym(n.name):null;return!i||i.length>1||i[0]!==j.outputType?this.makeTypeSafe(o,j.outputType):o}wrapInToResponsiveImage(j){return this.wrapInTransformFunction(j,FM,ve)}wrapInToImageSrc(j){return this.wrapInTransformFunction(j,yM,ve)}wrapInToZIndex(j){return this.wrapInTransformFunction(j,SM,ve)}wrapInNumberToPixelString(j){return this.wrapInTransformFunction(j,GM,ve)}wrapInRadiusForCorner(j,e){return this.wrapInTransformFunction(j,bM,[e])}wrapInToAxisOverflow(j,e){return this.wrapInTransformFunction(j,CM,[e])}wrapInToOverflowWithClipFallback(j){return this.wrapInTransformFunction(j,vM,ve)}wrapInAddImageAlt(j,e){return this.wrapInTransformFunction(j,MM,[e])}wrapInClampRGB(j){return B(this.imports,"ValueTransformCollector: Must have imports to wrap in clampColor."),jA.fn(this.imports.addImport("framer",{exportSpecifier:"clampRGB"}),j)}wrapInGetGridColumnCSSValue(j,e){return this.wrapInTransformFunction(j,DM,e?[e]:ve)}wrapInGetGridRowCSSValue(j){return this.wrapInTransformFunction(j,_M,ve)}wrapInGetNumericColumnGap(j){return this.wrapInTransformFunction(j,NM,ve)}wrapInTemplateFilters(j,e){return this.makeTypeSafe(gB(j,e,{json:t=>this.wrapInTransformFunction(t,TM,ve),escape:t=>this.wrapInTransformFunction(t,xM,ve),raw:t=>this.wrapInTransformFunction(t,PM,ve)}),"string")}};function wM(A){return Q(A)||hj(A)||dA(A)||Ir(A)||Ej(A)}function Cy(A,j){return g`(key, locale){${g.joinLines(g`while (locale) {${g.joinLines(g`const values = ${A}[locale.id]`,g`if (values) {${g.joinLines(g`const value = ${j?g`values.read()[key]`:g`values[key]`}`,g`if (value) return value`)}}`,g`locale = locale.fallback`)}}`)}}`}var Ha,z6=class{constructor(j,e,t){this.entryNode=j;this.variables=e;this.treeStore=t;y(this,"cache",{});y(this,"valueCounter",0);rj(this,Ha,!1)}freeze(){OA(this,Ha,!0)}add(j,e,t){B(!kA(this,Ha),"Cannot add values to a frozen LocalizedValuesCollector.");let r={};if(!e||!wM(this.entryNode))return j;let o;this.variables&&(o=new Yi(this.entryNode));let n=this.treeStore.tree.root.locales??[];for(let c of n){if(!(c.id in e))continue;let d=this.createLocalizedValue(c.id,o,t);rt(d)||(r[c.id]=d)}if(Bt(r))return j;this.variables&&o&&this.variables.merge(o);let i=oj({defaultValue:j,localizedValues:r}),a=this.cache[i];if(a)return a;let s=`v${this.valueCounter++}`,l=jA.fn(this.getLocalizedValueBinding,s,ZA.activeLocale);if(o&&o.variables.size>0){let c=g.listFrom(o.variables);for(let d in r){let u=r[d];B(!rt(u),"Localized should not be null or undefined"),r[d]=g`({ ${c} }) => ${u}`}l=g`${l}?.({ ${c} })`}for(let c in r){let d=r[c];B(!rt(d),"Localized should not be null or undefined"),this.recordLocalizedValue(c,s,d)}return mA(j)||(l=g`${l} ?? ${j}`),this.cache[i]=l}};Ha=new WeakMap;var Zr,by=class extends z6{constructor(e,t,r,o,n,i,a,s){super(e,t,r);this.imports=o;this.declarations=n;this.fetches=i;this.modulesStore=a;this.moduleType=s;y(this,"submoduleByLocaleId",new Map);y(this,"identifier",`../${Dt("localization",this.entryNode.id)}`);y(this,"submodules");y(this,"bindings",new bo);rj(this,Zr);this.submodules=new U6(this.moduleType,this.modulesStore,this.entryNode.id)}get getLocalizedValueBinding(){return this.imports.addImport(this.identifier,{exportSpecifier:"default",importBinding:"getLocalizedValue"})}canPreloadWithSuspense(){return!dA(this.entryNode)}preloadWithSuspense(){kA(this,Zr)||(OA(this,Zr,this.bindings.create("usePreloadLocalizedValues")),this.declarations.component.create(jA.fn(this.imports.addImport(this.identifier,{exportSpecifier:oj(kA(this,Zr))}),ZA.activeLocale)))}createLocalizedValue(e,t,r){let o=this.submoduleByLocaleId.get(e)??this.submodules.create(),n=new On(this.entryNode,o.imports,o.bindings,t,this.treeStore,this.modulesStore),i=r(e,{links:n,variables:t,imports:o.imports,declarations:o.declarations,valueTransforms:new Yr(o.declarations,void 0,o.imports,t,this,n,this.fetches,this.modulesStore,this.moduleType)});if(rt(i)){o&&!this.submoduleByLocaleId.has(e)&&this.submodules.delete(o);return}return this.submoduleByLocaleId.set(e,o),this.canPreloadWithSuspense()&&this.preloadWithSuspense(),i}recordLocalizedValue(e,t,r){let o=this.submoduleByLocaleId.get(e);B(o,"Localization submodule must exist"),o.declarations.create(g`export const ${new jA(t)} = ${r}`)}maybeGetUsePreloadDeclarations(e){if(!this.canPreloadWithSuspense()||!kA(this,Zr))return[];let t=this.bindings.create("preload"),r=kA(this,Zr);return[g`function ${t}(locale) {${g.joinLines(g`const promises = []`,g`while (locale) {${g.joinLines(g`const values = ${e}[locale.id]`,g`if (values) {${g.joinLines(g`const promise = values.preload()`,g`if (promise) promises.push(promise)`)}}`,g`locale = locale.fallback`)}}`,g`if (promises.length > 0) return Promise.all(promises)`)}}`,g`export function ${r}(locale) {${g.joinLines(g`const preloadPromise = ${t}(locale)`,g`if (preloadPromise) throw preloadPromise`)}}`]}values(e){let t={};for(let[r,o]of this.submoduleByLocaleId)if(this.canPreloadWithSuspense()){let n=e.addImport("framer",{exportSpecifier:"LazyValue"});t[r]=jA.fn(g`new ${n}`,g`() => import(${o.submoduleImport})`)}else t[r]=e.addImport(o.submoduleImport,{exportSpecifier:"*",importBinding:"localizedValues"});return t}module(e){if(this.freeze(),(this.treeStore.tree.root.locales??[]).length===0||this.submoduleByLocaleId.size===0)return;let r=new Co(this.moduleType,this.modulesStore,this.bindings),o=new xo(this.bindings),n=o.dedupe("valuesByLocaleId",this.values(r));return{type:"localization",revision:e,source:g.joinSections(g.joinLines(...r.statements),...o.list(),g`export default function getLocalizedValue${Cy(n,this.canPreloadWithSuspense())}`,...this.maybeGetUsePreloadDeclarations(n)),artifacts:{submodules:this.submodules.serialize()}}}};Zr=new WeakMap;var Ja,Ka=class extends z6{constructor(e,t,r,o,n,i,a,s,l){super(e,t,r);this.imports=o;this.bindings=n;this.declarations=i;this.fetches=a;this.modulesStore=s;this.moduleType=l;y(this,"valuesByLocaleId",{});rj(this,Ja)}get getLocalizedValueBinding(){return kA(this,Ja)||OA(this,Ja,this.bindings.create("getLocalizedValue")),kA(this,Ja)}recordLocalizedValue(e,t,r){let o=this.valuesByLocaleId[e]??{};o[t]=r,this.valuesByLocaleId[e]=o}createLocalizedValue(e,t,r){let o=new On(this.entryNode,this.imports,this.bindings,t,this.treeStore,this.modulesStore);return r(e,{links:o,variables:t,imports:this.imports,declarations:this.declarations,valueTransforms:new Yr(this.declarations,void 0,this.imports,t,this,o,this.fetches,this.modulesStore,this.moduleType)})}list(){if(this.freeze(),(this.treeStore.tree.root.locales??[]).length===0)return[];let t=this.bindings.create("valuesByLocaleId");return[g`const ${t} = ${this.valuesByLocaleId}`,g`function ${this.getLocalizedValueBinding} ${Cy(t,!1)}`]}};Ja=new WeakMap;var Qa,Ua=class{constructor(j,e,t,r,o,n,i){this.entryNode=j;this.treeStore=e;this.variables=t;this.declarations=r;this.bindings=o;this.imports=n;this.assets=i;rj(this,Qa,new Map);y(this,"preloadDependencyTree",new Map)}command(j){let e=kA(this,Qa).get(j);if(e)return e;let t=this.bindings.create("pre"+j);return kA(this,Qa).set(j,t),t}addQuery(j,e,t){if(!dA(this.entryNode))return;let{destructured:r,dependencies:o}=this.getVariableDependencies(t),n=g`(${Ty(this.command("query"),r)}) => ${jA.fn(this.command("query"),e)}`;this.addStatement("query",j,o,jA.fn(this.declarations.dedupe("query",n),this.command("query"),r))}addFetch(j,e){if(!dA(this.entryNode))return;let{usedVariables:t}=mp(e,this.variables);$A(e.controlProp.value)&&t.push(e.controlProp.value);let{destructured:r,dependencies:o}=this.getVariableDependencies(t),n=g`(${Ty(this.command("fetch"),r)}) => ${jA.fn(this.command("fetch"),J6(e,this.variables,this.assets,void 0))}`;this.addStatement("fetch",j,o,jA.fn(this.declarations.dedupe("query",n),this.command("fetch"),r))}createPromiseList({fetches:j,children:e},t=!1){let r=[];if(t)for(let o of j)r.push(o);for(let[,o]of e){for(let i of o.fetches)r.push(i);if(!o.value)continue;let n=o.value;if(o.children.size===0){r.push(n);continue}r.push(g`${n}.then(async collection => {await Promise.all(collection.flatMap((${KM(o.usedVariables)}) => (${this.createPromiseList(o)})))})`)}return g`[${g.listFrom(r)}]`}getHook(){if(!dA(this.entryNode))return{variants:new Set,hook:void 0};let j={},e=[],t=new Set;for(let[u,k]of this.preloadDependencyTree){if(k.children.size===0&&k.fetches.size===0||!k.variantHasAnyFetches)continue;t.add(u);let m=k.usedVariables.map(I=>this.variables.create(I));e.push(...m),j[u]=this.declarations.dedupe("preload",g`async (${this.command("query")}, ${this.command("fetch")}, ${$p(m)??g`props`}) => await Promise.all(${this.createPromiseList(k,!0)})`)}if(!t.size)return{variants:new Set,hook:void 0};let r=this.declarations.dedupe("preloadStatements",j),o=this.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"}),n=this.imports.addImport("framer",{exportSpecifier:"usePreloadQuery"}),i=this.imports.addImport("framer",{exportSpecifier:"usePrefetch"}),a=g`variant`,s=g`gestures`,l=g`clearLoadingVariant`,c=g`setGestureState`,d=this.declarations.dedupe("useLoadingVariant",g`(${a}, ${s}, ${l}, ${c}, props?: Record<string, unknown>) => {${g.joinLines(g`const prequery = ${jA.fn(n)}`,g`const prefetch = ${jA.fn(i)}`,g`${o}.useEffect(() => {${g.joinLines(g`const promise = ${r}[${a}]`,g`if (!promise || !${s}?.[${a}]?.loading) return`,g`promise(prequery, prefetch, props)`,g`.then(() => ${jA.fn(l)})`,g`.catch(() => ${jA.fn(c,{isError:!0})})`)}}, [${a}])`)}}`);return{variants:t,hook:u=>jA.fn(d,ZA.baseVariant,u,ZA.clearLoadingGesture,ZA.setGestureState,$p(e))}}addStatement(j,e,t,r){let o=this.treeStore.treeIndex.getGroundNodeIdFor(e.id),n=this.treeStore.tree.get(o);if(!n||!XA(n)||_l(n.gesture))return;let i=vy(this.preloadDependencyTree,n.id);j==="fetch"&&(i.variantHasAnyFetches=!0);let a=t.get(this.entryNode.id);a&&i.usedVariables.push(...a);let s=i;for(let l of LM(e,t,j==="fetch")){let c=vy(s.children,l);if(l===e.id){j==="query"&&(c.value=r),j==="fetch"&&c.fetches.add(r);for(let[u,k]of t){let m=c.dependencies.get(u)??[];m.push(...k),c.dependencies.set(u,m)}}let d=t.get(l);d&&c.usedVariables.push(...d),s.children.set(l,c),s=c}this.preloadDependencyTree.set(n.id,i)}getVariableDependencies(j){let e=[],t=new Map;for(let r of j)e.push(this.variables.create(r)),qM(t,r.providerId??this.entryNode.id,r);return{destructured:$p(e),dependencies:t}}};Qa=new WeakMap;function LM(A,j,e){if(A.cache.ancestorRepeaterIds){if(e){let t=[...A.cache.ancestorRepeaterIds,A.id];for(let r=A.cache.ancestorRepeaterIds.length-1;r>=0;r--){let o=A.cache.ancestorRepeaterIds[r];if(o&&j.has(o))break;t.splice(r,1)}return t}return[...A.cache.ancestorRepeaterIds,A.id]}return[A.id]}function qM(A,j,e){let t=A.get(j)??[];t.push(e),A.set(j,t)}function VM(A){return{id:A,value:void 0,dependencies:new Map,usedVariables:[],children:new Map,fetches:new jA.Set,variantHasAnyFetches:!1}}function vy(A,j){return A.get(j)??VM(j)}function Ty(...A){let j=[];for(let e of A)e&&j.push(oj(e));return new jA(j.join(", "))}function $p(A){if(A.length!==0)return A.reduce((j,e)=>(j[oj(e)]=e,j),{})}function KM(A){return A.length===0?g``:A.reduce((j,e)=>(j[e.id]=Ln(e.id,e.providerId,!1),j),new Uj)}function Bp(A,j){if(A===void 0)return"";let e=`<${j}>${A}</${j}>`,r=bi(e).querySelector(j);return r instanceof HTMLElement?r.innerHTML:""}function xy(A,j){let e={headStart:"",headEnd:"",bodyEnd:"",bodyStart:""};for(let t of qB){let r=[],o=A[t];if(o&&r.push(o),j)for(let n in j){let i=j[n]?.[t];i?.html&&!i.disabled&&r.push(`<!-- Plugin: ${n} --> ${i.html}`)}e[t]=r.map(n=>HM(n,t)).join(`
`)}return e}function HM(A,j){if(j==="headStart"||j==="headEnd")return Bp(A,"head");if(j==="bodyStart"||j==="bodyEnd")return Bp(A,"body");Rs(j)}var hp=A=>A;function LpA(A){return A.filter(He)}var W6=g`params`,Py={type:"siteMetadata",localIdName:"siteMetadata",localId:Dt("siteMetadata","siteMetadata")};function $kA(A){return{type:"webPageMetadata",localIdName:A,localId:Dt("webPageMetadata",A)}}var BkA=hp(async(A,j)=>{let{assetMap:e,treeStore:t,modulesStore:r}=j,o=new qa(e),n=new bo,i=new Co("siteMetadata",r,n),a=new Yi(A),s=new xo(n),l=new On(A,i,n,void 0,t,r),c=new Ua(A,t,a,s,n,i,o),d=new Va(n,a,c,o,l),u=new Ka(A,a,t,i,n,s,d,r,"siteMetadata"),k=new Yr(s,void 0,i,a,u,void 0,d,r,"siteMetadata"),m=My(A,o,k,a,u,void 0,void 0,void 0);return[{type:"siteMetadata",revision:void 0,source:Dy(A,m,i,s,u,k,a,void 0),artifacts:{assets:o.keys}}]}),hkA=hp(async(A,j,e)=>{let{treeStore:t,modulesStore:r,assetMap:o}=j,{serializationId:n}=e,i=new qa(o),a=new bo,s=new Co("webPageMetadata",r,a),l=new Yi(A),c=new xo(a),d=new On(A,s,a,void 0,t,r),u=new Ua(A,t,l,c,a,s,i),k=new Va(a,l,u,i,d),m=new Ka(A,l,t,s,a,c,k,r,"webPageMetadata"),I=new Yr(c,void 0,s,l,m,void 0,k,r,"webPageMetadata"),$=A.getVariableControlMap(t.tree,Y,Y.activeBundleHash),F=My(A,i,I,l,m,UM(t.tree,A,s),QM(s),$);F.viewport=await zM(A);let S=Object.entries(A.getBreakpointValues()).map(([x,C])=>({hash:EE(x),mediaQuery:hB(C)}));F.breakpoints=S;let P=GE(A);return F.elements=P,F.serializationId=n,[{type:"webPageMetadata",source:Dy(A,F,s,c,m,I,l,$),artifacts:{assets:i.keys},revision:A.moduleSourceRevision}]});function gkA(A,j){let e=new Set;function t(r){let o=pu(),n=r.matchAll(o);for(let[,i]of n)i&&j?.has(i)&&e.add(i)}for(let r in A.webMetadata){let o=r,n=A.webMetadata[o];switch(o){case"title":case"description":case"socialImage":L(n)&&t(n),$A(n)&&e.add(n.id);break;case"favicon":case"faviconDark":case"appleTouchIcon":case"googleAnalyticsTrackingId":case"reducedMotion":case"language":case"languageTitle":case"adaptLayoutToTextDirection":case"noIndex":case"noIndexSite":case"canonicalURL":case"customCanonicalURL":case"optOutOfHTMLPlugin":case"automaticLocale":case"preserveQueryParams":case"enableFormsUTMTracking":break;default:}}for(let r in A.customHTML){let o=r,n=A.customHTML[o];switch(o){case"headStart":case"headEnd":case"bodyStart":case"bodyEnd":L(n)&&t(n);break;default:}}if(A.titleLocalized)for(let r of Object.values(A.titleLocalized))L(r.value)&&t(r.value);if(A.descriptionLocalized)for(let r of Object.values(A.descriptionLocalized))L(r.value)&&t(r.value);return e}function My(A,j,e,t,r,o,n,i){let a={},s=r.add(Ao(A,A.webMetadata?.title,e,t,i)??o,A.titleLocalized,(u,k)=>(B(k.variables),Ao(A,A.titleLocalized?.[u]?.value,k.valueTransforms,k.variables,i)));mA(s)||(a.title=s);let l=r.add(Ao(A,A.webMetadata?.description,e,t,i)??n,A.descriptionLocalized,(u,k)=>(B(k.variables),Ao(A,A.descriptionLocalized?.[u]?.value,k.valueTransforms,k.variables,i)));if(mA(l)||(a.description=l),A.webMetadata?.favicon){let u=j.resolve(A.webMetadata.favicon);B(u,"Favicon is not a valid asset reference"),a.favicon=u.src}let c=A.webMetadata?.socialImage;if($A(c)){let u=Te(c.id,A.id),k=t.create(u);a.socialImage=e.wrapInToImageSrc(k)}else if(c){let u=j.resolve(c);B(u,"Social image is not a valid asset reference"),a.socialImage=u.src}A.webMetadata?.noIndex===!0?a.robots="noindex":a.robots="max-image-preview:large",A.webMetadata?.noIndexSite!==void 0&&(a.framerSearch={index:!A.webMetadata?.noIndexSite});let d=xy(A.customHTML??{},Ir(A)?A.pluginCustomHTML:void 0);if(d.headStart){let u=Ao(A,d.headStart,e,t,i,"escape");u&&(a.customHTMLHeadStart=u)}if(d.headEnd){let u=Ao(A,d.headEnd,e,t,i,"escape");u&&(a.customHTMLHeadEnd=u)}if(d.bodyStart){let u=Ao(A,d.bodyStart,e,t,i,"escape");u&&(a.customHTMLBodyStart=u)}if(d.bodyEnd){let u=Ao(A,d.bodyEnd,e,t,i,"escape");u&&(a.customHTMLBodyEnd=u)}return a}function JM(A,j,e,t){if(!e||!fe(A))return;let r=t.variableIdsByProviderId.get(A.id);if(!r||r.size===0)return;let o=j.addImport("framer",{exportSpecifier:"QueryEngine"}),n=j.addImport("framer",{exportSpecifier:"getWhereExpressionFromPathVariables"});function i(u){let k=j.addModuleImport(u);return B(k,"Can't import collection"),k}let a=gh(A),s=new Set,l=Rh(e,r,s,a,i),c=Ih(A.dataIdentifier,e,s,a,i),d=new Uj({from:c,select:l,where:jA.fn(n,g`pathVariables`,a)});return g.joinLines(g`export async function fetchMetadata(pathVariables, activeLocale) {`,g`  const queryEngine = new ${o}();`,g``,g`  const query = ${d};`,g``,g`  const result = await queryEngine.query(query, activeLocale);`,g`  if (result.length === 0) {`,g`    throw new Error("No data matches pathVariables");`,g`  }`,g``,g`  const params = result[0];`,g`  return metadata(params, activeLocale);`,g`}`)}function Dy(A,j,e,t,r,o,n,i){let a=n.variableIdsByProviderId.get(A.id),s=[];for(let d of a??[]){let u=g`${W6}?.[${d}]`,k=i?.get(d);if(k&&k.type==="enum"){let $=o.wrapInValueTransform(u,{name:"enumToDisplayName"},k);u=g`${u} !== undefined ? ${$} : undefined`}let m=Ln(d,A.id,!0),I=g`const ${m} = ${u}`;s.push(I)}let l=g.joinLines(g`export default function metadata(${W6}, ${ZA.activeLocale}) {`,...s,g`return ${j}`,g`}`),c=Q(A)?JM(A,e,i,n):void 0;return g.joinSections(g.linesFrom(e.statements),...r.list(),...t.list(),l,c,g`export const metadataVersion = 1`)}function Ao(A,j,e,t,r,o){if(rt(j))return;let n=pu();return Bo.replaceAll(j,n,(i,a)=>{let[s,l]=IB(a,o);if(!r?.has(s))return i;let c=Te(s,A.id),d=t.create(c),u=d;return r?.get(s)?.type==="responsiveimage"&&(u=e.wrapInToImageSrc(u)),u=e.wrapInTemplateFilters(u,l),g`${d} !== undefined ? ${u} : ${i}`})}function IkA(A,j,e){let t=e?.title,r=X6(A,j);return t||r}function UM(A,j,e){let t=e.addImport(`../${Py.localId}`,{exportSpecifier:"default",importBinding:"siteMetadata"}),r=g`${t}(${W6}, ${ZA.activeLocale}).title`,o=X6(A,j);return g`${r} || ${o}`}function QM(A){let j=A.addImport(`../${Py.localId}`,{exportSpecifier:"default",importBinding:"siteMetadata"});return g`${j}(${W6}, ${ZA.activeLocale}).description`}function X6(A,j){if(fe(j)){let r=Y.dataForIdentifier(j.dataIdentifier);if(r?.name)return r.name+" Detail"}let e=N$(A,j);return Zn(e??"/")}async function zM(A){if(Q(A)){let j=A.isLoaded()?A:await A.load();return j?j.getReplicaVariants().length>0?"width=device-width":`width=${j.getPrimaryVariant().width}`:"width=device-width"}return"width=device-width"}function Oj(A,j=!1){let e=(j?qn(A):A).trim();return e===""?0:e.split(/\W+\b/).length}function TkA(A){uo(Cd(A),"Array gallery control must be Array of Object controls");let j=A.control,e;for(let t in j.controls){uo(!e,"Multiple item properties found in gallery control");let r=j.controls[t];uo(r?.type==="responsiveimage"),e=[t,r]}return uo(e,"Gallery control must have at least one item property"),e}function xkA(A,j){if(!xi(j)||!j.value)return;let e=j.value[A];if(e?.type==="image")return e}function PkA(A){return A?A.filter(j=>!WM(j)):[]}function WM(A){if(!xi(A)||!A.value)return!1;let j=Object.values(A.value);if(j.length!==1)return!1;let e=j[0];return Df(e)?mA(e.value):!1}function _y(A){if(!Cd(A))return!1;let j=Object.values(A.control.controls);return j.length!==1?!1:j[0]?.type==="responsiveimage"}function Ny(A){return`${A??"Field"} is required`}function Oy(A,j){return`Exceeded max length by ${I$(A-j,"character","characters")}`}function OkA(A){return`Must have at least ${A.minCount} ${wy(A)}`}function wkA(A){return`Must have at most ${A.maxCount} ${wy(A)}`}var LkA="Slug value is already taken and must be unique";function wy(A){return _y(A)?"images":"items"}function Ly(A){let j=nB(A);for(let e of j.querySelectorAll("*"))e.tagName!=="BR"&&(e.removeAttribute("class"),e.removeAttribute("style"),e.removeAttribute("data-styles-preset"));return j.innerHTML}function DmA(A){return A==="hidden"?null:A}var _mA=["new","needsReview","done","hidden"],XM="controlPropKey";function NmA(A){return XM in A}function OmA(A){return"groups"in A}var YM="collectionNodeId";function wmA(A){return YM in A}var ZM={string:!0,richtext:!0,image:!0,enum:!0,link:!0,slug:!0};function AD(A){return A in ZM}function Ky(A){return AD(A.type)}var jD={string:!0,richtext:!0,image:!0,link:!0};function Hy(A){return A in jD}function eD(A){return A?A.type==="richtext"?!0:A.type==="RichTextNode"?A.textType==="rich-text":!1:!1}function LmA(A){return A?A.type==="image"||A.type==="FrameNode":!1}function qmA(A){return A?A.type==="nodeLink"||A.type==="link":!1}function VmA(A){return A?A.type==="RootNode"||A.type==="WebPageNode":!1}function KmA(A){return A?.type==="slug"||A?.type==="RouteSegmentNode"}function tD(A){return rt(A)||A===""||Fh(A)}function HmA(A,j){if(!A||eD(A))return!1;if(A.value.includes(`
`))return!0;let e=A.localizedValues[j.id];return e?!!e.value?.includes(`
`):!1}function Jy(A,j,e){return j?j.hash!==e||j.needsReview?"needsReview":"done":tD(A)?"done":"new"}function Sj(A,j,e,t,r,o){return Object.fromEntries(j.map(n=>{let i=e[n.id];if(r?.[n.id])return[n.id,"warning"];if(o){let a=o(n);if(a)return[n.id,a]}return[n.id,Jy(A,i,t)]}))}function Ip(A){return j=>A[j.id]?null:"done"}function Rp(A,j,e){return t=>{if(L(A)&&j){let r=j[t.id];if(r)return Jy(A,r,e)}return null}}var sj={};Object.freeze(sj);function rD(A,j,e,t,r,o,n){let i=(a,s,l)=>{if($A(s)||!L(s)||s.length===0&&!l)return;let c=HA(s),d=l??sj,u=Sj(s,o,d,c);n.push({type:A.name,transformId:A.id,keyPath:Wr(j,a),nodeId:r.id,scopeId:t.id,property:a,value:s,controlPropKey:e,controlPropName:void 0,ancestorControlKeyPath:void 0,valueWordCount:Oj(s),hash:c,localizedValues:d,localizedValueStatuses:u,managedByPluginButUserEditable:!1})};i("truthy",A.truthy,A.truthyLocalized),i("falsy",A.falsy,A.falsyLocalized)}function oD(A,j,e,t,r,o,n,i){if(j.outputType!=="string")return;for(let c of j.cases){if(gi(A)&&A.startValue.id===zE)break;if($A(c.to)||!L(c.to)||c.to.length===0&&!c.toLocalized)continue;let d=HA(c.to),u=c.toLocalized??sj,k=Sj(c.to,n,u,d),m=Wr(e,"cases");i.push({type:"convertFromEnum",transformId:j.id,keyPath:La(m,c.id),nodeId:o.id,scopeId:r.id,caseId:c.id,isDefaultCase:!1,value:c.to,ancestorControlKeyPath:void 0,controlPropKey:t,controlPropName:void 0,valueWordCount:Oj(c.to),hash:d,localizedValues:u,localizedValueStatuses:k,managedByPluginButUserEditable:!1})}if(!j.default||$A(j.default)||!L(j.default))return;let a=HA(j.default),s=j.defaultLocalized??sj,l=Sj(j.default,n,s,a);i.push({type:"convertFromEnum",transformId:j.id,keyPath:Wr(e,"default"),nodeId:o.id,scopeId:r.id,caseId:null,isDefaultCase:!0,ancestorControlKeyPath:void 0,value:j.default,controlPropKey:t,controlPropName:void 0,valueWordCount:Oj(j.default),hash:a,localizedValues:s,localizedValueStatuses:l,managedByPluginButUserEditable:!1})}function Z6(A,j,e,t,r,o,n){if(!(!Af(e.outputType)||e.outputType!=="string")){for(let i of e.transforms)if(Zm(i))switch(i.name){case"convertFromEnum":{oD(e,i,t,r,A,j,o,n);break}case"convertFromBoolean":{rD(i,t,r,A,j,o,n);break}case"prefix":case"suffix":{if($A(i.value)||i.value.length===0&&!i.valueLocalized)return;let a=HA(i.value),s=i.valueLocalized??sj,l=Sj(i.value,o,s,a);n.push({type:i.name,transformId:i.id,keyPath:La(t,i.id),controlPropKey:r,controlPropName:void 0,ancestorControlKeyPath:void 0,nodeId:j.id,scopeId:A.id,value:i.value,valueWordCount:Oj(i.value),hash:a,localizedValues:s,localizedValueStatuses:l,managedByPluginButUserEditable:!1});continue}default:}}}function nD(A,j,e,t,r,o){if(mn(e.textContent)){if(!pj(A,e,"textContent"))return;Z6(j,e,e.textContent,e.id,e.id,t,r);return}if(aj(e.htmlContent)||aj(e.textContent))return;let n=pj(A,e,"html"),i=pj(A,e,"htmlLocalized");if(!n&&!i)return;let a=e.html,s=qn(a),l=yh(a),c=o==="canvasHtmlAsTextContentIfPossible"?l:"rich-text",d=c==="text"?s:Ly(a);if(c==="text"&&!i&&Bj(e)){let $=A.getNode(e.originalid);if($&&qn($.html)===s)return}let k=HA(l===c?d:s),m=e.htmlLocalized??sj,I=Sj(d,t,m,k);r.push({type:"RichTextNode",keyPath:`${e.id}_html`,nodeId:e.id,scopeId:j.id,value:d,valueWordCount:Oj(d,!0),textType:c,hash:k,localizedValues:m,localizedValueStatuses:I,managedByPluginButUserEditable:!1,inherited:!i})}function qy(A){if(Ir(A))return"RootNode";if(Q(A))return"WebPageNode";EA(A)}function Vy(A,j,e){let t={};for(let r of A){let o=j[r.id];if(!o||!o.value)continue;let n=RB({collectionData:e,getCollectionDataForIdentifier:Y.dataForIdentifier.bind(Y),includeCollectionReferences:VA.isOn("collectionReferencesInMetadata"),type:"id",value:o.value});n&&(t[r.id]=n)}return t}function Uy(A,j,e,t,r){let o=null;if(Q(e)&&(o=Y.dataForIdentifier(e.dataIdentifier)),e.webMetadata?.title||e.titleLocalized){let n=e.webMetadata?.title??A.root.webMetadata?.title??"",i=HA(n),a=e.titleLocalized??sj,s=Vy(t,a,o),l=Sj(n,t,a,i,s);r.push({type:qy(e),keyPath:`${e.id}_title`,nodeId:e.id,scopeId:j.id,value:n,valueWordCount:Oj(n),hash:i,localizedValues:a,localizedValueStatuses:l,managedByPluginButUserEditable:!1,key:"title",dataIdentifier:En(e)?e.dataIdentifier:void 0,warnings:s})}if(e.webMetadata?.description||e.descriptionLocalized){let n=e.webMetadata?.description??A.root.webMetadata?.description??"",i=HA(n),a=e.descriptionLocalized??sj,s=Vy(t,a,o),l=Sj(n,t,a,i,s);r.push({type:qy(e),keyPath:`${e.id}_description`,nodeId:e.id,scopeId:j.id,value:n,valueWordCount:Oj(n),hash:i,localizedValues:a,localizedValueStatuses:l,managedByPluginButUserEditable:!1,key:"description",dataIdentifier:En(e)?e.dataIdentifier:void 0,warnings:s})}}function iD(A,j,e,t,r){if(!In(e)||!L(e.fillImage)||e.fillImage.length===0)return;let o=pj(A,e,"fillImage"),n=pj(A,e,"fillImageLocalized"),i=pj(A,e,"altAttribute"),a=pj(A,e,"altAttributeLocalized");if(!o&&!n&&!i&&!a)return;let s=e.altAttribute??Rl,l=HA(s),c=e.altAttributeLocalized??sj,d=e.fillImage,u=HA(d),k=e.fillImageLocalized??sj,m=Sj(s,t,c,l,void 0,Rp(d,k,u));r.push({type:"FrameNode",keyPath:`${e.id}_fillImageLocalized`,nodeId:e.id,scopeId:j.id,value:s,valueWordCount:Oj(s),hash:l,localizedValues:c,localizedValueStatuses:m,managedByPluginButUserEditable:!1,inherited:!a,supportsAlt:!0,image:d,imageHash:u,imageLocalizedValues:k,imageInherited:!n,positionX:ud(e.fillImagePositionX)?e.fillImagePositionX:void 0,positionY:ud(e.fillImagePositionY)?e.fillImagePositionY:void 0,supportsFocalPoint:!0})}function Qy(A,j,e,t){if(!VA.isOn("localizedLinks"))return;let r=j.getLink();if(!vs(r))return;let o=r.url,n=HA(o),i=j.linkLocalized??sj,a=Sj(o,e,i,n,void 0,Ip(i));t.push({type:"nodeLink",keyPath:`${j.id}_linkLocalized`,nodeId:j.id,scopeId:A.id,value:o,valueWordCount:o?1:0,hash:n,localizedValues:i,localizedValueStatuses:a,managedByPluginButUserEditable:!1,aiTranslationDisabled:!0})}function aD(A,j,e,t,r){iD(A,j,e,t,r),Qy(j,e,t,r)}function Ac(A){return!!(Hy(A)||A==="array"||A==="object")}function Y6(A,j,e){return`${A}.${j}.${e??""}`}function sD(A){if(Q(A)&&jl(A))return A.layoutTemplateIdentifier;if(nA(A))return A.codeComponentIdentifier}function lD(A,j,e,t,r){let o=sD(e);if(!o)return;let n=Y.componentForIdentifier(o);if(!n)return;let i=e.getControlProps(n.properties);function a(s,l,c,d=void 0){let u=l.type;if(u==="array"&&Pm(l.value)){if(c.type!=="array")return;let k=c.control;for(let m of l.value){if(!Ac(m.type))continue;let I=La(d,m.id);a(s,m,k,I)}}if(u==="object"&&ne(l.value)){if(c.type!=="object")return;for(let k in l.value){let m=l.value[k];if(!m||!Ac(m.type))continue;let I=Wr(d,k),$=c.controls[k];$&&a(s,m,$,I)}}if(Hy(u))switch(u){case"string":{if(!pj(A,e,WA(s))||c.type==="string"&&c.preventLocalization||(mn(l.value)&&Z6(j,e,l.value,Wr(e.id,s),s,t,r),!L(l.value)))break;let k=l.value,m=HA(k),I=l.valueLocalized??sj,$=Sj(k,t,I,m);r.push({type:"string",keyPath:Y6(e.id,s,d),controlPropKey:s,controlPropName:c.title||Ot(s),ancestorControlKeyPath:d,nodeId:e.id,scopeId:j.id,value:k,valueWordCount:Oj(k),hash:m,localizedValues:I,localizedValueStatuses:$,managedByPluginButUserEditable:!1});break}case"link":{if(!VA.isOn("localizedLinks")||!pj(A,e,WA(s))||(mn(l.value)&&Z6(j,e,l.value,Wr(e.id,s),s,t,r),!vs(l.value)))break;let k=l.value.url,m=HA(k),I=l.valueLocalized??sj,$=Sj(k,t,I,m,void 0,Ip(I));r.push({type:"link",keyPath:Y6(e.id,s,d),controlPropKey:s,controlPropName:c.title||Ot(s),ancestorControlKeyPath:d,nodeId:e.id,scopeId:j.id,value:k,valueWordCount:k?1:0,hash:m,localizedValues:I,localizedValueStatuses:$,managedByPluginButUserEditable:!1,aiTranslationDisabled:!0});break}case"richtext":{if(u!=="richtext"||!L(l.value)||c.type==="richtext"&&c.preventLocalization||!pj(A,e,WA(s)))break;let k=l.value,m=HA(k),I=l.valueLocalized??sj,$=Sj(k,t,I,m);r.push({type:"richtext",keyPath:Y6(e.id,s,d),controlPropKey:s,controlPropName:c.title||Ot(s),ancestorControlKeyPath:d,nodeId:e.id,scopeId:j.id,value:k,valueWordCount:Oj(k,!0),hash:m,localizedValues:I,localizedValueStatuses:$,managedByPluginButUserEditable:!1});break}case"image":{if(!l||l.type!=="image"||!L(l.value)||c.type!=="responsiveimage"&&c.type!=="image"||!pj(A,e,WA(s)))break;let k=c.type==="responsiveimage",m=l.alt??Rl,I=HA(m),$=k?l.altLocalized??sj:sj,F=l.value,S=HA(F),P=l.valueLocalized??sj,x=Sj(m,t,$,I,void 0,Rp(F,P,S)),C=c.type==="responsiveimage";r.push({type:"image",keyPath:Y6(e.id,s,d),controlPropKey:s,controlPropName:c.title||Ot(s),ancestorControlKeyPath:d,nodeId:e.id,scopeId:j.id,value:m,valueWordCount:Oj(m),hash:I,localizedValues:$,localizedValueStatuses:x,managedByPluginButUserEditable:!1,supportsAlt:k,image:F,imageHash:S,imageLocalizedValues:P,supportsFocalPoint:C,positionX:C?l.positionX:void 0,positionY:C?l.positionY:void 0});break}default:}}for(let s in i){let l=i[s];if(!l)continue;let c=n.properties[s];c&&a(s,l,c)}}function cD(A,j,e,t){let r=j.formSelectOptions;if(!(!r||r?.length===0))for(let o of r){let n=o.title;if(!n)continue;let i=o.titleLocalized??sj,a=HA(n),s=Sj(n,e,i,a);t.push({type:"FormSelectNode",keyPath:`${j.id}_${o.id}`,nodeId:j.id,optionId:o.id,scopeId:A.id,value:n,valueWordCount:Oj(n),hash:a,localizedValues:i,localizedValueStatuses:s,managedByPluginButUserEditable:!1})}}function dD(A,j,e,t,r){let o=`${e.id}_placeholder`;if(aj(e.formInputPlaceholder)){if($A(e.formInputPlaceholder)||!pj(A,e,"formInputPlaceholder"))return;Z6(j,e,e.formInputPlaceholder,o,e.id,t,r);return}if(!e.formInputPlaceholder||!pj(A,e,"formInputPlaceholder"))return;let n=HA(e.formInputPlaceholder),i=e.formInputPlaceholderLocalized??sj;r.push({keyPath:o,type:"FormPlainTextInputNode",nodeId:e.id,scopeId:j.id,value:e.formInputPlaceholder,valueWordCount:Oj(e.formInputPlaceholder),hash:HA(e.formInputPlaceholder),localizedValues:i,localizedValueStatuses:Sj(e.formInputPlaceholder,t,i,n),managedByPluginButUserEditable:!1})}function uD(A,j,e,t,r,o){Q(e)&&Uy(A,j,e,t,r),uj(e)&&nD(A,j,e,t,r,o),(nA(e)||Q(e))&&lD(A,j,e,t,r),RA(e)&&aD(A,j,e,t,r),(Fr(e)||_A(e))&&Qy(j,e,t,r),Ls(e)&&dD(A,j,e,t,r),qs(e)&&cD(j,e,t,r)}function Wa(A,j,e,t,r,o){if(j.mutable)return;let n=j.cache.localizationSourceGroup;if(n&&!(n.update!==j.update||n.componentHash!==t||n.locales!==e||n.parentVariables!==r||!ot(n.subGroups,o))&&!(bl(A,j)&&n.includedLocales!==j.includedLocales))return n}function Xa(A,j,e,t,r,o,n){j.mutable||(j.cache.localizationSourceGroup={update:j.update,locales:t,componentHash:r,parentVariables:o,group:e,includedLocales:bl(A,j)?j.includedLocales:void 0,subGroups:n})}function pD(A,j,e,t,r,o){let n=o==="canvasHtmlAsTextContentIfPossible";if(n){let l=Wa(A,j,e,t,Wt,void 0);if(l){l.group&&r.push(l.group);return}}let i=[];for(let l of j.walk())uD(A,j,l,e,i,o);let a=bl(A,j),s;if(i.length>0){let l=Q(j)?X6(A,j):j.name??"Unknown";Q(j)&&j.abTestingParentId&&(l=`${l} \xB7 ${j.name||ut(j)}`),s={type:"sourceGroup",name:l,groupType:Q(j)?"page":Ej(j)?"template":"component",nodeId:j.id,supportsLocaleVisibility:a,includedLocaleIds:a?yu(A,j):void 0,items:i},r.push(s)}n&&Xa(A,j,s,e,t,Wt,void 0)}function za(A,j,e){return e?`${A}.${j}.${e}`:`${A}.${j}`}function kD(A){return A.type!=="rich-text"?A.value.length:qn(A.value).length}function gp(A,j,e){let t=e.required,r=e.type==="link"?void 0:e.options?.maxLength;if(!t&&!aA(r))return;let o={};for(let n of A){let i=j[n.id];if(!fd(i))continue;let a=kD(i);t&&a===0?o[n.id]=Ny(e.name):aA(r)&&a>r&&(o[n.id]=Oy(a,r))}return o}function zy(A,j,e,t){let r={};for(let o of A){let n=j[o.id];if(!fd(n))continue;let a=e[o.id]?.get(n.value);a&&a>1&&(r[o.id]=t)}return r}function mD(A,j,e,t,r,o,n,i){let a=r.type;switch(a){case"string":{if(Ws(r))return;let s;if(n){if(n.type!==a||!L(n.value))return;s=n.value}else{if(Lf(r))return;s=r.initialValue}let l=HA(s),c=n?.valueLocalized??sj,d=gp(e,c,r),u=Sj(s,e,c,l,d);return{type:"string",keyPath:za(j,o,t),nodeId:j,scopeId:A,controlPropKey:o,controlPropName:r.name,ancestorControlKeyPath:t,value:s,valueWordCount:Oj(s),hash:l,localizedValues:c,localizedValueStatuses:u,managedByPluginButUserEditable:r.userEditable??!1,warnings:d}}case"link":{if(!n||n.type!==a||!vs(n.value)||!VA.isOn("localizedLinks"))return;let s=n.value.url,l=HA(s),c=n?.valueLocalized??sj,d=gp(e,c,r),u=Sj(s,e,c,l,d);return{type:"link",keyPath:za(j,o,t),nodeId:j,scopeId:A,controlPropKey:o,controlPropName:r.name,ancestorControlKeyPath:t,value:s,valueWordCount:s?1:0,hash:l,localizedValues:c,localizedValueStatuses:u,managedByPluginButUserEditable:r.userEditable??!1,warnings:d,aiTranslationDisabled:!0}}case"slug":{if(!n)return;B(n.type==="string","expected slug controlType to be a string"),B(L(n.value),"expected slug value to be a string");let s=n.value,l=HA(s),c=n?.valueLocalized??sj,d=zy(e,c,i,"Each item in the Collection must have a unique slug"),u=Sj(s,e,c,l,d,Ip(c));return{type:"slug",keyPath:za(j,o,t),controlPropKey:o,controlPropName:r.name,ancestorControlKeyPath:t,nodeId:j,scopeId:A,value:s,valueWordCount:Oj(s),hash:l,localizedValues:c,localizedValueStatuses:u,managedByPluginButUserEditable:r.userEditable??!1,warnings:d}}case"richtext":{let s;if(Ws(r))return;if(n){if(n.type!==a||!L(n.value))return;s=n.value}else s=r.initialValue;let l=HA(s),c=n?.valueLocalized??sj,d=gp(e,c,r),u=Sj(s,e,c,l,d);return{type:"richtext",keyPath:za(j,o,t),nodeId:j,scopeId:A,controlPropKey:o,controlPropName:r.name,ancestorControlKeyPath:t,value:s,valueWordCount:Oj(s,!0),hash:l,localizedValues:c,localizedValueStatuses:u,managedByPluginButUserEditable:r.userEditable??!1,warnings:d}}case"image":{let s;if(n){if(n.type!==a||!L(n.value))return;s=n.value}else{if(!L(r.initialValue))return;s=r.initialValue}let l=HA(s),c=n?.valueLocalized??sj,d=n?.alt??Rl,u=HA(d),k=n?.altLocalized??sj,m=Sj(d,e,k,u,void 0,Rp(s,c,l));return{type:"image",keyPath:za(j,o,t),nodeId:j,scopeId:A,controlPropKey:o,controlPropName:r.name,ancestorControlKeyPath:t,value:d,valueWordCount:Oj(d),hash:u,localizedValues:k,localizedValueStatuses:m,supportsAlt:!0,image:s,imageHash:l,imageLocalizedValues:c,managedByPluginButUserEditable:r.userEditable??!1,supportsFocalPoint:!0,positionX:n?.positionX,positionY:n?.positionY}}case"enum":return;default:}}function fD(A,j,e,t,r){let o=j.id;function n(i,a,s,l=void 0){if(a&&a.type==="array"){if(s.type!=="array"||aj(a.value))return;for(let d of a.value){if(!Ac(d.type)||!xi(d)||!d.value)continue;let u=La(l,d.id);for(let k of s.itemVariables){let m=d.value[k.id];if(!m||!Ac(m.type))continue;let I=Wr(u,k.id);n(i,m,k,I)}}}if(!Ky(s))return;let c=mD(o,j.id,e,l,s,i,a,r);c&&t.push(c)}for(let i of A.variables){if(i.type==="divider")continue;let a=j.getControlProp(i.id);n(i.id,a,i)}}function ED(A,j,e,t,r,o){let n=Wa(A,e,t,zt,j.variables,void 0);if(n){n.group&&o.push(n.group);return}let i=[],a=yu(A,e);if(fD(j,e,t,i,r),i.length>0){for(let l of i)l.insetLevel=1;let s={type:"sourceGroup",groupType:"collectionItem",collectionName:j.name??"Unknown",collectionNodeId:j.id,supportsLocaleVisibility:!0,includedLocaleIds:a,name:_g(j,e)??"Unknown",nodeId:e.id,items:i};Xa(A,e,s,t,zt,j.variables,void 0),o.push(s)}}function $D(A,j,e,t){let r=e.name,o=HA(r),n=e.nameLocalized??sj,i=Sj(r,t,n,o);return{type:"enum",keyPath:`${A.id}_${j.id}_${e.id}`,nodeId:A.id,scopeId:A.id,variableId:j.id,enumCaseId:e.id,value:r,valueWordCount:Oj(r),hash:o,localizedValues:n,localizedValueStatuses:i,managedByPluginButUserEditable:!1}}function BD(A,j,e,t){let r=[],o=hD(e,j);for(let l of j.getUnsortedChildren())ED(A,j,l,e,o,r);let n=Wa(A,j,e,zt,Wt,r);if(n){n.group&&t.push(n.group);return}let i=j.variables.filter(Ky);if(i.length===0)return;let a=[];for(let l of i){let c=l.type;switch(c){case"enum":{if(Ws(l))break;for(let d of l.cases)a.push($D(j,l,d,e));break}case"string":case"richtext":case"image":case"link":case"slug":break;default:}}let s=a.length>0||r.length>0?{type:"sourceGroup",groupType:"collection",name:j.name??"Unknown",nodeId:j.id,supportsLocaleVisibility:!1,includedLocaleIds:void 0,items:a,groups:r}:void 0;Xa(A,j,s,e,zt,Wt,r),s&&t.push(s)}function hD(A,j){let e={};for(let r of A)e[r.id]=new Map;let t=j.variables.find(Qs);if(!t)return e;for(let r of j.getUnsortedChildren()){let o=r.getControlProp(t.id);if(o&&(B(o.type==="string","expect slug control type to be be of type string"),B(L(o.value),"expected slug control prop value to be string"),!!o.valueLocalized))for(let n in o.valueLocalized){let i=o.valueLocalized[n],a=e[n];if(!a||!i?.value)continue;let s=(a.get(i.value)??0)+1;a.set(i.value,s)}}return e}function gD(A,j,e){let t=A.getParent(e.id)?.children??[],r={};for(let o of j)r[o.id]=new Map;for(let o of t){if(!Vt(o))continue;let{segment:n,segmentLocalized:i}=o;for(let a of j){let l=Lm(a,i)?.value??n,c=r[a.id];if(!c)continue;let d=(c.get(l)??0)+1;c.set(l,d)}}return r}function ID(A,j,e){let t=Wa(A,A.root,j,zt,Wt,void 0);if(t){t.group&&e.push(t.group);return}let r=[];Uy(A,A.root,A.root,j,r);let o=r.length>0?{type:"sourceGroup",groupType:"settings",name:"Site Settings",nodeId:A.root.id,supportsLocaleVisibility:!1,includedLocaleIds:void 0,items:r}:void 0;Xa(A,A.root,o,j,zt,Wt,void 0),o&&e.push(o)}function RD(A,j,e,t){for(let r of j.children)BD(A,r,e,t)}function FD(A,j,e,t,r,o){if(e.dataIdentifier)return;let n=HA(e.segment),i=e.segmentLocalized??sj,a=zy(t,i,gD(A,r,e),"Sibling pages must have unique slugs");o.push({keyPath:e.id,type:"RouteSegmentNode",nodeId:e.id,scopeId:j.id,value:e.segment,valueWordCount:Oj(e.segment),hash:HA(e.segment),localizedValues:i,localizedValueStatuses:Sj(e.segment,t,i,n,a),managedByPluginButUserEditable:!1,warnings:a})}function yD(A,j,e,t){let r=Wa(A,j,e,zt,Wt,void 0);if(r){r.group&&t.push(r.group);return}let o=qf(e,{includeDrafts:!0}),n=[];for(let a of j.walk())Vt(a)&&FD(A,j,a,e,o,n);let i;n.length>0&&(i={type:"sourceGroup",name:"Page Path Segments",groupType:"routeSegment",nodeId:j.id,supportsLocaleVisibility:!1,includedLocaleIds:void 0,items:n},t.push(i)),Xa(A,j,i,e,zt,Wt,void 0)}function JmA(A,j,e,t){let r=[];if(!j||j.length===0)return r;ID(A,j,r);for(let o of A.root.children)FF(o)&&(B(o.isLoaded(),"Scope node must be fully loaded"),pD(A,o,j,e,r,t)),Rr(o)&&(B(o.isLoaded(),"Scope node must be fully loaded"),RD(A,o,j,r)),VA.isOn("localizedPagePaths")&&Ef(o)&&yD(A,o,j,r);return r}function UmA(A,j){return Br(A,j)}function QmA(A,j){return ot(A,j)}var Wy=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];var SD=/["&'<>`]/g,GD=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,bD=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,CD=/[|\\{}()[\]^$+*?.]/g,Xy=new WeakMap;function Yy(A,j){if(A=A.replace(j.subset?vD(j.subset):SD,t),j.subset||j.escapeOnly)return A;return A.replace(GD,e).replace(bD,t);function e(r,o,n){return j.format((r.charCodeAt(0)-55296)*1024+r.charCodeAt(1)-56320+65536,n.charCodeAt(o+2),j)}function t(r,o,n){return j.format(r.charCodeAt(0),n.charCodeAt(o+1),j)}}function vD(A){let j=Xy.get(A);return j||(j=TD(A),Xy.set(A,j)),j}function TD(A){let j=[],e=-1;for(;++e<A.length;)j.push(A[e].replace(CD,"\\$&"));return new RegExp("(?:"+j.join("|")+")","g")}var xD=/[\dA-Fa-f]/;function Zy(A,j,e){let t="&#x"+A.toString(16).toUpperCase();return e&&j&&!xD.test(String.fromCharCode(j))?t:t+";"}var PD=/\d/;function AS(A,j,e){let t="&#"+String(A);return e&&j&&!PD.test(String.fromCharCode(j))?t:t+";"}var jS=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"];var jc={nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",times:"\xD7",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",divide:"\xF7",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",fnof:"\u0192",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",bull:"\u2022",hellip:"\u2026",prime:"\u2032",Prime:"\u2033",oline:"\u203E",frasl:"\u2044",weierp:"\u2118",image:"\u2111",real:"\u211C",trade:"\u2122",alefsym:"\u2135",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lArr:"\u21D0",uArr:"\u21D1",rArr:"\u21D2",dArr:"\u21D3",hArr:"\u21D4",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",lang:"\u2329",rang:"\u232A",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666",quot:'"',amp:"&",lt:"<",gt:">",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",permil:"\u2030",lsaquo:"\u2039",rsaquo:"\u203A",euro:"\u20AC"};var eS=["cent","copy","divide","gt","lt","not","para","times"];var tS={}.hasOwnProperty,Fp={},ec;for(ec in jc)tS.call(jc,ec)&&(Fp[jc[ec]]=ec);var MD=/[^\dA-Za-z]/;function rS(A,j,e,t){let r=String.fromCharCode(A);if(tS.call(Fp,r)){let o=Fp[r],n="&"+o;return e&&jS.includes(o)&&!eS.includes(o)&&(!t||j&&j!==61&&MD.test(String.fromCharCode(j)))?n:n+";"}return""}function oS(A,j,e){let t=Zy(A,j,e.omitOptionalSemicolons),r;if((e.useNamedReferences||e.useShortestReferences)&&(r=rS(A,j,e.omitOptionalSemicolons,e.attribute)),(e.useShortestReferences||!r)&&e.useShortestReferences){let o=AS(A,j,e.omitOptionalSemicolons);o.length<t.length&&(t=o)}return r&&(!e.useShortestReferences||r.length<t.length)?r:t}function cr(A,j){return Yy(A,Object.assign({format:oS},j))}var DD=/^>|^->|<!--|-->|--!>|<!-$/g,_D=[">"],ND=["<",">"];function nS(A,j,e,t){return t.settings.bogusComments?"<?"+cr(A.value,Object.assign({},t.settings.characterReferences,{subset:_D}))+">":"<!--"+A.value.replace(DD,r)+"-->";function r(o){return cr(o,Object.assign({},t.settings.characterReferences,{subset:ND}))}}function iS(A,j,e,t){return"<!"+(t.settings.upperDoctype?"DOCTYPE":"doctype")+(t.settings.tightDoctype?"":" ")+"html>"}function ai(A,j){let e=String(A);if(typeof j!="string")throw new TypeError("Expected character");let t=0,r=e.indexOf(j);for(;r!==-1;)t++,r=e.indexOf(j,r+j.length);return t}var OD=/[ \t\n\f\r]/g;function zo(A){return typeof A=="object"?A.type==="text"?aS(A.value):!1:aS(A)}function aS(A){return A.replace(OD,"")===""}var vj=sS(1),yp=sS(-1),wD=[];function sS(A){return j;function j(e,t,r){let o=e?e.children:wD,n=(t||0)+A,i=o[n];if(!r)for(;i&&zo(i);)n+=A,i=o[n];return i}}var LD={}.hasOwnProperty;function tc(A){return j;function j(e,t,r){return LD.call(A,e.tagName)&&A[e.tagName](e,t,r)}}var Ya=tc({body:VD,caption:Sp,colgroup:Sp,dd:UD,dt:JD,head:Sp,html:qD,li:HD,optgroup:QD,option:zD,p:KD,rp:lS,rt:lS,tbody:XD,td:cS,tfoot:YD,th:cS,thead:WD,tr:ZD});function Sp(A,j,e){let t=vj(e,j,!0);return!t||t.type!=="comment"&&!(t.type==="text"&&zo(t.value.charAt(0)))}function qD(A,j,e){let t=vj(e,j);return!t||t.type!=="comment"}function VD(A,j,e){let t=vj(e,j);return!t||t.type!=="comment"}function KD(A,j,e){let t=vj(e,j);return t?t.type==="element"&&(t.tagName==="address"||t.tagName==="article"||t.tagName==="aside"||t.tagName==="blockquote"||t.tagName==="details"||t.tagName==="div"||t.tagName==="dl"||t.tagName==="fieldset"||t.tagName==="figcaption"||t.tagName==="figure"||t.tagName==="footer"||t.tagName==="form"||t.tagName==="h1"||t.tagName==="h2"||t.tagName==="h3"||t.tagName==="h4"||t.tagName==="h5"||t.tagName==="h6"||t.tagName==="header"||t.tagName==="hgroup"||t.tagName==="hr"||t.tagName==="main"||t.tagName==="menu"||t.tagName==="nav"||t.tagName==="ol"||t.tagName==="p"||t.tagName==="pre"||t.tagName==="section"||t.tagName==="table"||t.tagName==="ul"):!e||!(e.type==="element"&&(e.tagName==="a"||e.tagName==="audio"||e.tagName==="del"||e.tagName==="ins"||e.tagName==="map"||e.tagName==="noscript"||e.tagName==="video"))}function HD(A,j,e){let t=vj(e,j);return!t||t.type==="element"&&t.tagName==="li"}function JD(A,j,e){let t=vj(e,j);return!!(t&&t.type==="element"&&(t.tagName==="dt"||t.tagName==="dd"))}function UD(A,j,e){let t=vj(e,j);return!t||t.type==="element"&&(t.tagName==="dt"||t.tagName==="dd")}function lS(A,j,e){let t=vj(e,j);return!t||t.type==="element"&&(t.tagName==="rp"||t.tagName==="rt")}function QD(A,j,e){let t=vj(e,j);return!t||t.type==="element"&&t.tagName==="optgroup"}function zD(A,j,e){let t=vj(e,j);return!t||t.type==="element"&&(t.tagName==="option"||t.tagName==="optgroup")}function WD(A,j,e){let t=vj(e,j);return!!(t&&t.type==="element"&&(t.tagName==="tbody"||t.tagName==="tfoot"))}function XD(A,j,e){let t=vj(e,j);return!t||t.type==="element"&&(t.tagName==="tbody"||t.tagName==="tfoot")}function YD(A,j,e){return!vj(e,j)}function ZD(A,j,e){let t=vj(e,j);return!t||t.type==="element"&&t.tagName==="tr"}function cS(A,j,e){let t=vj(e,j);return!t||t.type==="element"&&(t.tagName==="td"||t.tagName==="th")}var dS=tc({body:e_,colgroup:t_,head:j_,html:A_,tbody:r_});function A_(A){let j=vj(A,-1);return!j||j.type!=="comment"}function j_(A){let j=new Set;for(let t of A.children)if(t.type==="element"&&(t.tagName==="base"||t.tagName==="title")){if(j.has(t.tagName))return!1;j.add(t.tagName)}let e=A.children[0];return!e||e.type==="element"}function e_(A){let j=vj(A,-1,!0);return!j||j.type!=="comment"&&!(j.type==="text"&&zo(j.value.charAt(0)))&&!(j.type==="element"&&(j.tagName==="meta"||j.tagName==="link"||j.tagName==="script"||j.tagName==="style"||j.tagName==="template"))}function t_(A,j,e){let t=yp(e,j),r=vj(A,-1,!0);return e&&t&&t.type==="element"&&t.tagName==="colgroup"&&Ya(t,e.children.indexOf(t),e)?!1:!!(r&&r.type==="element"&&r.tagName==="col")}function r_(A,j,e){let t=yp(e,j),r=vj(A,-1);return e&&t&&t.type==="element"&&(t.tagName==="thead"||t.tagName==="tbody")&&Ya(t,e.children.indexOf(t),e)?!1:!!(r&&r.type==="element"&&r.tagName==="tr")}var rc={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function uS(A,j,e,t){let r=t.schema,o=r.space==="svg"?!1:t.settings.omitOptionalTags,n=r.space==="svg"?t.settings.closeEmptyElements:t.settings.voids.includes(A.tagName.toLowerCase()),i=[],a;r.space==="html"&&A.tagName==="svg"&&(t.schema=Yl);let s=o_(t,A.properties),l=t.all(r.space==="html"&&A.tagName==="template"?A.content:A);return t.schema=r,l&&(n=!1),(s||!o||!dS(A,j,e))&&(i.push("<",A.tagName,s?" "+s:""),n&&(r.space==="svg"||t.settings.closeSelfClosing)&&(a=s.charAt(s.length-1),(!t.settings.tightSelfClosing||a==="/"||a&&a!=='"'&&a!=="'")&&i.push(" "),i.push("/")),i.push(">")),i.push(l),!n&&(!o||!Ya(A,j,e))&&i.push("</"+A.tagName+">"),i.join("")}function o_(A,j){let e=[],t=-1,r;if(j){for(r in j)if(j[r]!==null&&j[r]!==void 0){let o=n_(A,r,j[r]);o&&e.push(o)}}for(;++t<e.length;){let o=A.settings.tightAttributes?e[t].charAt(e[t].length-1):void 0;t!==e.length-1&&o!=='"'&&o!=="'"&&(e[t]+=" ")}return e.join("")}function n_(A,j,e){let t=Lu(A.schema,j),r=A.settings.allowParseErrors&&A.schema.space==="html"?0:1,o=A.settings.allowDangerousCharacters?0:1,n=A.quote,i;if(t.overloadedBoolean&&(e===t.attribute||e==="")?e=!0:(t.boolean||t.overloadedBoolean)&&(typeof e!="string"||e===t.attribute||e==="")&&(e=!!e),e==null||e===!1||typeof e=="number"&&Number.isNaN(e))return"";let a=cr(t.attribute,Object.assign({},A.settings.characterReferences,{subset:rc.name[r][o]}));return e===!0||(e=Array.isArray(e)?(t.commaSeparated?Vh:Kh)(e,{padLeft:!A.settings.tightCommaSeparatedLists}):String(e),A.settings.collapseEmptyAttributes&&!e)?a:(A.settings.preferUnquoted&&(i=cr(e,Object.assign({},A.settings.characterReferences,{attribute:!0,subset:rc.unquoted[r][o]}))),i!==e&&(A.settings.quoteSmart&&ai(e,n)>ai(e,A.alternative)&&(n=A.alternative),i=n+cr(e,Object.assign({},A.settings.characterReferences,{subset:(n==="'"?rc.single:rc.double)[r][o],attribute:!0}))+n),a+(i&&"="+i))}var i_=["<","&"];function oc(A,j,e,t){return e&&e.type==="element"&&(e.tagName==="script"||e.tagName==="style")?A.value:cr(A.value,Object.assign({},t.settings.characterReferences,{subset:i_}))}function pS(A,j,e,t){return t.settings.allowDangerousHtml?A.value:oc(A,j,e,t)}function kS(A,j,e,t){return t.all(A)}var mS=tl("type",{invalid:a_,unknown:s_,handlers:{comment:nS,doctype:iS,element:uS,raw:pS,root:kS,text:oc}});function a_(A){throw new Error("Expected node, not `"+A+"`")}function s_(A){let j=A;throw new Error("Cannot compile unknown node `"+j.type+"`")}var l_={},c_={},d_=[];function Gp(A,j){let e=j||l_,t=e.quote||'"',r=t==='"'?"'":'"';if(t!=='"'&&t!=="'")throw new Error("Invalid quote `"+t+"`, expected `'` or `\"`");return{one:u_,all:p_,settings:{omitOptionalTags:e.omitOptionalTags||!1,allowParseErrors:e.allowParseErrors||!1,allowDangerousCharacters:e.allowDangerousCharacters||!1,quoteSmart:e.quoteSmart||!1,preferUnquoted:e.preferUnquoted||!1,tightAttributes:e.tightAttributes||!1,upperDoctype:e.upperDoctype||!1,tightDoctype:e.tightDoctype||!1,bogusComments:e.bogusComments||!1,tightCommaSeparatedLists:e.tightCommaSeparatedLists||!1,tightSelfClosing:e.tightSelfClosing||!1,collapseEmptyAttributes:e.collapseEmptyAttributes||!1,allowDangerousHtml:e.allowDangerousHtml||!1,voids:e.voids||Wy,characterReferences:e.characterReferences||c_,closeSelfClosing:e.closeSelfClosing||!1,closeEmptyElements:e.closeEmptyElements||!1},schema:e.space==="svg"?Yl:qh,quote:t,alternative:r}.one(Array.isArray(A)?{type:"root",children:A}:A,void 0,void 0)}function u_(A,j,e){return mS(A,j,e,this)}function p_(A){let j=[],e=A&&A.children||d_,t=-1;for(;++t<e.length;)j[t]=this.one(e[t],t,A);return j.join("")}function nc(A){let j=this,e={...j.data("settings"),...A};j.compiler=t;function t(r){return Gp(r,e)}}function bp(A){if(typeof A!="string")throw new TypeError("Expected a string");return A.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Za(A,j,e){let r=hE((e||{}).ignore||[]),o=k_(j),n=-1;for(;++n<o.length;)IE(A,"text",i);function i(s,l){let c=-1,d;for(;++c<l.length;){let u=l[c],k=d?d.children:void 0;if(r(u,k?k.indexOf(u):void 0,d))return;d=u}if(d)return a(s,l)}function a(s,l){let c=l[l.length-1],d=o[n][0],u=o[n][1],k=0,I=c.children.indexOf(s),$=!1,F=[];d.lastIndex=0;let S=d.exec(s.value);for(;S;){let P=S.index,x={index:S.index,input:S.input,stack:[...l,s]},C=u(...S,x);if(typeof C=="string"&&(C=C.length>0?{type:"text",value:C}:void 0),C===!1?d.lastIndex=P+1:(k!==P&&F.push({type:"text",value:s.value.slice(k,P)}),Array.isArray(C)?F.push(...C):C&&F.push(C),k=P+S[0].length,$=!0),!d.global)break;S=d.exec(s.value)}return $?(k<s.value.length&&F.push({type:"text",value:s.value.slice(k)}),c.children.splice(I,1,...F)):F=[s],I+F.length}}function k_(A){let j=[];if(!Array.isArray(A))throw new TypeError("Expected find and replace tuple or list of tuples");let e=!A[0]||Array.isArray(A[0])?A:[A],t=-1;for(;++t<e.length;){let r=e[t];j.push([m_(r[0]),f_(r[1])])}return j}function m_(A){return typeof A=="string"?new RegExp(bp(A),"g"):A}function f_(A){return typeof A=="function"?A:function(){return A}}function Cp(A){Za(A,[/\r?\n|\r/g,E_])}function E_(){return{type:"break"}}function ic(){return function(A){Cp(A)}}var Vj=jo(/[A-Za-z]/),Gj=jo(/[\dA-Za-z]/),fS=jo(/[#-'*+\--9=?A-Z^-~]/);function Wo(A){return A!==null&&(A<32||A===127)}var As=jo(/\d/),ES=jo(/[\dA-Fa-f]/),$S=jo(/[!-/:-@[-`{-~]/);function eA(A){return A!==null&&A<-2}function vA(A){return A!==null&&(A<0||A===32)}function pA(A){return A===-2||A===-1||A===32}var Xo=jo(new RegExp("\\p{P}|\\p{S}","u")),Tt=jo(/\s/);function jo(A){return j;function j(e){return e!==null&&e>-1&&A.test(String.fromCharCode(e))}}var vp="phrasing",Tp=["autolink","link","image","label"];function Pp(){return{transforms:[R_],enter:{literalAutolink:$_,literalAutolinkEmail:xp,literalAutolinkHttp:xp,literalAutolinkWww:xp},exit:{literalAutolink:I_,literalAutolinkEmail:g_,literalAutolinkHttp:B_,literalAutolinkWww:h_}}}function Mp(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:vp,notInConstruct:Tp},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:vp,notInConstruct:Tp},{character:":",before:"[ps]",after:"\\/",inConstruct:vp,notInConstruct:Tp}]}}function $_(A){this.enter({type:"link",title:null,url:"",children:[]},A)}function xp(A){this.config.enter.autolinkProtocol.call(this,A)}function B_(A){this.config.exit.autolinkProtocol.call(this,A)}function h_(A){this.config.exit.data.call(this,A);let j=this.stack[this.stack.length-1];j.type,j.url="http://"+this.sliceSerialize(A)}function g_(A){this.config.exit.autolinkEmail.call(this,A)}function I_(A){this.exit(A)}function R_(A){Za(A,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,F_],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),y_]],{ignore:["link","linkReference"]})}function F_(A,j,e,t,r){let o="";if(!BS(r)||(/^w/i.test(j)&&(e=j+e,j="",o="http://"),!S_(e)))return!1;let n=G_(e+t);if(!n[0])return!1;let i={type:"link",title:null,url:o+j+n[0],children:[{type:"text",value:j+n[0]}]};return n[1]?[i,{type:"text",value:n[1]}]:i}function y_(A,j,e,t){return!BS(t,!0)||/[-\d_]$/.test(e)?!1:{type:"link",title:null,url:"mailto:"+j+"@"+e,children:[{type:"text",value:j+"@"+e}]}}function S_(A){let j=A.split(".");return!(j.length<2||j[j.length-1]&&(/_/.test(j[j.length-1])||!/[a-zA-Z\d]/.test(j[j.length-1]))||j[j.length-2]&&(/_/.test(j[j.length-2])||!/[a-zA-Z\d]/.test(j[j.length-2])))}function G_(A){let j=/[!"&'),.:;<>?\]}]+$/.exec(A);if(!j)return[A,void 0];A=A.slice(0,j.index);let e=j[0],t=e.indexOf(")"),r=ai(A,"("),o=ai(A,")");for(;t!==-1&&r>o;)A+=e.slice(0,t+1),e=e.slice(t+1),t=e.indexOf(")"),o++;return[A,e]}function BS(A,j){let e=A.input.charCodeAt(A.index-1);return(A.index===0||Tt(e)||Xo(e))&&(!j||e!==47)}function ce(A){return A.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}hS.peek=__;function b_(){this.buffer()}function C_(A){this.enter({type:"footnoteReference",identifier:"",label:""},A)}function v_(){this.buffer()}function T_(A){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},A)}function x_(A){let j=this.resume(),e=this.stack[this.stack.length-1];e.type,e.identifier=ce(this.sliceSerialize(A)).toLowerCase(),e.label=j}function P_(A){this.exit(A)}function M_(A){let j=this.resume(),e=this.stack[this.stack.length-1];e.type,e.identifier=ce(this.sliceSerialize(A)).toLowerCase(),e.label=j}function D_(A){this.exit(A)}function __(){return"["}function hS(A,j,e,t){let r=e.createTracker(t),o=r.move("[^"),n=e.enter("footnoteReference"),i=e.enter("reference");return o+=r.move(e.safe(e.associationId(A),{after:"]",before:o})),i(),n(),o+=r.move("]"),o}function Dp(){return{enter:{gfmFootnoteCallString:b_,gfmFootnoteCall:C_,gfmFootnoteDefinitionLabelString:v_,gfmFootnoteDefinition:T_},exit:{gfmFootnoteCallString:x_,gfmFootnoteCall:P_,gfmFootnoteDefinitionLabelString:M_,gfmFootnoteDefinition:D_}}}function _p(A){let j=!1;return A&&A.firstLineBlank&&(j=!0),{handlers:{footnoteDefinition:e,footnoteReference:hS},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function e(t,r,o,n){let i=o.createTracker(n),a=i.move("[^"),s=o.enter("footnoteDefinition"),l=o.enter("label");return a+=i.move(o.safe(o.associationId(t),{before:a,after:"]"})),l(),a+=i.move("]:"),t.children&&t.children.length>0&&(i.shift(4),a+=i.move((j?`
`:" ")+o.indentLines(o.containerFlow(t,i.current()),j?gS:N_))),s(),a}}function N_(A,j,e){return j===0?A:gS(A,j,e)}function gS(A,j,e){return(e?"":"    ")+A}var O_=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];IS.peek=q_;function Np(){return{canContainEols:["delete"],enter:{strikethrough:w_},exit:{strikethrough:L_}}}function Op(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:O_}],handlers:{delete:IS}}}function w_(A){this.enter({type:"delete",children:[]},A)}function L_(A){this.exit(A)}function IS(A,j,e,t){let r=e.createTracker(t),o=e.enter("strikethrough"),n=r.move("~~");return n+=e.containerPhrasing(A,{...r.current(),before:n,after:"~"}),n+=r.move("~~"),o(),n}function q_(){return"~"}function V_(A){return A.length}function FS(A,j){let e=j||{},t=(e.align||[]).concat(),r=e.stringLength||V_,o=[],n=[],i=[],a=[],s=0,l=-1;for(;++l<A.length;){let m=[],I=[],$=-1;for(A[l].length>s&&(s=A[l].length);++$<A[l].length;){let F=K_(A[l][$]);if(e.alignDelimiters!==!1){let S=r(F);I[$]=S,(a[$]===void 0||S>a[$])&&(a[$]=S)}m.push(F)}n[l]=m,i[l]=I}let c=-1;if(typeof t=="object"&&"length"in t)for(;++c<s;)o[c]=RS(t[c]);else{let m=RS(t);for(;++c<s;)o[c]=m}c=-1;let d=[],u=[];for(;++c<s;){let m=o[c],I="",$="";m===99?(I=":",$=":"):m===108?I=":":m===114&&($=":");let F=e.alignDelimiters===!1?1:Math.max(1,a[c]-I.length-$.length),S=I+"-".repeat(F)+$;e.alignDelimiters!==!1&&(F=I.length+F+$.length,F>a[c]&&(a[c]=F),u[c]=F),d[c]=S}n.splice(1,0,d),i.splice(1,0,u),l=-1;let k=[];for(;++l<n.length;){let m=n[l],I=i[l];c=-1;let $=[];for(;++c<s;){let F=m[c]||"",S="",P="";if(e.alignDelimiters!==!1){let x=a[c]-(I[c]||0),C=o[c];C===114?S=" ".repeat(x):C===99?x%2?(S=" ".repeat(x/2+.5),P=" ".repeat(x/2-.5)):(S=" ".repeat(x/2),P=S):P=" ".repeat(x)}e.delimiterStart!==!1&&!c&&$.push("|"),e.padding!==!1&&!(e.alignDelimiters===!1&&F==="")&&(e.delimiterStart!==!1||c)&&$.push(" "),e.alignDelimiters!==!1&&$.push(S),$.push(F),e.alignDelimiters!==!1&&$.push(P),e.padding!==!1&&$.push(" "),(e.delimiterEnd!==!1||c!==s-1)&&$.push("|")}k.push(e.delimiterEnd===!1?$.join("").replace(/ +$/,""):$.join(""))}return k.join(`
`)}function K_(A){return A==null?"":String(A)}function RS(A){let j=typeof A=="string"?A.codePointAt(0):0;return j===67||j===99?99:j===76||j===108?108:j===82||j===114?114:0}var H_={}.hasOwnProperty;function wp(A,j){let e=-1,t;if(j.extensions)for(;++e<j.extensions.length;)wp(A,j.extensions[e]);for(t in j)if(H_.call(j,t))switch(t){case"extensions":break;case"unsafe":{yS(A[t],j[t]);break}case"join":{yS(A[t],j[t]);break}case"handlers":{J_(A[t],j[t]);break}default:A.options[t]=j[t]}return A}function yS(A,j){j&&A.push(...j)}function J_(A,j){j&&Object.assign(A,j)}function SS(A,j,e,t){let r=e.enter("blockquote"),o=e.createTracker(t);o.move("> "),o.shift(2);let n=e.indentLines(e.containerFlow(A,o.current()),U_);return r(),n}function U_(A,j,e){return">"+(e?"":" ")+A}function ac(A,j){return GS(A,j.inConstruct,!0)&&!GS(A,j.notInConstruct,!1)}function GS(A,j,e){if(typeof j=="string"&&(j=[j]),!j||j.length===0)return e;let t=-1;for(;++t<j.length;)if(A.includes(j[t]))return!0;return!1}function Lp(A,j,e,t){let r=-1;for(;++r<e.unsafe.length;)if(e.unsafe[r].character===`
`&&ac(e.stack,e.unsafe[r]))return/[ \t]/.test(t.before)?"":" ";return`\\
`}function bS(A,j){let e=String(A),t=e.indexOf(j),r=t,o=0,n=0;if(typeof j!="string")throw new TypeError("Expected substring");for(;t!==-1;)t===r?++o>n&&(n=o):o=1,r=t+j.length,t=e.indexOf(j,r);return n}function js(A,j){return!!(j.options.fences===!1&&A.value&&!A.lang&&/[^ \r\n]/.test(A.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(A.value))}function CS(A){let j=A.options.fence||"`";if(j!=="`"&&j!=="~")throw new Error("Cannot serialize code with `"+j+"` for `options.fence`, expected `` ` `` or `~`");return j}function vS(A,j,e,t){let r=CS(e),o=A.value||"",n=r==="`"?"GraveAccent":"Tilde";if(js(A,e)){let c=e.enter("codeIndented"),d=e.indentLines(o,Q_);return c(),d}let i=e.createTracker(t),a=r.repeat(Math.max(bS(o,r)+1,3)),s=e.enter("codeFenced"),l=i.move(a);if(A.lang){let c=e.enter(`codeFencedLang${n}`);l+=i.move(e.safe(A.lang,{before:l,after:" ",encode:["`"],...i.current()})),c()}if(A.lang&&A.meta){let c=e.enter(`codeFencedMeta${n}`);l+=i.move(" "),l+=i.move(e.safe(A.meta,{before:l,after:`
`,encode:["`"],...i.current()})),c()}return l+=i.move(`
`),o&&(l+=i.move(o+`
`)),l+=i.move(a),s(),l}function Q_(A,j,e){return(e?"":"    ")+A}function si(A){let j=A.options.quote||'"';if(j!=='"'&&j!=="'")throw new Error("Cannot serialize title with `"+j+"` for `options.quote`, expected `\"`, or `'`");return j}function TS(A,j,e,t){let r=si(e),o=r==='"'?"Quote":"Apostrophe",n=e.enter("definition"),i=e.enter("label"),a=e.createTracker(t),s=a.move("[");return s+=a.move(e.safe(e.associationId(A),{before:s,after:"]",...a.current()})),s+=a.move("]: "),i(),!A.url||/[\0- \u007F]/.test(A.url)?(i=e.enter("destinationLiteral"),s+=a.move("<"),s+=a.move(e.safe(A.url,{before:s,after:">",...a.current()})),s+=a.move(">")):(i=e.enter("destinationRaw"),s+=a.move(e.safe(A.url,{before:s,after:A.title?" ":`
`,...a.current()}))),i(),A.title&&(i=e.enter(`title${o}`),s+=a.move(" "+r),s+=a.move(e.safe(A.title,{before:s,after:r,...a.current()})),s+=a.move(r),i()),n(),s}function xS(A){let j=A.options.emphasis||"*";if(j!=="*"&&j!=="_")throw new Error("Cannot serialize emphasis with `"+j+"` for `options.emphasis`, expected `*`, or `_`");return j}qp.peek=z_;function qp(A,j,e,t){let r=xS(e),o=e.enter("emphasis"),n=e.createTracker(t),i=n.move(r);return i+=n.move(e.containerPhrasing(A,{before:i,after:r,...n.current()})),i+=n.move(r),o(),i}function z_(A,j,e){return e.options.emphasis||"*"}var W_={};function Yo(A,j){let e=j||W_,t=typeof e.includeImageAlt=="boolean"?e.includeImageAlt:!0,r=typeof e.includeHtml=="boolean"?e.includeHtml:!0;return MS(A,t,r)}function MS(A,j,e){if(X_(A)){if("value"in A)return A.type==="html"&&!e?"":A.value;if(j&&"alt"in A&&A.alt)return A.alt;if("children"in A)return PS(A.children,j,e)}return Array.isArray(A)?PS(A,j,e):""}function PS(A,j,e){let t=[],r=-1;for(;++r<A.length;)t[r]=MS(A[r],j,e);return t.join("")}function X_(A){return!!(A&&typeof A=="object")}function sc(A,j){let e=!1;return el(A,function(t){if("value"in t&&/\r?\n|\r/.test(t.value)||t.type==="break")return e=!0,gE}),!!((!A.depth||A.depth<3)&&Yo(A)&&(j.options.setext||e))}function DS(A,j,e,t){let r=Math.max(Math.min(6,A.depth||1),1),o=e.createTracker(t);if(sc(A,e)){let l=e.enter("headingSetext"),c=e.enter("phrasing"),d=e.containerPhrasing(A,{...o.current(),before:`
`,after:`
`});return c(),l(),d+`
`+(r===1?"=":"-").repeat(d.length-(Math.max(d.lastIndexOf("\r"),d.lastIndexOf(`
`))+1))}let n="#".repeat(r),i=e.enter("headingAtx"),a=e.enter("phrasing");o.move(n+" ");let s=e.containerPhrasing(A,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(s)&&(s="&#x"+s.charCodeAt(0).toString(16).toUpperCase()+";"+s.slice(1)),s=s?n+" "+s:n,e.options.closeAtx&&(s+=" "+n),a(),i(),s}Vp.peek=Y_;function Vp(A){return A.value||""}function Y_(){return"<"}Kp.peek=Z_;function Kp(A,j,e,t){let r=si(e),o=r==='"'?"Quote":"Apostrophe",n=e.enter("image"),i=e.enter("label"),a=e.createTracker(t),s=a.move("![");return s+=a.move(e.safe(A.alt,{before:s,after:"]",...a.current()})),s+=a.move("]("),i(),!A.url&&A.title||/[\0- \u007F]/.test(A.url)?(i=e.enter("destinationLiteral"),s+=a.move("<"),s+=a.move(e.safe(A.url,{before:s,after:">",...a.current()})),s+=a.move(">")):(i=e.enter("destinationRaw"),s+=a.move(e.safe(A.url,{before:s,after:A.title?" ":")",...a.current()}))),i(),A.title&&(i=e.enter(`title${o}`),s+=a.move(" "+r),s+=a.move(e.safe(A.title,{before:s,after:r,...a.current()})),s+=a.move(r),i()),s+=a.move(")"),n(),s}function Z_(){return"!"}Hp.peek=AN;function Hp(A,j,e,t){let r=A.referenceType,o=e.enter("imageReference"),n=e.enter("label"),i=e.createTracker(t),a=i.move("!["),s=e.safe(A.alt,{before:a,after:"]",...i.current()});a+=i.move(s+"]["),n();let l=e.stack;e.stack=[],n=e.enter("reference");let c=e.safe(e.associationId(A),{before:a,after:"]",...i.current()});return n(),e.stack=l,o(),r==="full"||!s||s!==c?a+=i.move(c+"]"):r==="shortcut"?a=a.slice(0,-1):a+=i.move("]"),a}function AN(){return"!"}Jp.peek=jN;function Jp(A,j,e){let t=A.value||"",r="`",o=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(t);)r+="`";for(/[^ \r\n]/.test(t)&&(/^[ \r\n]/.test(t)&&/[ \r\n]$/.test(t)||/^`|`$/.test(t))&&(t=" "+t+" ");++o<e.unsafe.length;){let n=e.unsafe[o],i=e.compilePattern(n),a;if(n.atBreak)for(;a=i.exec(t);){let s=a.index;t.charCodeAt(s)===10&&t.charCodeAt(s-1)===13&&s--,t=t.slice(0,s)+" "+t.slice(a.index+1)}}return r+t+r}function jN(){return"`"}function Up(A,j){let e=Yo(A);return!!(!j.options.resourceLink&&A.url&&!A.title&&A.children&&A.children.length===1&&A.children[0].type==="text"&&(e===A.url||"mailto:"+e===A.url)&&/^[a-z][a-z+.-]+:/i.test(A.url)&&!/[\0- <>\u007F]/.test(A.url))}Qp.peek=eN;function Qp(A,j,e,t){let r=si(e),o=r==='"'?"Quote":"Apostrophe",n=e.createTracker(t),i,a;if(Up(A,e)){let l=e.stack;e.stack=[],i=e.enter("autolink");let c=n.move("<");return c+=n.move(e.containerPhrasing(A,{before:c,after:">",...n.current()})),c+=n.move(">"),i(),e.stack=l,c}i=e.enter("link"),a=e.enter("label");let s=n.move("[");return s+=n.move(e.containerPhrasing(A,{before:s,after:"](",...n.current()})),s+=n.move("]("),a(),!A.url&&A.title||/[\0- \u007F]/.test(A.url)?(a=e.enter("destinationLiteral"),s+=n.move("<"),s+=n.move(e.safe(A.url,{before:s,after:">",...n.current()})),s+=n.move(">")):(a=e.enter("destinationRaw"),s+=n.move(e.safe(A.url,{before:s,after:A.title?" ":")",...n.current()}))),a(),A.title&&(a=e.enter(`title${o}`),s+=n.move(" "+r),s+=n.move(e.safe(A.title,{before:s,after:r,...n.current()})),s+=n.move(r),a()),s+=n.move(")"),i(),s}function eN(A,j,e){return Up(A,e)?"<":"["}zp.peek=tN;function zp(A,j,e,t){let r=A.referenceType,o=e.enter("linkReference"),n=e.enter("label"),i=e.createTracker(t),a=i.move("["),s=e.containerPhrasing(A,{before:a,after:"]",...i.current()});a+=i.move(s+"]["),n();let l=e.stack;e.stack=[],n=e.enter("reference");let c=e.safe(e.associationId(A),{before:a,after:"]",...i.current()});return n(),e.stack=l,o(),r==="full"||!s||s!==c?a+=i.move(c+"]"):r==="shortcut"?a=a.slice(0,-1):a+=i.move("]"),a}function tN(){return"["}function li(A){let j=A.options.bullet||"*";if(j!=="*"&&j!=="+"&&j!=="-")throw new Error("Cannot serialize items with `"+j+"` for `options.bullet`, expected `*`, `+`, or `-`");return j}function _S(A){let j=li(A),e=A.options.bulletOther;if(!e)return j==="*"?"-":"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(e===j)throw new Error("Expected `bullet` (`"+j+"`) and `bulletOther` (`"+e+"`) to be different");return e}function NS(A){let j=A.options.bulletOrdered||".";if(j!=="."&&j!==")")throw new Error("Cannot serialize items with `"+j+"` for `options.bulletOrdered`, expected `.` or `)`");return j}function lc(A){let j=A.options.rule||"*";if(j!=="*"&&j!=="-"&&j!=="_")throw new Error("Cannot serialize rules with `"+j+"` for `options.rule`, expected `*`, `-`, or `_`");return j}function OS(A,j,e,t){let r=e.enter("list"),o=e.bulletCurrent,n=A.ordered?NS(e):li(e),i=A.ordered?n==="."?")":".":_S(e),a=j&&e.bulletLastUsed?n===e.bulletLastUsed:!1;if(!A.ordered){let l=A.children?A.children[0]:void 0;if((n==="*"||n==="-")&&l&&(!l.children||!l.children[0])&&e.stack[e.stack.length-1]==="list"&&e.stack[e.stack.length-2]==="listItem"&&e.stack[e.stack.length-3]==="list"&&e.stack[e.stack.length-4]==="listItem"&&e.indexStack[e.indexStack.length-1]===0&&e.indexStack[e.indexStack.length-2]===0&&e.indexStack[e.indexStack.length-3]===0&&(a=!0),lc(e)===n&&l){let c=-1;for(;++c<A.children.length;){let d=A.children[c];if(d&&d.type==="listItem"&&d.children&&d.children[0]&&d.children[0].type==="thematicBreak"){a=!0;break}}}}a&&(n=i),e.bulletCurrent=n;let s=e.containerFlow(A,t);return e.bulletLastUsed=n,e.bulletCurrent=o,r(),s}function wS(A){let j=A.options.listItemIndent||"one";if(j!=="tab"&&j!=="one"&&j!=="mixed")throw new Error("Cannot serialize items with `"+j+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return j}function LS(A,j,e,t){let r=wS(e),o=e.bulletCurrent||li(e);j&&j.type==="list"&&j.ordered&&(o=(typeof j.start=="number"&&j.start>-1?j.start:1)+(e.options.incrementListMarker===!1?0:j.children.indexOf(A))+o);let n=o.length+1;(r==="tab"||r==="mixed"&&(j&&j.type==="list"&&j.spread||A.spread))&&(n=Math.ceil(n/4)*4);let i=e.createTracker(t);i.move(o+" ".repeat(n-o.length)),i.shift(n);let a=e.enter("listItem"),s=e.indentLines(e.containerFlow(A,i.current()),l);return a(),s;function l(c,d,u){return d?(u?"":" ".repeat(n))+c:(u?o:o+" ".repeat(n-o.length))+c}}function qS(A,j,e,t){let r=e.enter("paragraph"),o=e.enter("phrasing"),n=e.containerPhrasing(A,t);return o(),r(),n}function VS(A,j,e,t){return(A.children.some(function(n){return SE(n)})?e.containerPhrasing:e.containerFlow).call(e,A,t)}function KS(A){let j=A.options.strong||"*";if(j!=="*"&&j!=="_")throw new Error("Cannot serialize strong with `"+j+"` for `options.strong`, expected `*`, or `_`");return j}Wp.peek=rN;function Wp(A,j,e,t){let r=KS(e),o=e.enter("strong"),n=e.createTracker(t),i=n.move(r+r);return i+=n.move(e.containerPhrasing(A,{before:i,after:r,...n.current()})),i+=n.move(r+r),o(),i}function rN(A,j,e){return e.options.strong||"*"}function HS(A,j,e,t){return e.safe(A.value,t)}function JS(A){let j=A.options.ruleRepetition||3;if(j<3)throw new Error("Cannot serialize rules with repetition `"+j+"` for `options.ruleRepetition`, expected `3` or more");return j}function US(A,j,e){let t=(lc(e)+(e.options.ruleSpaces?" ":"")).repeat(JS(e));return e.options.ruleSpaces?t.slice(0,-1):t}var Zo={blockquote:SS,break:Lp,code:vS,definition:TS,emphasis:qp,hardBreak:Lp,heading:DS,html:Vp,image:Kp,imageReference:Hp,inlineCode:Jp,link:Qp,linkReference:zp,list:OS,listItem:LS,paragraph:qS,root:VS,strong:Wp,text:HS,thematicBreak:US};var QS=[oN];function oN(A,j,e,t){if(j.type==="code"&&js(j,t)&&(A.type==="list"||A.type===j.type&&js(A,t)))return!1;if("spread"in e&&typeof e.spread=="boolean")return A.type==="paragraph"&&(A.type===j.type||j.type==="definition"||j.type==="heading"&&sc(j,t))?void 0:e.spread?1:0}var An=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],zS=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:An},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:An},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:An},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:An},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:An},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:An},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:An},{atBreak:!0,character:"~"}];var WS=document.createElement("i");function ci(A){let j="&"+A+";";WS.innerHTML=j;let e=WS.textContent;return e.charCodeAt(e.length-1)===59&&A!=="semi"||e===j?!1:e}function cc(A,j){let e=Number.parseInt(A,j);return e<9||e===11||e>13&&e<32||e>126&&e<160||e>55295&&e<57344||e>64975&&e<65008||(e&65535)===65535||(e&65535)===65534||e>1114111?"\uFFFD":String.fromCodePoint(e)}var nN=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function dc(A){return A.replace(nN,iN)}function iN(A,j,e){if(j)return j;if(e.charCodeAt(0)===35){let r=e.charCodeAt(1),o=r===120||r===88;return cc(e.slice(o?2:1),o?16:10)}return ci(e)||A}function XS(A){return A.label||!A.identifier?A.label||"":dc(A.identifier)}function YS(A){if(!A._compiled){let j=(A.atBreak?"[\\r\\n][\\t ]*":"")+(A.before?"(?:"+A.before+")":"");A._compiled=new RegExp((j?"("+j+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(A.character)?"\\":"")+A.character+(A.after?"(?:"+A.after+")":""),"g")}return A._compiled}function ZS(A,j,e){let t=j.indexStack,r=A.children||[],o=[],n=-1,i=e.before;t.push(-1);let a=j.createTracker(e);for(;++n<r.length;){let s=r[n],l;if(t[t.length-1]=n,n+1<r.length){let c=j.handle.handlers[r[n+1].type];c&&c.peek&&(c=c.peek),l=c?c(r[n+1],A,j,{before:"",after:"",...a.current()}).charAt(0):""}else l=e.after;o.length>0&&(i==="\r"||i===`
`)&&s.type==="html"&&(o[o.length-1]=o[o.length-1].replace(/(\r?\n|\r)$/," "),i=" ",a=j.createTracker(e),a.move(o.join(""))),o.push(a.move(j.handle(s,A,j,{...a.current(),before:i,after:l}))),i=o[o.length-1].slice(-1)}return t.pop(),o.join("")}function AG(A,j,e){let t=j.indexStack,r=A.children||[],o=j.createTracker(e),n=[],i=-1;for(t.push(-1);++i<r.length;){let a=r[i];t[t.length-1]=i,n.push(o.move(j.handle(a,A,j,{before:`
`,after:`
`,...o.current()}))),a.type!=="list"&&(j.bulletLastUsed=void 0),i<r.length-1&&n.push(o.move(aN(a,r[i+1],A,j)))}return t.pop(),n.join("")}function aN(A,j,e,t){let r=t.join.length;for(;r--;){let o=t.join[r](A,j,e,t);if(o===!0||o===1)break;if(typeof o=="number")return`
`.repeat(1+o);if(o===!1)return`

<!---->

`}return`

`}var sN=/\r?\n|\r/g;function jG(A,j){let e=[],t=0,r=0,o;for(;o=sN.exec(A);)n(A.slice(t,o.index)),e.push(o[0]),t=o.index+o[0].length,r++;return n(A.slice(t)),e.join("");function n(i){e.push(j(i,r,!i))}}function tG(A,j,e){let t=(e.before||"")+(j||"")+(e.after||""),r=[],o=[],n={},i=-1;for(;++i<A.unsafe.length;){let l=A.unsafe[i];if(!ac(A.stack,l))continue;let c=A.compilePattern(l),d;for(;d=c.exec(t);){let u="before"in l||!!l.atBreak,k="after"in l,m=d.index+(u?d[1].length:0);r.includes(m)?(n[m].before&&!u&&(n[m].before=!1),n[m].after&&!k&&(n[m].after=!1)):(r.push(m),n[m]={before:u,after:k})}}r.sort(lN);let a=e.before?e.before.length:0,s=t.length-(e.after?e.after.length:0);for(i=-1;++i<r.length;){let l=r[i];l<a||l>=s||l+1<s&&r[i+1]===l+1&&n[l].after&&!n[l+1].before&&!n[l+1].after||r[i-1]===l-1&&n[l].before&&!n[l-1].before&&!n[l-1].after||(a!==l&&o.push(eG(t.slice(a,l),"\\")),a=l,/[!-/:-@[-`{-~]/.test(t.charAt(l))&&(!e.encode||!e.encode.includes(t.charAt(l)))?o.push("\\"):(o.push("&#x"+t.charCodeAt(l).toString(16).toUpperCase()+";"),a++))}return o.push(eG(t.slice(a,s),e.after)),o.join("")}function lN(A,j){return A-j}function eG(A,j){let e=/\\(?=[!-/:-@[-`{-~])/g,t=[],r=[],o=A+j,n=-1,i=0,a;for(;a=e.exec(o);)t.push(a.index);for(;++n<t.length;)i!==t[n]&&r.push(A.slice(i,t[n])),r.push("\\"),i=t[n];return r.push(A.slice(i)),r.join("")}function rG(A){let j=A||{},e=j.now||{},t=j.lineShift||0,r=e.line||1,o=e.column||1;return{move:a,current:n,shift:i};function n(){return{now:{line:r,column:o},lineShift:t}}function i(s){t+=s}function a(s){let l=s||"",c=l.split(/\r?\n|\r/g),d=c[c.length-1];return r+=c.length-1,o=c.length===1?o+d.length:1+d.length+t,l}}function Xp(A,j={}){let e={enter:r,indentLines:jG,associationId:XS,containerPhrasing:pN,containerFlow:kN,createTracker:rG,compilePattern:YS,safe:mN,stack:[],unsafe:[...zS],join:[...QS],handlers:{...Zo},options:{},indexStack:[],handle:void 0};wp(e,j),e.options.tightDefinitions&&e.join.push(uN),e.handle=tl("type",{invalid:cN,unknown:dN,handlers:e.handlers});let t=e.handle(A,void 0,e,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return t&&t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t;function r(o){return e.stack.push(o),n;function n(){e.stack.pop()}}}function cN(A){throw new Error("Cannot handle value `"+A+"`, expected node")}function dN(A){let j=A;throw new Error("Cannot handle unknown node `"+j.type+"`")}function uN(A,j){if(A.type==="definition"&&A.type===j.type)return 0}function pN(A,j){return ZS(A,this,j)}function kN(A,j){return AG(A,this,j)}function mN(A,j){return tG(this,A,j)}function Zp(){return{enter:{table:fN,tableData:oG,tableHeader:oG,tableRow:$N},exit:{codeText:BN,table:EN,tableData:Yp,tableHeader:Yp,tableRow:Yp}}}function fN(A){let j=A._align;this.enter({type:"table",align:j.map(function(e){return e==="none"?null:e}),children:[]},A),this.data.inTable=!0}function EN(A){this.exit(A),this.data.inTable=void 0}function $N(A){this.enter({type:"tableRow",children:[]},A)}function Yp(A){this.exit(A)}function oG(A){this.enter({type:"tableCell",children:[]},A)}function BN(A){let j=this.resume();this.data.inTable&&(j=j.replace(/\\([\\|])/g,hN));let e=this.stack[this.stack.length-1];e.type,e.value=j,this.exit(A)}function hN(A,j){return j==="|"?j:A}function Ak(A){let j=A||{},e=j.tableCellPadding,t=j.tablePipeAlign,r=j.stringLength,o=e?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:d,table:n,tableCell:a,tableRow:i}};function n(u,k,m,I){return s(l(u,m,I),u.align)}function i(u,k,m,I){let $=c(u,m,I),F=s([$]);return F.slice(0,F.indexOf(`
`))}function a(u,k,m,I){let $=m.enter("tableCell"),F=m.enter("phrasing"),S=m.containerPhrasing(u,{...I,before:o,after:o});return F(),$(),S}function s(u,k){return FS(u,{align:k,alignDelimiters:t,padding:e,stringLength:r})}function l(u,k,m){let I=u.children,$=-1,F=[],S=k.enter("table");for(;++$<I.length;)F[$]=c(I[$],k,m);return S(),F}function c(u,k,m){let I=u.children,$=-1,F=[],S=k.enter("tableRow");for(;++$<I.length;)F[$]=a(I[$],u,k,m);return S(),F}function d(u,k,m){let I=Zo.inlineCode(u,k,m);return m.stack.includes("tableCell")&&(I=I.replace(/\|/g,"\\$&")),I}}function jk(){return{exit:{taskListCheckValueChecked:nG,taskListCheckValueUnchecked:nG,paragraph:gN}}}function ek(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:IN}}}function nG(A){let j=this.stack[this.stack.length-2];j.type,j.checked=A.type==="taskListCheckValueChecked"}function gN(A){let j=this.stack[this.stack.length-2];if(j&&j.type==="listItem"&&typeof j.checked=="boolean"){let e=this.stack[this.stack.length-1];e.type;let t=e.children[0];if(t&&t.type==="text"){let r=j.children,o=-1,n;for(;++o<r.length;){let i=r[o];if(i.type==="paragraph"){n=i;break}}n===e&&(t.value=t.value.slice(1),t.value.length===0?e.children.shift():e.position&&t.position&&typeof t.position.start.offset=="number"&&(t.position.start.column++,t.position.start.offset++,e.position.start=Object.assign({},t.position.start)))}}this.exit(A)}function IN(A,j,e,t){let r=A.children[0],o=typeof A.checked=="boolean"&&r&&r.type==="paragraph",n="["+(A.checked?"x":" ")+"] ",i=e.createTracker(t);o&&i.move(n);let a=Zo.listItem(A,j,e,{...t,...i.current()});return o&&(a=a.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,s)),a;function s(l){return l+n}}function tk(){return[Pp(),Dp(),Np(),Zp(),jk()]}function rk(A){return{extensions:[Mp(),_p(A),Op(),Ak(A),ek()]}}function wj(A,j,e,t){let r=A.length,o=0,n;if(j<0?j=-j>r?0:r+j:j=j>r?r:j,e=e>0?e:0,t.length<1e4)n=Array.from(t),n.unshift(j,e),A.splice(...n);else for(e&&A.splice(j,e);o<t.length;)n=t.slice(o,o+1e4),n.unshift(j,0),A.splice(...n),o+=1e4,j+=1e4}function he(A,j){return A.length>0?(wj(A,A.length,0,j),A):j}var iG={}.hasOwnProperty;function uc(A){let j={},e=-1;for(;++e<A.length;)RN(j,A[e]);return j}function RN(A,j){let e;for(e in j){let r=(iG.call(A,e)?A[e]:void 0)||(A[e]={}),o=j[e],n;if(o)for(n in o){iG.call(r,n)||(r[n]=[]);let i=o[n];FN(r[n],Array.isArray(i)?i:i?[i]:[])}}}function FN(A,j){let e=-1,t=[];for(;++e<j.length;)(j[e].add==="after"?A:t).push(j[e]);wj(A,0,0,t)}var yN={tokenize:vN,partial:!0},aG={tokenize:TN,partial:!0},sG={tokenize:xN,partial:!0},lG={tokenize:PN,partial:!0},SN={tokenize:MN,partial:!0},cG={name:"wwwAutolink",tokenize:bN,previous:uG},dG={name:"protocolAutolink",tokenize:CN,previous:pG},dr={name:"emailAutolink",tokenize:GN,previous:kG},xt={};function nk(){return{text:xt}}var jn=48;for(;jn<123;)xt[jn]=dr,jn++,jn===58?jn=65:jn===91&&(jn=97);xt[43]=dr;xt[45]=dr;xt[46]=dr;xt[95]=dr;xt[72]=[dr,dG];xt[104]=[dr,dG];xt[87]=[dr,cG];xt[119]=[dr,cG];function GN(A,j,e){let t=this,r,o;return n;function n(c){return!ok(c)||!kG.call(t,t.previous)||ik(t.events)?e(c):(A.enter("literalAutolink"),A.enter("literalAutolinkEmail"),i(c))}function i(c){return ok(c)?(A.consume(c),i):c===64?(A.consume(c),a):e(c)}function a(c){return c===46?A.check(SN,l,s)(c):c===45||c===95||Gj(c)?(o=!0,A.consume(c),a):l(c)}function s(c){return A.consume(c),r=!0,a}function l(c){return o&&r&&Vj(t.previous)?(A.exit("literalAutolinkEmail"),A.exit("literalAutolink"),j(c)):e(c)}}function bN(A,j,e){let t=this;return r;function r(n){return n!==87&&n!==119||!uG.call(t,t.previous)||ik(t.events)?e(n):(A.enter("literalAutolink"),A.enter("literalAutolinkWww"),A.check(yN,A.attempt(aG,A.attempt(sG,o),e),e)(n))}function o(n){return A.exit("literalAutolinkWww"),A.exit("literalAutolink"),j(n)}}function CN(A,j,e){let t=this,r="",o=!1;return n;function n(c){return(c===72||c===104)&&pG.call(t,t.previous)&&!ik(t.events)?(A.enter("literalAutolink"),A.enter("literalAutolinkHttp"),r+=String.fromCodePoint(c),A.consume(c),i):e(c)}function i(c){if(Vj(c)&&r.length<5)return r+=String.fromCodePoint(c),A.consume(c),i;if(c===58){let d=r.toLowerCase();if(d==="http"||d==="https")return A.consume(c),a}return e(c)}function a(c){return c===47?(A.consume(c),o?s:(o=!0,a)):e(c)}function s(c){return c===null||Wo(c)||vA(c)||Tt(c)||Xo(c)?e(c):A.attempt(aG,A.attempt(sG,l),e)(c)}function l(c){return A.exit("literalAutolinkHttp"),A.exit("literalAutolink"),j(c)}}function vN(A,j,e){let t=0;return r;function r(n){return(n===87||n===119)&&t<3?(t++,A.consume(n),r):n===46&&t===3?(A.consume(n),o):e(n)}function o(n){return n===null?e(n):j(n)}}function TN(A,j,e){let t,r,o;return n;function n(s){return s===46||s===95?A.check(lG,a,i)(s):s===null||vA(s)||Tt(s)||s!==45&&Xo(s)?a(s):(o=!0,A.consume(s),n)}function i(s){return s===95?t=!0:(r=t,t=void 0),A.consume(s),n}function a(s){return r||t||!o?e(s):j(s)}}function xN(A,j){let e=0,t=0;return r;function r(n){return n===40?(e++,A.consume(n),r):n===41&&t<e?o(n):n===33||n===34||n===38||n===39||n===41||n===42||n===44||n===46||n===58||n===59||n===60||n===63||n===93||n===95||n===126?A.check(lG,j,o)(n):n===null||vA(n)||Tt(n)?j(n):(A.consume(n),r)}function o(n){return n===41&&t++,A.consume(n),r}}function PN(A,j,e){return t;function t(i){return i===33||i===34||i===39||i===41||i===42||i===44||i===46||i===58||i===59||i===63||i===95||i===126?(A.consume(i),t):i===38?(A.consume(i),o):i===93?(A.consume(i),r):i===60||i===null||vA(i)||Tt(i)?j(i):e(i)}function r(i){return i===null||i===40||i===91||vA(i)||Tt(i)?j(i):t(i)}function o(i){return Vj(i)?n(i):e(i)}function n(i){return i===59?(A.consume(i),t):Vj(i)?(A.consume(i),n):e(i)}}function MN(A,j,e){return t;function t(o){return A.consume(o),r}function r(o){return Gj(o)?e(o):j(o)}}function uG(A){return A===null||A===40||A===42||A===95||A===91||A===93||A===126||vA(A)}function pG(A){return!Vj(A)}function kG(A){return!(A===47||ok(A))}function ok(A){return A===43||A===45||A===46||A===95||Gj(A)}function ik(A){let j=A.length,e=!1;for(;j--;){let t=A[j][1];if((t.type==="labelLink"||t.type==="labelImage")&&!t._balanced){e=!0;break}if(t._gfmAutolinkLiteralWalkedInto){e=!1;break}}return A.length>0&&!e&&(A[A.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),e}function Ze(A){let j=[],e=-1,t=0,r=0;for(;++e<A.length;){let o=A.charCodeAt(e),n="";if(o===37&&Gj(A.charCodeAt(e+1))&&Gj(A.charCodeAt(e+2)))r=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(n=String.fromCharCode(o));else if(o>55295&&o<57344){let i=A.charCodeAt(e+1);o<56320&&i>56319&&i<57344?(n=String.fromCharCode(o,i),r=1):n="\uFFFD"}else n=String.fromCharCode(o);n&&(j.push(A.slice(t,e),encodeURIComponent(n)),t=e+r+1,n=""),r&&(e+=r,r=0)}return j.join("")+A.slice(t)}function di(A){if(A===null||vA(A)||Tt(A))return 1;if(Xo(A))return 2}function eo(A,j,e){let t=[],r=-1;for(;++r<A.length;){let o=A[r].resolveAll;o&&!t.includes(o)&&(j=o(j,e),t.push(o))}return j}var es={name:"attention",tokenize:_N,resolveAll:DN};function DN(A,j){let e=-1,t,r,o,n,i,a,s,l;for(;++e<A.length;)if(A[e][0]==="enter"&&A[e][1].type==="attentionSequence"&&A[e][1]._close){for(t=e;t--;)if(A[t][0]==="exit"&&A[t][1].type==="attentionSequence"&&A[t][1]._open&&j.sliceSerialize(A[t][1]).charCodeAt(0)===j.sliceSerialize(A[e][1]).charCodeAt(0)){if((A[t][1]._close||A[e][1]._open)&&(A[e][1].end.offset-A[e][1].start.offset)%3&&!((A[t][1].end.offset-A[t][1].start.offset+A[e][1].end.offset-A[e][1].start.offset)%3))continue;a=A[t][1].end.offset-A[t][1].start.offset>1&&A[e][1].end.offset-A[e][1].start.offset>1?2:1;let c=Object.assign({},A[t][1].end),d=Object.assign({},A[e][1].start);mG(c,-a),mG(d,a),n={type:a>1?"strongSequence":"emphasisSequence",start:c,end:Object.assign({},A[t][1].end)},i={type:a>1?"strongSequence":"emphasisSequence",start:Object.assign({},A[e][1].start),end:d},o={type:a>1?"strongText":"emphasisText",start:Object.assign({},A[t][1].end),end:Object.assign({},A[e][1].start)},r={type:a>1?"strong":"emphasis",start:Object.assign({},n.start),end:Object.assign({},i.end)},A[t][1].end=Object.assign({},n.start),A[e][1].start=Object.assign({},i.end),s=[],A[t][1].end.offset-A[t][1].start.offset&&(s=he(s,[["enter",A[t][1],j],["exit",A[t][1],j]])),s=he(s,[["enter",r,j],["enter",n,j],["exit",n,j],["enter",o,j]]),s=he(s,eo(j.parser.constructs.insideSpan.null,A.slice(t+1,e),j)),s=he(s,[["exit",o,j],["enter",i,j],["exit",i,j],["exit",r,j]]),A[e][1].end.offset-A[e][1].start.offset?(l=2,s=he(s,[["enter",A[e][1],j],["exit",A[e][1],j]])):l=0,wj(A,t-1,e-t+3,s),e=t+s.length-l-2;break}}for(e=-1;++e<A.length;)A[e][1].type==="attentionSequence"&&(A[e][1].type="data");return A}function _N(A,j){let e=this.parser.constructs.attentionMarkers.null,t=this.previous,r=di(t),o;return n;function n(a){return o=a,A.enter("attentionSequence"),i(a)}function i(a){if(a===o)return A.consume(a),i;let s=A.exit("attentionSequence"),l=di(a),c=!l||l===2&&r||e.includes(a),d=!r||r===2&&l||e.includes(t);return s._open=!!(o===42?c:c&&(r||!d)),s._close=!!(o===42?d:d&&(l||!c)),j(a)}}function mG(A,j){A.column+=j,A.offset+=j,A._bufferIndex+=j}var ak={name:"autolink",tokenize:NN};function NN(A,j,e){let t=0;return r;function r(u){return A.enter("autolink"),A.enter("autolinkMarker"),A.consume(u),A.exit("autolinkMarker"),A.enter("autolinkProtocol"),o}function o(u){return Vj(u)?(A.consume(u),n):u===64?e(u):s(u)}function n(u){return u===43||u===45||u===46||Gj(u)?(t=1,i(u)):s(u)}function i(u){return u===58?(A.consume(u),t=0,a):(u===43||u===45||u===46||Gj(u))&&t++<32?(A.consume(u),i):(t=0,s(u))}function a(u){return u===62?(A.exit("autolinkProtocol"),A.enter("autolinkMarker"),A.consume(u),A.exit("autolinkMarker"),A.exit("autolink"),j):u===null||u===32||u===60||Wo(u)?e(u):(A.consume(u),a)}function s(u){return u===64?(A.consume(u),l):fS(u)?(A.consume(u),s):e(u)}function l(u){return Gj(u)?c(u):e(u)}function c(u){return u===46?(A.consume(u),t=0,l):u===62?(A.exit("autolinkProtocol").type="autolinkEmail",A.enter("autolinkMarker"),A.consume(u),A.exit("autolinkMarker"),A.exit("autolink"),j):d(u)}function d(u){if((u===45||Gj(u))&&t++<63){let k=u===45?d:c;return A.consume(u),k}return e(u)}}function lA(A,j,e,t){let r=t?t-1:Number.POSITIVE_INFINITY,o=0;return n;function n(a){return pA(a)?(A.enter(e),i(a)):j(a)}function i(a){return pA(a)&&o++<r?(A.consume(a),i):(A.exit(e),j(a))}}var Pt={tokenize:ON,partial:!0};function ON(A,j,e){return t;function t(o){return pA(o)?lA(A,r,"linePrefix")(o):r(o)}function r(o){return o===null||eA(o)?j(o):e(o)}}var pc={name:"blockQuote",tokenize:wN,continuation:{tokenize:LN},exit:qN};function wN(A,j,e){let t=this;return r;function r(n){if(n===62){let i=t.containerState;return i.open||(A.enter("blockQuote",{_container:!0}),i.open=!0),A.enter("blockQuotePrefix"),A.enter("blockQuoteMarker"),A.consume(n),A.exit("blockQuoteMarker"),o}return e(n)}function o(n){return pA(n)?(A.enter("blockQuotePrefixWhitespace"),A.consume(n),A.exit("blockQuotePrefixWhitespace"),A.exit("blockQuotePrefix"),j):(A.exit("blockQuotePrefix"),j(n))}}function LN(A,j,e){let t=this;return r;function r(n){return pA(n)?lA(A,o,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(n):o(n)}function o(n){return A.attempt(pc,j,e)(n)}}function qN(A){A.exit("blockQuote")}var kc={name:"characterEscape",tokenize:VN};function VN(A,j,e){return t;function t(o){return A.enter("characterEscape"),A.enter("escapeMarker"),A.consume(o),A.exit("escapeMarker"),r}function r(o){return $S(o)?(A.enter("characterEscapeValue"),A.consume(o),A.exit("characterEscapeValue"),A.exit("characterEscape"),j):e(o)}}var mc={name:"characterReference",tokenize:KN};function KN(A,j,e){let t=this,r=0,o,n;return i;function i(c){return A.enter("characterReference"),A.enter("characterReferenceMarker"),A.consume(c),A.exit("characterReferenceMarker"),a}function a(c){return c===35?(A.enter("characterReferenceMarkerNumeric"),A.consume(c),A.exit("characterReferenceMarkerNumeric"),s):(A.enter("characterReferenceValue"),o=31,n=Gj,l(c))}function s(c){return c===88||c===120?(A.enter("characterReferenceMarkerHexadecimal"),A.consume(c),A.exit("characterReferenceMarkerHexadecimal"),A.enter("characterReferenceValue"),o=6,n=ES,l):(A.enter("characterReferenceValue"),o=7,n=As,l(c))}function l(c){if(c===59&&r){let d=A.exit("characterReferenceValue");return n===Gj&&!ci(t.sliceSerialize(d))?e(c):(A.enter("characterReferenceMarker"),A.consume(c),A.exit("characterReferenceMarker"),A.exit("characterReference"),j)}return n(c)&&r++<o?(A.consume(c),l):e(c)}}var fG={tokenize:JN,partial:!0},fc={name:"codeFenced",tokenize:HN,concrete:!0};function HN(A,j,e){let t=this,r={tokenize:x,partial:!0},o=0,n=0,i;return a;function a(C){return s(C)}function s(C){let H=t.events[t.events.length-1];return o=H&&H[1].type==="linePrefix"?H[2].sliceSerialize(H[1],!0).length:0,i=C,A.enter("codeFenced"),A.enter("codeFencedFence"),A.enter("codeFencedFenceSequence"),l(C)}function l(C){return C===i?(n++,A.consume(C),l):n<3?e(C):(A.exit("codeFencedFenceSequence"),pA(C)?lA(A,c,"whitespace")(C):c(C))}function c(C){return C===null||eA(C)?(A.exit("codeFencedFence"),t.interrupt?j(C):A.check(fG,m,P)(C)):(A.enter("codeFencedFenceInfo"),A.enter("chunkString",{contentType:"string"}),d(C))}function d(C){return C===null||eA(C)?(A.exit("chunkString"),A.exit("codeFencedFenceInfo"),c(C)):pA(C)?(A.exit("chunkString"),A.exit("codeFencedFenceInfo"),lA(A,u,"whitespace")(C)):C===96&&C===i?e(C):(A.consume(C),d)}function u(C){return C===null||eA(C)?c(C):(A.enter("codeFencedFenceMeta"),A.enter("chunkString",{contentType:"string"}),k(C))}function k(C){return C===null||eA(C)?(A.exit("chunkString"),A.exit("codeFencedFenceMeta"),c(C)):C===96&&C===i?e(C):(A.consume(C),k)}function m(C){return A.attempt(r,P,I)(C)}function I(C){return A.enter("lineEnding"),A.consume(C),A.exit("lineEnding"),$}function $(C){return o>0&&pA(C)?lA(A,F,"linePrefix",o+1)(C):F(C)}function F(C){return C===null||eA(C)?A.check(fG,m,P)(C):(A.enter("codeFlowValue"),S(C))}function S(C){return C===null||eA(C)?(A.exit("codeFlowValue"),F(C)):(A.consume(C),S)}function P(C){return A.exit("codeFenced"),j(C)}function x(C,H,U){let z=0;return v;function v(q){return C.enter("lineEnding"),C.consume(q),C.exit("lineEnding"),tA}function tA(q){return C.enter("codeFencedFence"),pA(q)?lA(C,X,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):X(q)}function X(q){return q===i?(C.enter("codeFencedFenceSequence"),N(q)):U(q)}function N(q){return q===i?(z++,C.consume(q),N):z>=n?(C.exit("codeFencedFenceSequence"),pA(q)?lA(C,K,"whitespace")(q):K(q)):U(q)}function K(q){return q===null||eA(q)?(C.exit("codeFencedFence"),H(q)):U(q)}}}function JN(A,j,e){let t=this;return r;function r(n){return n===null?e(n):(A.enter("lineEnding"),A.consume(n),A.exit("lineEnding"),o)}function o(n){return t.parser.lazy[t.now().line]?e(n):j(n)}}var ts={name:"codeIndented",tokenize:QN},UN={tokenize:zN,partial:!0};function QN(A,j,e){let t=this;return r;function r(s){return A.enter("codeIndented"),lA(A,o,"linePrefix",5)(s)}function o(s){let l=t.events[t.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?n(s):e(s)}function n(s){return s===null?a(s):eA(s)?A.attempt(UN,n,a)(s):(A.enter("codeFlowValue"),i(s))}function i(s){return s===null||eA(s)?(A.exit("codeFlowValue"),n(s)):(A.consume(s),i)}function a(s){return A.exit("codeIndented"),j(s)}}function zN(A,j,e){let t=this;return r;function r(n){return t.parser.lazy[t.now().line]?e(n):eA(n)?(A.enter("lineEnding"),A.consume(n),A.exit("lineEnding"),r):lA(A,o,"linePrefix",5)(n)}function o(n){let i=t.events[t.events.length-1];return i&&i[1].type==="linePrefix"&&i[2].sliceSerialize(i[1],!0).length>=4?j(n):eA(n)?r(n):e(n)}}var sk={name:"codeText",tokenize:YN,resolve:WN,previous:XN};function WN(A){let j=A.length-4,e=3,t,r;if((A[e][1].type==="lineEnding"||A[e][1].type==="space")&&(A[j][1].type==="lineEnding"||A[j][1].type==="space")){for(t=e;++t<j;)if(A[t][1].type==="codeTextData"){A[e][1].type="codeTextPadding",A[j][1].type="codeTextPadding",e+=2,j-=2;break}}for(t=e-1,j++;++t<=j;)r===void 0?t!==j&&A[t][1].type!=="lineEnding"&&(r=t):(t===j||A[t][1].type==="lineEnding")&&(A[r][1].type="codeTextData",t!==r+2&&(A[r][1].end=A[t-1][1].end,A.splice(r+2,t-r-2),j-=t-r-2,t=r+2),r=void 0);return A}function XN(A){return A!==96||this.events[this.events.length-1][1].type==="characterEscape"}function YN(A,j,e){let t=this,r=0,o,n;return i;function i(d){return A.enter("codeText"),A.enter("codeTextSequence"),a(d)}function a(d){return d===96?(A.consume(d),r++,a):(A.exit("codeTextSequence"),s(d))}function s(d){return d===null?e(d):d===32?(A.enter("space"),A.consume(d),A.exit("space"),s):d===96?(n=A.enter("codeTextSequence"),o=0,c(d)):eA(d)?(A.enter("lineEnding"),A.consume(d),A.exit("lineEnding"),s):(A.enter("codeTextData"),l(d))}function l(d){return d===null||d===32||d===96||eA(d)?(A.exit("codeTextData"),s(d)):(A.consume(d),l)}function c(d){return d===96?(A.consume(d),o++,c):o===r?(A.exit("codeTextSequence"),A.exit("codeText"),j(d)):(n.type="codeTextData",l(d))}}var Ec=class{constructor(j){this.left=j?[...j]:[],this.right=[]}get(j){if(j<0||j>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+j+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return j<this.left.length?this.left[j]:this.right[this.right.length-j+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(j,e){let t=e??Number.POSITIVE_INFINITY;return t<this.left.length?this.left.slice(j,t):j>this.left.length?this.right.slice(this.right.length-t+this.left.length,this.right.length-j+this.left.length).reverse():this.left.slice(j).concat(this.right.slice(this.right.length-t+this.left.length).reverse())}splice(j,e,t){let r=e||0;this.setCursor(Math.trunc(j));let o=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return t&&rs(this.left,t),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(j){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(j)}pushMany(j){this.setCursor(Number.POSITIVE_INFINITY),rs(this.left,j)}unshift(j){this.setCursor(0),this.right.push(j)}unshiftMany(j){this.setCursor(0),rs(this.right,j.reverse())}setCursor(j){if(!(j===this.left.length||j>this.left.length&&this.right.length===0||j<0&&this.left.length===0))if(j<this.left.length){let e=this.left.splice(j,Number.POSITIVE_INFINITY);rs(this.right,e.reverse())}else{let e=this.right.splice(this.left.length+this.right.length-j,Number.POSITIVE_INFINITY);rs(this.left,e.reverse())}}};function rs(A,j){let e=0;if(j.length<1e4)A.push(...j);else for(;e<j.length;)A.push(...j.slice(e,e+1e4)),e+=1e4}function $c(A){let j={},e=-1,t,r,o,n,i,a,s,l=new Ec(A);for(;++e<l.length;){for(;e in j;)e=j[e];if(t=l.get(e),e&&t[1].type==="chunkFlow"&&l.get(e-1)[1].type==="listItemPrefix"&&(a=t[1]._tokenizer.events,o=0,o<a.length&&a[o][1].type==="lineEndingBlank"&&(o+=2),o<a.length&&a[o][1].type==="content"))for(;++o<a.length&&a[o][1].type!=="content";)a[o][1].type==="chunkText"&&(a[o][1]._isInFirstContentOfListItem=!0,o++);if(t[0]==="enter")t[1].contentType&&(Object.assign(j,ZN(l,e)),e=j[e],s=!0);else if(t[1]._container){for(o=e,r=void 0;o--&&(n=l.get(o),n[1].type==="lineEnding"||n[1].type==="lineEndingBlank");)n[0]==="enter"&&(r&&(l.get(r)[1].type="lineEndingBlank"),n[1].type="lineEnding",r=o);r&&(t[1].end=Object.assign({},l.get(r)[1].start),i=l.slice(r,e),i.unshift(t),l.splice(r,e-r+1,i))}}return wj(A,0,Number.POSITIVE_INFINITY,l.slice(0)),!s}function ZN(A,j){let e=A.get(j)[1],t=A.get(j)[2],r=j-1,o=[],n=e._tokenizer||t.parser[e.contentType](e.start),i=n.events,a=[],s={},l,c,d=-1,u=e,k=0,m=0,I=[m];for(;u;){for(;A.get(++r)[1]!==u;);o.push(r),u._tokenizer||(l=t.sliceStream(u),u.next||l.push(null),c&&n.defineSkip(u.start),u._isInFirstContentOfListItem&&(n._gfmTasklistFirstContentOfListItem=!0),n.write(l),u._isInFirstContentOfListItem&&(n._gfmTasklistFirstContentOfListItem=void 0)),c=u,u=u.next}for(u=e;++d<i.length;)i[d][0]==="exit"&&i[d-1][0]==="enter"&&i[d][1].type===i[d-1][1].type&&i[d][1].start.line!==i[d][1].end.line&&(m=d+1,I.push(m),u._tokenizer=void 0,u.previous=void 0,u=u.next);for(n.events=[],u?(u._tokenizer=void 0,u.previous=void 0):I.pop(),d=I.length;d--;){let $=i.slice(I[d],I[d+1]),F=o.pop();a.push([F,F+$.length-1]),A.splice(F,2,$)}for(a.reverse(),d=-1;++d<a.length;)s[k+a[d][0]]=k+a[d][1],k+=a[d][1]-a[d][0]-1;return s}var lk={tokenize:eO,resolve:jO},AO={tokenize:tO,partial:!0};function jO(A){return $c(A),A}function eO(A,j){let e;return t;function t(i){return A.enter("content"),e=A.enter("chunkContent",{contentType:"content"}),r(i)}function r(i){return i===null?o(i):eA(i)?A.check(AO,n,o)(i):(A.consume(i),r)}function o(i){return A.exit("chunkContent"),A.exit("content"),j(i)}function n(i){return A.consume(i),A.exit("chunkContent"),e.next=A.enter("chunkContent",{contentType:"content",previous:e}),e=e.next,r}}function tO(A,j,e){let t=this;return r;function r(n){return A.exit("chunkContent"),A.enter("lineEnding"),A.consume(n),A.exit("lineEnding"),lA(A,o,"linePrefix")}function o(n){if(n===null||eA(n))return e(n);let i=t.events[t.events.length-1];return!t.parser.constructs.disable.null.includes("codeIndented")&&i&&i[1].type==="linePrefix"&&i[2].sliceSerialize(i[1],!0).length>=4?j(n):A.interrupt(t.parser.constructs.flow,e,j)(n)}}function Bc(A,j,e,t,r,o,n,i,a){let s=a||Number.POSITIVE_INFINITY,l=0;return c;function c($){return $===60?(A.enter(t),A.enter(r),A.enter(o),A.consume($),A.exit(o),d):$===null||$===32||$===41||Wo($)?e($):(A.enter(t),A.enter(n),A.enter(i),A.enter("chunkString",{contentType:"string"}),m($))}function d($){return $===62?(A.enter(o),A.consume($),A.exit(o),A.exit(r),A.exit(t),j):(A.enter(i),A.enter("chunkString",{contentType:"string"}),u($))}function u($){return $===62?(A.exit("chunkString"),A.exit(i),d($)):$===null||$===60||eA($)?e($):(A.consume($),$===92?k:u)}function k($){return $===60||$===62||$===92?(A.consume($),u):u($)}function m($){return!l&&($===null||$===41||vA($))?(A.exit("chunkString"),A.exit(i),A.exit(n),A.exit(t),j($)):l<s&&$===40?(A.consume($),l++,m):$===41?(A.consume($),l--,m):$===null||$===32||$===40||Wo($)?e($):(A.consume($),$===92?I:m)}function I($){return $===40||$===41||$===92?(A.consume($),m):m($)}}function hc(A,j,e,t,r,o){let n=this,i=0,a;return s;function s(u){return A.enter(t),A.enter(r),A.consume(u),A.exit(r),A.enter(o),l}function l(u){return i>999||u===null||u===91||u===93&&!a||u===94&&!i&&"_hiddenFootnoteSupport"in n.parser.constructs?e(u):u===93?(A.exit(o),A.enter(r),A.consume(u),A.exit(r),A.exit(t),j):eA(u)?(A.enter("lineEnding"),A.consume(u),A.exit("lineEnding"),l):(A.enter("chunkString",{contentType:"string"}),c(u))}function c(u){return u===null||u===91||u===93||eA(u)||i++>999?(A.exit("chunkString"),l(u)):(A.consume(u),a||(a=!pA(u)),u===92?d:c)}function d(u){return u===91||u===92||u===93?(A.consume(u),i++,c):c(u)}}function gc(A,j,e,t,r,o){let n;return i;function i(d){return d===34||d===39||d===40?(A.enter(t),A.enter(r),A.consume(d),A.exit(r),n=d===40?41:d,a):e(d)}function a(d){return d===n?(A.enter(r),A.consume(d),A.exit(r),A.exit(t),j):(A.enter(o),s(d))}function s(d){return d===n?(A.exit(o),a(n)):d===null?e(d):eA(d)?(A.enter("lineEnding"),A.consume(d),A.exit("lineEnding"),lA(A,s,"linePrefix")):(A.enter("chunkString",{contentType:"string"}),l(d))}function l(d){return d===n||d===null||eA(d)?(A.exit("chunkString"),s(d)):(A.consume(d),d===92?c:l)}function c(d){return d===n||d===92?(A.consume(d),l):l(d)}}function en(A,j){let e;return t;function t(r){return eA(r)?(A.enter("lineEnding"),A.consume(r),A.exit("lineEnding"),e=!0,t):pA(r)?lA(A,t,e?"linePrefix":"lineSuffix")(r):j(r)}}var ck={name:"definition",tokenize:oO},rO={tokenize:nO,partial:!0};function oO(A,j,e){let t=this,r;return o;function o(u){return A.enter("definition"),n(u)}function n(u){return hc.call(t,A,i,e,"definitionLabel","definitionLabelMarker","definitionLabelString")(u)}function i(u){return r=ce(t.sliceSerialize(t.events[t.events.length-1][1]).slice(1,-1)),u===58?(A.enter("definitionMarker"),A.consume(u),A.exit("definitionMarker"),a):e(u)}function a(u){return vA(u)?en(A,s)(u):s(u)}function s(u){return Bc(A,l,e,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(u)}function l(u){return A.attempt(rO,c,c)(u)}function c(u){return pA(u)?lA(A,d,"whitespace")(u):d(u)}function d(u){return u===null||eA(u)?(A.exit("definition"),t.parser.defined.push(r),j(u)):e(u)}}function nO(A,j,e){return t;function t(i){return vA(i)?en(A,r)(i):e(i)}function r(i){return gc(A,o,e,"definitionTitle","definitionTitleMarker","definitionTitleString")(i)}function o(i){return pA(i)?lA(A,n,"whitespace")(i):n(i)}function n(i){return i===null||eA(i)?j(i):e(i)}}var dk={name:"hardBreakEscape",tokenize:iO};function iO(A,j,e){return t;function t(o){return A.enter("hardBreakEscape"),A.consume(o),r}function r(o){return eA(o)?(A.exit("hardBreakEscape"),j(o)):e(o)}}var uk={name:"headingAtx",tokenize:sO,resolve:aO};function aO(A,j){let e=A.length-2,t=3,r,o;return A[t][1].type==="whitespace"&&(t+=2),e-2>t&&A[e][1].type==="whitespace"&&(e-=2),A[e][1].type==="atxHeadingSequence"&&(t===e-1||e-4>t&&A[e-2][1].type==="whitespace")&&(e-=t+1===e?2:4),e>t&&(r={type:"atxHeadingText",start:A[t][1].start,end:A[e][1].end},o={type:"chunkText",start:A[t][1].start,end:A[e][1].end,contentType:"text"},wj(A,t,e-t+1,[["enter",r,j],["enter",o,j],["exit",o,j],["exit",r,j]])),A}function sO(A,j,e){let t=0;return r;function r(l){return A.enter("atxHeading"),o(l)}function o(l){return A.enter("atxHeadingSequence"),n(l)}function n(l){return l===35&&t++<6?(A.consume(l),n):l===null||vA(l)?(A.exit("atxHeadingSequence"),i(l)):e(l)}function i(l){return l===35?(A.enter("atxHeadingSequence"),a(l)):l===null||eA(l)?(A.exit("atxHeading"),j(l)):pA(l)?lA(A,i,"whitespace")(l):(A.enter("atxHeadingText"),s(l))}function a(l){return l===35?(A.consume(l),a):(A.exit("atxHeadingSequence"),i(l))}function s(l){return l===null||l===35||vA(l)?(A.exit("atxHeadingText"),i(l)):(A.consume(l),s)}}var EG=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],pk=["pre","script","style","textarea"];var kk={name:"htmlFlow",tokenize:uO,resolveTo:dO,concrete:!0},lO={tokenize:kO,partial:!0},cO={tokenize:pO,partial:!0};function dO(A){let j=A.length;for(;j--&&!(A[j][0]==="enter"&&A[j][1].type==="htmlFlow"););return j>1&&A[j-2][1].type==="linePrefix"&&(A[j][1].start=A[j-2][1].start,A[j+1][1].start=A[j-2][1].start,A.splice(j-2,2)),A}function uO(A,j,e){let t=this,r,o,n,i,a;return s;function s(b){return l(b)}function l(b){return A.enter("htmlFlow"),A.enter("htmlFlowData"),A.consume(b),c}function c(b){return b===33?(A.consume(b),d):b===47?(A.consume(b),o=!0,m):b===63?(A.consume(b),r=3,t.interrupt?j:G):Vj(b)?(A.consume(b),n=String.fromCharCode(b),I):e(b)}function d(b){return b===45?(A.consume(b),r=2,u):b===91?(A.consume(b),r=5,i=0,k):Vj(b)?(A.consume(b),r=4,t.interrupt?j:G):e(b)}function u(b){return b===45?(A.consume(b),t.interrupt?j:G):e(b)}function k(b){let cj="CDATA[";return b===cj.charCodeAt(i++)?(A.consume(b),i===cj.length?t.interrupt?j:X:k):e(b)}function m(b){return Vj(b)?(A.consume(b),n=String.fromCharCode(b),I):e(b)}function I(b){if(b===null||b===47||b===62||vA(b)){let cj=b===47,ue=n.toLowerCase();return!cj&&!o&&pk.includes(ue)?(r=1,t.interrupt?j(b):X(b)):EG.includes(n.toLowerCase())?(r=6,cj?(A.consume(b),$):t.interrupt?j(b):X(b)):(r=7,t.interrupt&&!t.parser.lazy[t.now().line]?e(b):o?F(b):S(b))}return b===45||Gj(b)?(A.consume(b),n+=String.fromCharCode(b),I):e(b)}function $(b){return b===62?(A.consume(b),t.interrupt?j:X):e(b)}function F(b){return pA(b)?(A.consume(b),F):v(b)}function S(b){return b===47?(A.consume(b),v):b===58||b===95||Vj(b)?(A.consume(b),P):pA(b)?(A.consume(b),S):v(b)}function P(b){return b===45||b===46||b===58||b===95||Gj(b)?(A.consume(b),P):x(b)}function x(b){return b===61?(A.consume(b),C):pA(b)?(A.consume(b),x):S(b)}function C(b){return b===null||b===60||b===61||b===62||b===96?e(b):b===34||b===39?(A.consume(b),a=b,H):pA(b)?(A.consume(b),C):U(b)}function H(b){return b===a?(A.consume(b),a=null,z):b===null||eA(b)?e(b):(A.consume(b),H)}function U(b){return b===null||b===34||b===39||b===47||b===60||b===61||b===62||b===96||vA(b)?x(b):(A.consume(b),U)}function z(b){return b===47||b===62||pA(b)?S(b):e(b)}function v(b){return b===62?(A.consume(b),tA):e(b)}function tA(b){return b===null||eA(b)?X(b):pA(b)?(A.consume(b),tA):e(b)}function X(b){return b===45&&r===2?(A.consume(b),rA):b===60&&r===1?(A.consume(b),sA):b===62&&r===4?(A.consume(b),wA):b===63&&r===3?(A.consume(b),G):b===93&&r===5?(A.consume(b),MA):eA(b)&&(r===6||r===7)?(A.exit("htmlFlowData"),A.check(lO,lj,N)(b)):b===null||eA(b)?(A.exit("htmlFlowData"),N(b)):(A.consume(b),X)}function N(b){return A.check(cO,K,lj)(b)}function K(b){return A.enter("lineEnding"),A.consume(b),A.exit("lineEnding"),q}function q(b){return b===null||eA(b)?N(b):(A.enter("htmlFlowData"),X(b))}function rA(b){return b===45?(A.consume(b),G):X(b)}function sA(b){return b===47?(A.consume(b),n="",PA):X(b)}function PA(b){if(b===62){let cj=n.toLowerCase();return pk.includes(cj)?(A.consume(b),wA):X(b)}return Vj(b)&&n.length<8?(A.consume(b),n+=String.fromCharCode(b),PA):X(b)}function MA(b){return b===93?(A.consume(b),G):X(b)}function G(b){return b===62?(A.consume(b),wA):b===45&&r===2?(A.consume(b),G):X(b)}function wA(b){return b===null||eA(b)?(A.exit("htmlFlowData"),lj(b)):(A.consume(b),wA)}function lj(b){return A.exit("htmlFlow"),j(b)}}function pO(A,j,e){let t=this;return r;function r(n){return eA(n)?(A.enter("lineEnding"),A.consume(n),A.exit("lineEnding"),o):e(n)}function o(n){return t.parser.lazy[t.now().line]?e(n):j(n)}}function kO(A,j,e){return t;function t(r){return A.enter("lineEnding"),A.consume(r),A.exit("lineEnding"),A.attempt(Pt,j,e)}}var mk={name:"htmlText",tokenize:mO};function mO(A,j,e){let t=this,r,o,n;return i;function i(G){return A.enter("htmlText"),A.enter("htmlTextData"),A.consume(G),a}function a(G){return G===33?(A.consume(G),s):G===47?(A.consume(G),x):G===63?(A.consume(G),S):Vj(G)?(A.consume(G),U):e(G)}function s(G){return G===45?(A.consume(G),l):G===91?(A.consume(G),o=0,k):Vj(G)?(A.consume(G),F):e(G)}function l(G){return G===45?(A.consume(G),u):e(G)}function c(G){return G===null?e(G):G===45?(A.consume(G),d):eA(G)?(n=c,sA(G)):(A.consume(G),c)}function d(G){return G===45?(A.consume(G),u):c(G)}function u(G){return G===62?rA(G):G===45?d(G):c(G)}function k(G){let wA="CDATA[";return G===wA.charCodeAt(o++)?(A.consume(G),o===wA.length?m:k):e(G)}function m(G){return G===null?e(G):G===93?(A.consume(G),I):eA(G)?(n=m,sA(G)):(A.consume(G),m)}function I(G){return G===93?(A.consume(G),$):m(G)}function $(G){return G===62?rA(G):G===93?(A.consume(G),$):m(G)}function F(G){return G===null||G===62?rA(G):eA(G)?(n=F,sA(G)):(A.consume(G),F)}function S(G){return G===null?e(G):G===63?(A.consume(G),P):eA(G)?(n=S,sA(G)):(A.consume(G),S)}function P(G){return G===62?rA(G):S(G)}function x(G){return Vj(G)?(A.consume(G),C):e(G)}function C(G){return G===45||Gj(G)?(A.consume(G),C):H(G)}function H(G){return eA(G)?(n=H,sA(G)):pA(G)?(A.consume(G),H):rA(G)}function U(G){return G===45||Gj(G)?(A.consume(G),U):G===47||G===62||vA(G)?z(G):e(G)}function z(G){return G===47?(A.consume(G),rA):G===58||G===95||Vj(G)?(A.consume(G),v):eA(G)?(n=z,sA(G)):pA(G)?(A.consume(G),z):rA(G)}function v(G){return G===45||G===46||G===58||G===95||Gj(G)?(A.consume(G),v):tA(G)}function tA(G){return G===61?(A.consume(G),X):eA(G)?(n=tA,sA(G)):pA(G)?(A.consume(G),tA):z(G)}function X(G){return G===null||G===60||G===61||G===62||G===96?e(G):G===34||G===39?(A.consume(G),r=G,N):eA(G)?(n=X,sA(G)):pA(G)?(A.consume(G),X):(A.consume(G),K)}function N(G){return G===r?(A.consume(G),r=void 0,q):G===null?e(G):eA(G)?(n=N,sA(G)):(A.consume(G),N)}function K(G){return G===null||G===34||G===39||G===60||G===61||G===96?e(G):G===47||G===62||vA(G)?z(G):(A.consume(G),K)}function q(G){return G===47||G===62||vA(G)?z(G):e(G)}function rA(G){return G===62?(A.consume(G),A.exit("htmlTextData"),A.exit("htmlText"),j):e(G)}function sA(G){return A.exit("htmlTextData"),A.enter("lineEnding"),A.consume(G),A.exit("lineEnding"),PA}function PA(G){return pA(G)?lA(A,MA,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(G):MA(G)}function MA(G){return A.enter("htmlTextData"),n(G)}}var tn={name:"labelEnd",tokenize:gO,resolveTo:hO,resolveAll:BO},fO={tokenize:IO},EO={tokenize:RO},$O={tokenize:FO};function BO(A){let j=-1;for(;++j<A.length;){let e=A[j][1];(e.type==="labelImage"||e.type==="labelLink"||e.type==="labelEnd")&&(A.splice(j+1,e.type==="labelImage"?4:2),e.type="data",j++)}return A}function hO(A,j){let e=A.length,t=0,r,o,n,i;for(;e--;)if(r=A[e][1],o){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;A[e][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(n){if(A[e][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(o=e,r.type!=="labelLink")){t=2;break}}else r.type==="labelEnd"&&(n=e);let a={type:A[o][1].type==="labelLink"?"link":"image",start:Object.assign({},A[o][1].start),end:Object.assign({},A[A.length-1][1].end)},s={type:"label",start:Object.assign({},A[o][1].start),end:Object.assign({},A[n][1].end)},l={type:"labelText",start:Object.assign({},A[o+t+2][1].end),end:Object.assign({},A[n-2][1].start)};return i=[["enter",a,j],["enter",s,j]],i=he(i,A.slice(o+1,o+t+3)),i=he(i,[["enter",l,j]]),i=he(i,eo(j.parser.constructs.insideSpan.null,A.slice(o+t+4,n-3),j)),i=he(i,[["exit",l,j],A[n-2],A[n-1],["exit",s,j]]),i=he(i,A.slice(n+1)),i=he(i,[["exit",a,j]]),wj(A,o,A.length,i),A}function gO(A,j,e){let t=this,r=t.events.length,o,n;for(;r--;)if((t.events[r][1].type==="labelImage"||t.events[r][1].type==="labelLink")&&!t.events[r][1]._balanced){o=t.events[r][1];break}return i;function i(d){return o?o._inactive?c(d):(n=t.parser.defined.includes(ce(t.sliceSerialize({start:o.end,end:t.now()}))),A.enter("labelEnd"),A.enter("labelMarker"),A.consume(d),A.exit("labelMarker"),A.exit("labelEnd"),a):e(d)}function a(d){return d===40?A.attempt(fO,l,n?l:c)(d):d===91?A.attempt(EO,l,n?s:c)(d):n?l(d):c(d)}function s(d){return A.attempt($O,l,c)(d)}function l(d){return j(d)}function c(d){return o._balanced=!0,e(d)}}function IO(A,j,e){return t;function t(c){return A.enter("resource"),A.enter("resourceMarker"),A.consume(c),A.exit("resourceMarker"),r}function r(c){return vA(c)?en(A,o)(c):o(c)}function o(c){return c===41?l(c):Bc(A,n,i,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(c)}function n(c){return vA(c)?en(A,a)(c):l(c)}function i(c){return e(c)}function a(c){return c===34||c===39||c===40?gc(A,s,e,"resourceTitle","resourceTitleMarker","resourceTitleString")(c):l(c)}function s(c){return vA(c)?en(A,l)(c):l(c)}function l(c){return c===41?(A.enter("resourceMarker"),A.consume(c),A.exit("resourceMarker"),A.exit("resource"),j):e(c)}}function RO(A,j,e){let t=this;return r;function r(i){return hc.call(t,A,o,n,"reference","referenceMarker","referenceString")(i)}function o(i){return t.parser.defined.includes(ce(t.sliceSerialize(t.events[t.events.length-1][1]).slice(1,-1)))?j(i):e(i)}function n(i){return e(i)}}function FO(A,j,e){return t;function t(o){return A.enter("reference"),A.enter("referenceMarker"),A.consume(o),A.exit("referenceMarker"),r}function r(o){return o===93?(A.enter("referenceMarker"),A.consume(o),A.exit("referenceMarker"),A.exit("reference"),j):e(o)}}var fk={name:"labelStartImage",tokenize:yO,resolveAll:tn.resolveAll};function yO(A,j,e){let t=this;return r;function r(i){return A.enter("labelImage"),A.enter("labelImageMarker"),A.consume(i),A.exit("labelImageMarker"),o}function o(i){return i===91?(A.enter("labelMarker"),A.consume(i),A.exit("labelMarker"),A.exit("labelImage"),n):e(i)}function n(i){return i===94&&"_hiddenFootnoteSupport"in t.parser.constructs?e(i):j(i)}}var Ek={name:"labelStartLink",tokenize:SO,resolveAll:tn.resolveAll};function SO(A,j,e){let t=this;return r;function r(n){return A.enter("labelLink"),A.enter("labelMarker"),A.consume(n),A.exit("labelMarker"),A.exit("labelLink"),o}function o(n){return n===94&&"_hiddenFootnoteSupport"in t.parser.constructs?e(n):j(n)}}var os={name:"lineEnding",tokenize:GO};function GO(A,j){return e;function e(t){return A.enter("lineEnding"),A.consume(t),A.exit("lineEnding"),lA(A,j,"linePrefix")}}var rn={name:"thematicBreak",tokenize:bO};function bO(A,j,e){let t=0,r;return o;function o(s){return A.enter("thematicBreak"),n(s)}function n(s){return r=s,i(s)}function i(s){return s===r?(A.enter("thematicBreakSequence"),a(s)):t>=3&&(s===null||eA(s))?(A.exit("thematicBreak"),j(s)):e(s)}function a(s){return s===r?(A.consume(s),t++,a):(A.exit("thematicBreakSequence"),pA(s)?lA(A,i,"whitespace")(s):i(s))}}var de={name:"list",tokenize:TO,continuation:{tokenize:xO},exit:MO},CO={tokenize:DO,partial:!0},vO={tokenize:PO,partial:!0};function TO(A,j,e){let t=this,r=t.events[t.events.length-1],o=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,n=0;return i;function i(u){let k=t.containerState.type||(u===42||u===43||u===45?"listUnordered":"listOrdered");if(k==="listUnordered"?!t.containerState.marker||u===t.containerState.marker:As(u)){if(t.containerState.type||(t.containerState.type=k,A.enter(k,{_container:!0})),k==="listUnordered")return A.enter("listItemPrefix"),u===42||u===45?A.check(rn,e,s)(u):s(u);if(!t.interrupt||u===49)return A.enter("listItemPrefix"),A.enter("listItemValue"),a(u)}return e(u)}function a(u){return As(u)&&++n<10?(A.consume(u),a):(!t.interrupt||n<2)&&(t.containerState.marker?u===t.containerState.marker:u===41||u===46)?(A.exit("listItemValue"),s(u)):e(u)}function s(u){return A.enter("listItemMarker"),A.consume(u),A.exit("listItemMarker"),t.containerState.marker=t.containerState.marker||u,A.check(Pt,t.interrupt?e:l,A.attempt(CO,d,c))}function l(u){return t.containerState.initialBlankLine=!0,o++,d(u)}function c(u){return pA(u)?(A.enter("listItemPrefixWhitespace"),A.consume(u),A.exit("listItemPrefixWhitespace"),d):e(u)}function d(u){return t.containerState.size=o+t.sliceSerialize(A.exit("listItemPrefix"),!0).length,j(u)}}function xO(A,j,e){let t=this;return t.containerState._closeFlow=void 0,A.check(Pt,r,o);function r(i){return t.containerState.furtherBlankLines=t.containerState.furtherBlankLines||t.containerState.initialBlankLine,lA(A,j,"listItemIndent",t.containerState.size+1)(i)}function o(i){return t.containerState.furtherBlankLines||!pA(i)?(t.containerState.furtherBlankLines=void 0,t.containerState.initialBlankLine=void 0,n(i)):(t.containerState.furtherBlankLines=void 0,t.containerState.initialBlankLine=void 0,A.attempt(vO,j,n)(i))}function n(i){return t.containerState._closeFlow=!0,t.interrupt=void 0,lA(A,A.attempt(de,j,e),"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}function PO(A,j,e){let t=this;return lA(A,r,"listItemIndent",t.containerState.size+1);function r(o){let n=t.events[t.events.length-1];return n&&n[1].type==="listItemIndent"&&n[2].sliceSerialize(n[1],!0).length===t.containerState.size?j(o):e(o)}}function MO(A){A.exit(this.containerState.type)}function DO(A,j,e){let t=this;return lA(A,r,"listItemPrefixWhitespace",t.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(o){let n=t.events[t.events.length-1];return!pA(o)&&n&&n[1].type==="listItemPrefixWhitespace"?j(o):e(o)}}var Ic={name:"setextUnderline",tokenize:NO,resolveTo:_O};function _O(A,j){let e=A.length,t,r,o;for(;e--;)if(A[e][0]==="enter"){if(A[e][1].type==="content"){t=e;break}A[e][1].type==="paragraph"&&(r=e)}else A[e][1].type==="content"&&A.splice(e,1),!o&&A[e][1].type==="definition"&&(o=e);let n={type:"setextHeading",start:Object.assign({},A[r][1].start),end:Object.assign({},A[A.length-1][1].end)};return A[r][1].type="setextHeadingText",o?(A.splice(r,0,["enter",n,j]),A.splice(o+1,0,["exit",A[t][1],j]),A[t][1].end=Object.assign({},A[o][1].end)):A[t][1]=n,A.push(["exit",n,j]),A}function NO(A,j,e){let t=this,r;return o;function o(s){let l=t.events.length,c;for(;l--;)if(t.events[l][1].type!=="lineEnding"&&t.events[l][1].type!=="linePrefix"&&t.events[l][1].type!=="content"){c=t.events[l][1].type==="paragraph";break}return!t.parser.lazy[t.now().line]&&(t.interrupt||c)?(A.enter("setextHeadingLine"),r=s,n(s)):e(s)}function n(s){return A.enter("setextHeadingLineSequence"),i(s)}function i(s){return s===r?(A.consume(s),i):(A.exit("setextHeadingLineSequence"),pA(s)?lA(A,a,"lineSuffix")(s):a(s))}function a(s){return s===null||eA(s)?(A.exit("setextHeadingLine"),j(s)):e(s)}}var OO={tokenize:JO,partial:!0};function $k(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:VO,continuation:{tokenize:KO},exit:HO}},text:{91:{name:"gfmFootnoteCall",tokenize:qO},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:wO,resolveTo:LO}}}}function wO(A,j,e){let t=this,r=t.events.length,o=t.parser.gfmFootnotes||(t.parser.gfmFootnotes=[]),n;for(;r--;){let a=t.events[r][1];if(a.type==="labelImage"){n=a;break}if(a.type==="gfmFootnoteCall"||a.type==="labelLink"||a.type==="label"||a.type==="image"||a.type==="link")break}return i;function i(a){if(!n||!n._balanced)return e(a);let s=ce(t.sliceSerialize({start:n.end,end:t.now()}));return s.codePointAt(0)!==94||!o.includes(s.slice(1))?e(a):(A.enter("gfmFootnoteCallLabelMarker"),A.consume(a),A.exit("gfmFootnoteCallLabelMarker"),j(a))}}function LO(A,j){let e=A.length,t;for(;e--;)if(A[e][1].type==="labelImage"&&A[e][0]==="enter"){t=A[e][1];break}A[e+1][1].type="data",A[e+3][1].type="gfmFootnoteCallLabelMarker";let r={type:"gfmFootnoteCall",start:Object.assign({},A[e+3][1].start),end:Object.assign({},A[A.length-1][1].end)},o={type:"gfmFootnoteCallMarker",start:Object.assign({},A[e+3][1].end),end:Object.assign({},A[e+3][1].end)};o.end.column++,o.end.offset++,o.end._bufferIndex++;let n={type:"gfmFootnoteCallString",start:Object.assign({},o.end),end:Object.assign({},A[A.length-1][1].start)},i={type:"chunkString",contentType:"string",start:Object.assign({},n.start),end:Object.assign({},n.end)},a=[A[e+1],A[e+2],["enter",r,j],A[e+3],A[e+4],["enter",o,j],["exit",o,j],["enter",n,j],["enter",i,j],["exit",i,j],["exit",n,j],A[A.length-2],A[A.length-1],["exit",r,j]];return A.splice(e,A.length-e+1,...a),A}function qO(A,j,e){let t=this,r=t.parser.gfmFootnotes||(t.parser.gfmFootnotes=[]),o=0,n;return i;function i(c){return A.enter("gfmFootnoteCall"),A.enter("gfmFootnoteCallLabelMarker"),A.consume(c),A.exit("gfmFootnoteCallLabelMarker"),a}function a(c){return c!==94?e(c):(A.enter("gfmFootnoteCallMarker"),A.consume(c),A.exit("gfmFootnoteCallMarker"),A.enter("gfmFootnoteCallString"),A.enter("chunkString").contentType="string",s)}function s(c){if(o>999||c===93&&!n||c===null||c===91||vA(c))return e(c);if(c===93){A.exit("chunkString");let d=A.exit("gfmFootnoteCallString");return r.includes(ce(t.sliceSerialize(d)))?(A.enter("gfmFootnoteCallLabelMarker"),A.consume(c),A.exit("gfmFootnoteCallLabelMarker"),A.exit("gfmFootnoteCall"),j):e(c)}return vA(c)||(n=!0),o++,A.consume(c),c===92?l:s}function l(c){return c===91||c===92||c===93?(A.consume(c),o++,s):s(c)}}function VO(A,j,e){let t=this,r=t.parser.gfmFootnotes||(t.parser.gfmFootnotes=[]),o,n=0,i;return a;function a(k){return A.enter("gfmFootnoteDefinition")._container=!0,A.enter("gfmFootnoteDefinitionLabel"),A.enter("gfmFootnoteDefinitionLabelMarker"),A.consume(k),A.exit("gfmFootnoteDefinitionLabelMarker"),s}function s(k){return k===94?(A.enter("gfmFootnoteDefinitionMarker"),A.consume(k),A.exit("gfmFootnoteDefinitionMarker"),A.enter("gfmFootnoteDefinitionLabelString"),A.enter("chunkString").contentType="string",l):e(k)}function l(k){if(n>999||k===93&&!i||k===null||k===91||vA(k))return e(k);if(k===93){A.exit("chunkString");let m=A.exit("gfmFootnoteDefinitionLabelString");return o=ce(t.sliceSerialize(m)),A.enter("gfmFootnoteDefinitionLabelMarker"),A.consume(k),A.exit("gfmFootnoteDefinitionLabelMarker"),A.exit("gfmFootnoteDefinitionLabel"),d}return vA(k)||(i=!0),n++,A.consume(k),k===92?c:l}function c(k){return k===91||k===92||k===93?(A.consume(k),n++,l):l(k)}function d(k){return k===58?(A.enter("definitionMarker"),A.consume(k),A.exit("definitionMarker"),r.includes(o)||r.push(o),lA(A,u,"gfmFootnoteDefinitionWhitespace")):e(k)}function u(k){return j(k)}}function KO(A,j,e){return A.check(Pt,j,A.attempt(OO,j,e))}function HO(A){A.exit("gfmFootnoteDefinition")}function JO(A,j,e){let t=this;return lA(A,r,"gfmFootnoteDefinitionIndent",5);function r(o){let n=t.events[t.events.length-1];return n&&n[1].type==="gfmFootnoteDefinitionIndent"&&n[2].sliceSerialize(n[1],!0).length===4?j(o):e(o)}}function Bk(A){let e=(A||{}).singleTilde,t={name:"strikethrough",tokenize:o,resolveAll:r};return e==null&&(e=!0),{text:{126:t},insideSpan:{null:[t]},attentionMarkers:{null:[126]}};function r(n,i){let a=-1;for(;++a<n.length;)if(n[a][0]==="enter"&&n[a][1].type==="strikethroughSequenceTemporary"&&n[a][1]._close){let s=a;for(;s--;)if(n[s][0]==="exit"&&n[s][1].type==="strikethroughSequenceTemporary"&&n[s][1]._open&&n[a][1].end.offset-n[a][1].start.offset===n[s][1].end.offset-n[s][1].start.offset){n[a][1].type="strikethroughSequence",n[s][1].type="strikethroughSequence";let l={type:"strikethrough",start:Object.assign({},n[s][1].start),end:Object.assign({},n[a][1].end)},c={type:"strikethroughText",start:Object.assign({},n[s][1].end),end:Object.assign({},n[a][1].start)},d=[["enter",l,i],["enter",n[s][1],i],["exit",n[s][1],i],["enter",c,i]],u=i.parser.constructs.insideSpan.null;u&&wj(d,d.length,0,eo(u,n.slice(s+1,a),i)),wj(d,d.length,0,[["exit",c,i],["enter",n[a][1],i],["exit",n[a][1],i],["exit",l,i]]),wj(n,s-1,a-s+3,d),a=s+d.length-2;break}}for(a=-1;++a<n.length;)n[a][1].type==="strikethroughSequenceTemporary"&&(n[a][1].type="data");return n}function o(n,i,a){let s=this.previous,l=this.events,c=0;return d;function d(k){return s===126&&l[l.length-1][1].type!=="characterEscape"?a(k):(n.enter("strikethroughSequenceTemporary"),u(k))}function u(k){let m=di(s);if(k===126)return c>1?a(k):(n.consume(k),c++,u);if(c<2&&!e)return a(k);let I=n.exit("strikethroughSequenceTemporary"),$=di(k);return I._open=!$||$===2&&!!m,I._close=!m||m===2&&!!$,i(k)}}}var Rc=class{constructor(){this.map=[]}add(j,e,t){UO(this,j,e,t)}consume(j){if(this.map.sort(function(o,n){return o[0]-n[0]}),this.map.length===0)return;let e=this.map.length,t=[];for(;e>0;)e-=1,t.push(j.slice(this.map[e][0]+this.map[e][1]),this.map[e][2]),j.length=this.map[e][0];t.push(j.slice()),j.length=0;let r=t.pop();for(;r;){for(let o of r)j.push(o);r=t.pop()}this.map.length=0}};function UO(A,j,e,t){let r=0;if(!(e===0&&t.length===0)){for(;r<A.map.length;){if(A.map[r][0]===j){A.map[r][1]+=e,A.map[r][2].push(...t);return}r+=1}A.map.push([j,e,t])}}function $G(A,j){let e=!1,t=[];for(;j<A.length;){let r=A[j];if(e){if(r[0]==="enter")r[1].type==="tableContent"&&t.push(A[j+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(A[j-1][1].type==="tableDelimiterMarker"){let o=t.length-1;t[o]=t[o]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(e=!0);j+=1}return t}function hk(){return{flow:{null:{name:"table",tokenize:QO,resolveAll:zO}}}}function QO(A,j,e){let t=this,r=0,o=0,n;return i;function i(v){let tA=t.events.length-1;for(;tA>-1;){let K=t.events[tA][1].type;if(K==="lineEnding"||K==="linePrefix")tA--;else break}let X=tA>-1?t.events[tA][1].type:null,N=X==="tableHead"||X==="tableRow"?C:a;return N===C&&t.parser.lazy[t.now().line]?e(v):N(v)}function a(v){return A.enter("tableHead"),A.enter("tableRow"),s(v)}function s(v){return v===124||(n=!0,o+=1),l(v)}function l(v){return v===null?e(v):eA(v)?o>1?(o=0,t.interrupt=!0,A.exit("tableRow"),A.enter("lineEnding"),A.consume(v),A.exit("lineEnding"),u):e(v):pA(v)?lA(A,l,"whitespace")(v):(o+=1,n&&(n=!1,r+=1),v===124?(A.enter("tableCellDivider"),A.consume(v),A.exit("tableCellDivider"),n=!0,l):(A.enter("data"),c(v)))}function c(v){return v===null||v===124||vA(v)?(A.exit("data"),l(v)):(A.consume(v),v===92?d:c)}function d(v){return v===92||v===124?(A.consume(v),c):c(v)}function u(v){return t.interrupt=!1,t.parser.lazy[t.now().line]?e(v):(A.enter("tableDelimiterRow"),n=!1,pA(v)?lA(A,k,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(v):k(v))}function k(v){return v===45||v===58?I(v):v===124?(n=!0,A.enter("tableCellDivider"),A.consume(v),A.exit("tableCellDivider"),m):x(v)}function m(v){return pA(v)?lA(A,I,"whitespace")(v):I(v)}function I(v){return v===58?(o+=1,n=!0,A.enter("tableDelimiterMarker"),A.consume(v),A.exit("tableDelimiterMarker"),$):v===45?(o+=1,$(v)):v===null||eA(v)?P(v):x(v)}function $(v){return v===45?(A.enter("tableDelimiterFiller"),F(v)):x(v)}function F(v){return v===45?(A.consume(v),F):v===58?(n=!0,A.exit("tableDelimiterFiller"),A.enter("tableDelimiterMarker"),A.consume(v),A.exit("tableDelimiterMarker"),S):(A.exit("tableDelimiterFiller"),S(v))}function S(v){return pA(v)?lA(A,P,"whitespace")(v):P(v)}function P(v){return v===124?k(v):v===null||eA(v)?!n||r!==o?x(v):(A.exit("tableDelimiterRow"),A.exit("tableHead"),j(v)):x(v)}function x(v){return e(v)}function C(v){return A.enter("tableRow"),H(v)}function H(v){return v===124?(A.enter("tableCellDivider"),A.consume(v),A.exit("tableCellDivider"),H):v===null||eA(v)?(A.exit("tableRow"),j(v)):pA(v)?lA(A,H,"whitespace")(v):(A.enter("data"),U(v))}function U(v){return v===null||v===124||vA(v)?(A.exit("data"),H(v)):(A.consume(v),v===92?z:U)}function z(v){return v===92||v===124?(A.consume(v),U):U(v)}}function zO(A,j){let e=-1,t=!0,r=0,o=[0,0,0,0],n=[0,0,0,0],i=!1,a=0,s,l,c,d=new Rc;for(;++e<A.length;){let u=A[e],k=u[1];u[0]==="enter"?k.type==="tableHead"?(i=!1,a!==0&&(BG(d,j,a,s,l),l=void 0,a=0),s={type:"table",start:Object.assign({},k.start),end:Object.assign({},k.end)},d.add(e,0,[["enter",s,j]])):k.type==="tableRow"||k.type==="tableDelimiterRow"?(t=!0,c=void 0,o=[0,0,0,0],n=[0,e+1,0,0],i&&(i=!1,l={type:"tableBody",start:Object.assign({},k.start),end:Object.assign({},k.end)},d.add(e,0,[["enter",l,j]])),r=k.type==="tableDelimiterRow"?2:l?3:1):r&&(k.type==="data"||k.type==="tableDelimiterMarker"||k.type==="tableDelimiterFiller")?(t=!1,n[2]===0&&(o[1]!==0&&(n[0]=n[1],c=Fc(d,j,o,r,void 0,c),o=[0,0,0,0]),n[2]=e)):k.type==="tableCellDivider"&&(t?t=!1:(o[1]!==0&&(n[0]=n[1],c=Fc(d,j,o,r,void 0,c)),o=n,n=[o[1],e,0,0])):k.type==="tableHead"?(i=!0,a=e):k.type==="tableRow"||k.type==="tableDelimiterRow"?(a=e,o[1]!==0?(n[0]=n[1],c=Fc(d,j,o,r,e,c)):n[1]!==0&&(c=Fc(d,j,n,r,e,c)),r=0):r&&(k.type==="data"||k.type==="tableDelimiterMarker"||k.type==="tableDelimiterFiller")&&(n[3]=e)}for(a!==0&&BG(d,j,a,s,l),d.consume(j.events),e=-1;++e<j.events.length;){let u=j.events[e];u[0]==="enter"&&u[1].type==="table"&&(u[1]._align=$G(j.events,e))}return A}function Fc(A,j,e,t,r,o){let n=t===1?"tableHeader":t===2?"tableDelimiter":"tableData",i="tableContent";e[0]!==0&&(o.end=Object.assign({},ui(j.events,e[0])),A.add(e[0],0,[["exit",o,j]]));let a=ui(j.events,e[1]);if(o={type:n,start:Object.assign({},a),end:Object.assign({},a)},A.add(e[1],0,[["enter",o,j]]),e[2]!==0){let s=ui(j.events,e[2]),l=ui(j.events,e[3]),c={type:i,start:Object.assign({},s),end:Object.assign({},l)};if(A.add(e[2],0,[["enter",c,j]]),t!==2){let d=j.events[e[2]],u=j.events[e[3]];if(d[1].end=Object.assign({},u[1].end),d[1].type="chunkText",d[1].contentType="text",e[3]>e[2]+1){let k=e[2]+1,m=e[3]-e[2]-1;A.add(k,m,[])}}A.add(e[3]+1,0,[["exit",c,j]])}return r!==void 0&&(o.end=Object.assign({},ui(j.events,r)),A.add(r,0,[["exit",o,j]]),o=void 0),o}function BG(A,j,e,t,r){let o=[],n=ui(j.events,e);r&&(r.end=Object.assign({},n),o.push(["exit",r,j])),t.end=Object.assign({},n),o.push(["exit",t,j]),A.add(e+1,0,o)}function ui(A,j){let e=A[j],t=e[0]==="enter"?"start":"end";return e[1][t]}var WO={name:"tasklistCheck",tokenize:XO};function gk(){return{text:{91:WO}}}function XO(A,j,e){let t=this;return r;function r(a){return t.previous!==null||!t._gfmTasklistFirstContentOfListItem?e(a):(A.enter("taskListCheck"),A.enter("taskListCheckMarker"),A.consume(a),A.exit("taskListCheckMarker"),o)}function o(a){return vA(a)?(A.enter("taskListCheckValueUnchecked"),A.consume(a),A.exit("taskListCheckValueUnchecked"),n):a===88||a===120?(A.enter("taskListCheckValueChecked"),A.consume(a),A.exit("taskListCheckValueChecked"),n):e(a)}function n(a){return a===93?(A.enter("taskListCheckMarker"),A.consume(a),A.exit("taskListCheckMarker"),A.exit("taskListCheck"),i):e(a)}function i(a){return eA(a)?j(a):pA(a)?A.check({tokenize:YO},j,e)(a):e(a)}}function YO(A,j,e){return lA(A,t,"whitespace");function t(r){return r===null?e(r):j(r)}}function hG(A){return uc([nk(),$k(),Bk(A),hk(),gk()])}var ZO={};function ns(A){let j=this,e=A||ZO,t=j.data(),r=t.micromarkExtensions||(t.micromarkExtensions=[]),o=t.fromMarkdownExtensions||(t.fromMarkdownExtensions=[]),n=t.toMarkdownExtensions||(t.toMarkdownExtensions=[]);r.push(hG(e)),o.push(tk()),n.push(rk(e))}var gG={tokenize:A1};function A1(A){let j=A.attempt(this.parser.constructs.contentInitial,t,r),e;return j;function t(i){if(i===null){A.consume(i);return}return A.enter("lineEnding"),A.consume(i),A.exit("lineEnding"),lA(A,j,"linePrefix")}function r(i){return A.enter("paragraph"),o(i)}function o(i){let a=A.enter("chunkText",{contentType:"text",previous:e});return e&&(e.next=a),e=a,n(i)}function n(i){if(i===null){A.exit("chunkText"),A.exit("paragraph"),A.consume(i);return}return eA(i)?(A.consume(i),A.exit("chunkText"),o):(A.consume(i),n)}}var RG={tokenize:j1},IG={tokenize:e1};function j1(A){let j=this,e=[],t=0,r,o,n;return i;function i(S){if(t<e.length){let P=e[t];return j.containerState=P[1],A.attempt(P[0].continuation,a,s)(S)}return s(S)}function a(S){if(t++,j.containerState._closeFlow){j.containerState._closeFlow=void 0,r&&F();let P=j.events.length,x=P,C;for(;x--;)if(j.events[x][0]==="exit"&&j.events[x][1].type==="chunkFlow"){C=j.events[x][1].end;break}$(t);let H=P;for(;H<j.events.length;)j.events[H][1].end=Object.assign({},C),H++;return wj(j.events,x+1,0,j.events.slice(P)),j.events.length=H,s(S)}return i(S)}function s(S){if(t===e.length){if(!r)return d(S);if(r.currentConstruct&&r.currentConstruct.concrete)return k(S);j.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return j.containerState={},A.check(IG,l,c)(S)}function l(S){return r&&F(),$(t),d(S)}function c(S){return j.parser.lazy[j.now().line]=t!==e.length,n=j.now().offset,k(S)}function d(S){return j.containerState={},A.attempt(IG,u,k)(S)}function u(S){return t++,e.push([j.currentConstruct,j.containerState]),d(S)}function k(S){if(S===null){r&&F(),$(0),A.consume(S);return}return r=r||j.parser.flow(j.now()),A.enter("chunkFlow",{contentType:"flow",previous:o,_tokenizer:r}),m(S)}function m(S){if(S===null){I(A.exit("chunkFlow"),!0),$(0),A.consume(S);return}return eA(S)?(A.consume(S),I(A.exit("chunkFlow")),t=0,j.interrupt=void 0,i):(A.consume(S),m)}function I(S,P){let x=j.sliceStream(S);if(P&&x.push(null),S.previous=o,o&&(o.next=S),o=S,r.defineSkip(S.start),r.write(x),j.parser.lazy[S.start.line]){let C=r.events.length;for(;C--;)if(r.events[C][1].start.offset<n&&(!r.events[C][1].end||r.events[C][1].end.offset>n))return;let H=j.events.length,U=H,z,v;for(;U--;)if(j.events[U][0]==="exit"&&j.events[U][1].type==="chunkFlow"){if(z){v=j.events[U][1].end;break}z=!0}for($(t),C=H;C<j.events.length;)j.events[C][1].end=Object.assign({},v),C++;wj(j.events,U+1,0,j.events.slice(H)),j.events.length=C}}function $(S){let P=e.length;for(;P-- >S;){let x=e[P];j.containerState=x[1],x[0].exit.call(j,A)}e.length=S}function F(){r.write([null]),o=void 0,r=void 0,j.containerState._closeFlow=void 0}}function e1(A,j,e){return lA(A,A.attempt(this.parser.constructs.document,j,e),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}var FG={tokenize:t1};function t1(A){let j=this,e=A.attempt(Pt,t,A.attempt(this.parser.constructs.flowInitial,r,lA(A,A.attempt(this.parser.constructs.flow,r,A.attempt(lk,r)),"linePrefix")));return e;function t(o){if(o===null){A.consume(o);return}return A.enter("lineEndingBlank"),A.consume(o),A.exit("lineEndingBlank"),j.currentConstruct=void 0,e}function r(o){if(o===null){A.consume(o);return}return A.enter("lineEnding"),A.consume(o),A.exit("lineEnding"),j.currentConstruct=void 0,e}}var yG={resolveAll:CG()},SG=bG("string"),GG=bG("text");function bG(A){return{tokenize:j,resolveAll:CG(A==="text"?r1:void 0)};function j(e){let t=this,r=this.parser.constructs[A],o=e.attempt(r,n,i);return n;function n(l){return s(l)?o(l):i(l)}function i(l){if(l===null){e.consume(l);return}return e.enter("data"),e.consume(l),a}function a(l){return s(l)?(e.exit("data"),o(l)):(e.consume(l),a)}function s(l){if(l===null)return!0;let c=r[l],d=-1;if(c)for(;++d<c.length;){let u=c[d];if(!u.previous||u.previous.call(t,t.previous))return!0}return!1}}}function CG(A){return j;function j(e,t){let r=-1,o;for(;++r<=e.length;)o===void 0?e[r]&&e[r][1].type==="data"&&(o=r,r++):(!e[r]||e[r][1].type!=="data")&&(r!==o+2&&(e[o][1].end=e[r-1][1].end,e.splice(o+2,r-o-2),r=o+2),o=void 0);return A?A(e,t):e}}function r1(A,j){let e=0;for(;++e<=A.length;)if((e===A.length||A[e][1].type==="lineEnding")&&A[e-1][1].type==="data"){let t=A[e-1][1],r=j.sliceStream(t),o=r.length,n=-1,i=0,a;for(;o--;){let s=r[o];if(typeof s=="string"){for(n=s.length;s.charCodeAt(n-1)===32;)i++,n--;if(n)break;n=-1}else if(s===-2)a=!0,i++;else if(s!==-1){o++;break}}if(i){let s={type:e===A.length||a||i<2?"lineSuffix":"hardBreakTrailing",start:{line:t.end.line,column:t.end.column-i,offset:t.end.offset-i,_index:t.start._index+o,_bufferIndex:o?n:t.start._bufferIndex+n},end:Object.assign({},t.end)};t.end=Object.assign({},s.start),t.start.offset===t.end.offset?Object.assign(t,s):(A.splice(e,0,["enter",s,j],["exit",s,j]),e+=2)}e++}return A}function vG(A,j,e){let t=Object.assign(e?Object.assign({},e):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1}),r={},o=[],n=[],i=[],a=!0,s={consume:P,enter:x,exit:C,attempt:z(H),check:z(U),interrupt:z(U,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:A,sliceStream:m,sliceSerialize:k,now:I,defineSkip:$,write:u},c=j.tokenize.call(l,s),d;return j.resolveAll&&o.push(j),l;function u(N){return n=he(n,N),F(),n[n.length-1]!==null?[]:(v(j,0),l.events=eo(o,l.events,l),l.events)}function k(N,K){return n1(m(N),K)}function m(N){return o1(n,N)}function I(){let{line:N,column:K,offset:q,_index:rA,_bufferIndex:sA}=t;return{line:N,column:K,offset:q,_index:rA,_bufferIndex:sA}}function $(N){r[N.line]=N.column,X()}function F(){let N;for(;t._index<n.length;){let K=n[t._index];if(typeof K=="string")for(N=t._index,t._bufferIndex<0&&(t._bufferIndex=0);t._index===N&&t._bufferIndex<K.length;)S(K.charCodeAt(t._bufferIndex));else S(K)}}function S(N){a=void 0,d=N,c=c(N)}function P(N){eA(N)?(t.line++,t.column=1,t.offset+=N===-3?2:1,X()):N!==-1&&(t.column++,t.offset++),t._bufferIndex<0?t._index++:(t._bufferIndex++,t._bufferIndex===n[t._index].length&&(t._bufferIndex=-1,t._index++)),l.previous=N,a=!0}function x(N,K){let q=K||{};return q.type=N,q.start=I(),l.events.push(["enter",q,l]),i.push(q),q}function C(N){let K=i.pop();return K.end=I(),l.events.push(["exit",K,l]),K}function H(N,K){v(N,K.from)}function U(N,K){K.restore()}function z(N,K){return q;function q(rA,sA,PA){let MA,G,wA,lj;return Array.isArray(rA)?cj(rA):"tokenize"in rA?cj([rA]):b(rA);function b(Tj){return kr;function kr(we){let At=we!==null&&Tj[we],jt=we!==null&&Tj.null,mr=[...Array.isArray(At)?At:At?[At]:[],...Array.isArray(jt)?jt:jt?[jt]:[]];return cj(mr)(we)}}function cj(Tj){return MA=Tj,G=0,Tj.length===0?PA:ue(Tj[G])}function ue(Tj){return kr;function kr(we){return lj=tA(),wA=Tj,Tj.partial||(l.currentConstruct=Tj),Tj.name&&l.parser.constructs.disable.null.includes(Tj.name)?pr(we):Tj.tokenize.call(K?Object.assign(Object.create(l),K):l,s,ur,pr)(we)}}function ur(Tj){return a=!0,N(wA,lj),sA}function pr(Tj){return a=!0,lj.restore(),++G<MA.length?ue(MA[G]):PA}}}function v(N,K){N.resolveAll&&!o.includes(N)&&o.push(N),N.resolve&&wj(l.events,K,l.events.length-K,N.resolve(l.events.slice(K),l)),N.resolveTo&&(l.events=N.resolveTo(l.events,l))}function tA(){let N=I(),K=l.previous,q=l.currentConstruct,rA=l.events.length,sA=Array.from(i);return{restore:PA,from:rA};function PA(){t=N,l.previous=K,l.currentConstruct=q,l.events.length=rA,i=sA,X()}}function X(){t.line in r&&t.column<2&&(t.column=r[t.line],t.offset+=r[t.line]-1)}}function o1(A,j){let e=j.start._index,t=j.start._bufferIndex,r=j.end._index,o=j.end._bufferIndex,n;if(e===r)n=[A[e].slice(t,o)];else{if(n=A.slice(e,r),t>-1){let i=n[0];typeof i=="string"?n[0]=i.slice(t):n.shift()}o>0&&n.push(A[r].slice(0,o))}return n}function n1(A,j){let e=-1,t=[],r;for(;++e<A.length;){let o=A[e],n;if(typeof o=="string")n=o;else switch(o){case-5:{n="\r";break}case-4:{n=`
`;break}case-3:{n=`\r
`;break}case-2:{n=j?" ":"	";break}case-1:{if(!j&&r)continue;n=" ";break}default:n=String.fromCharCode(o)}r=o===-2,t.push(n)}return t.join("")}var Ik={};am(Ik,{attentionMarkers:()=>p1,contentInitial:()=>a1,disable:()=>k1,document:()=>i1,flow:()=>l1,flowInitial:()=>s1,insideSpan:()=>u1,string:()=>c1,text:()=>d1});var i1={42:de,43:de,45:de,48:de,49:de,50:de,51:de,52:de,53:de,54:de,55:de,56:de,57:de,62:pc},a1={91:ck},s1={[-2]:ts,[-1]:ts,32:ts},l1={35:uk,42:rn,45:[Ic,rn],60:kk,61:Ic,95:rn,96:fc,126:fc},c1={38:mc,92:kc},d1={[-5]:os,[-4]:os,[-3]:os,33:fk,38:mc,42:es,60:[ak,mk],91:Ek,92:[dk,kc],93:tn,95:es,96:sk},u1={null:[es,yG]},p1={null:[42,95]},k1={null:[]};function Rk(A){let e=uc([Ik,...(A||{}).extensions||[]]),t={defined:[],lazy:{},constructs:e,content:r(gG),document:r(RG),flow:r(FG),string:r(SG),text:r(GG)};return t;function r(o){return n;function n(i){return vG(t,o,i)}}}function Fk(A){for(;!$c(A););return A}var TG=/[\0\t\n\r]/g;function yk(){let A=1,j="",e=!0,t;return r;function r(o,n,i){let a=[],s,l,c,d,u;for(o=j+(typeof o=="string"?o.toString():new TextDecoder(n||void 0).decode(o)),c=0,j="",e&&(o.charCodeAt(0)===65279&&c++,e=void 0);c<o.length;){if(TG.lastIndex=c,s=TG.exec(o),d=s&&s.index!==void 0?s.index:o.length,u=o.charCodeAt(d),!s){j=o.slice(c);break}if(u===10&&c===d&&t)a.push(-3),t=void 0;else switch(t&&(a.push(-5),t=void 0),c<d&&(a.push(o.slice(c,d)),A+=d-c),u){case 0:{a.push(65533),A++;break}case 9:{for(l=Math.ceil(A/4)*4,a.push(-2);A++<l;)a.push(-1);break}case 10:{a.push(-4),A=1;break}default:t=!0,A=1}c=d+1}return i&&(t&&a.push(-5),j&&a.push(j),a.push(null)),a}}var PG={}.hasOwnProperty;function Sk(A,j,e){return typeof j!="string"&&(e=j,j=void 0),m1(e)(Fk(Rk(e).document().write(yk()(A,j,!0))))}function m1(A){let j={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Uc),autolinkProtocol:z,autolinkEmail:z,atxHeading:o(no),blockQuote:o(we),characterEscape:z,characterReference:z,codeFenced:o(At),codeFencedFenceInfo:n,codeFencedFenceMeta:n,codeIndented:o(At,n),codeText:o(jt,n),codeTextData:z,data:z,codeFlowValue:z,definition:o(mr),definitionDestinationString:n,definitionLabelString:n,definitionTitleString:n,emphasis:o(oo),hardBreakEscape:o(Jc),hardBreakTrailing:o(Jc),htmlFlow:o(ps,n),htmlFlowData:z,htmlText:o(ps,n),htmlTextData:z,image:o(ks),label:n,link:o(Uc),listItem:o(zk),listItemValue:d,listOrdered:o(Qc,c),listUnordered:o(Qc),paragraph:o(Wk),reference:b,referenceString:n,resourceDestinationString:n,resourceTitleString:n,setextHeading:o(no),strong:o(zc),thematicBreak:o(Xk)},exit:{atxHeading:a(),atxHeadingSequence:x,autolink:a(),autolinkEmail:kr,autolinkProtocol:Tj,blockQuote:a(),characterEscapeValue:v,characterReferenceMarkerHexadecimal:ue,characterReferenceMarkerNumeric:ue,characterReferenceValue:ur,characterReference:pr,codeFenced:a(I),codeFencedFence:m,codeFencedFenceInfo:u,codeFencedFenceMeta:k,codeFlowValue:v,codeIndented:a($),codeText:a(q),codeTextData:v,data:v,definition:a(),definitionDestinationString:P,definitionLabelString:F,definitionTitleString:S,emphasis:a(),hardBreakEscape:a(X),hardBreakTrailing:a(X),htmlFlow:a(N),htmlFlowData:v,htmlText:a(K),htmlTextData:v,image:a(sA),label:MA,labelText:PA,lineEnding:tA,link:a(rA),listItem:a(),listOrdered:a(),listUnordered:a(),paragraph:a(),referenceString:cj,resourceDestinationString:G,resourceTitleString:wA,resource:lj,setextHeading:a(U),setextHeadingLineSequence:H,setextHeadingText:C,strong:a(),thematicBreak:a()}};MG(j,(A||{}).mdastExtensions||[]);let e={};return t;function t(O){let Z={type:"root",children:[]},fA={stack:[Z],tokenStack:[],config:j,enter:i,exit:s,buffer:n,resume:l,data:e},GA=[],tj=-1;for(;++tj<O.length;)if(O[tj][1].type==="listOrdered"||O[tj][1].type==="listUnordered")if(O[tj][0]==="enter")GA.push(tj);else{let Le=GA.pop();tj=r(O,Le,tj)}for(tj=-1;++tj<O.length;){let Le=j[O[tj][0]];PG.call(Le,O[tj][1].type)&&Le[O[tj][1].type].call(Object.assign({sliceSerialize:O[tj][2].sliceSerialize},fA),O[tj][1])}if(fA.tokenStack.length>0){let Le=fA.tokenStack[fA.tokenStack.length-1];(Le[1]||xG).call(fA,void 0,Le[0])}for(Z.position={start:to(O.length>0?O[0][1].start:{line:1,column:1,offset:0}),end:to(O.length>0?O[O.length-2][1].end:{line:1,column:1,offset:0})},tj=-1;++tj<j.transforms.length;)Z=j.transforms[tj](Z)||Z;return Z}function r(O,Z,fA){let GA=Z-1,tj=-1,Le=!1,fr,qe,an,sn;for(;++GA<=fA;){let ge=O[GA];switch(ge[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ge[0]==="enter"?tj++:tj--,sn=void 0;break}case"lineEndingBlank":{ge[0]==="enter"&&(fr&&!sn&&!tj&&!an&&(an=GA),sn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:sn=void 0}if(!tj&&ge[0]==="enter"&&ge[1].type==="listItemPrefix"||tj===-1&&ge[0]==="exit"&&(ge[1].type==="listUnordered"||ge[1].type==="listOrdered")){if(fr){let io=GA;for(qe=void 0;io--;){let ft=O[io];if(ft[1].type==="lineEnding"||ft[1].type==="lineEndingBlank"){if(ft[0]==="exit")continue;qe&&(O[qe][1].type="lineEndingBlank",Le=!0),ft[1].type="lineEnding",qe=io}else if(!(ft[1].type==="linePrefix"||ft[1].type==="blockQuotePrefix"||ft[1].type==="blockQuotePrefixWhitespace"||ft[1].type==="blockQuoteMarker"||ft[1].type==="listItemIndent"))break}an&&(!qe||an<qe)&&(fr._spread=!0),fr.end=Object.assign({},qe?O[qe][1].start:ge[1].end),O.splice(qe||GA,0,["exit",fr,ge[2]]),GA++,fA++}if(ge[1].type==="listItemPrefix"){let io={type:"listItem",_spread:!1,start:Object.assign({},ge[1].start),end:void 0};fr=io,O.splice(GA,0,["enter",io,ge[2]]),GA++,fA++,an=void 0,sn=!0}}}return O[Z][1]._spread=Le,fA}function o(O,Z){return fA;function fA(GA){i.call(this,O(GA),GA),Z&&Z.call(this,GA)}}function n(){this.stack.push({type:"fragment",children:[]})}function i(O,Z,fA){this.stack[this.stack.length-1].children.push(O),this.stack.push(O),this.tokenStack.push([Z,fA]),O.position={start:to(Z.start),end:void 0}}function a(O){return Z;function Z(fA){O&&O.call(this,fA),s.call(this,fA)}}function s(O,Z){let fA=this.stack.pop(),GA=this.tokenStack.pop();if(GA)GA[0].type!==O.type&&(Z?Z.call(this,O,GA[0]):(GA[1]||xG).call(this,O,GA[0]));else throw new Error("Cannot close `"+O.type+"` ("+Vr({start:O.start,end:O.end})+"): it\u2019s not open");fA.position.end=to(O.end)}function l(){return Yo(this.stack.pop())}function c(){this.data.expectingFirstListItemValue=!0}function d(O){if(this.data.expectingFirstListItemValue){let Z=this.stack[this.stack.length-2];Z.start=Number.parseInt(this.sliceSerialize(O),10),this.data.expectingFirstListItemValue=void 0}}function u(){let O=this.resume(),Z=this.stack[this.stack.length-1];Z.lang=O}function k(){let O=this.resume(),Z=this.stack[this.stack.length-1];Z.meta=O}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function I(){let O=this.resume(),Z=this.stack[this.stack.length-1];Z.value=O.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function $(){let O=this.resume(),Z=this.stack[this.stack.length-1];Z.value=O.replace(/(\r?\n|\r)$/g,"")}function F(O){let Z=this.resume(),fA=this.stack[this.stack.length-1];fA.label=Z,fA.identifier=ce(this.sliceSerialize(O)).toLowerCase()}function S(){let O=this.resume(),Z=this.stack[this.stack.length-1];Z.title=O}function P(){let O=this.resume(),Z=this.stack[this.stack.length-1];Z.url=O}function x(O){let Z=this.stack[this.stack.length-1];if(!Z.depth){let fA=this.sliceSerialize(O).length;Z.depth=fA}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function H(O){let Z=this.stack[this.stack.length-1];Z.depth=this.sliceSerialize(O).codePointAt(0)===61?1:2}function U(){this.data.setextHeadingSlurpLineEnding=void 0}function z(O){let fA=this.stack[this.stack.length-1].children,GA=fA[fA.length-1];(!GA||GA.type!=="text")&&(GA=ms(),GA.position={start:to(O.start),end:void 0},fA.push(GA)),this.stack.push(GA)}function v(O){let Z=this.stack.pop();Z.value+=this.sliceSerialize(O),Z.position.end=to(O.end)}function tA(O){let Z=this.stack[this.stack.length-1];if(this.data.atHardBreak){let fA=Z.children[Z.children.length-1];fA.position.end=to(O.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&j.canContainEols.includes(Z.type)&&(z.call(this,O),v.call(this,O))}function X(){this.data.atHardBreak=!0}function N(){let O=this.resume(),Z=this.stack[this.stack.length-1];Z.value=O}function K(){let O=this.resume(),Z=this.stack[this.stack.length-1];Z.value=O}function q(){let O=this.resume(),Z=this.stack[this.stack.length-1];Z.value=O}function rA(){let O=this.stack[this.stack.length-1];if(this.data.inReference){let Z=this.data.referenceType||"shortcut";O.type+="Reference",O.referenceType=Z,delete O.url,delete O.title}else delete O.identifier,delete O.label;this.data.referenceType=void 0}function sA(){let O=this.stack[this.stack.length-1];if(this.data.inReference){let Z=this.data.referenceType||"shortcut";O.type+="Reference",O.referenceType=Z,delete O.url,delete O.title}else delete O.identifier,delete O.label;this.data.referenceType=void 0}function PA(O){let Z=this.sliceSerialize(O),fA=this.stack[this.stack.length-2];fA.label=dc(Z),fA.identifier=ce(Z).toLowerCase()}function MA(){let O=this.stack[this.stack.length-1],Z=this.resume(),fA=this.stack[this.stack.length-1];if(this.data.inReference=!0,fA.type==="link"){let GA=O.children;fA.children=GA}else fA.alt=Z}function G(){let O=this.resume(),Z=this.stack[this.stack.length-1];Z.url=O}function wA(){let O=this.resume(),Z=this.stack[this.stack.length-1];Z.title=O}function lj(){this.data.inReference=void 0}function b(){this.data.referenceType="collapsed"}function cj(O){let Z=this.resume(),fA=this.stack[this.stack.length-1];fA.label=Z,fA.identifier=ce(this.sliceSerialize(O)).toLowerCase(),this.data.referenceType="full"}function ue(O){this.data.characterReferenceType=O.type}function ur(O){let Z=this.sliceSerialize(O),fA=this.data.characterReferenceType,GA;fA?(GA=cc(Z,fA==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):GA=ci(Z);let tj=this.stack[this.stack.length-1];tj.value+=GA}function pr(O){let Z=this.stack.pop();Z.position.end=to(O.end)}function Tj(O){v.call(this,O);let Z=this.stack[this.stack.length-1];Z.url=this.sliceSerialize(O)}function kr(O){v.call(this,O);let Z=this.stack[this.stack.length-1];Z.url="mailto:"+this.sliceSerialize(O)}function we(){return{type:"blockquote",children:[]}}function At(){return{type:"code",lang:null,meta:null,value:""}}function jt(){return{type:"inlineCode",value:""}}function mr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function oo(){return{type:"emphasis",children:[]}}function no(){return{type:"heading",depth:0,children:[]}}function Jc(){return{type:"break"}}function ps(){return{type:"html",value:""}}function ks(){return{type:"image",title:null,url:"",alt:null}}function Uc(){return{type:"link",title:null,url:"",children:[]}}function Qc(O){return{type:"list",ordered:O.type==="listOrdered",start:null,spread:O._spread,children:[]}}function zk(O){return{type:"listItem",spread:O._spread,checked:null,children:[]}}function Wk(){return{type:"paragraph",children:[]}}function zc(){return{type:"strong",children:[]}}function ms(){return{type:"text",value:""}}function Xk(){return{type:"thematicBreak"}}}function to(A){return{line:A.line,column:A.column,offset:A.offset}}function MG(A,j){let e=-1;for(;++e<j.length;){let t=j[e];Array.isArray(t)?MG(A,t):f1(A,t)}}function f1(A,j){let e;for(e in j)if(PG.call(j,e))switch(e){case"canContainEols":{let t=j[e];t&&A[e].push(...t);break}case"transforms":{let t=j[e];t&&A[e].push(...t);break}case"enter":case"exit":{let t=j[e];t&&Object.assign(A[e],t);break}}}function xG(A,j){throw A?new Error("Cannot close `"+A.type+"` ("+Vr({start:A.start,end:A.end})+"): a different token (`"+j.type+"`, "+Vr({start:j.start,end:j.end})+") is open"):new Error("Cannot close document, a token (`"+j.type+"`, "+Vr({start:j.start,end:j.end})+") is still open")}function yc(A){let j=this;j.parser=e;function e(t){return Sk(t,{...j.data("settings"),...A,extensions:j.data("micromarkExtensions")||[],mdastExtensions:j.data("fromMarkdownExtensions")||[]})}}function DG(A,j){let e={type:"element",tagName:"blockquote",properties:{},children:A.wrap(A.all(j),!0)};return A.patch(j,e),A.applyData(j,e)}function _G(A,j){let e={type:"element",tagName:"br",properties:{},children:[]};return A.patch(j,e),[A.applyData(j,e),{type:"text",value:`
`}]}function NG(A,j){let e=j.value?j.value+`
`:"",t={};j.lang&&(t.className=["language-"+j.lang]);let r={type:"element",tagName:"code",properties:t,children:[{type:"text",value:e}]};return j.meta&&(r.data={meta:j.meta}),A.patch(j,r),r=A.applyData(j,r),r={type:"element",tagName:"pre",properties:{},children:[r]},A.patch(j,r),r}function OG(A,j){let e={type:"element",tagName:"del",properties:{},children:A.all(j)};return A.patch(j,e),A.applyData(j,e)}function wG(A,j){let e={type:"element",tagName:"em",properties:{},children:A.all(j)};return A.patch(j,e),A.applyData(j,e)}function LG(A,j){let e=typeof A.options.clobberPrefix=="string"?A.options.clobberPrefix:"user-content-",t=String(j.identifier).toUpperCase(),r=Ze(t.toLowerCase()),o=A.footnoteOrder.indexOf(t),n,i=A.footnoteCounts.get(t);i===void 0?(i=0,A.footnoteOrder.push(t),n=A.footnoteOrder.length):n=o+1,i+=1,A.footnoteCounts.set(t,i);let a={type:"element",tagName:"a",properties:{href:"#"+e+"fn-"+r,id:e+"fnref-"+r+(i>1?"-"+i:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(n)}]};A.patch(j,a);let s={type:"element",tagName:"sup",properties:{},children:[a]};return A.patch(j,s),A.applyData(j,s)}function qG(A,j){let e={type:"element",tagName:"h"+j.depth,properties:{},children:A.all(j)};return A.patch(j,e),A.applyData(j,e)}function VG(A,j){if(A.options.allowDangerousHtml){let e={type:"raw",value:j.value};return A.patch(j,e),A.applyData(j,e)}}function Sc(A,j){let e=j.referenceType,t="]";if(e==="collapsed"?t+="[]":e==="full"&&(t+="["+(j.label||j.identifier)+"]"),j.type==="imageReference")return[{type:"text",value:"!["+j.alt+t}];let r=A.all(j),o=r[0];o&&o.type==="text"?o.value="["+o.value:r.unshift({type:"text",value:"["});let n=r[r.length-1];return n&&n.type==="text"?n.value+=t:r.push({type:"text",value:t}),r}function KG(A,j){let e=String(j.identifier).toUpperCase(),t=A.definitionById.get(e);if(!t)return Sc(A,j);let r={src:Ze(t.url||""),alt:j.alt};t.title!==null&&t.title!==void 0&&(r.title=t.title);let o={type:"element",tagName:"img",properties:r,children:[]};return A.patch(j,o),A.applyData(j,o)}function HG(A,j){let e={src:Ze(j.url)};j.alt!==null&&j.alt!==void 0&&(e.alt=j.alt),j.title!==null&&j.title!==void 0&&(e.title=j.title);let t={type:"element",tagName:"img",properties:e,children:[]};return A.patch(j,t),A.applyData(j,t)}function JG(A,j){let e={type:"text",value:j.value.replace(/\r?\n|\r/g," ")};A.patch(j,e);let t={type:"element",tagName:"code",properties:{},children:[e]};return A.patch(j,t),A.applyData(j,t)}function UG(A,j){let e=String(j.identifier).toUpperCase(),t=A.definitionById.get(e);if(!t)return Sc(A,j);let r={href:Ze(t.url||"")};t.title!==null&&t.title!==void 0&&(r.title=t.title);let o={type:"element",tagName:"a",properties:r,children:A.all(j)};return A.patch(j,o),A.applyData(j,o)}function QG(A,j){let e={href:Ze(j.url)};j.title!==null&&j.title!==void 0&&(e.title=j.title);let t={type:"element",tagName:"a",properties:e,children:A.all(j)};return A.patch(j,t),A.applyData(j,t)}function zG(A,j,e){let t=A.all(j),r=e?E1(e):WG(j),o={},n=[];if(typeof j.checked=="boolean"){let l=t[0],c;l&&l.type==="element"&&l.tagName==="p"?c=l:(c={type:"element",tagName:"p",properties:{},children:[]},t.unshift(c)),c.children.length>0&&c.children.unshift({type:"text",value:" "}),c.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:j.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let i=-1;for(;++i<t.length;){let l=t[i];(r||i!==0||l.type!=="element"||l.tagName!=="p")&&n.push({type:"text",value:`
`}),l.type==="element"&&l.tagName==="p"&&!r?n.push(...l.children):n.push(l)}let a=t[t.length-1];a&&(r||a.type!=="element"||a.tagName!=="p")&&n.push({type:"text",value:`
`});let s={type:"element",tagName:"li",properties:o,children:n};return A.patch(j,s),A.applyData(j,s)}function E1(A){let j=!1;if(A.type==="list"){j=A.spread||!1;let e=A.children,t=-1;for(;!j&&++t<e.length;)j=WG(e[t])}return j}function WG(A){let j=A.spread;return j??A.children.length>1}function XG(A,j){let e={},t=A.all(j),r=-1;for(typeof j.start=="number"&&j.start!==1&&(e.start=j.start);++r<t.length;){let n=t[r];if(n.type==="element"&&n.tagName==="li"&&n.properties&&Array.isArray(n.properties.className)&&n.properties.className.includes("task-list-item")){e.className=["contains-task-list"];break}}let o={type:"element",tagName:j.ordered?"ol":"ul",properties:e,children:A.wrap(t,!0)};return A.patch(j,o),A.applyData(j,o)}function YG(A,j){let e={type:"element",tagName:"p",properties:{},children:A.all(j)};return A.patch(j,e),A.applyData(j,e)}function ZG(A,j){let e={type:"root",children:A.wrap(A.all(j))};return A.patch(j,e),A.applyData(j,e)}function Ab(A,j){let e={type:"element",tagName:"strong",properties:{},children:A.all(j)};return A.patch(j,e),A.applyData(j,e)}var Gc=jb("end"),bc=jb("start");function jb(A){return j;function j(e){let t=e&&e.position&&e.position[A]||{};if(typeof t.line=="number"&&t.line>0&&typeof t.column=="number"&&t.column>0)return{line:t.line,column:t.column,offset:typeof t.offset=="number"&&t.offset>-1?t.offset:void 0}}}function Gk(A){let j=bc(A),e=Gc(A);if(j&&e)return{start:j,end:e}}function eb(A,j){let e=A.all(j),t=e.shift(),r=[];if(t){let n={type:"element",tagName:"thead",properties:{},children:A.wrap([t],!0)};A.patch(j.children[0],n),r.push(n)}if(e.length>0){let n={type:"element",tagName:"tbody",properties:{},children:A.wrap(e,!0)},i=bc(j.children[1]),a=Gc(j.children[j.children.length-1]);i&&a&&(n.position={start:i,end:a}),r.push(n)}let o={type:"element",tagName:"table",properties:{},children:A.wrap(r,!0)};return A.patch(j,o),A.applyData(j,o)}function tb(A,j,e){let t=e?e.children:void 0,o=(t?t.indexOf(j):1)===0?"th":"td",n=e&&e.type==="table"?e.align:void 0,i=n?n.length:j.children.length,a=-1,s=[];for(;++a<i;){let c=j.children[a],d={},u=n?n[a]:void 0;u&&(d.align=u);let k={type:"element",tagName:o,properties:d,children:[]};c&&(k.children=A.all(c),A.patch(c,k),k=A.applyData(c,k)),s.push(k)}let l={type:"element",tagName:"tr",properties:{},children:A.wrap(s,!0)};return A.patch(j,l),A.applyData(j,l)}function rb(A,j){let e={type:"element",tagName:"td",properties:{},children:A.all(j)};return A.patch(j,e),A.applyData(j,e)}function ob(A,j){let e={type:"text",value:BE(String(j.value))};return A.patch(j,e),A.applyData(j,e)}function nb(A,j){let e={type:"element",tagName:"hr",properties:{},children:[]};return A.patch(j,e),A.applyData(j,e)}var ib={blockquote:DG,break:_G,code:NG,delete:OG,emphasis:wG,footnoteReference:LG,heading:qG,html:VG,imageReference:KG,image:HG,inlineCode:JG,linkReference:UG,link:QG,listItem:zG,list:XG,paragraph:YG,root:ZG,strong:Ab,table:eb,tableCell:rb,tableRow:tb,text:ob,thematicBreak:nb,toml:Cc,yaml:Cc,definition:Cc,footnoteDefinition:Cc};function Cc(){}var ab=typeof self=="object"?self:globalThis,$1=(A,j)=>{let e=(r,o)=>(A.set(o,r),r),t=r=>{if(A.has(r))return A.get(r);let[o,n]=j[r];switch(o){case 0:case-1:return e(n,r);case 1:{let i=e([],r);for(let a of n)i.push(t(a));return i}case 2:{let i=e({},r);for(let[a,s]of n)i[t(a)]=t(s);return i}case 3:return e(new Date(n),r);case 4:{let{source:i,flags:a}=n;return e(new RegExp(i,a),r)}case 5:{let i=e(new Map,r);for(let[a,s]of n)i.set(t(a),t(s));return i}case 6:{let i=e(new Set,r);for(let a of n)i.add(t(a));return i}case 7:{let{name:i,message:a}=n;return e(new ab[i](a),r)}case 8:return e(BigInt(n),r);case"BigInt":return e(Object(BigInt(n)),r)}return e(new ab[o](n),r)};return t},Tk=A=>$1(new Map,A)(0);var pi="",{toString:B1}={},{keys:h1}=Object,ls=A=>{let j=typeof A;if(j!=="object"||!A)return[0,j];let e=B1.call(A).slice(8,-1);switch(e){case"Array":return[1,pi];case"Object":return[2,pi];case"Date":return[3,pi];case"RegExp":return[4,pi];case"Map":return[5,pi];case"Set":return[6,pi]}return e.includes("Array")?[1,e]:e.includes("Error")?[7,e]:[2,e]},Mc=([A,j])=>A===0&&(j==="function"||j==="symbol"),g1=(A,j,e,t)=>{let r=(n,i)=>{let a=t.push(n)-1;return e.set(i,a),a},o=n=>{if(e.has(n))return e.get(n);let[i,a]=ls(n);switch(i){case 0:{let l=n;switch(a){case"bigint":i=8,l=n.toString();break;case"function":case"symbol":if(A)throw new TypeError("unable to serialize "+a);l=null;break;case"undefined":return r([-1],n)}return r([i,l],n)}case 1:{if(a)return r([a,[...n]],n);let l=[],c=r([i,l],n);for(let d of n)l.push(o(d));return c}case 2:{if(a)switch(a){case"BigInt":return r([a,n.toString()],n);case"Boolean":case"Number":case"String":return r([a,n.valueOf()],n)}if(j&&"toJSON"in n)return o(n.toJSON());let l=[],c=r([i,l],n);for(let d of h1(n))(A||!Mc(ls(n[d])))&&l.push([o(d),o(n[d])]);return c}case 3:return r([i,n.toISOString()],n);case 4:{let{source:l,flags:c}=n;return r([i,{source:l,flags:c}],n)}case 5:{let l=[],c=r([i,l],n);for(let[d,u]of n)(A||!(Mc(ls(d))||Mc(ls(u))))&&l.push([o(d),o(u)]);return c}case 6:{let l=[],c=r([i,l],n);for(let d of n)(A||!Mc(ls(d)))&&l.push(o(d));return c}}let{message:s}=n;return r([i,{name:a,message:s}],n)};return o},xk=(A,{json:j,lossy:e}={})=>{let t=[];return g1(!(j||e),!!j,new Map,t)(A),t};var ki=typeof structuredClone=="function"?(A,j)=>j&&("json"in j||"lossy"in j)?Tk(xk(A,j)):structuredClone(A):(A,j)=>Tk(xk(A,j));function I1(A,j){let e=[{type:"text",value:"\u21A9"}];return j>1&&e.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(j)}]}),e}function R1(A,j){return"Back to reference "+(A+1)+(j>1?"-"+j:"")}function sb(A){let j=typeof A.options.clobberPrefix=="string"?A.options.clobberPrefix:"user-content-",e=A.options.footnoteBackContent||I1,t=A.options.footnoteBackLabel||R1,r=A.options.footnoteLabel||"Footnotes",o=A.options.footnoteLabelTagName||"h2",n=A.options.footnoteLabelProperties||{className:["sr-only"]},i=[],a=-1;for(;++a<A.footnoteOrder.length;){let s=A.footnoteById.get(A.footnoteOrder[a]);if(!s)continue;let l=A.all(s),c=String(s.identifier).toUpperCase(),d=Ze(c.toLowerCase()),u=0,k=[],m=A.footnoteCounts.get(c);for(;m!==void 0&&++u<=m;){k.length>0&&k.push({type:"text",value:" "});let F=typeof e=="string"?e:e(a,u);typeof F=="string"&&(F={type:"text",value:F}),k.push({type:"element",tagName:"a",properties:{href:"#"+j+"fnref-"+d+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:typeof t=="string"?t:t(a,u),className:["data-footnote-backref"]},children:Array.isArray(F)?F:[F]})}let I=l[l.length-1];if(I&&I.type==="element"&&I.tagName==="p"){let F=I.children[I.children.length-1];F&&F.type==="text"?F.value+=" ":I.children.push({type:"text",value:" "}),I.children.push(...k)}else l.push(...k);let $={type:"element",tagName:"li",properties:{id:j+"fn-"+d},children:A.wrap(l,!0)};A.patch(s,$),i.push($)}if(i.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...ki(n),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:A.wrap(i,!0)},{type:"text",value:`
`}]}}var Pk={}.hasOwnProperty,F1={};function cb(A,j){let e=j||F1,t=new Map,r=new Map,o=new Map,n={...ib,...e.handlers},i={all:s,applyData:S1,definitionById:t,footnoteById:r,footnoteCounts:o,footnoteOrder:[],handlers:n,one:a,options:e,patch:y1,wrap:b1};return el(A,function(l){if(l.type==="definition"||l.type==="footnoteDefinition"){let c=l.type==="definition"?t:r,d=String(l.identifier).toUpperCase();c.has(d)||c.set(d,l)}}),i;function a(l,c){let d=l.type,u=i.handlers[d];if(Pk.call(i.handlers,d)&&u)return u(i,l,c);if(i.options.passThrough&&i.options.passThrough.includes(d)){if("children"in l){let{children:m,...I}=l,$=ki(I);return $.children=i.all(l),$}return ki(l)}return(i.options.unknownHandler||G1)(i,l,c)}function s(l){let c=[];if("children"in l){let d=l.children,u=-1;for(;++u<d.length;){let k=i.one(d[u],l);if(k){if(u&&d[u-1].type==="break"&&(!Array.isArray(k)&&k.type==="text"&&(k.value=lb(k.value)),!Array.isArray(k)&&k.type==="element")){let m=k.children[0];m&&m.type==="text"&&(m.value=lb(m.value))}Array.isArray(k)?c.push(...k):c.push(k)}}}return c}}function y1(A,j){A.position&&(j.position=Gk(A))}function S1(A,j){let e=j;if(A&&A.data){let t=A.data.hName,r=A.data.hChildren,o=A.data.hProperties;if(typeof t=="string")if(e.type==="element")e.tagName=t;else{let n="children"in e?e.children:[e];e={type:"element",tagName:t,properties:{},children:n}}e.type==="element"&&o&&Object.assign(e.properties,ki(o)),"children"in e&&e.children&&r!==null&&r!==void 0&&(e.children=r)}return e}function G1(A,j){let e=j.data||{},t="value"in j&&!(Pk.call(e,"hProperties")||Pk.call(e,"hChildren"))?{type:"text",value:j.value}:{type:"element",tagName:"div",properties:{},children:A.all(j)};return A.patch(j,t),A.applyData(j,t)}function b1(A,j){let e=[],t=-1;for(j&&e.push({type:"text",value:`
`});++t<A.length;)t&&e.push({type:"text",value:`
`}),e.push(A[t]);return j&&A.length>0&&e.push({type:"text",value:`
`}),e}function lb(A){let j=0,e=A.charCodeAt(j);for(;e===9||e===32;)j++,e=A.charCodeAt(j);return A.slice(j)}function Dc(A,j){let e=cb(A,j),t=e.one(A,void 0),r=sb(e),o=Array.isArray(t)?{type:"root",children:t}:t||{type:"root",children:[]};return r&&("children"in o,o.children.push({type:"text",value:`
`},r)),o}function _c(A,j){return A&&"run"in A?async function(e,t){let r=Dc(e,{file:t,...j});await A.run(r,t)}:function(e,t){return Dc(e,{file:t,...A||j})}}function Nc(A){let j=this;j.compiler=e;function e(t){return Xp(t,{...j.data("settings"),...A,extensions:j.data("toMarkdownExtensions")||[]})}}function Mk(A){if(A)throw A}var Lc=Xj(Bb(),1);function cs(A){if(typeof A!="object"||A===null)return!1;let j=Object.getPrototypeOf(A);return(j===null||j===Object.prototype||Object.getPrototypeOf(j)===null)&&!(Symbol.toStringTag in A)&&!(Symbol.iterator in A)}function Dk(){let A=[],j={run:e,use:t};return j;function e(...r){let o=-1,n=r.pop();if(typeof n!="function")throw new TypeError("Expected function as last argument, not "+n);i(null,...r);function i(a,...s){let l=A[++o],c=-1;if(a){n(a);return}for(;++c<r.length;)(s[c]===null||s[c]===void 0)&&(s[c]=r[c]);r=s,l?hb(l,i)(...s):n(null,...s)}}function t(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return A.push(r),j}}function hb(A,j){let e;return t;function t(...n){let i=A.length>n.length,a;i&&n.push(r);try{a=A.apply(this,n)}catch(s){let l=s;if(i&&e)throw l;return r(l)}i||(a&&a.then&&typeof a.then=="function"?a.then(o,r):a instanceof Error?r(a):o(a))}function r(n,...i){e||(e=!0,j(n,...i))}function o(n){r(null,n)}}var gb=function(A){let t=this.constructor.prototype,r=t[A],o=function(){return r.apply(o,arguments)};return Object.setPrototypeOf(o,t),o};var C1={}.hasOwnProperty,wk=class A extends gb{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Dk()}copy(){let j=new A,e=-1;for(;++e<this.attachers.length;){let t=this.attachers[e];j.use(...t)}return j.data((0,Lc.default)(!0,{},this.namespace)),j}data(j,e){return typeof j=="string"?arguments.length===2?(Ok("data",this.frozen),this.namespace[j]=e,this):C1.call(this.namespace,j)&&this.namespace[j]||void 0:j?(Ok("data",this.frozen),this.namespace=j,this):this.namespace}freeze(){if(this.frozen)return this;let j=this;for(;++this.freezeIndex<this.attachers.length;){let[e,...t]=this.attachers[this.freezeIndex];if(t[0]===!1)continue;t[0]===!0&&(t[0]=void 0);let r=e.call(j,...t);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(j){this.freeze();let e=wc(j),t=this.parser||this.Parser;return _k("parse",t),t(String(e),e)}process(j,e){let t=this;return this.freeze(),_k("process",this.parser||this.Parser),Nk("process",this.compiler||this.Compiler),e?r(void 0,e):new Promise(r);function r(o,n){let i=wc(j),a=t.parse(i);t.run(a,i,function(l,c,d){if(l||!c||!d)return s(l);let u=c,k=t.stringify(u,d);T1(k)?d.value=k:d.result=k,s(l,d)});function s(l,c){l||!c?n(l):o?o(c):e(void 0,c)}}}processSync(j){let e=!1,t;return this.freeze(),_k("processSync",this.parser||this.Parser),Nk("processSync",this.compiler||this.Compiler),this.process(j,r),Rb("processSync","process",e),t;function r(o,n){e=!0,Mk(o),t=n}}run(j,e,t){Ib(j),this.freeze();let r=this.transformers;return!t&&typeof e=="function"&&(t=e,e=void 0),t?o(void 0,t):new Promise(o);function o(n,i){let a=wc(e);r.run(j,a,s);function s(l,c,d){let u=c||j;l?i(l):n?n(u):t(void 0,u,d)}}}runSync(j,e){let t=!1,r;return this.run(j,e,o),Rb("runSync","run",t),r;function o(n,i){Mk(n),r=i,t=!0}}stringify(j,e){this.freeze();let t=wc(e),r=this.compiler||this.Compiler;return Nk("stringify",r),Ib(j),r(j,t)}use(j,...e){let t=this.attachers,r=this.namespace;if(Ok("use",this.frozen),j!=null)if(typeof j=="function")a(j,e);else if(typeof j=="object")Array.isArray(j)?i(j):n(j);else throw new TypeError("Expected usable value, not `"+j+"`");return this;function o(s){if(typeof s=="function")a(s,[]);else if(typeof s=="object")if(Array.isArray(s)){let[l,...c]=s;a(l,c)}else n(s);else throw new TypeError("Expected usable value, not `"+s+"`")}function n(s){if(!("plugins"in s)&&!("settings"in s))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");i(s.plugins),s.settings&&(r.settings=(0,Lc.default)(!0,r.settings,s.settings))}function i(s){let l=-1;if(s!=null)if(Array.isArray(s))for(;++l<s.length;){let c=s[l];o(c)}else throw new TypeError("Expected a list of plugins, not `"+s+"`")}function a(s,l){let c=-1,d=-1;for(;++c<t.length;)if(t[c][0]===s){d=c;break}if(d===-1)t.push([s,...l]);else if(l.length>0){let[u,...k]=l,m=t[d][1];cs(m)&&cs(u)&&(u=(0,Lc.default)(!0,m,u)),t[d]=[s,u,...k]}}}},qc=new wk().freeze();function _k(A,j){if(typeof j!="function")throw new TypeError("Cannot `"+A+"` without `parser`")}function Nk(A,j){if(typeof j!="function")throw new TypeError("Cannot `"+A+"` without `compiler`")}function Ok(A,j){if(j)throw new Error("Cannot call `"+A+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Ib(A){if(!cs(A)||typeof A.type!="string")throw new TypeError("Expected node, got `"+A+"`")}function Rb(A,j,e){if(!e)throw new Error("`"+A+"` finished async. Use `"+j+"` instead")}function wc(A){return v1(A)?A:new sa(A)}function v1(A){return!!(A&&typeof A=="object"&&"message"in A&&"messages"in A)}function T1(A){return typeof A=="string"||x1(A)}function x1(A){return!!(A&&typeof A=="object"&&"byteLength"in A&&"byteOffset"in A)}var P1=/^(#{1,6})\s+(.+)$/m,M1=/\*\*(.*?)\*\*/,D1=/\*(.*?)\*/,_1=/^\s*[-*+]\s+(.+)$/m,N1=/^\s*(\d+)\.\s+(.+)$/m,O1=/^>\s+(.+)$/m,w1=/\[([^\]]+)\]\((https?:\/\/[^)]+)\)/,L1=/`([^`]+)`/,q1=/```[\s\S]*?```/,V1=/^\s*\|(.+\|)+\s*$/m,K1=/~~(.*?)~~/,H1=/^\s*[-*+]\s+\[[ x]\]\s+\S/m,J1=/^(-{3,}|_{3,})\s*$/m,U1=/!\[([^\]]*)\]\((https?:\/\/[^)]+)\)/,Q1=/<(https?:\/\/[^>]+)>/;function ByA(A){return!A||A.length===0?!1:[P1,M1,D1,_1,N1,O1,w1,L1,q1,V1,K1,H1,J1,U1,Q1].some(e=>e.test(A))}function z1(A){return qc().use(yc).use(ic).use(ns).use(_c,{handlers:{break:function(e,t){let r={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,r),[e.applyData(t,r)]}}}).use(nc).processSync(A).toString()}function hyA(A,j){let e=z1(A),t=document.createElement("div");return t.innerHTML=e,fE.fromSchema(j).parseSlice(t,{preserveWhitespace:!0})}function gyA(A,j,e){let t={},r;for(r in e.nodes){let a=e.nodes[r].spec.toMarkdown;t[r]=(...s)=>a(...s,j)}let o={},n;for(n in e.marks){let a=e.marks[n].spec.toMarkdown;o[n]=(...s)=>a(...s,j)}let i=RE(A,{schema:e,nodeHandlers:t,markHandlers:o});return qc().use(ns).use(Nc,{bullet:"-",emphasis:"_"}).stringify(i)}var W1=CA("wantsNativeTextActions");function Fb(A=document.activeElement){if(!(A instanceof HTMLElement))return!1;if(A.classList.contains("wantsNativeTextAction")||A instanceof HTMLIFrameElement)return!0;if(A instanceof HTMLInputElement)switch(A.type){case"date":case"datetime-local":case"email":case"month":case"number":case"password":case"search":case"tel":case"text":case"time":case"url":case"week":return!0;case"checkbox":case"color":case"file":case"image":case"radio":case"range":case"reset":case"submit":return!1;default:return W1.reportErrorOncePerMinute("Unhandled input type: "+A.type),!1}return A instanceof HTMLTextAreaElement||VA.isOn("rightClickOnLinks")&&(A instanceof HTMLAnchorElement||A.closest("a"))?!0:A.isContentEditable}var ro=Xj(Is());var xb=Xj(kn());function Lk(A){return A.wantsActions?A.wantsActions():!0}function qk(A,j,e){return A.wantsAction?A.wantsAction(j,e):!0}function Sb(A,j){return A.optionsForAction?A.optionsForAction(j):void 0}var Gb;(t=>{function A(r){return new e(r)}t.chain=A;function j(r,o){return r&&r instanceof e?r.actionToTargetMap[o]:r}t.functionTarget=j;class e{constructor(o){y(this,"actionToTargetMap",{});y(this,"wantedActions",[]);this.then(o)}then(o){this.wantedActions=this.wantedActions.concat(o.wantedActions);let n=this.actionToTargetMap,i=o.wantedActions;for(let a of i)n[a]=n[a]||o;return this}wantsAction(o,n){let i=this.actionToTargetMap[o];return!i||!Lk(i)?!1:qk(i,o,n)}optionsForAction(o){let n=this.actionToTargetMap[o];if(n)return Sb(n,o)}}})(Gb||={});var on=class extends Event{constructor(){super(...arguments);y(this,"actionIdentifier");y(this,"actionArgument")}};y(on,"eventType","vekter-action-dispatch-event");var nn=class extends Event{constructor(){super(...arguments);y(this,"invalidatedActions");y(this,"validatedActionStates");y(this,"validatedActionOptions")}};y(nn,"eventType","vekter-action-validation-event");function CyA({target:A,engine:j,children:e,style:t,global:r}){let o=(0,ro.useRef)(null),n=(0,ro.useCallback)(s=>{let l=s.actionIdentifier;if(!l)return;let c=Gb.functionTarget(A,l);if(!c||!c.wantedActions.includes(l)||!Lk(c))return;let d=c[l];if(!Mm(d))return;let u=qk(c,l,s);if(!u||(s.preventDefault(),s.stopPropagation(),u!==!0))return;j.setEditReason(l);let k=d.bind(c);j.scheduler.wrapHandler(k)(s.actionArgument)},[j,A]),i=(0,ro.useCallback)(s=>{let{invalidatedActions:l,validatedActionStates:c,validatedActionOptions:d}=s;if(!(!l||!c||!d)&&A){for(let u of A.wantedActions)if(l.has(u)){l.delete(u);let k=Lk(A)?qk(A,u,s):!1;if(c[u]=k,k===!0||k===!1){let m=Sb(A,u);m&&(d[u]=m)}}l.size===0&&(s.preventDefault(),s.stopPropagation())}},[A]);(0,ro.useEffect)(()=>{if(!o.current)return;let s=(r?document.documentElement:null)||o.current;return s.addEventListener(on.eventType,n),s.addEventListener(nn.eventType,i),()=>{s.removeEventListener(on.eventType,n),s.removeEventListener(nn.eventType,i)}},[r,n,i]);let a=(0,ro.useCallback)(s=>{!Fb(s.target)&&!Re.isDebugBuild&&s.preventDefault()},[]);return(0,xb.jsx)("div",{ref:o,onContextMenu:a,style:t,children:e})}function bb(A,j){let e=document.activeElement;if(!e)throw Error("No active element for action dispatch");let t=new on(on.eventType,{bubbles:!0});return t.actionIdentifier=A,t.actionArgument=j,e.dispatchEvent(t)}function X1(A){let j=document.activeElement;if(!j)throw Error("No active element for action validation");let e=new Set;for(let n of A)e.add(n);let t={},r={},o=new nn(nn.eventType,{bubbles:!0});return o.invalidatedActions=e,o.validatedActionStates=t,o.validatedActionOptions=r,j.dispatchEvent(o),{states:t,options:r}}var Cb=[],vb=[];function vyA(A){Cb.push(A)}function TyA(A){vb.push(A)}function Tb(A){let j=A==="*"?Object.keys(Vc):[A];Cb.forEach(r=>r());let{states:e,options:t}=X1(j);Object.assign(Vc,e),Object.assign(yb,t);for(let r of j)Vc[r]=e[r]||(r==="undo"||r==="redo"||r==="delete"?"native":!1);return vb.forEach(r=>r()),{states:Vc,options:yb}}var Vc={},yb={};function NyA({stackElement:A,tree:j}){return A?j.getNodeWithTrait(A.type==="temporary"?A.collectionId:j.getParent(A.itemId)?.id,hj):null}function OyA({treeStore:A,contentManagementStore:j,stackElement:e}){if(!e)return null;if(e.type==="existing")return A.tree.getNodeWithTrait(e.itemId,Ge);if(e.type==="temporary")return j.temporaryItemCache.get(e.itemId)??null;EA(e)}function wyA(A,j=[]){let e=A.stores.selectionStore.ids.length===1?Ad(A.stores.selectionStore.ids,0):void 0,t=Z1(A,j),r=Ad(t,0),o=A.tree.getNodeWithTrait(e,Ge);if(o){if(!r)return[{itemId:o.id,type:"existing"}];if(r.type==="existing")return r.itemId===o.id?t:(B(t.length===1,"Must dismiss overlay stack before changing selection"),[{itemId:o.id,type:"existing"}]);if(r.type==="temporary")throw new Error("Must save temporary item stack before selecting a collection item");EA(r)}if(!r||r.type==="temporary")return t;if(r.type==="existing")return A.stores.chromeStore.mainView!==2?t:(B(t.length===1,"Must dismiss overlay stack before de-selecting collection item"),[]);EA(r)}function Z1(A,j){let e=[];for(let t=0;t<j.length;t++){let r=j[t];if(!r)continue;if(r.type==="temporary"&&A.tree.has(r.itemId)&&(r={type:"existing",itemId:r.itemId}),!Aw(A,r))break;e.push(r),t>0&&B(r.type==="existing"||!!r.saveAction,"Temporary items in the stack must have saveAction, except when they are the first")}return e}function Aw(A,j){if(j.type==="temporary")return B(!A.tree.has(j.itemId),"Temporary stack element must not exist in the tree. It should be turned existing before passing it to validateOverlayStackElement."),A.tree.has(j.collectionId)&&A.stores.contentManagementStore.temporaryItemCache.has(j.itemId);if(j.type==="existing")return A.tree.has(j.itemId);EA(j)}function Pb(A,j){let e=A.itemVariables.length===1&&A.itemVariables[0]?.type==="image"?A.itemVariables[0]:void 0,t=g`item`,r={[Mo]:g`typeof ${t}?.[${Mo}] === "string" ? ${t}[${Mo}] : undefined`};for(let n of A.itemVariables){let i=Ms(n.name);i?r[n.id]=g`${t}?.[${i}] ?? ${t}?.[${n.id}]`:r[n.id]=g`${t}?.[${n.id}]`}let o=j.bindings.create("arrayFromHumanReadable"+A.id);return j.declarations.file.create(g.joinLines(g`const ${o} = (value) => {${g.joinLines(g`if (!Array.isArray(value)) return`,g`return value.map(${t} => {${g.joinLines(e?g`if (typeof ${t} === "string") return { [${e.id}]: ${t} }`:void 0,g`return ${r}`)}})`)}}`)),o}function jw(A){return[A[1],A[0]]}var ew=new Map(Object.entries(JA).map(jw));function Mb(A,j){let e=j.addImport("framer",{exportSpecifier:"ControlType"}),t=ew.get(A),r=new jA(t);return g`${e}.${r}`}var tw={boolean:"boolean",number:"number",string:"string",richtext:"string",fusednumber:"any",enum:"string",segmentedenum:"string",color:"string",image:"string",responsiveimage:"{src: string; srcSet?: string; alt?: string}",file:"string",componentinstance:"any",slot:"any",array:"any[]",eventhandler:"any",transition:"Record<string, any>",link:"string",linkrelvalues:"string[] | undefined",pagescope:"string",date:"string",object:"Record<string, any>",font:"Record<string, any> | undefined",scrollsectionref:"React.MutableRefObject<HTMLElement>",customcursor:"string",border:"Record<string, any>",cursor:"string",boxshadow:"string",gap:"string",padding:"string",borderradius:"string",collectionreference:"string | undefined",multicollectionreference:"string[] | undefined",trackingid:"string | undefined",vectorsetitem:"React.ComponentType<any> | undefined"};function rw(A){return A?new jA(tw[A]):g`any`}var Db="variant";function ow(A){return!mA(A?.defaultValue)}function nw(A,j){if(!dA(A))return{};B(A.isLoaded(),"Node must be loaded to generate controls");let e=A.getTopLevelVariants();if(e?.length<2)return{};let t=[],r=[];for(let o of e){let n=o.name??ut(o);t.push(o.id),r.push(n)}return{[Db]:{type:Mb("enum",j),title:"Variant",options:t,optionTitles:r}}}function iw(A,j,e,t,r){if(A.type==="responsiveimage"&&md(A)&&kd(A.__vekterDefault)){let{assetReference:o,alt:n}=A.__vekterDefault,i=lu(r?.width,r?.height),a=e.assets.resolveResponsiveImage(o,{layerMaxSidePixelSize:i,focalPoint:A.__vekterDefault});return a&&L(n)&&(a.alt=n),a}else if(pd(A))switch(A.type){case"responsiveimage":{let o=lu(r?.width,r?.height),n=e.assets.resolveResponsiveImage(A.__defaultAssetReference,{layerMaxSidePixelSize:o});return n||void 0}case"file":{let o=e.assets.resolve(A.__defaultAssetReference);return o?o.src:void 0}}else{if(j?.type==="array")return j.initialValue?j.initialValue.map(o=>{let n={};if(!o||o.type!=="object"||!ne(o.value))return n;for(let i in o.value){let a=o.value[i];if(!a||a.type!=="image"||!L(a.value))continue;let s=e.assets.resolveResponsiveImage(a.value,{focalPoint:a});s&&(s.alt=a.alt??"",n[i]=s)}return n}):[];if(ow(A)){let o=A.defaultValue;if(A.type==="vectorsetitem")return B(_f(o),"Vector set item must be a module export identifier"),e.imports.addModuleImport(o.identifier);if(A.type==="richtext"&&L(o))return Ch(o,{collectors:e,useFramerMotion:t==="SmartComponent"});if(A.type==="boxshadow"&&L$(o))return q$(o,"emptyStringWhenEmpty",n=>Ut(n)?bd(n):Gs.toFormatString(n));if(tr(o))return Ut(o)?bd(o):o}}}function Kc(A,j){return g`${A}?: ${j};`}var _b=["id","width","height"],aw=Object.fromEntries(_b.map(A=>{let j=new jA(A);return[j,j]}));function sw(A,j){let e=new Uj(A);return Uj.addSpreadAtEnd(e,j),e}var Nb=[{name:ZA.style,type:g`Record<string, unknown>`},{name:ZA.className,type:g`string`},{name:ZA.layoutId,type:g`string | number`}];function lw(A,{declarations:j}){if(!dA(A)&&!Q(A)&&!Ej(A)&&!Je(A))return[];B(A.isLoaded(),"Node must be loaded to generate default values and types");let e=Nb.map(({name:i,type:a})=>({key:oj(i),type:Kc(i,a)})),t=go(A)?A.getTopLevelVariants():[],r=oj(ZA.variant);if(t.length<2)return e.concat({key:r});B(go(A),"A scope with more than 1 variants must have replica variants.");let o=new Uj;for(let i of t)o[i.name??ut(i)]=i.id;let n=j.file.dedupe("humanReadableVariantMap",o);return e.concat([{key:r,type:Kc(ZA.variant,g`keyof typeof ${n}`),value:g`${n}[props.${ZA.variant}] ?? props.${ZA.variant} ?? ${A.baseVariantId}`}])}function Vk(A,j,e){let t=g`props.${new jA(A)}`;return j&&(t=g`${j} ?? ${t}`),e&&(t=g`${t} ?? ${e}`),t}function cw(A,{treeStore:j}){if(!Q(A)||!Or(j.tree,A))return;let t=cA(A.dataIdentifier);if(!Pj(t))return;let r=A.getVariableDefinitions(j.tree,Y,Y.activeBundleHash);if(!r||r.length===0)return;let o=new Map;for(let n of r){let i=Ln(n.id,A.id,!0);o.set(oj(i),n)}return o}var dw=[...M$,Db,..._b,...Nb.map(({name:A})=>A.toString()),"name"];function uw(A,j,e,t,r,o){let n=new Set(dw),i=g`props`,a=Object.entries(A).map(([F,{control:S,variable:P}])=>{if(!S)return{key:F};let x=D$(Ms(S.title)??F,n),C=new jA(x),H=iw(S,P,t,r,o),U=Kc(C,rw(S.type)),z;if(S.type==="enum"&&S.options&&S.optionTitles&&C){let v=new Uj;S.options.forEach((X,N)=>{if(!L(X)||!S.optionTitles)return;let K=S.optionTitles[N];L(K)&&(v[K]=X)});let tA=t.declarations.file.dedupe("humanReadableEnumMap",v);U=Kc(C,g`keyof typeof ${tA}`),z=Vk(F,C,H),z=g`${tA}[${C}] ?? ${z}`}else if(P?.type==="array"){let v=Pb(P,t),tA=jA.fn(v,C);z=Vk(F,tA,H)}else z=Vk(F,C,H);return{key:F,name:x,type:U,value:z}}),s="",l=[],c=new Uj,d=cw(j,e),u={},k={...aw};for(let{key:F,type:S,value:P,name:x}of[...lw(j,t),...a]){let C=d?.get(F),H=new jA(F);if(C){let U=g`${H} = ${ZA.getFromCurrentRouteData}(${C.id})`;if(of(C.type)){let z=Gr(C.type);tr(z)&&(U=g`${U} ?? ${z}`)}l.push(U)}else l.push(H);S&&(s+=S),P&&(c[F]=P),x&&(u[F]=x,k[x]=new jA(x))}r==="DesignPage"&&l.push(ZA.style),Uj.addSpreadAtStart(c,i);let m=t.declarations.file.dedupe("getProps",g`(${sw(k,i)}) => { return ${c} }`),I=l.join(", "),$=I.length>0?new jA(`{ ${I}, ...${ZA.restProps} }`):ZA.restProps;return{variableMap:Bt(u)?void 0:u,types:new jA(s),props:g`const ${$} = ${jA.fn(m,i)}`}}function pw(A,j,e=!1){let t=[],r=Ob(A),o=new jA.Set(j.variables);for(let n of r){if(n.type==="divider")continue;let i=new jA(n.id);!e&&!j.variables.has(i)||(t.push({id:n.id,definition:n}),o.delete(i))}for(let n of o)t.push({id:String(n)});return t}function kw(A,j){let{hidden:e,...t}=A;if(!j)return t;let{description:r,...o}=t;return o}function mw(A,j,{modulesStore:e,treeStore:t},{imports:r,variables:o},n,i){let{id:a,type:s}=A;switch(s){case"controlReference":{let l=cA(Of(t.tree,A.entityIdentifier));if(!l||!A.entityIdentifier||!Pj(l))return;let c=r.addModuleImport(l,{composeWithImports:[r.addImport("framer",{exportSpecifier:"getPropertyControls"})]});if(!c)return;let d=new Uj({hidden:g`undefined`,description:g`undefined`});return Uj.addSpreadAtStart(d,g`${c}[${A.controlKey}]`),L(j.title)&&(d.title=j.title),L(j.description)&&(d.description=j.description),j.type==="responsiveimage"&&md(j)&&kd(j.__vekterDefault)&&(d[Nm]=jA.fromValue(j.__vekterDefault)),pd(j)?d[_m]=jA.fromValue(j.__defaultAssetReference):mA(A.initialValue)||(d.defaultValue=jA.fromValue(A.initialValue)),g`${c}?.[${A.controlKey}] && ${d}`}case"nodePropertyControlReference":case"array":case"vectorsetitem":case"boolean":case"color":case"date":case"enum":case"eventhandler":case"file":case"image":case"link":case"linkrelvalues":case"number":case"richtext":case"scrollsectionref":case"customcursor":case"cursor":case"transition":case"boxshadow":case"string":case"border":case"borderradius":case"gap":case"padding":case"collectionreference":case"multicollectionreference":case"trackingid":case"slug":{let l={...kw(j,n),type:Mb(j.type,r)};if(i==="vector"&&o){let c=new jA(a);l.hidden=!o.variables.has(c)}return l}default:EA(s)}}function Ob(A){return Qt(A)?A.variables:[]}function fw(A,j,e,t,r=Ob(A)){let o=nw(A,e.imports),n=Js(A),i=[...r];if(hj(A)){let a=Hf();i.push(a);let s=Jf();i.push(s);let l=Vf(A);i.push(l);let c=Kf(A);i.push(c)}for(let a of i){if(a.type==="divider")continue;let s=vd(j.treeStore.tree,a);if(ie(s))continue;B(s.type!=="image","Image variables should become responsive images");let l=mw(a,s,j,e,n,t);mA(l)||(o[a.id]=l)}if(!Bt(o))return new Uj(o,1)}function RSA(A,j,e,t,r,o){let n={},i=[];for(let{id:a,definition:s}of Ew(A,e.variables)){let l=s?vd(j.treeStore.tree,s):void 0;n[a]={control:l,variable:s},s&&i.push(s)}return{propertyControls:fw(A,j,e,r,i),...uw(n,A,j,e,t,o)}}function Ew(A,j){return pw(A,j,Je(A))}var us=Xj(Td());function wb(){return document.body.dataset.framerTheme==="dark"}var Lb=Ne()?["Control","Option","Shift","CommandOrControl","Command"]:["CommandOrControl","Command","Control","Alt","Shift"];function Kk(A){return A?A.split("+").sort((j,e)=>{let t=Lb.indexOf(j),r=Lb.indexOf(e);return t!==-1&&r!==-1?t-r:t!==-1?-1:r!==-1?1:0}).map(j=>{switch(j){case"Backspace":case"Delete":return Ne()?"\u232B":"Del";case"Command":return"\u2318";case"CommandOrControl":return Ne()?"\u2318":"Ctrl";case"Control":return Ne()?"\u2303":"Ctrl";case"Down":return"\u2193";case"Enter":case"Return":return Ne()?"\u21A9":"Enter";case"Left":return"\u2190";case"-":return"\u2013";case"Option":return Ne()?"\u2325":"Alt";case"Plus":return Ne()?"+":"=";case"Right":return"\u2192";case"Shift":return Ne()?"\u21E7":"Shift";case"Up":return"\u2191";case"Escape":return"ESC"}return j}):[]}function Hk(A,j){let e=[];return A.forEach(t=>{let{accelerator:r,acceleratorWindows:o,checked:n,mixed:i,enabled:a,ellipsis:s,role:l,type:c="normal",visible:d,requiresUserInteraction:u,acceleratorLabel:k,acceleratorLabelWindows:m,badge:I,icon:$}=t;if(c==="separator")e.push({type:"separator",visible:d});else if(c==="normal"){let F;a!==void 0&&(F=!a);let S=!Ne()&&o!==void 0?o:r,P=!Ne()&&m!==void 0?m:k,x=P?Kk(P):S?Kk(S):void 0,C=t.label;C&&s&&(C+="\u2026");let H={accelerator:S,acceleratorLabelTokens:x,tokenDelimiter:Ne()?void 0:"+",checked:n||i,disabled:F,label:C||"",description:t.description,action:l,type:c,visible:d,requiresUserInteraction:u,badge:I,icon:$};H.submenu=t.submenu&&Hk(t.submenu,j),j&&j(H),H.visible===void 0&&(H.visible=!0),e.push(H)}else throw Error(`Unhandled type: ${c}`)}),e}var Hc={importFigma:"CommandOrControl+Shift+I",newProject:"Option+CommandOrControl+N",publishSite:"CommandOrControl+Shift+P",openPublishedSite:"CommandOrControl+Shift+O",uploadImage:"Option+CommandOrControl+I",quickActions:"CommandOrControl+K",toggleLocalization:"CommandOrControl+Shift+L",toggleContentManagement:"Option+C",toggleVersionHistory:"Shift+CommandOrControl+H",generateWebPage:VA.isOn("wireframerKits")?"A":"W",undo:"CommandOrControl+Z",redo:"CommandOrControl+Shift+Z",goBack:"CommandOrControl+[",goForward:"CommandOrControl+]",cut:"CommandOrControl+X",copy:"CommandOrControl+C",copyFill:"CommandOrControl+Shift+C",paste:"CommandOrControl+V",delete:"Delete",selectMostRecentPage:"Option+Escape",selectAll:"CommandOrControl+A",selectGroundNode:"CommandOrControl+Escape",selectParent:"Escape",copyStyle:"CommandOrControl+Option+C",pasteStyle:"CommandOrControl+Option+V",pasteInPlace:"CommandOrControl+Shift+V",duplicate:"CommandOrControl+D",toggleLayerLock:"CommandOrControl+L",toggleLayerVisible:"CommandOrControl+;",rename:"CommandOrControl+R",selectSiblings:"CommandOrControl+Shift+A",cycleSelection:"Tab",decycleSelection:"Shift+Tab",fakeSelectChildren:"Enter",zoomIn:"CommandOrControl+Plus",zoomOut:"CommandOrControl+-",resetZoom:"CommandOrControl+0",zoomToFitAll:"CommandOrControl+1",zoomToFitSelection:"CommandOrControl+2",openPanelSearch:"CommandOrControl+F",toggleInterface:"CommandOrControl+.",toggleRulers:"Control+R",toggleGrids:"Control+G",toggleAppearance:"Control+Command+N",showPages:"Option+1",showLayers:"Option+2",showAssets:"Option+3",collapseLayers:"Option+L",startLinkTool:"L",sampleColor:"Control+C",toggleInsert:"I",toggleLibraryModal:"CommandOrControl+/",toolCreateStack:"S",toolCreateFrame:"F",toolCreateRounded:"U",toolCreateImage:"Shift+I",toolCreateVideo:"Shift+V",toolCreateText:"T",toolComment:"C",toolChat:"/",toolZoom:"Z",toolPath:"P",toolScale:"K",toolCreateRectangleShape:"R",toolCreateOvalShape:"O",toolCreateRows:"Shift+R",toolCreateColumns:"Shift+C",toolCreateGrid:"Shift+G",addEnclosingFrame:"CommandOrControl+Return",addEnclosingStack:"CommandOrControl+Option+Return",autoSizeLayout:"Shift+A",removeFramePreservingChildren:"CommandOrControl+Delete",sizeToFitContent:"Control+Option+R",moveForward:"CommandOrControl+Option+Up",moveBackward:"CommandOrControl+Option+Down",moveToFront:"]",moveToBack:"[",alignLeft:"Option+A",alignCenter:"Option+H",alignRight:"Option+D",alignTop:"Option+W",alignMiddle:"Option+V",alignBottom:"Option+S",distributeHorizontal:"Control+Option+H",distributeVertical:"Control+Option+V",unite:"Option+Shift+U",subtract:"Option+Shift+S",intersect:"Option+Shift+I",exclude:"Option+Shift+E",join:"Option+Shift+J",saveCodeFile:"CommandOrControl+S",makeBold:"CommandOrControl+B",makeItalic:"CommandOrControl+I",makeUnderlined:"CommandOrControl+U",chooseFontFamily:"CommandOrControl+T",group:"CommandOrControl+G",ungroup:"CommandOrControl+Shift+G",makeComponent:"CommandOrControl+Option+K",makeCodeComponent:"CommandOrControl+Shift+K",showPreview:"CommandOrControl+P",openFullScreen:"CommandOrControl+Shift+F",toggleHighlightsInLivePreview:"CommandOrControl+Shift+H",reload:"CommandOrControl+R",toggleConsole:"CommandOrControl+I",handleResponsive:"Z",togglePreviewInterface:"CommandOrControl+Shift+F",previewNextBreakpoint:"CommandOrControl+.",previewPreviousBreakpoint:"CommandOrControl+,",runRecentPlugin:"CommandOrControl+Option+P",openDevelopmentPlugin:"CommandOrControl+Option+L",openTextSearchPlugin:"CommandOrControl+Shift+F",openSiteSettings:"Shift+,",saveSiteSettings:"CommandOrControl+S",previousCollectionItem:"CommandOrControl+Up",nextCollectionItem:"CommandOrControl+Down",newCollectionItem:"N",pasteCollection:"CommandOrControl+V"},Jk={sampleColor:"",selectGroundNode:"",openFullScreen:"Control+Alt+F",resetZoom:"Shift+0",zoomToFitAll:"Shift+1",zoomToFitSelection:"Shift+2",toggleInterface:"Alt+.",toggleRulers:"Control+Shift+R",toggleGrids:"Alt+G",toggleAppearance:"Alt+N",distributeHorizontal:"Alt+Shift+H",distributeVertical:"Alt+Shift+V"},PSA=A=>gl?Hc[A]:Jk[A]??Hc[A];var $w=(0,us.List)();async function Bw(A){return{indexPath:(await new Promise(e=>{let{location:t={x:0,y:0},within:r,className:o}=A,n=Hk(A.items,i=>{if("action"in i&&i.action){let{states:a,options:s}=Tb(i.action),l=a[i.action],{label:c,checked:d,visible:u}=s[i.action]??{};if(L(c)&&(i.label=c),i.checked===void 0&&hr(d)&&(i.checked=d),i.visible===void 0&&hr(u)&&(i.visible=u),i.submenu)return;i.disabled===void 0&&hr(l)&&(i.disabled=!l)}});vh.show(n,{location:t,within:r,className:o,isDarkMode:wb(),maxItemsPerMenu:24,expandRight:A.expandRight,onSelection:i=>{let a=hw(n,i.path);a?.type==="normal"&&a.requiresUserInteraction&&e(i)},enableTranslate:!0}).then(e)}))?.path??[]}}function hw(A,j){let e;for(let t of j){if(!A||(e=A[t],!e))return;A=e.type==="normal"&&e.submenu||[]}return e}var ds=class ds extends Om("Menu"){constructor(){super();y(this,"_items");y(this,"handlePopupResponse",FE((e,t)=>{if(!e||e.length===0){t&&t();return}let r=this._items,o,n;for(let i of e){if(o=r.get(i),!o)throw Error("Could not find expected menu item");o.editReason!==void 0&&(n=o.editReason),r=o.submenu?._items??$w}n?Dd()?.setEditReason(n):n!==!1&&Dd()?.setEditReason(o?.role??af(o?.label)),o!==void 0&&o.click!==void 0?o.click():o?.role!==void 0&&bb(o.role,{fromContextMenu:!0})}));this._items=(0,us.List)()}static buildFromTemplate(e){let t=new ds;for(let r of e)t.append(new Qk(ds.getItemTemplateWithShortcut(r)));return t}get items(){return this._items.toArray()}append(e){this._items=this._items.push(e)}insert(e,t){this._items=this._items.insert(e,t)}popup(e,t){return new Promise(r=>{let o=JSON.parse(JSON.stringify(this._items.toJS()));Bw({items:o,location:e,within:t?.within,className:t?.className,expandRight:t?.expandRight}).then(n=>this.handlePopupResponse(n.indexPath,t?.onCancel)).catch(LA).finally(r)})}};y(ds,"getItemTemplateWithShortcut",e=>{let{role:t}=e;if(!t)return e;let r={...e};return!gl&&!e.acceleratorWindows&&(r.acceleratorWindows=Jk[t]),e.accelerator||(r.accelerator=Hc[t]),r});var Uk=ds,gw={enabled:void 0,visible:void 0,label:void 0,description:void 0,click:void 0,type:"normal",accelerator:void 0,acceleratorWindows:void 0,acceleratorLabel:void 0,acceleratorLabelWindows:void 0,submenu:void 0,checked:void 0,mixed:void 0,role:void 0,requiresUserInteraction:void 0,alternate:void 0,badge:void 0,icon:void 0,editReason:void 0},Qk=class extends(0,us.Record)(gw){constructor(e){e.label&&e.ellipsis&&(e.label=`${e.label}\u2026`),e.submenu!==void 0&&!("__class"in e.submenu&&e.submenu.__class==="Menu")&&(e.submenu=Uk.buildFromTemplate(e.submenu));super(e);y(this,"enabled");y(this,"visible");y(this,"label");y(this,"ellipsis");y(this,"checked");y(this,"mixed");y(this,"click");y(this,"role");y(this,"requiresUserInteraction");y(this,"alternate");y(this,"editReason");y(this,"submenu")}toJS(){let e=super.toJS();return e.submenu!==void 0&&(e.submenu=e.submenu._items.toJS()),e}};function USA(A){return{...A,enabled:A.enabled(),click:()=>{A.enabled()&&A.click()}}}function QSA(A){return Array.isArray(A)}function XSA(A,j){let e=j.getItemIds(A.id);if(e)return e[0]}export{Xh as a,Uu as b,t0 as c,Vh as d,Kh as e,zj as f,sa as g,$0 as h,Zw as i,dC as j,da as k,pC as l,n8 as m,Ct as n,r2 as o,ua as p,j7 as q,o2 as r,h0 as s,r0 as t,q4 as u,la as v,V4 as w,qC as x,K4 as y,H4 as z,J4 as A,U4 as B,Q4 as C,p2 as D,k2 as E,ir as F,m2 as G,f2 as H,E2 as I,$2 as J,B2 as K,jv as L,h2 as M,R0 as N,e7 as O,Lo as P,x2 as Q,P2 as R,tv as S,j6 as T,K2 as U,H2 as V,J2 as W,t7 as X,U2 as Y,e6 as Z,tV as _,rV as $,oV as aa,Hn as ba,S0 as ca,uV as da,Z4 as ea,s0 as fa,G0 as ga,l0 as ha,C0 as ia,c0 as ja,lq as ka,Yu as la,d0 as ma,Zu as na,KC as oa,ca as pa,mq as qa,u0 as ra,yq as sa,m0 as ta,Sq as ua,Gq as va,bq as wa,Cq as xa,vq as ya,Tq as za,Dq as Aa,T0 as Ba,o6 as Ca,qV as Da,oA as Ea,n6 as Fa,P0 as Ga,se as Ha,KH as Ia,cv as Ja,HH as Ka,JH as La,UH as Ma,O0 as Na,w0 as Oa,L0 as Pa,hv as Qa,H0 as Ra,a7 as Sa,hJ as Ta,i6 as Ua,wJ as Va,a6 as Wa,LJ as Xa,z0 as Ya,W0 as Za,X0 as _a,s6 as $a,jg as ab,c6 as bb,d6 as cb,Jn as db,rg as eb,ig as fb,ag as gb,k6 as hb,ug as ib,pg as jb,F3 as kb,x3 as lb,kg as mb,Q3 as nb,mg as ob,m6 as pb,ha as qb,$g as rb,Bg as sb,ZU as tb,hg as ub,f6 as vb,E6 as wb,ga as xb,Fg as yb,Nq as zb,Oq as Ab,E0 as Bb,WC as Cb,Zl as Db,AT as Eb,nz as Fb,iz as Gb,az as Hb,sz as Ib,Cg as Jb,Yn as Kb,B6 as Lb,mt as Mb,Zn as Nb,Mg as Ob,mW as Pb,fW as Qb,EW as Rb,kT as Sb,mT as Tb,fT as Ub,ET as Vb,_g as Wb,$W as Xb,BW as Yb,hW as Zb,gW as _b,Ng as $b,BT as ac,IW as bc,RW as cc,FW as dc,yW as ec,SW as fc,GW as gc,A6 as hc,Lg as ic,Jo as jc,Kg as kc,Hg as lc,Ug as mc,Qg as nc,g9 as oc,I9 as pc,Yg as qc,S9 as rc,AI as sc,tI as tc,q9 as uc,V9 as vc,K9 as wc,H9 as xc,J9 as yc,y6 as zc,rI as Ac,RT as Bc,oI as Cc,iI as Dc,wX as Ec,LX as Fc,aI as Gc,qX as Hc,sI as Ic,cI as Jc,BY as Kc,b7 as Lc,MT as Mc,hY as Nc,gY as Oc,IY as Pc,Fa as Qc,dI as Rc,ya as Sc,G7 as Tc,RY as Uc,FY as Vc,yY as Wc,SY as Xc,_T as Yc,GY as Zc,bY as _c,pI as $c,kI as ad,WY as bd,XY as cd,fI as dd,$I as ed,BI as fd,D7 as gd,vI as hd,ux as id,lF as jd,ZP as kd,lp as ld,pF as md,kF as nd,FF as od,qa as pd,Va as qd,U6 as rd,yF as sd,SF as td,xF as ud,Yr as vd,by as wd,Ua as xd,xy as yd,hp as zd,LpA as Ad,Py as Bd,$kA as Cd,BkA as Dd,hkA as Ed,gkA as Fd,IkA as Gd,X6 as Hd,zM as Id,TkA as Jd,xkA as Kd,PkA as Ld,WM as Md,_y as Nd,Ny as Od,Oy as Pd,OkA as Qd,wkA as Rd,LkA as Sd,Wr as Td,La as Ud,w6A as Vd,DmA as Wd,_mA as Xd,NmA as Yd,OmA as Zd,wmA as _d,eD as $d,LmA as ae,qmA as be,VmA as ce,KmA as de,tD as ee,HmA as fe,uD as ge,za as he,mD as ie,fD as je,$D as ke,hD as le,RD as me,JmA as ne,UmA as oe,QmA as pe,XSA as qe,b6 as re,deA as se,ueA as te,Uo as ue,utA as ve,T6 as we,AR as xe,x6 as ye,Ox as ze,nR as Ae,iR as Be,aR as Ce,nrA as De,TrA as Ee,lR as Fe,cR as Ge,dR as He,xrA as Ie,PrA as Je,MrA as Ke,Wx as Le,DrA as Me,nj as Ne,_rA as Oe,NrA as Pe,sR as Qe,PI as Re,Fx as Se,C6 as Te,_7 as Ue,N7 as Ve,HrA as We,JrA as Xe,UrA as Ye,QrA as Ze,zrA as _e,Zx as $e,WrA as af,pR as bf,K7 as cf,$R as df,snA as ef,BR as ff,_eA as gf,LI as hf,qI as if,NeA as jf,Qo as kf,Ur as lf,$nA as mf,ti as nf,BnA as of,yR as pf,Ta as qf,PnA as rf,dP as sf,MnA as tf,uP as uf,pP as vf,U7 as wf,SR as xf,DnA as yf,GR as zf,_nA as Af,kP as Bf,mP as Cf,VnA as Df,VI as Ef,qeA as Ff,Ga as Gf,Z7 as Hf,Ap as If,jp as Jf,IP as Kf,wiA as Lf,ttA as Mf,rtA as Nf,zI as Of,ZiA as Pf,JR as Qf,UR as Rf,AaA as Sf,jaA as Tf,eaA as Uf,eF as Vf,LP as Wf,qP as Xf,XI as Yf,cp as Zf,rM as _f,fF as $f,nM as ag,YI as bg,EF as cg,$F as dg,aM as eg,BF as fg,IlA as gg,lM as hg,up as ig,cM as jg,r6A as kg,E6A as lg,uM as mg,pM as ng,RF as og,zo as pg,ic as qg,yc as rg,_c as sg,qc as tg,ByA as ug,z1 as vg,hyA as wg,gyA as xg,Fb as yg,Gb as zg,CyA as Ag,bb as Bg,vyA as Cg,TyA as Dg,Tb as Eg,NyA as Fg,OyA as Gg,wyA as Hg,Z1 as Ig,Mb as Jg,dw as Kg,fw as Lg,RSA as Mg,Hc as Ng,Jk as Og,PSA as Pg,Kk as Qg,Hk as Rg,Uk as Sg,USA as Tg,QSA as Ug};
//# sourceMappingURL=https://app.framerstatic.com/chunk-KXST4KGG.mjs.map
