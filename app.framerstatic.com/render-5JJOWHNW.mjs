import{a as fl}from"https://app.framerstatic.com/chunk-XWYIDHFR.mjs";import"https://app.framerstatic.com/chunk-KJ2NMK35.mjs";import{a as Qe}from"https://app.framerstatic.com/chunk-T3VBPXGO.mjs";import{a as ll}from"https://app.framerstatic.com/chunk-YJVTTCVT.mjs";import{a as Zo,b as cl,c as dl}from"https://app.framerstatic.com/chunk-4IRSSX4H.mjs";import"https://app.framerstatic.com/chunk-GV2O5CYK.mjs";import"https://app.framerstatic.com/chunk-AXBRCIOZ.mjs";import{$b as Bs,Ad as nl,B as qo,Bd as il,Cb as bs,Dd as al,Ed as sl,Fa as Vr,Fb as Ss,Fc as Ws,Gc as qs,Jb as M,Jc as qr,K as Gr,Kb as yt,Kc as Ls,Lb as v,Mb as vs,Nb as Ps,Qc as io,Sc as Lr,Uc as Ks,Vc as Xs,Xb as ks,Zc as Zs,_c as zt,a as _o,ac as zr,ad as js,b as ls,bc as As,c as cs,cc as Ts,dc as Rs,e as ds,ec as Wr,fb as Is,fd as Hs,g as fs,h as ms,jb as xs,jd as Ys,kd as Js,ld as Qs,m as Go,n as ps,nd as $s,o as Vo,od as el,pc as Ds,pd as tl,q as zo,qc as Ms,r as Wo,rc as _s,s as us,sd as ol,tc as Gs,td as rl,u as gs,uc as Vs,ud as Ko,vc as zs,vd as Xo,w as ys,x as hs,y as Cs,yb as Fs,yd as z}from"https://app.framerstatic.com/chunk-WL7J7OJU.mjs";import"https://app.framerstatic.com/chunk-XBQR3TLW.mjs";import"https://app.framerstatic.com/chunk-VVCMSYJZ.mjs";import"https://app.framerstatic.com/chunk-5TPR7O6J.mjs";import{b as Je}from"https://app.framerstatic.com/chunk-PWXLCZ2T.mjs";import{h as ss}from"https://app.framerstatic.com/chunk-NR6E7FK3.mjs";import{I as Ja}from"https://app.framerstatic.com/chunk-QXPABWRU.mjs";import"https://app.framerstatic.com/chunk-KUH3GUUH.mjs";import"https://app.framerstatic.com/chunk-IHOAENGB.mjs";import{A as _t,Aa as Mo,Ab as $a,C as G,Ca as Xa,E as Na,F as Ba,G as Aa,H as Ao,I as To,J as Ta,K as Ra,L as Da,M as Gt,O as Ro,P as Do,_ as _a,ga as Ga,ra as Va,z as Mt,za as Ka,zb as ja}from"https://app.framerstatic.com/chunk-OE3UH73D.mjs";import{a as qa,b as La,c as Ha,d as Ya,e as Qa,h as es}from"https://app.framerstatic.com/chunk-NTR3X2FQ.mjs";import{Hd as Pa,Vf as Ma,ab as Ia,cb as Fa,ee as Ea,ga as ha,hb as ba,ja as Ca,ka as x,la as wa,rb as Sa}from"https://app.framerstatic.com/chunk-KXST4KGG.mjs";import"https://app.framerstatic.com/chunk-2AHBAQI3.mjs";import{j as va}from"https://app.framerstatic.com/chunk-UVZ7CNUM.mjs";import"https://app.framerstatic.com/chunk-EDICM4ZE.mjs";import"https://app.framerstatic.com/chunk-MTT6DWBN.mjs";import"https://app.framerstatic.com/chunk-5C7X4FEK.mjs";import"https://app.framerstatic.com/chunk-Z2EPYIAC.mjs";import"https://app.framerstatic.com/chunk-N57XNHE3.mjs";import"https://app.framerstatic.com/chunk-R4KRXK5R.mjs";import"https://app.framerstatic.com/chunk-KOQ7F52D.mjs";import"https://app.framerstatic.com/chunk-SE354WOV.mjs";import{i as Oa,j as ka}from"https://app.framerstatic.com/chunk-YE4QPCYK.mjs";import"https://app.framerstatic.com/chunk-RN5JFL7R.mjs";import"https://app.framerstatic.com/chunk-LPUCU4G7.mjs";import"https://app.framerstatic.com/chunk-VCMWZKR3.mjs";import"https://app.framerstatic.com/chunk-PGNJ6YYR.mjs";import"https://app.framerstatic.com/chunk-WAFDZ45U.mjs";import"https://app.framerstatic.com/chunk-ACLYC7XQ.mjs";import"https://app.framerstatic.com/chunk-YE25YANI.mjs";import"https://app.framerstatic.com/chunk-KU5DUMHH.mjs";import"https://app.framerstatic.com/chunk-2BNFJ2QY.mjs";import{a as Vt}from"https://app.framerstatic.com/chunk-OTFXIJYK.mjs";import"https://app.framerstatic.com/chunk-EWEZCJKH.mjs";import"https://app.framerstatic.com/chunk-Q4ZQNAWB.mjs";import{a as as}from"https://app.framerstatic.com/chunk-X7PME7OH.mjs";import{a as Ua,b as st}from"https://app.framerstatic.com/chunk-5O3SN7LN.mjs";import{b as Us}from"https://app.framerstatic.com/chunk-25J2CX2A.mjs";import"https://app.framerstatic.com/chunk-7E4VDN7V.mjs";import"https://app.framerstatic.com/chunk-CZU44X6D.mjs";import"https://app.framerstatic.com/chunk-D7MEQ7Y3.mjs";import{i as ya}from"https://app.framerstatic.com/chunk-R3IAJKKE.mjs";import"https://app.framerstatic.com/chunk-DHNXI6EU.mjs";import"https://app.framerstatic.com/chunk-YS3B4HMG.mjs";import{a as Ns,d as Os}from"https://app.framerstatic.com/chunk-5DNWSM2M.mjs";import"https://app.framerstatic.com/chunk-G3FBIMTO.mjs";import"https://app.framerstatic.com/chunk-GCKJANXF.mjs";import"https://app.framerstatic.com/chunk-R6TE5BZB.mjs";import"https://app.framerstatic.com/chunk-NEM2YVVB.mjs";import"https://app.framerstatic.com/chunk-ABHKVANM.mjs";import{a as ws}from"https://app.framerstatic.com/chunk-5LBBN5VN.mjs";import{a as is}from"https://app.framerstatic.com/chunk-LDGUHDRN.mjs";import{b as Wa,m as Za}from"https://app.framerstatic.com/chunk-UYDBOT4S.mjs";import{e as gt,f as za}from"https://app.framerstatic.com/chunk-VHY5GXEM.mjs";import{a as xa,m as ae}from"https://app.framerstatic.com/chunk-WW7ZRIP2.mjs";import"https://app.framerstatic.com/chunk-PABHF7FN.mjs";import"https://app.framerstatic.com/chunk-FEKBOCM3.mjs";import{$d as Vi,Gd as Mr,Hd as _r,Ia as Oo,Kg as qi,Rb as Oi,Yc as Ai,Yd as Mi,Zd as _i,_b as ki,_d as Gi,ja as Dr,qd as Ri,rd as Di,vg as zi,wg as Wi,yc as Bi}from"https://app.framerstatic.com/chunk-NBGN6U2B.mjs";import"https://app.framerstatic.com/chunk-7T4EWP5A.mjs";import"https://app.framerstatic.com/chunk-MVKO2TKJ.mjs";import{a as lt}from"https://app.framerstatic.com/chunk-7GSEC7H4.mjs";import{e as Ti,f as Me}from"https://app.framerstatic.com/chunk-DXTSFT7O.mjs";import"https://app.framerstatic.com/chunk-Y4KSD2WZ.mjs";import"https://app.framerstatic.com/chunk-T5QGEASX.mjs";import{b as Es}from"https://app.framerstatic.com/chunk-344MW27R.mjs";import"https://app.framerstatic.com/chunk-YOFBDBTL.mjs";import"https://app.framerstatic.com/chunk-6GUIIDJM.mjs";import{Af as ca,De as K,Ef as Tt,Ff as Rt,Hf as Dt,Ig as ga,J as Hi,Je as Ye,Jf as Bo,Nc as $i,Ne as oa,Qe as ra,S as Yi,Se as na,Tf as da,_e as ko,b as Xi,cf as ia,df as aa,fb as Ji,gf as sa,h as Zi,m as ji,nb as Qi,ng as fa,og as ma,qe as ea,sg as pa,tg as ua,we as ta,xe as ye,zf as la}from"https://app.framerstatic.com/chunk-2GS7YNG7.mjs";import{a as Lo}from"https://app.framerstatic.com/chunk-RDEZD42O.mjs";import"https://app.framerstatic.com/chunk-THMUYYUS.mjs";import"https://app.framerstatic.com/chunk-PQ3FEGJN.mjs";import"https://app.framerstatic.com/chunk-OOVHNOCC.mjs";import{a as os}from"https://app.framerstatic.com/chunk-TYRXRGO6.mjs";import{a as H}from"https://app.framerstatic.com/chunk-QFU6OGL3.mjs";import{a as ts,b as rs,c as ns}from"https://app.framerstatic.com/chunk-RBHWVGUT.mjs";import"https://app.framerstatic.com/chunk-WIMTHTQW.mjs";import{Le as No,ic as Fe,md as Ni,ub as Pi}from"https://app.framerstatic.com/chunk-Z44G2RQ4.mjs";import{h as Ei}from"https://app.framerstatic.com/chunk-GHX7JDAA.mjs";import{$d as ci,$s as vo,B as je,Fk as hi,Hp as Ii,I as Te,Ib as ii,Ip as xi,Jb as ai,Jt as no,Kb as si,Ks as at,Lb as D,Lc as Or,Ll as At,Ls as vi,Mq as Tr,Ms as Fo,Ne as fi,Nq as Fi,Os as bo,Pe as kr,Pj as yi,Si as Br,Te as mi,Yf as pi,Ze as N,Zf as ui,_e as Pe,_q as Rr,_s as So,at as Po,bf as kt,bo as Ci,bt as Eo,cf as He,cm as Ar,cp as Ui,dj as Uo,fb as oi,ga as ve,gr as bi,hb as ri,hj as gi,hk as Io,hr as _,jb as ni,je as wo,jk as ut,l as ee,ok as xo,qc as li,sc as Co,ve as di,xc as De,yo as wi}from"https://app.framerstatic.com/chunk-L7L7BWTW.mjs";import"https://app.framerstatic.com/chunk-VXJAAVJQ.mjs";import{e as Si}from"https://app.framerstatic.com/chunk-6C6VSETA.mjs";import"https://app.framerstatic.com/chunk-FYUJQV6J.mjs";import"https://app.framerstatic.com/chunk-KYPY4QS7.mjs";import"https://app.framerstatic.com/chunk-UKZHYWSM.mjs";import"https://app.framerstatic.com/chunk-XFC6OVIX.mjs";import{K as rt,n as Hn,x as Yn,y as Jn}from"https://app.framerstatic.com/chunk-INOXWMPK.mjs";import"https://app.framerstatic.com/chunk-XFC6OVIX.mjs";import"https://app.framerstatic.com/chunk-LH43QRIB.mjs";import{a as V,b as Zn}from"https://app.framerstatic.com/chunk-4AQCMAAQ.mjs";import"https://app.framerstatic.com/chunk-XGYAAWSK.mjs";import"https://app.framerstatic.com/chunk-VL3ZLSFG.mjs";import"https://app.framerstatic.com/chunk-YZMKOCQQ.mjs";import{c as jn}from"https://app.framerstatic.com/chunk-YYHHSCRK.mjs";import"https://app.framerstatic.com/chunk-POQKH4YA.mjs";import{e as Li,g as Ki,i as de}from"https://app.framerstatic.com/chunk-LFB3N7NP.mjs";import"https://app.framerstatic.com/chunk-R3NZHMAQ.mjs";import"https://app.framerstatic.com/chunk-AUNF3KWQ.mjs";import{p as it,r as Bt}from"https://app.framerstatic.com/chunk-65XKJBP2.mjs";import{b as le,d as $n,e as nt,f as ho,i as xe,m as ei,o as ti}from"https://app.framerstatic.com/chunk-ZQUNXESX.mjs";import{Bc as Qn,a as te,ad as Re,b as h}from"https://app.framerstatic.com/chunk-NIDOI5EE.mjs";import"https://app.framerstatic.com/chunk-PI2QROPJ.mjs";import{e as Xn}from"https://app.framerstatic.com/chunk-AGVZOAU6.mjs";import"https://app.framerstatic.com/chunk-FWMM76SF.mjs";import{E as Kn,ca as ro,da as Ot,i as uo,l as ie,p as go,s as yo}from"https://app.framerstatic.com/chunk-PNIOO2GU.mjs";import{a as p,b as oo}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{e as u,f as re,g as ne,h as I,i as k,j as y,k as Nt,l as A,m as po}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var pl=u(h()),tf={BooleanControlPropRow:Zo,EnumControlPropRow:Ws,StringControlPropRow:io};function ml({children:r}){return(0,pl.jsx)(bs.Provider,{value:tf,children:r})}var Kr="data-chrome";function ul(r){return r instanceof HTMLElement?r.closest(`[${Kr}]`)!==null:!1}var Xr="data-floating-canvas-chrome";function gl(r){return r instanceof Element?r.closest(`[${Xr}]`)!==null:!1}function yl(){return window}function Zr(){return yl().secureFrameAncestors}function Wt(){V(Zr(),"Must have secure frame ancestors.")}var cr=u(te());var hl="chromeHidden_c1gxt05z",Cl="nonHudChromeWrapper_n1sd5akc";var ht=u(te());var jr=u(h());function wl({collectionItemNode:r,collectionNode:o,controlProp:e,variableId:t,warningMessage:n,onChange:i}){let a=_(),s=o.getPropertyControls(a.tree)[t];return V(s?.type==="boolean"),(0,jr.jsx)(z,{title:s.title??"",warningMessage:n,children:(0,jr.jsx)(js,{control:s,controlProp:e,fieldId:t,itemId:r.id,onChange:d=>{ae(d)&&i(t,d)}})})}var Ul="onPageCMSFieldsModal_o1kosemn",Il="onPageCMSFieldsModalHeader_o1tcokht",xl="onPageCMSFieldsModalBody_o11jr4ka",rf=1,Fl=de.panelPadding+rf,bl="onPageCMSFieldsModalButtonContainer_oaqx903",jo="button_b1gqim6f";var Sl="wrapper_wje69dc",vl="input_i1rqgchl",Pl="icon_ixghur2",El="collectionInputHeight_c1d0unc6";var Hr=u(h());function Nl({collectionNode:r,controlProp:o,variableId:e,warningMessage:t,onChange:n}){let i=_(),l=r.getPropertyControls(i.tree)[e];V(l?.type==="collectionreference");let s=Ii(l,o);V(!D(s),"Variables are not supported");let d=l.dataIdentifier;function m(f){n(e,{type:"collectionreference",value:f})}return(0,Hr.jsx)(z,{title:l.title??"",warningMessage:t,children:(0,Hr.jsx)(ks,{large:!0,value:s,onChange:m,className:vl,dataIdentifier:d,wrapperClassName:oi(Sl,El),iconClassName:Pl})})}var Yr=u(h());function Ol({collectionItemNode:r,collectionNode:o,controlProp:e,variableId:t,warningMessage:n,onChange:i}){let a=_(),s=o.getPropertyControls(a.tree)[t];return V(s?.type==="color"),(0,Yr.jsx)(z,{title:s.title??"",warningMessage:n,children:(0,Yr.jsx)(Ys,{control:s,controlProp:e,fieldId:t,itemId:r.id,onChange:d=>{ae(d)&&i(t,d)},ColorPickerPopoutComponent:Fs})})}var Jr=u(h());function kl({collectionItemNode:r,collectionNode:o,controlProp:e,variableId:t,warningMessage:n,onChange:i}){let a=_(),s=o.getPropertyControls(a.tree)[t];return V(s?.type==="date"),(0,Jr.jsx)(z,{title:s.title??"",warningMessage:n,children:(0,Jr.jsx)(Js,{control:s,controlProp:e,fieldId:t,itemId:r.id,onChange:d=>{ae(d)&&i(t,d)},required:!1})})}var Qr=u(h());function Bl({collectionItemNode:r,collectionNode:o,controlProp:e,variableId:t,warningMessage:n,onChange:i}){let a=_(),s=o.getPropertyControls(a.tree)[t];return V(s?.type==="enum"),(0,Qr.jsx)(z,{title:s.title??"",warningMessage:n,children:(0,Qr.jsx)(Qs,{control:s,controlProp:e,fieldId:t,itemId:r.id,onChange:d=>{ae(d)&&i(t,d)}})})}var $r=u(h());function Al({collectionItemNode:r,collectionNode:o,controlProp:e,variableId:t,warningMessage:n,onChange:i}){let a=_(),s=o.getPropertyControls(a.tree)[t];if(V(s?.type==="file"),V(!De(e?.value),"Dynamic values are not supported within required field validation"),e&&e?.type!=="file")return null;let m=(e?.value??"").split(".").pop(),f=!m||s.allowedFileTypes.length===0||s.allowedFileTypes.includes(m);return(0,$r.jsx)(z,{title:s.title??"",warningMessage:n,showWarningTint:!f,children:(0,$r.jsx)($s,{control:s,controlProp:e,fieldId:t,itemId:r.id,onChange:g=>{ae(g)&&i(t,g)},reset:()=>{i(t,{type:"file",value:void 0})}})})}var en=u(h());function Tl({collectionItemNode:r,collectionNode:o,controlProp:e,variableId:t,onChange:n}){let i=_(),a=as(c=>{let C=c(e);C&&n(t,C)}),s=o.getPropertyControls(i.tree)[t];V(s?.type==="array"),V(!e||yi(e));let d=us(e,s,!0),m=gs(e,s,!0),g=Wo(d??m,s);return(0,en.jsx)(z,{title:s.title??"",warningMessage:g,children:(0,en.jsx)(el,{collectionId:o.id,control:s,fieldId:t,controlProp:e,itemId:r.id,onChange:a,required:!1})})}var tn=u(h());function Rl({collectionItemNode:r,collectionNode:o,controlProp:e,variableId:t,warningMessage:n,onChange:i}){let a=_(),s=o.getPropertyControls(a.tree)[t];return V(s?.type==="responsiveimage"),(0,tn.jsx)(z,{title:s.title??"",warningMessage:n,children:(0,tn.jsx)(tl,{control:s,controlProp:e,fieldId:t,itemId:r.id,onChange:d=>{let m=d(e);ae(m)&&i(t,m)},reset:()=>{let d={type:"image",value:void 0};i(t,d)}})})}var on=u(h());function Dl({collectionItemNode:r,collectionNode:o,controlProp:e,variableId:t,warningMessage:n,onChange:i}){let a=_(),s=o.getPropertyControls(a.tree)[t];return V(s?.type==="link"),(0,on.jsx)(z,{title:s.title??"",warningMessage:n,children:(0,on.jsx)(ol,{control:s,controlProp:e,fieldId:t,itemId:r.id,onChange:d=>{ae(d)&&i(t,d)},reset:()=>{let d={type:"link",value:void 0};i(t,d)}})})}var Ml="inputWrapper_i4uywus";var rn=u(h());function _l({collectionNode:r,controlProp:o,variableId:e,warningMessage:t,onChange:n}){let i=_(),l=r.getPropertyControls(i.tree)[e];p(l?.type==="multicollectionreference");let s=l.dataIdentifier,d=xi(l,o)??[];return p(!D(d),"Variables are not supported"),(0,rn.jsx)(z,{title:l.title??"",warningMessage:t,children:(0,rn.jsx)(Ls,{large:!0,value:d,onChange:m=>{n(e,{type:"multicollectionreference",value:m})},wrapperClassName:Ml,dataIdentifier:s})})}var nn=u(h());function Gl({collectionItemNode:r,collectionNode:o,controlProp:e,variableId:t,warningMessage:n,onChange:i}){let a=_(),s=o.getPropertyControls(a.tree)[t];return V(s?.type==="number"),(0,nn.jsx)(z,{title:s.title??"",warningMessage:n,children:(0,nn.jsx)(rl,{control:s,controlProp:e,fieldId:t,itemId:r.id,onChange:d=>{ae(d)&&i(t,d)}})})}var Ho=u(h()),Vl=["left","right","auto-vertical"];function zl({collectionNode:r,collectionItemNode:o,controlProp:e,variableId:t,onChange:n,warningMessage:i}){let a=_(),s=r.getPropertyControls(a.tree)[t];p(s?.type==="richtext");let d=e&&jn(e.value)?e.value:void 0,m=c=>{n(t,{type:s.type,value:c})},f=Lo(()=>at(bo)),g=Bt("pasteMarkdown");return(0,Ho.jsx)(z,{title:s.title??"",warningMessage:i,children:g?(0,Ho.jsx)(Ko,{enabled:!0,schema:f,compactTagSelector:!0,defaultValue:d??"",onChange:m,scopeType:"ContentManagement",onUnsavedChange:lt,popoverAttachmentEdge:Vl,fallbackToModalAppearance:!0,saveOnMetaArrowNavigation:!0},o.id):(0,Ho.jsx)(Xo,{enabled:!0,supportsEmbeds:!0,supportsMedia:!0,compactTagSelector:!0,defaultValue:d??"",onChange:m,scopeType:"ContentManagement",onUnsavedChange:lt,popoverAttachmentEdge:Vl,fallbackToModalAppearance:!0,saveOnMetaArrowNavigation:!0},o.id)})}var Yo=u(h());function Wl({collectionNode:r,collectionItemNode:o,controlProp:e,variableId:t,onChange:n,warningMessage:i}){let a=_(),s=r.getPropertyControls(a.tree)[t];p(s?.type==="string");let d=e&&le(e.value)?e.value:void 0,m=s.placeholder,f=s.defaultValue??"",g=d??f,c=C=>{n(t,{type:s.type,value:C})};return(0,Yo.jsx)(z,{title:s.title??"",warningMessage:i,children:s.displayTextArea?(0,Yo.jsx)(ia,{value:g,onChange:c,constantChange:!0,placeholder:m,minRows:10,maxRows:30,className:il},o.id):(0,Yo.jsx)(aa,{type:s.obscured?"password":"text",value:g,onChange:c,placeholder:m,constantChange:!0,className:Hs})})}var R=u(h());function Ll({fieldIdsToShow:r,requiredFieldsOnly:o,collectionItemId:e,collectionNodeId:t}){let[n,i]=(0,ht.useState)(!0),[a,l]=(0,ht.useState)(()=>new Map),s=a.size>0,d=x(),{treeStore:m,projectStore:f,modalStore:g}=d.stores,c=e!==d.stores.canvasStore.temporaryCollectionItemNodeId,C=m.tree.getNodeWithTrait(t,kt),w=m.tree.getNodeWithTrait(e,He);(0,ht.useEffect)(()=>{(!w||!C||w.parentid!==C.id)&&g.dismiss()},[w,C,g]);let U=o||c,B=()=>{for(let[Q,q]of a)m.tree.current(w)?.setControlProp(Q,q);U?c?(m.tree.current(w)?.set({privateToUserId:void 0}),f.commitTreeAndSend()):d.stores.canvasStore.saveTemporaryCollectionItem():f.commitTreeAndSend(),g.dismissAll()},P=()=>{if(!_o()){if(c&&b.size>0){i(!1);return}B()}},b=cf({collectionNode:C||void 0,collectionItemNode:w||void 0,tempControlProps:a,fieldIdsToShow:r});function F(Q){let T=C?.getPropertyControls(m.tree)?.[Q];if(!T)return;let Xe=b.get(Q);if(!(Xe?.type==="required"&&!(c&&!n)))return Wo(Xe,T)}let S=(Q,q)=>{p(w,"CollectionItemNode must be present");let T=w.getControlProp(Q);l(Xe=>T?.value===q.value?ro.remove(Xe,Q):ho(T?.value)&&ho(q.value)&&qa(T.value,q.value)?ro.remove(Xe,Q):ql(T)&&ql(q)?ro.remove(Xe,Q):ro.set(Xe,Q,q))},E=()=>{if(!s){Ie();return}g.push({type:"Confirmation",title:"Unsaved Changes",description:"Are you sure that you want to discard your new item?",interactionRequired:!0,onConfirm:()=>Ie(),cancelLabel:"Continue Editing",confirmLabel:"Discard Item",dismissVariant:"primary",variant:"destructiveSecondary",cancelOnEnter:!0,confirmOnEnter:!1,source:"on_page_hud",buttonDirection:"column",hasBackdrop:!0})},Ie=()=>{w&&(m.tree.remove(w.id),f.commitTreeAndSend(),g.dismiss())},Ke=()=>{if(c){E();return}if(o){g.dismiss();return}B()},Be=()=>{if(c){E();return}g.dismiss()};return(0,R.jsxs)(Tt,{hasBackdrop:!0,className:Ul,visible:r.length>0,onDismiss:Ke,onConfirm:P,children:[(0,R.jsx)(Rt,{separator:!0,title:c?"New Item":o?"Required Fields":"All Fields",className:Il,children:(0,R.jsx)(Dt,{onDismiss:Be})}),(0,R.jsxs)(ga,{className:xl,children:[(0,R.jsx)(da,{size:0}),r.map(Q=>{if(!C||!w)return null;let q=C.getVariable(Q);if(!q)return null;let T=a.get(Q)??w.getControlProp(Q);return(0,R.jsx)(lf,{variable:q,collectionItemNode:w,collectionNode:C,controlProp:T,onChange:S,getWarningMessage:F},Q)})]}),(0,R.jsx)(Bo,{displayDivider:!1,paddingTop:Fl,className:bl,children:(0,R.jsxs)(Xi,{children:[o?(0,R.jsx)(K,{bold:!0,onClick:Be,className:jo,children:(0,R.jsx)(Ye,{children:"Cancel"})}):(0,R.jsx)(K,{bold:!0,onClick:Be,className:jo,children:(0,R.jsx)(Ye,{children:s?"Discard":"Cancel"})}),(0,R.jsx)(K,{bold:!0,type:"submit",variant:"primary",className:jo,enabled:o?b.size===0:s,children:(0,R.jsx)(Ye,{children:"Save"})})]})})]})}function lf({variable:r,collectionItemNode:o,collectionNode:e,controlProp:t,onChange:n,getWarningMessage:i}){let a=r.type;switch(a){case"slug":return ut(r)?(0,R.jsx)(nl,{collectionNode:e,collectionItemNode:o,controlProp:t,onChange:n,variable:r,warningMessage:i(r.id)}):null;case"string":return(0,R.jsx)(Wl,{collectionNode:e,collectionItemNode:o,controlProp:t,variableId:r.id,onChange:n,warningMessage:i(r.id)});case"richtext":return(0,R.jsx)(zl,{collectionNode:e,collectionItemNode:o,controlProp:t,variableId:r.id,onChange:n,warningMessage:i(r.id)});case"link":return(0,R.jsx)(Dl,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:r.id,warningMessage:i(r.id),onChange:n});case"image":return(0,R.jsx)(Rl,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:r.id,warningMessage:i(r.id),onChange:n});case"array":return(0,R.jsx)(Tl,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:r.id,onChange:n});case"multicollectionreference":return(0,R.jsx)(_l,{collectionNode:e,controlProp:t,variableId:r.id,warningMessage:i(r.id),onChange:n});case"collectionreference":return(0,R.jsx)(Nl,{collectionNode:e,controlProp:t,variableId:r.id,warningMessage:i(r.id),onChange:n});case"file":return(0,R.jsx)(Al,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:r.id,warningMessage:i(r.id),onChange:n});case"date":return(0,R.jsx)(kl,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:r.id,warningMessage:i(r.id),onChange:n});case"number":return(0,R.jsx)(Gl,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:r.id,warningMessage:i(r.id),onChange:n});case"boolean":return(0,R.jsx)(wl,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:r.id,warningMessage:i(r.id),onChange:n});case"enum":return(0,R.jsx)(Bl,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:r.id,warningMessage:i(r.id),onChange:n});case"color":return(0,R.jsx)(Ol,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:r.id,warningMessage:i(r.id),onChange:n});default:Zn(a)}}function cf({collectionNode:r,collectionItemNode:o,tempControlProps:e,fieldIdsToShow:t}){let n=x(),i=v(()=>n.stores.treeStore.tree,[]),a=ps(r,o);return(0,ht.useMemo)(()=>{let l=new Map;if(!r||!o)return l;for(let s of t){let d=r.getVariable(s);if(!d)continue;let f=r.getPropertyControls(i)[s];if(!f)continue;let g=e.get(s)??o.getControlProp(s),c=a.get(s),C;(Io(d)||ut(d))&&(C=Vo(d,r.variables,o));let w=zo(d.type,f,g,C,void 0,xo(d),c);w&&l.set(s,w)}return l},[r,o,t,a,i,e])}function ql(r){return!r||ti(r.value)?!0:le(r.value)?Ea(r.value):ho(r.value)?r.value.length===0:!1}var Qo=u(te());var Kl="editorContainer_e1zu74n";var Zl=u(h());function Xl({initialHtml:r,onContentChange:o,onEscape:e}){let t=(0,Qo.useRef)(null);return(0,Qo.useEffect)(()=>{let n;async function i(){let{baseKeymap:a,chainCommands:l,dropCursor:s,gapCursor:d,history:m,keymap:f,redo:g,undo:c,undoInputRule:C}=await Gt(),w=it.isOn("pasteMarkdown")?(F,S,E)=>Po(F,S,E):(F,S,E)=>Eo(F,E),U=at(Fo),B=w(r,U,{plugins:[m(),f({"Mod-z":l(C,c),"Mod-Shift-z":g,"Shift-Enter":Ao(U),"Mod-b":Wr(U.marks.bold),"Mod-i":Wr(U.marks.italic),"Shift-Tab":Oa(U.nodes.listItem),Tab:l(ka(U.nodes.listItem),()=>!0),Backspace:l(C,To(U)),Escape:()=>(e?.(),!!e)}),f(a),s({color:"var(--framer-color-text)",width:2}),d(),Ro()]}),P,b=new Si(null,{state:B,editable:()=>!0,dispatchTransaction:F=>{let S=b.state.apply(F);if(b.updateState(S),P!==S.doc){let E=it.isOn("pasteMarkdown")?So(S.doc,U):vo(S.doc);o(E),P=S.doc}}});t.current&&(t.current.innerHTML="",t.current.appendChild(b.dom)),n=b}return i(),()=>n?.destroy()},[r,o,e]),(0,Zl.jsx)("div",{ref:t,className:Kl})}function $e({tree:r,webPageNodeId:o}){let e=r.getNodeWithTrait(o,mi);if(e?.loaded)return e.loaded;e?.load().catch(ie)}function be({screenWidth:r,tree:o,webPageNodeId:e}){let n=$e({tree:o,webPageNodeId:e})?.getBreakpointValues(),i=Ui(n,r);return o.get(i)}function _e(r,o,e){let t=e.temporaryCollectionItemNodeId??r.collectionItemNodeId;return o.tree.getNodeWithTrait(t,He)??void 0}function qt(r,o,e){let t=_e(r,o,e);if(t)return o.tree.getNodeWithTrait(t.parentid,kt)??void 0}var Y=class{constructor(o){this.engine=o}};var ff=/^(?<hashes>#{1,6})\s$/u,he=class r extends Y{constructor(e,t,n,i="none"){super(e);this.nodeId=t;this.renderId=n;this.eventSource=i;y(this,"handleOnFocus",()=>this.proseMirrorEditor?.controls.handleOnFocus());y(this,"handleOnBlur",()=>this.proseMirrorEditor?.controls.handleOnBlur());y(this,"proseMirrorEditor",null);y(this,"hasTextFitViewBox",!1);this.engine.beginUndoGroup(),this.start()}getRichTextNode(){return this.engine.tree.getNodeWithTrait(this.nodeId,N)}update(){let e=this.getRichTextNode();if(!e||!r.supportsNode(e)){this.engine.exitTool();return}if(!e.textFitViewBoxSize||this.hasTextFitViewBox)return;let t=Vi(this.engine.tree,e);this.engine.stores.projectStore.commitTreeAndSend(),t&&(this.hasTextFitViewBox=!0)}async stop(){let e=this.getRichTextNode();e&&(e.cache.isEditable=!1),this.proseMirrorEditor?.destroy(),this.proseMirrorEditor=null,this.engine.endUndoGroup(),this.engine.stores.toolStore.proseMirrorView=null,this.engine.stores.toolStore.nodeInTextEditorId=null}start(){let e=this.getRichTextNode();if(!e)return;this.hasTextFitViewBox=Mi(this.engine.tree,e),this.engine.stores.projectStore.commitTreeAndSend();let t=Do(this.engine.tree,e);if(t.length===0){this.init();return}rt.loadFonts(t).catch(ie).finally(()=>this.init())}init(){this.startAsync().catch(e=>{ie(e),this.engine.exitTool()})}async startAsync(){let e=this.getRichTextNode();if(!e)return this.engine.exitTool();this.proseMirrorEditor=await this.createProseMirrorEditor(e),e.cache.isEditable=!0,this.engine.stores.toolStore.proseMirrorView=this.proseMirrorEditor.view}async createProseMirrorEditor(e){let{baseKeymap:t,chainCommands:n,createParagraphNear:i,Decoration:a,DecorationSet:l,dropCursor:s,EditorView:d,ellipsis:m,emDash:f,gapCursor:g,history:c,InputRule:C,inputRules:w,keymap:U,liftEmptyBlock:B,liftListItem:P,newlineInCode:b,redo:F,sinkListItem:S,splitBlock:E,splitListItem:Ie,toggleMark:Ke,undo:Be,undoInputRule:Q}=await Gt(),q=this.engine,T=at(Fo),Xe=n(Ie(T.nodes.listItem),b,i,B,Aa(T),Ba(T),(j,L)=>E(j,L&&(X=>{let ot=j.selection,Pt=this.getRichTextNode();p(Pt,"RichTextNode not found");let Ae=ot.$from.node(1);if(!Rr(Ae)||!(ot.$to.parentOffset===ot.$to.parent.content.size))return L(X);let ge={...Ae.attrs},pt=Tr(Ae)&&ge.tag!=="p",to=X.mapping.map(j.selection.to),Et=j.selection.$from.marks();if(pt){let Ze=Pt.getNodeTextStylePreset(q.tree,"p")??Mr(q.tree,"p")??Dr.createDefault("p");_r(q,Ze),Pt.setNodeTextStylePreset(Ze),q.stores.projectStore.commitTreeAndSend(),ge.textStylePreset=Ze.id,ge.tag="p",ge.inlineStyles={},ge.blockStyles={}}else{let Ze=Et.find(Fi);ge.inlineStyles={...ge.inlineStyles,...Ze?.attrs.inlineStyles}}X.setNodeMarkup(to-1,void 0,ge),X.setStoredMarks(Et),pt&&X.removeStoredMark(T.marks.inlineStyles),L(X)})));function Wn(){return q.exitTool(),!0}p(!D(e.htmlContent),"Can't edit rich text node when htmlContent variable is assigned"),p(!D(e.textContent),"Can't edit rich text node when textContent variable is assigned");let Nr=()=>{let j=this.getRichTextNode();p(j,"RichTextNode not found");let L=j.getNodeInlineCodeStylePreset(q.tree)??Ri(q.tree)??new ki;return Di(q,L),j.setNodeInlineCodeStylePreset(L),L.id},qn=(it.isOn("pasteMarkdown")?(j,L,X)=>Po(j,L,X):(j,L,X)=>Eo(j,X))(e.html,T,{plugins:[c(),U({"Mod-z":n(Q,Be),"Mod-Shift-z":F,"Shift-Enter":Ao(T),"Mod-b":Ke(T.marks.bold),"Mod-i":Ke(T.marks.italic),"Shift-Tab":P(T.nodes.listItem),Tab:n(S(T.nodes.listItem),()=>!0),Backspace:n(Q,To(T)),Escape:Wn,Enter:Xe,"Mod-Shift-c":Ke(T.marks.inlineCode,{get inlineCodeStylePreset(){return Nr()}})}),U(t),s({color:Ki.cmsRichTextDropCursor,width:de.richTextDropCursor}),g(),Ro(),Ga({engine:this.engine,schema:T,nodeId:this.nodeId,getRichTextNode:()=>this.getRichTextNode()}),w({rules:[f,m,new C(ff,(j,L,X,ot)=>{let Pt=j.doc.resolve(X),Ae=Pt.node(1),mo=Pt.before(1);if(!Rr(Ae))return null;let ge=j.tr,pt="h"+(L.groups?.hashes?.length||1),to=this.getRichTextNode();p(to,"RichTextNode not found");let Et=to.getNodeTextStylePreset(q.tree,pt)??Mr(q.tree,pt)??Dr.createDefault(pt),Ze=Et.id;return _r(q,Et),to.setNodeTextStylePreset(Et),q.stores.projectStore.commitTreeAndSend(),Tr(Ae)||ge.removeMark(mo,mo+Ae.nodeSize,T.marks.inlineStyles),ge.delete(X,ot),ge.setNodeMarkup(mo,T.nodes.textBlock,{...Ae.attrs,blockStyles:Ze?{}:Ae.attrs.blockStyles,inlineStyles:Ze?{}:Ae.attrs.inlineStyles,textStylePreset:Ze,tag:pt}),ge}),Ta(T),Ra(T)]}),...Na({markType:T.marks.inlineCode,attrs:{get inlineCodeStylePreset(){return Nr()}}})]}),Ln,tt=new d(null,{state:qn,dispatchTransaction:j=>{let L=this.getRichTextNode();p(L,"Node should not be null");let X=tt.state.apply(j);if(tt.updateState(X),X=_i(X,tt,L),Ln!==X.doc){let ot=it.isOn("pasteMarkdown")?So(X.doc,T):vo(X.doc);L.html!==ot&&(r.updateNodeWithBreakpointAwareness({engine:this.engine,html:ot,node:L}),Gi(L,tt)),Ln=X.doc}this.engine.stores.projectStore.commitTreeAndSend()}});return{controls:{handleOnFocus(){tt.setProps({decorations(){}})},handleOnBlur(){tt.setProps({decorations(j){let L=j.selection;if(L.from!==L.to)return document.getSelection()?.removeAllRanges(),l.create(j.doc,[a.inline(L.from,L.to,{class:"selection",nodeName:"mark"})])}})}},destroy:()=>tt.destroy(),state:qn,view:tt}}static updateNodeWithBreakpointAwareness({engine:e,node:t,html:n,breakpointNode:i}){let{tree:a,stores:l}=e,{routeStore:s,canvasStore:d,treeStore:m}=l;i??=be({screenWidth:d.screenWidth,tree:m.tree,webPageNodeId:s.webPageNodeId});let f=t.originalid??t.id,g=!ci(i)||Ci(i)||!f,c=!No(a,t,"html"),C=a.getNodeWithTrait(f,N);if(p(C,`originalNode with id ${f} must exist`),g||c){C.set({html:n});return}if(t.getTextContent()===C.getTextContent()){C.set({html:Bi(C.html,Ai(n))});return}t.set({html:n},a,!1,!1)}static supportsNode(e){return N(e)&&!e.htmlContent&&!e.textContent}};function fe(){let r=x();return v(()=>$e({tree:r.stores.treeStore.tree,webPageNodeId:r.stores.routeStore.webPageNodeId}),[])}function jl(){let r=x(),{routeStore:o,treeStore:e,canvasStore:t}=r.stores;return Je(()=>_e(o,e,t),[],[o,e,t])}function Hl(){let r=x(),{routeStore:o,treeStore:e,canvasStore:t}=r.stores;return Je(()=>qt(o,e,t),[],[o,e,t])}var Ce=u(te());var Yl="modal_m168h77v";var me=u(h());function Jl({richTextNodeId:r}){let o=x(),e=fe(),[t,n]=(0,Ce.useState)(()=>{let C=be({screenWidth:o.stores.canvasStore.screenWidth,tree:o.stores.treeStore.tree,webPageNodeId:o.stores.routeStore.webPageNodeId});return p(C,"activeOnPageBreakpointNode must exist"),C.id}),i=(0,Ce.useRef)(new Map),a=(0,Ce.useMemo)(()=>o.stores.treeStore.tree.getNodeWithTrait(r,N)?.originalid??r,[r]),l=(0,Ce.useCallback)(()=>o.stores.scopeStore.active.getTopLevelReplicaVariants().find(({id:C})=>t===C),[t]),s=(0,Ce.useCallback)(()=>{let C=l();if(!C)return;let w=no(C.id,a),U=o.stores.treeStore.tree.get(w);return N(U)?U:void 0},[l,a]),d=v(()=>o.stores.scopeStore.active.getPrimaryVariant().id,[]),m=(0,Ce.useMemo)(()=>{let C=i.current.get(t);if(C!==void 0)return C;if(t===d){let w=o.stores.treeStore.tree.getNodeWithTrait(a,N);return p(w,"originalNode should exist"),w.html}return s()?.html??""},[s,d,t,a]),f=(0,Ce.useCallback)(C=>i.current.set(t,C),[t]),g=(0,Ce.useCallback)(()=>{o.exitTool(),o.stores.modalStore.dismiss()},[]),c=(0,Ce.useCallback)(()=>{let C=o.stores.scopeStore.active.getPrimaryVariant(),w=i.current.get(C.id);if(w!==void 0){let U=o.stores.treeStore.tree.getNodeWithTrait(a,N);p(U,`originalNode with id ${a} must exist`),U.html!==w&&U.set({html:w})}o.stores.scopeStore.active.getTopLevelReplicaVariants().forEach(U=>{let B=i.current.get(U.id);if(B===void 0)return;let P=no(U.id,a),b=o.stores.treeStore.tree.get(P);N(b)&&b.html!==B&&he.updateNodeWithBreakpointAwareness({breakpointNode:U,engine:o,html:B,node:b})}),i.current.clear(),o.stores.projectStore.commitTreeAndSend(),g()},[g,a]);return(0,me.jsxs)(Tt,{visible:!0,hasBackdrop:!0,onDismiss:g,className:Yl,children:[(0,me.jsx)(Rt,{separator:!0,title:"Responsive Text",children:(0,me.jsx)(Dt,{onDismiss:g})}),(0,me.jsxs)(ye,{gap:de.inputSpacing,paddingTop:de.modalPadding,children:[(0,me.jsx)(ua,{children:e?.getTopLevelVariants().map(C=>(0,me.jsx)(pa,{identifier:C.id,title:C.name??C.id,selected:t===C.id,onSelect:n},C.id))}),(0,me.jsx)(Xl,{initialHtml:m,onContentChange:f,onEscape:g})]}),(0,me.jsxs)(Bo,{displayDivider:!0,children:[(0,me.jsx)(K,{bold:!0,onClick:g,variant:"default",children:(0,me.jsx)(Ye,{children:"Cancel"})}),(0,me.jsx)(K,{bold:!0,onClick:c,variant:"primary",children:(0,me.jsx)(Ye,{children:"Save"})})]})]})}var $o=u(te());var Ql="modal_m1cvfiap",$l="form_f1nz04q2",ec="scroll_syo0l7n",tc="width100_w9541mz",an="editor_e73gufq";var dt=u(h()),oc=["left","right","auto-vertical"];function nc({controlKey:r,nodeId:o}){let e=_(),t=()=>{e.stores.modalStore.dismiss()},n=Je(()=>{let c=e.stores.treeStore.tree.get(o);return!He(c)&&!Pe(c)?null:c},[o],["Tree"]),i=Je(()=>{let g=e.tree.getScopeNodeFor(n);return g?Sa(g):null},[n],["Tree"]),a=Je(()=>{if(He(n)){let g=n?.parentid,c=e.stores.treeStore.tree,C=c.getNodeWithTrait(g,kt);if(!C)return null;let U=C.getPropertyControls(c)[r];return U?.type==="richtext"?U:null}if(Pe(n)){let g=ee.reactComponentForIdentifier(n.codeComponentIdentifier);if(!g)return null;let c=g.properties[r];return c?.type==="richtext"?c:null}return null},[r,n],["Tree","ActiveBundle"]),l=(0,$o.useMemo)(()=>{if(!n)return"";let g=rc(n,r);return le(g?.value)?g.value:""},[n,r]),s=!!i&&!!n&&a?.type==="richtext",d=g=>{if(!n)return;let c=e.stores.treeStore.tree.current(n);if(!c)return;let C,w=rc(n,r);w?C={...w,value:g}:C={type:"richtext",value:g},He(c),c.setControlProp(r,C),p(wa(e),"Only on-page engine can commit tree"),e.stores.projectStore.commitTreeAndSend()};(0,$o.useEffect)(()=>{s||e.stores.modalStore.dismiss()},[s]);let m=Lo(()=>at(Uo(n)?bo:vi)),f=Bt("pasteMarkdown");return s?(0,dt.jsxs)(Tt,{visible:!0,hasBackdrop:!0,onDismiss:t,className:Ql,formClassName:$l,children:[(0,dt.jsx)(Rt,{separator:!0,title:a.title??"Unknown",className:tc,children:(0,dt.jsx)(Dt,{onDismiss:t})}),(0,dt.jsx)(sa,{className:ec,children:f?(0,dt.jsx)(Ko,{enabled:!0,schema:m,className:an,defaultValue:l,onChange:d,scopeType:i,onUnsavedChange:lt,popoverAttachmentEdge:oc,fallbackToModalAppearance:!0,saveOnMetaArrowNavigation:!0}):(0,dt.jsx)(Xo,{enabled:!0,supportsEmbeds:Uo(n),supportsMedia:Uo(n),className:an,defaultValue:l,onChange:d,scopeType:i,onUnsavedChange:lt,popoverAttachmentEdge:oc,fallbackToModalAppearance:!0,saveOnMetaArrowNavigation:!0})})]}):null}function rc(r,o){if(He(r)){let e=r.getControlProp(o);return e?.type==="richtext"&&le(e.value)?e:null}if(Pe(r)){let e=ee.reactComponentForIdentifier(r.codeComponentIdentifier);if(!e)return null;let n=r.getControlProps(e.properties)[o];if(n?.type==="richtext"&&le(n.value))return n}return null}var ao=u(h()),uf={AcquireAddonModal:null,AcquireAdvancedAnalyticsTrialModal:null,AddToLibrary:null,BatchTranslate:null,CodeFileCreation:null,CompleteSignup:null,ComponentIsolationModal:null,Confirmation:Gs,ConfirmBatchTranslateAll:null,ConfirmDefaultLanguage:null,ConfirmDeleteCollectionItems:null,ConfirmDestructiveFeedbackAction:null,ConfirmDraftCollectionItem:null,ConfirmDraftLocale:null,ConfirmDraftPage:null,ConfirmPublishAbTest:null,ConfirmPublishDraftCollectionItem:null,ConfirmPublishDraftLocale:null,ConfirmPublishDraftPage:null,ConfirmRemoveTriggerEvent:null,ConfirmUpdatingAbVariants:null,ConvertToCMSPage:null,CreateAbTest:null,CreateComponent:null,CreateLayoutTemplate:null,CreateManagedCollection:null,CreateTeam:null,CustomBreakpoint:null,DashboardAddHeader:null,DashboardAddRedirect:null,DashboardAddRewrite:null,DashboardEditHeader:null,DashboardEditRedirect:null,DashboardEditRewrite:null,DeleteCodeFile:null,DeleteCustomFont:null,DeleteEntityFolder:null,DeleteFile:null,DeleteMultipleCodeFiles:null,DeleteMultipleEntityFolders:null,DeprecatedDrafts:null,DuplicateProjectWithVersion:null,DuplicateWebPage:null,FigmaImportTutorial:null,FlexToYearly:null,ImageCrop:Vs,ImageFocalPoint:zs,ImportFigma:null,ImportRedirects:null,LoadingFullDocument:null,LocaleReady:null,LocaleSettings:null,LocalizationGlossary:null,None:null,NudgePreferences:null,OnPageCMSFieldsModal:Ll,OnPageRichTextEditor:nc,OnPageRichTextVariantOverride:Jl,OverrideFile:null,PasteFromFigma:null,PlanCancellation:null,PluginCustomHTML:null,PluginFromURL:null,PluginWithModePicker:null,PublishModule:null,QuickActions:null,RemoveTeamLibraryModule:null,ReplaceTextStylePreset:null,ReplaceWebPage:null,SelectProjectToUpgrade:null,Shortcuts:null,StopAbTest:null,SubscriptionNotInOrder:null,TransferProject:null,Templates:null,UnlinkComponent:null,UnsavedChanges:null,UnsupportedFileSize:null,UnsupportedFileType:null,UpgradeDocument:null,UpsellEnterprise:null,UpsellFeature:null,Variables:null,VectorImport:null,VectorSetCreation:null,Welcome:null};function ic(){let o=x().stores.modalStore.useState(e=>e.stack);return o.map((e,t)=>{if(e.type==="None")return null;let n=uf[e.type];p(n,`Modal is missing: ${e.type}`);let{type:i,...a}=e,l=t===o.length-1,s=e.type+t;return(0,ao.jsx)(oa,{allowFocusTrap:l,children:(0,ao.jsx)(ca.Provider,{value:ss(i),children:(0,ao.jsx)(la.Provider,{value:l?"visible":"hidden",children:(0,ao.jsx)(n,{...a})})})},s)})}function sc({accessStore:r,routeStore:o},e){let t=r.access;p(t.status==="success","Can't open Framer if project access is not successful");let n=e??o.projectLinkNodeId,i=`${yo().app}/projects/${t.data.projectSlug}?node=${n}`;window.open(`https://www.framer.com/open-in-app?url=${encodeURIComponent(i)}`,"_blank")}var pc=u(te());var lc="toolbar_t49i6vy",Ct="button_bjwo6qr",Lt="buttonSecondary_b1qwl3y9",cc="mainContentContainer_m1wta5up",dc="mainContent_m69kutt",sn="secondaryText_sdjdrec",fc="logoIcon_l9efojb";var ln={slug:!0,string:!0,richtext:!0,link:!0,image:!0,array:!0,multicollectionreference:!0,collectionreference:!0,file:!0,date:!0,number:!0,boolean:!0,enum:!0,color:!0};function er(r){return ys(r).flatMap(t=>{let n=t.type;return ln[n]!==void 0?t.id:[]})}var O=u(h());function uc(){let r=x(),{routeStore:o,treeStore:e,canvasStore:t,projectStore:n,modalStore:i}=r.stores,a=v(()=>r.stores.canvasStore.finishedEditing,[]),{hasPermanentlyFailed:l}=n.useState(),s=a?.isNewItem?"Page saved":"Site saved",d=jl(),m=Hl(),f=(0,pc.useCallback)(()=>{p(m,"Collection node must exist"),p(d,"Collection item node must exist");let C=er(m);r.exitTool(),i.set({type:"OnPageCMSFieldsModal",fieldIdsToShow:C,requiredFieldsOnly:!1,source:"on_page_hud",collectionItemId:d.id,collectionNodeId:m.id})},[o,e,i,r,d,m]),g=()=>{i.set({type:"Confirmation",title:"Discard Changes",description:"All changes will be lost. This action cannot be undone.",confirmLabel:"Discard",cancelLabel:"Cancel",variant:"destructive",source:"on_page_hud",onConfirm:()=>{t.discardTemporaryCollectionItem()}})},c=!!d?.privateToUserId;return(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)("div",{className:lc,children:[c?(0,O.jsxs)(K,{className:H(Ct,Lt),onClick:g,children:[(0,O.jsx)(Yi,{}),"Discard Page"]}):(0,O.jsx)(yf,{finishedEditing:a}),(0,O.jsxs)("div",{className:cc,children:[(0,O.jsx)(mc,{desktopText:"Click to edit",mobileText:"Tap to edit",secondaryText:"Changes are auto-saved",isVisible:!a}),(0,O.jsx)(mc,{desktopText:s,mobileText:s,secondaryText:`A notification was sent to your collaborators. ${a?.isNewItem?"The page":"Changes"} will be visible when the project is published.`,isVisible:!!a})]}),(0,O.jsxs)(ye,{direction:"row",gap:10,children:[m&&!c&&!m.managedByPlugin&&!a&&(0,O.jsxs)(K,{className:H(Ct,Lt),enabled:!l,onClick:()=>t.createTemporaryCollectionItem(),"aria-label":"Add Page",children:[(0,O.jsx)($i,{}),(0,O.jsx)(tr,{desktopText:"Add Page",mobileText:"Page"})]}),c&&!l&&(0,O.jsxs)(K,{className:H(Ct,Lt),onClick:f,children:[(0,O.jsx)(Cf,{}),"Show All Fields"]}),a?(0,O.jsxs)(K,{className:H(Ct,Lt),onClick:()=>t.handleDismissFinishEditing(),children:[(0,O.jsx)(hf,{}),"Go Back to Site"]}):(0,O.jsxs)(K,{variant:"primary",className:Ct,onClick:()=>t.handleFinishEditing(),children:[(0,O.jsx)(Hi,{"aria-hidden":"true"}),(0,O.jsx)(tr,{desktopText:"Finish Editing",mobileText:"Done"})]})]})]})})}function mc({desktopText:r,mobileText:o,secondaryText:e,isVisible:t}){return(0,O.jsx)(Qn,{children:t&&(0,O.jsxs)(Re.div,{className:dc,initial:{marginTop:10,opacity:0},animate:{marginTop:0,opacity:1},exit:{marginTop:-10,opacity:0},children:[(0,O.jsx)(tr,{desktopText:r,mobileText:o}),(0,O.jsx)("span",{className:sn,children:"\xB7"}),(0,O.jsx)("span",{className:sn,children:e})]})})}function tr({desktopText:r,mobileText:o}){let e=ws(`(max-width: ${Li.tabletSmall}px)`);return!o&&e?null:(0,O.jsx)("span",{children:e?o:r})}function yf({finishedEditing:r}){let o=x(),e=()=>{sc(o.stores,r?.isNewItem?r.nodeId:void 0)};return(0,O.jsxs)(K,{className:H(Ct,Lt),onClick:e,"aria-label":"Open in Framer",children:[(0,O.jsx)(Ji,{"aria-hidden":"true",className:fc}),(0,O.jsx)(tr,{desktopText:"Open in Framer"})]})}function hf(){return(0,O.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"9",height:"9",fill:"none",children:[(0,O.jsx)("path",{d:"M 1.5 7.5 L 8 1",fill:"transparent",strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,O.jsx)("path",{d:"M 3 1 L 8 1 L 8 6",fill:"transparent",strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]})}function Cf(){return(0,O.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"11",height:"11",fill:"none",children:[(0,O.jsx)("path",{d:"M1 5.5s1.5-3 4.5-3 4.5 3 4.5 3-1.5 3-4.5 3-4.5-3-4.5-3Z",fill:"transparent",strokeWidth:"1.5",stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round"}),(0,O.jsx)("path",{d:"M5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z",fill:"#fff"})]})}var Ge=class extends Y{constructor(e,t,n,i){super(e);this.nodeId=t;this.renderId=n;this.eventSource=i}getNode(){return this.engine.tree.getNodeWithTrait(this.nodeId,At)||this.engine.tree.getNodeWithTrait(this.nodeId,N)}getVariableInfo(){let e=this.getNode();if(!e)return;let t=Ar(e);if(!t)return;let n=e.cache.getRenderInstance(this.renderId);if(n)return G(this.engine.tree,this.engine.stores.treeStore.sandboxCollectionData,t,"collectionreference",n.collectionItemId)}getControlProp(){return this.getVariableInfo()?.controlProp}changeValue(e){let t=this.getVariableInfo();if(!t)return;let{collectionItemNode:n,controlProp:i}=t;i.value!==e&&n.setControlProp(t.variableDefinition.id,{...i,value:e})}static supportsNode(e,t,n){let i=Ar(t);if(!i)return!1;let a=t.cache.getRenderInstance(n);return a?!!G(e.tree,e.stores.treeStore.sandboxCollectionData,i,"collectionreference",a.collectionItemId):!1}};var Ve=class r extends Y{constructor(e,t,n){super(e);this.nodeId=t;this.renderId=n}getCodeComponentNode(){return this.engine.tree.getNodeWithTrait(this.nodeId,Pe)}getEditableControls(){let e=this.getCodeComponentNode();if(e)return r.getEditableControls(this.engine,e,this.renderId)}update(){let e=this.engine,t=this.getCodeComponentNode();(!t||!r.supportsNode(e,t,this.renderId))&&e.exitTool()}stop(){let{modalStore:e}=this.engine.stores;e.stack.some(({type:n})=>n==="OnPageRichTextEditor")&&e.dismissAll()}static getEditableControls(e,t,n){let i=t.cache.getRenderInstance(n);if(!i)return uo();let a=ee.reactComponentForIdentifier(t.codeComponentIdentifier);if(!a)return uo();let l=t.getControlProps(a.properties);if(!l)return uo();let s=[],d=Xs(e,t.codeComponentIdentifier);if(pi(t)&&d)if(ui(t)){let m=G(e.tree,e.stores.treeStore.sandboxCollectionData,t.dynamicVectorSetIdentifier,"vectorsetitem",i.collectionItemId);m&&s.push({type:"collection",controlKey:"dynamicVectorSetIdentifier",variableInfo:m})}else Kn(t.codeComponentIdentifier)&&s.push({type:"vectorSetItem",codeComponentIdentifier:t.codeComponentIdentifier});for(let m in l){let f=l[m];if(!f)continue;let g=a.properties[m];if(g){if(f.type==="string"){if(D(f.value)){let c=G(e.tree,e.stores.treeStore.sandboxCollectionData,f.value,f.type,i.collectionItemId);if(!c)continue;s.push({type:"collection",controlKey:m,variableInfo:c})}else if(!De(f.value)){p(g.type==="string");let c=_t(g);p(c,"Reduced control prop should not be null"),Mt(c,f,g),s.push({type:"component",controlKey:m,controlDescription:g,controlProp:f,reducedControlProp:c})}}if(f.type==="richtext"){if(D(f.value)){let c=G(e.tree,e.stores.treeStore.sandboxCollectionData,f.value,f.type,i.collectionItemId);if(!c)continue;s.push({type:"collection",controlKey:m,variableInfo:c})}else if(!De(f.value)){p(g.type==="richtext");let c=_t(g);p(c,"Reduced control prop should not be null"),Mt(c,f,g),s.push({type:"component",controlKey:m,controlDescription:g,controlProp:f,reducedControlProp:c})}}if(f.type==="image"){if(D(f.value)){let c=G(e.tree,e.stores.treeStore.sandboxCollectionData,f.value,f.type,i.collectionItemId);if(!c)continue;s.push({type:"collection",controlKey:m,variableInfo:c})}else if(!De(f.value)){p(g.type==="image"||g.type==="responsiveimage");let c=_t(g);p(c,"Reduced control prop should not be null"),Mt(c,f,g),s.push({type:"component",controlKey:m,controlDescription:g,controlProp:f,reducedControlProp:c})}}if(f.type==="date"){if(D(f.value)){let c=G(e.tree,e.stores.treeStore.sandboxCollectionData,f.value,"date",i.collectionItemId);if(!c)continue;s.push({type:"collection",controlKey:m,variableInfo:c})}else if(!De(f.value)){p(g.type==="date");let c=_t(g);p(c,"Reduced control prop should not be null"),Mt(c,f,g),s.push({type:"component",controlKey:m,controlDescription:g,controlProp:f,reducedControlProp:c})}}if(f.type==="vectorsetitem"){if(D(f.value)){let c=G(e.tree,e.stores.treeStore.sandboxCollectionData,f.value,"vectorsetitem",i.collectionItemId);if(!c)continue;s.push({type:"collection",controlKey:m,variableInfo:c})}else if(!De(f.value)){p(g.type==="vectorsetitem");let c=_t(g);p(c,"Reduced control prop should not be null"),Mt(c,f,g),s.push({type:"component",controlKey:m,controlDescription:g,controlProp:f,reducedControlProp:c})}}if(f.type==="link"&&D(f.value)){let c=G(e.tree,e.stores.treeStore.sandboxCollectionData,f.value,"link",i.collectionItemId);if(!c)continue;s.push({type:"collection",controlKey:m,variableInfo:c})}if(f.type==="boolean"&&D(f.value)){let c=G(e.tree,e.stores.treeStore.sandboxCollectionData,f.value,"boolean",i.collectionItemId);if(!c)continue;s.push({type:"collection",controlKey:m,variableInfo:c})}}}return s}static supportsNode(e,t,n){return Pe(t)?r.getEditableControls(e,t,n).length>0:!1}};var ze=class r extends Y{constructor(e,t,n,i){super(e);this.nodeId=t;this.renderId=n;this.eventSource=i}getRichTextNode(){return this.engine.tree.getNodeWithTrait(this.nodeId,N)}getVariableInfo(){let e=this.getRichTextNode();if(!e)return;let t=e.cache.getRenderInstance(this.renderId);if(!t)return;let n=r.getVariableReference(e);if(n)return G(this.engine.tree,this.engine.stores.treeStore.sandboxCollectionData,n,"date",t.collectionItemId)}getControlProp(){return this.getVariableInfo()?.controlProp}changeValue(e){let t=this.getVariableInfo();if(!t)return;let{collectionItemNode:n,variableDefinition:i,controlProp:a}=t;a.value!==e&&(n.setControlProp(i.id,{...a,value:e}),this.engine.stores.projectStore.commitTreeAndSend())}update(){let e=this.engine,t=this.getRichTextNode();(!t||!r.supportsNode(e,t,this.renderId))&&e.exitTool()}static getVariableReference(e){let t=e.textContent;if(!Co(t))return;let n=t.startValue;if(D(n))return n}static supportsNode(e,t,n){if(!N(t))return!1;let i=r.getVariableReference(t);if(!i)return!1;let a=t.cache.getRenderInstance(n);return a?!!G(e.tree,e.stores.treeStore.sandboxCollectionData,i,"date",a.collectionItemId):!1}};var We=class r extends Y{constructor(e,t,n,i){super(e);this.nodeId=t;this.renderId=n;this.eventSource=i}getRichTextNode(){return this.engine.tree.getNodeWithTrait(this.nodeId,N)}static getVariableReference(e){let t=e.textContent;if(!Co(t))return;let n=t.startValue;if(D(n))return n}getVariableInfo(){let e=this.getRichTextNode();if(!e)return;let t=e.cache.getRenderInstance(this.renderId);if(!t)return;let n=r.getVariableReference(e);if(n)return G(this.engine.tree,this.engine.stores.treeStore.sandboxCollectionData,n,"enum",t.collectionItemId)}getControlProp(){return this.getVariableInfo()?.controlProp}changeValue(e){let t=this.getVariableInfo();if(!t)return;let{collectionItemNode:n,variableDefinition:i,controlProp:a}=t;a.value!==e&&(n.setControlProp(i.id,{...a,value:e}),this.engine.stores.projectStore.commitTreeAndSend())}static supportsNode(e,t,n){if(!N(t))return!1;let i=r.getVariableReference(t);if(!i)return!1;let a=t.cache.getRenderInstance(n);return a?!!G(e.tree,e.stores.treeStore.sandboxCollectionData,i,"enum",a.collectionItemId):!1}};var qe=class r extends Y{constructor(e,t,n){super(e);this.nodeId=t;this.renderId=n}update(){let e=this.engine,t=e.tree.get(this.nodeId);(!t||!r.supportsNode(e,t,this.renderId))&&e.exitTool()}static supportsNode(e,t,n){if(!At(t))return!1;if(D(t.fillImage)){let i=t.cache.getRenderInstance(n);return i?!!G(e.tree,e.stores.treeStore.sandboxCollectionData,t.fillImage,"image",i.collectionItemId):!1}return!li(t.fillImage)}};var Ee=class r extends Y{constructor(e,t,n,i){super(e);this.nodeId=t;this.renderId=n;this.eventSource=i;y(this,"controls");this.engine.beginUndoGroup(),Gt().then(a=>{e.stores.toolStore.proseMirror??=a})}getRichTextNode(){return this.engine.tree.getNodeWithTrait(this.nodeId,N)}getVariableReference(){let e=this.getRichTextNode();if(!e)return;let t=e.htmlContent;if(D(t))return t}getVariableInfo(){let e=this.getRichTextNode();if(!e)return;let t=e.cache.getRenderInstance(this.renderId);if(!t)return;let n=this.getVariableReference();if(n)return G(this.engine.tree,this.engine.stores.treeStore.sandboxCollectionData,n,"richtext",t.collectionItemId)}getControlProp(){return this.getVariableInfo()?.controlProp}changeValue(e){let t=this.getVariableInfo();if(!t)return;let{collectionItemNode:n,variableDefinition:i,controlProp:a}=t;a.value!==e&&(n.setControlProp(i.id,{...a,value:e}),this.engine.stores.projectStore.commitTreeAndSend())}update(){let e=this.engine,t=this.getRichTextNode();if(!t||!r.supportsNode(e,t,this.renderId))e.exitTool();else{let n=this.getVariableInfo();this.engine.stores.toolStore.validateCollectionControl(n)}}stop(){this.engine.endUndoGroup(),this.engine.stores.toolStore.nodeInTextEditorId=null}static supportsNode(e,t,n){if(!N(t)||!D(t.htmlContent))return!1;let i=t.cache.getRenderInstance(n);return i?!!G(e.tree,e.stores.treeStore.sandboxCollectionData,t.htmlContent,"richtext",i.collectionItemId):!1}};var Ne=class r extends Y{constructor(e,t,n,i){super(e);this.nodeId=t;this.renderId=n;this.eventSource=i;this.engine.beginUndoGroup();let a=this.getRichTextNode();p(a,"Missing rich text node");let l=Do(this.engine.tree,a);rt.loadFonts(l).catch(ie)}getRichTextNode(){return this.engine.tree.getNodeWithTrait(this.nodeId,N)}getVariableReference(){let e=this.getRichTextNode();if(!e)return;let t=e.textContent;if(D(t))return t}getVariableInfo(){let e=this.getRichTextNode();if(!e)return;let t=e.cache.getRenderInstance(this.renderId);if(!t)return;let n=this.getVariableReference();if(n)return G(this.engine.tree,this.engine.stores.treeStore.sandboxCollectionData,n,"string",t.collectionItemId)}getControlProp(){return this.getVariableInfo()?.controlProp}changeValue(e){let t=this.getVariableInfo();if(!t)return;let{collectionItemNode:n,variableDefinition:i,controlProp:a}=t;a.value!==e&&(n.setControlProp(i.id,{...a,value:e}),this.engine.stores.projectStore.commitTreeAndSend())}update(){let e=this.engine,t=this.getRichTextNode();if(!t||!r.supportsNode(e,t,this.renderId))e.exitTool();else{let n=this.getVariableInfo();this.engine.stores.toolStore.validateCollectionControl(n)}}stop(){this.engine.endUndoGroup(),this.engine.stores.toolStore.nodeInTextEditorId=null}static supportsNode(e,t,n){if(!N(t)||!D(t.textContent))return!1;let i=t.cache.getRenderInstance(n);return i?!!G(e.tree,e.stores.treeStore.sandboxCollectionData,t.textContent,"string",i.collectionItemId):!1}};var Oe=class r extends Y{update(){let o=this.engine,{routeStore:e,canvasStore:t,treeStore:n,mouseStore:i,toolStore:a}=o.stores,l=be({screenWidth:t.screenWidth,tree:n.tree,webPageNodeId:e.webPageNodeId});if(!l||i.isHoveringFloatingCanvasChrome)return;if(i.isHoveringChrome){a.highlightedRenderId=void 0;return}let s=n.tree,d=i.canvasMousePosition,m=s.getNodeRendersAtPoint(l,d,!0),f=Wi(m,s),c=f.filter(U=>r.isSelectableNodeOrTopLevelRepeaterNode(o,U.node,U.renderId)).at(-1);if(c){o.stores.toolStore.highlightedRenderId=c.renderId;return}let w=f.filter(U=>r.isUnexpectedlyUnselectableNode(o,U.node,U.renderId)).at(-1);if(w){a.highlightedRenderId=w.renderId;return}a.highlightedRenderId=void 0}static isSelectableNodeOrTopLevelRepeaterNode(o,e,t){return r.isSelectableNode(o,e,t)||or(o,e)}static isSelectableNode(o,e,t){return Ve.supportsNode(o,e,t)||ze.supportsNode(o,e,t)||qe.supportsNode(o,e,t)||he.supportsNode(e)||Ee.supportsNode(o,e,t)||Ne.supportsNode(o,e,t)||Ge.supportsNode(o,e,t)||We.supportsNode(o,e,t)}static isUnexpectedlyUnselectableNode(o,e,t){return r.isSelectableNode(o,e,t)?!1:Pi(e)||Pe(e)}};function or(r,o){return!(!fi(o)||ds(r.tree,o)||wo(r.tree.getWebPageNodeFor(o)))}var Cc=u(te());var gc="container_ci35ri5",yc="shockwaveMask_suurpvn",hc="shockwaveNodeHighlight_s1xlu29h";var rr=u(h()),wc=(0,Cc.memo)(function(){let o=x(),e=v(()=>o.stores.editableNodeHighlightStore.editableNodesHighlight,[]);return e?(0,rr.jsx)(Re.div,{className:H(gc,yc),initial:{"--radius":`${e.minRadius}px`},animate:{"--radius":`${e.maxRadius}px`},transition:{duration:e.animationDuration/1e3,ease:"easeOut"},style:{top:e.minY,height:e.maxY-e.minY,"--x":`${e.originX}px`,"--y":`${e.originY}px`,"--gradient-size":`${e.gradientSize}px`},children:(0,rr.jsx)("div",{style:{position:"absolute",top:-e.minY},children:e.highlights.map(t=>(0,rr.jsx)("div",{className:hc,style:{width:t.width,height:t.height,transform:t.transform,transformOrigin:"top left"}},t.renderId))})},e.animationId):null});var Uc="hudContainer_h1czcor4";var xc=u(te());var nr=u(te()),Ic=u(h()),$=(0,nr.forwardRef)(function({tree:o,node:e,renderId:t,style:n,overrideRect:i,...a},l){let s=(0,nr.useMemo)(()=>{if(i)return i;let m=o.getRect(e,void 0,void 0,void 0,t);return{width:m.width,height:m.height,x:0,y:0}},[o,e,t,i]),d=o.transformMatrixToNode(e,void 0,void 0,t);return(0,Ic.jsx)("div",{...a,ref:l,style:{position:"absolute",width:s.width,height:s.height,top:s.y,left:s.x,transformOrigin:"top left",transform:d.toString(),...n}})});var cn=u(h());function Fc({tool:r}){let{renderId:o}=r,e=fe(),t=x(),n=t.tree,i=(0,xc.useRef)(null),a=r.getNode();if(zt(i,()=>{t.exitTool()}),!!a&&e)return(0,cn.jsx)($,{ref:i,tree:n,node:a,renderId:o,children:(0,cn.jsx)(Bs,{tool:r,node:a,renderId:o,scopeNode:e})})}var bc="validationBadge_v1r7rm12";var ar=u(h());function If(r){return r.message}function ir({validationWarning:r}){if(!r)return null;let o=If(r);return(0,ar.jsxs)("div",{className:bc,children:[(0,ar.jsx)(ea,{width:10,height:10}),o]})}var so=u(h());function Sc({tool:r}){let{nodeId:o,renderId:e}=r,t=x(),n=v(()=>t.stores.toolStore.validationWarning,[]),i=v(()=>t.stores.treeStore.tree,[]),a=v(()=>t.stores.toolStore.editorOverlayClipPath,[]),l=fe(),s=v(()=>t.stores.toolStore.proseMirror,[]),d=i.getNodeWithTrait(o,N);if(!d||!l||!s)return;function m(f){f.target===f.currentTarget&&t.exitTool()}return(0,so.jsxs)($,{tree:i,node:d,renderId:e,children:[(0,so.jsx)(ir,{validationWarning:n}),(0,so.jsx)(Ds,{tool:r,scopeNode:l,node:d,renderId:e,proseMirror:s,zoom:1,onClickOutside:m,hasValidationWarning:!!n,style:{clipPath:a}})]})}var Kt=u(te());var vc="popover_p6dts5z",Pc="popoverWithModalInFront_pcmqzkm";var sr="nodeHighlight_nbqylm8",Ec="visuallyHidden_v1pcr3uc",Nc="pointerCursor_p1mivvux",Oc="textCursor_t42x8tu",kc="notAllowedCursor_n1atul0u",Bc="background_b1i0g06w",Ac="repeaterActionButtonLine_r1t4nog5",Tc="repeaterActionButtonTop_r1wgs7ug",Rc="repeaterActionButtonBottom_rsrrcv7",Dc="repeaterActionButtonLeft_rckttk2",Mc="repeaterActionButtonRight_r12nxotj",_c="repeaterActionButton_r460cpk",Gc="repeaterActionIcon_rrb252f",Vc="clickThrough_cxpkzma";var J=u(h()),Ff=["bottom","top","right","left"],bf={x:de.inputSpacing,y:de.inputSpacing};function Wc({tool:r}){let[o,e]=(0,Kt.useState)(null),t=x(),n=t.stores.modalStore.useState(c=>c.active.type!=="None"),[i,a]=(0,Kt.useState)(!1);!i&&n&&a(!0);let l=v(()=>t.stores.treeStore.tree,[]),s=l.getNodeWithTrait(r.nodeId,gi),d=(0,Kt.useMemo)(()=>{let c=l;return r.getEditableControls()},[r,l]);function m(){t.exitTool()}let f=s?.id,g=(0,Kt.useMemo)(()=>f?[f]:[],[f]);if(!(!s||!d||d.length===0))return(0,J.jsx)($,{tree:l,node:s,ref:e,renderId:r.renderId,className:sr,children:(0,J.jsx)(ko,{anchor:o,alignSelf:"center",attachTo:Ff,offset:bf,onClose:m,showArrow:!0,arrow:{anchor:o,alignSelf:"center"},fallbackToModalAppearance:!0,backdropTintEnabled:!1,className:H(vc,n&&Pc),focusTrapEnabled:!n,animateAppear:!i,zIndex:21,children:(0,J.jsx)(As,{displayDivider:!0,title:Sf(s),onClose:m,children:(0,J.jsx)(ye,{gap:0,paddingTop:de.inputSpacing,paddingBottom:de.inputSpacing,paddingLeft:de.panelPadding,paddingRight:de.panelPadding,children:d.map(c=>{if(c.type==="vectorSetItem")return(0,J.jsx)(Ks,{nodeIds:g,supportsVariables:!1,dynamicVectorSetIdentifier:void 0,codeComponentIdentifier:c.codeComponentIdentifier},"vectorSet");if(c.type==="component")switch(c.controlDescription.type){case"string":return p(c.reducedControlProp.type==="string"),(0,J.jsx)(io,{nodeIds:g,controlKey:c.controlKey,control:c.controlDescription,controlProp:c.reducedControlProp,onChange:(F,S)=>{p(c.controlProp.type==="string");let E=S(c.controlProp);ve(E,c.controlProp)||(s.setControlProp(F,E),t.stores.projectStore.commitTreeAndSend())}},c.controlKey);case"richtext":return p(c.reducedControlProp.type==="richtext"),(0,J.jsx)(Vr,{title:c.controlDescription.title??"Unknown",children:(0,J.jsx)(K,{title:"Edit Content",className:Gr,onClick:()=>{t.stores.modalStore.set({type:"OnPageRichTextEditor",controlKey:c.controlKey,nodeId:r.nodeId,source:"on_page_hud"})}})},c.controlKey);case"image":case"responsiveimage":return p(c.reducedControlProp.type==="image"||c.reducedControlProp.type==="responsiveimage"),(0,J.jsx)(qr,{nodeIds:g,controlKey:c.controlKey,control:c.controlDescription,controlProp:c.reducedControlProp,onChange:(F,S)=>{p(w.type==="image");let E=S(w);ve(E,w)||(s.setControlProp(F,E),t.stores.projectStore.commitTreeAndSend())},onUpload:async(F,S)=>{let E=await F;if(!E)return;p(c.controlProp.type==="image");let Ie=qs(c.controlProp,E);s.setControlProp(S,Ie),t.stores.projectStore.commitTreeAndSend()}},c.controlKey);case"date":return p(c.reducedControlProp.type==="date"),(0,J.jsx)(zr,{controlKey:c.controlKey,control:c.controlDescription,controlProp:c.reducedControlProp,onChange:(F,S)=>{p(F.type==="date"),!ve(F,w)&&(s.setControlProp(S,F),t.stores.projectStore.commitTreeAndSend())}},c.controlKey);case"vectorsetitem":return p(c.reducedControlProp.type==="vectorsetitem"),(0,J.jsx)(Lr,{controlKey:c.controlKey,control:c.controlDescription,controlProp:c.reducedControlProp,onChange:(F,S)=>{p(F.type==="vectorsetitem"),!ve(F,c.controlProp)&&(s.setControlProp(S,F),t.stores.projectStore.commitTreeAndSend())}},c.controlKey);default:oo(c.controlDescription)}let{variableInfo:C}=c,{controlProp:w,controlDescription:U,collectionItemNode:B,variableDefinition:P,reducedControlProp:b}=C;switch(w.type){case"string":return p(U.type==="string"),p(b.type==="string"),(0,J.jsx)(io,{nodeIds:g,controlKey:P.id,control:U,controlProp:b,onChange:(F,S)=>{p(w.type==="string");let E=S(w);ve(E,w)||(B.setControlProp(F,E),t.stores.projectStore.commitTreeAndSend())}},c.controlKey);case"richtext":return p(U.type==="richtext"),p(b.type==="richtext"),(0,J.jsx)(Vr,{title:U.title||si(P.id),children:(0,J.jsx)(K,{title:"Edit Content",className:Gr,onClick:()=>{t.stores.modalStore.set({type:"OnPageRichTextEditor",controlKey:P.id,nodeId:B.id,source:"on_page_hud"})}})},c.controlKey);case"image":return p(U.type==="responsiveimage"),p(b.type==="responsiveimage"),(0,J.jsx)(qr,{nodeIds:g,controlKey:P.id,control:U,controlProp:b,onChange:(F,S)=>{p(w.type==="image");let E=S(w);ve(E,w)||(B.setControlProp(F,E),t.stores.projectStore.commitTreeAndSend())},onUpload:async(F,S)=>{let E=await F;E&&(B.setControlProp(S,{type:"image",value:E}),t.stores.projectStore.commitTreeAndSend())}},c.controlKey);case"date":return p(U.type==="date"),p(b.type==="date"),(0,J.jsx)(zr,{controlKey:P.id,control:U,controlProp:b,onChange:(F,S)=>{p(F.type==="date"),p(w.type==="date"),!ve(F,w)&&(B.setControlProp(S,F),t.stores.projectStore.commitTreeAndSend())}},c.controlKey);case"link":return p(U.type==="link"),p(b.type==="link"),(0,J.jsx)(dl,{controlKey:P.id,control:U,controlProp:b,onChange:(F,S)=>{p(w.type==="link");let E=S(w);ve(E,w)||(B.setControlProp(F,E),t.stores.projectStore.commitTreeAndSend())}},c.controlKey);case"boolean":return p(U.type==="boolean"),p(b.type==="boolean"),(0,J.jsx)(Zo,{nodeIds:g,controlKey:P.id,control:U,controlProp:b,onChange:(F,S)=>{p(F.type==="boolean"),p(w.type==="boolean"),!ve(F,w)&&(B.setControlProp(S,F),t.stores.projectStore.commitTreeAndSend())}},c.controlKey);case"vectorsetitem":return p(U.type==="vectorsetitem"),p(b.type==="vectorsetitem"),(0,J.jsx)(Lr,{controlKey:P.id,control:U,controlProp:b,onChange:(F,S)=>{p(F.type==="vectorsetitem"),p(w.type==="vectorsetitem"),!ve(F,w)&&(B.setControlProp(S,F),t.stores.projectStore.commitTreeAndSend())}},c.controlKey);default:oo(w)}})})})})})}function Sf(r){let o=ee.reactComponentForIdentifier(r.codeComponentIdentifier);return o?o.name:"Component"}var lr=u(te());var dn=u(h());function qc({tool:r}){let{nodeId:o,renderId:e}=r,t=x(),n=t.tree,i=(0,lr.useRef)(null),a=fe(),l=n.getNodeWithTrait(o,N);if(zt(i,()=>{t.exitTool()}),(0,lr.useEffect)(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"})),!!l&&a)return(0,dn.jsx)($,{ref:i,tree:n,node:l,renderId:e,children:(0,dn.jsx)(Ts,{tool:r,scopeNode:a,node:l,renderId:e,backdropEnabled:!0})})}var Lc=u(te());var fn=u(h());function Kc({tool:r}){let{nodeId:o,renderId:e}=r,t=x(),n=t.tree,i=(0,Lc.useRef)(null),a=fe(),l=n.getNodeWithTrait(o,N);if(zt(i,()=>{t.exitTool()}),!!l&&a)return(0,fn.jsx)($,{ref:i,tree:n,node:l,renderId:e,children:(0,fn.jsx)(Rs,{tool:r,node:l,renderId:e,scopeNode:a})})}var wt=u(te());var se=u(h());function Xc(){let r=x(),o=v(()=>r.stores.treeStore.tree,[]),e=v(()=>r.stores.toolStore.highlightedRenderId,[]),t=v(()=>r.stores.mouseStore.lastUpdateType==="scroll",[]),n=v(()=>r.stores.mouseStore.isHoveringFloatingCanvasChrome,[]),i=Bt("onPageQuickAddRepeaterItems"),a=gt(e),l=o.get(a),s=ei(l),d=!xe(e),m=Nf(l,e),f=(0,wt.useMemo)(()=>{if(!i||!l||!e)return null;if(or(r,l))return l;let w=l.ancestors();for(let U of w)if(or(r,U))return U;return null},[l,e,i]),g=s&&d&&Oe.isSelectableNode(r,l,e),c=s&&d&&Oe.isUnexpectedlyUnselectableNode(r,l,e),C=s&&d&&(he.supportsNode(l)||Ee.supportsNode(r,l,e)||Ne.supportsNode(r,l,e));return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(vf,{notAllowedCursor:c}),s&&d&&(0,se.jsxs)(se.Fragment,{children:[g&&!c&&!n&&(0,se.jsx)($,{tree:o,node:l,renderId:e,className:H(sr,t&&Ec,C?Oc:Nc),onClick:m}),!!f&&!t&&(0,se.jsx)(Ef,{tree:o,highlightedRenderId:e,repeaterNode:f})]})]})}function vf(r){let o=x(),e=(0,wt.useCallback)(()=>{o.stores.editableNodeHighlightStore.highlight(o,{type:"clickOnVoid"})},[]);return(0,se.jsx)("div",{"aria-hidden":!0,className:H(Bc,r.notAllowedCursor&&kc),onClick:e})}var Pf=r=>{switch(r){case"top":return Tc;case"bottom":return Rc;case"left":return Dc;case"right":return Mc}};function Ef(r){let o=x(),{mouseStore:e}=o.stores,{tree:t,highlightedRenderId:n,repeaterNode:i}=r,a=v(()=>e.canvasMousePosition,[],ii),l=(0,wt.useMemo)(()=>{if(!i)return;let d=Ei(t,i);if(!d)return;let m=d.cache.domRects,f=null;for(let[g,c]of m??[])f=f?Te.merge(f,c):c;if(f)return f},[t,i]),s=(0,wt.useMemo)(()=>{let d="bottom";if(!i)return d;let m=di(i)&&i.stackDirection==="horizontal"&&!i.stackWrapEnabled,f=t.convertFrameToCanvas(i,l,n);if(m){let P=f.x,b=P+f.width,F=window.scrollX,S=F+window.innerWidth,E=P>=F&&P<=S,Ie=b>=F&&b<=S;if(E&&!Ie)return"left";if(Ie&&!E)return"right";if(E&&Ie){let Ke=a.x-P,Be=b-a.x;return Ke<Be?"left":"right"}return"right"}let g=f.y,c=g+f.height,C=window.scrollY,w=C+window.innerHeight,U=g>=C&&g<=w,B=c>=C&&c<=w;if(U&&!B)return"top";if(B&&!U)return"bottom";if(U&&B){let P=a.y-g,b=c-a.y;return P<b?"top":"bottom"}return d},[i,n,l,a,t.convertFrameToCanvas]);return i?(0,se.jsx)($,{tree:t,node:i,renderId:n,className:Vc,overrideRect:l,children:(0,se.jsxs)("button",{type:"button",className:H(_c,Pf(s)),onMouseDown:()=>Of(o,i.id),[Xr]:"true",children:[(0,se.jsx)(ta,{className:Gc,children:(0,se.jsx)(ji,{})}),(0,se.jsx)("div",{className:Ac})]})}):null}function Nf(r,o){let e=x();return(0,wt.useCallback)(()=>{if(!(!r||!o)){if(Ve.supportsNode(e,r,o))return e.startComponentInstanceEditTool(r.id,o);if(ze.supportsNode(e,r,o))return e.startDateVariableEditTool(r.id,o,"mouse");if(qe.supportsNode(e,r,o))return e.startImageEditTool(r.id,o);if(he.supportsNode(r))return e.startRichTextEditTool(r.id,o,"mouse");if(Ee.supportsNode(e,r,o))return e.startRichTextVariableEditTool(r.id,o,"mouse");if(Ne.supportsNode(e,r,o))return e.startStringVariableEditTool(r.id,o,"mouse");if(Ge.supportsNode(e,r,o))return e.startCollectionReferenceVariableEditTool(r.id,o,"mouse");if(We.supportsNode(e,r,o))return e.startEnumVariableEditTool(r.id,o,"mouse")}},[r,o])}function Of(r,o){let{treeStore:e,projectStore:t,modalStore:n,accessStore:i}=r.stores,a=e.tree.getNodeWithTrait(o,kr),l=kr(a)&&wo(a)?hi(e.tree,a.dataIdentifier):void 0,s=i.access?.userId;p(s,"User must be logged in"),p(l,"Collection node must exist");let d=Oo.create({isDraft:!0,privateToUserId:s});qo(l,d),e.tree.insertNode(d,l.id,0),t.commitTreeAndSend(),n.set({type:"OnPageCMSFieldsModal",fieldIdsToShow:er(l),requiredFieldsOnly:!1,source:"on_page_hud",collectionNodeId:l.id,collectionItemId:d.id})}var pe=u(te());var Zc="popout_pqnmppj";var Se=u(h()),Bf=["right","left"],Af={x:15,y:0};function jc({tool:r}){let{nodeId:o,renderId:e}=r,[t,n]=(0,pe.useState)(null),i=x(),a=v(()=>i.stores.treeStore.tree,[]),l=a.getNodeWithTrait(o,At);function s(){i.exitTool()}if(l)return(0,Se.jsx)($,{tree:a,node:l,renderId:e,ref:n,children:(0,Se.jsxs)(ko,{anchor:t,alignSelf:"center",attachTo:Bf,offset:Af,onClose:s,showArrow:!0,arrow:{anchor:t,alignSelf:"center"},fallbackToModalAppearance:!0,backdropTintEnabled:!1,children:[(0,Se.jsx)(fa,{disableDivider:!0,onClose:s,children:(0,Se.jsx)(ma,{title:"Image"})}),(0,Se.jsx)("div",{className:Zc,children:De(l.fillImage)?(0,Se.jsx)(Tf,{node:l,dynamicValue:l.fillImage,renderId:e}):(0,Se.jsx)(Df,{node:l})})]})})}function Tf({node:r,dynamicValue:o,renderId:e}){return p(D(o),"Expected variable reference"),(0,Se.jsx)(Rf,{node:r,variableReference:o,renderId:e})}function Rf({node:r,variableReference:o,renderId:e}){let t=x(),n=v(()=>{let m=t.stores.treeStore,f=r.cache.getRenderInstance(e);return G(m.tree,m.sandboxCollectionData,o,"image",f?.collectionItemId)},[r,e,o]);p(n,"Variable info must exist");let{collectionItemNode:i,reducedControlProp:a,controlProp:l}=n;p(a.type==="responsiveimage","Expected reduced responsive image");let s=(0,pe.useCallback)(m=>{i.set(Br({[o.id]:m(l)})),t.stores.projectStore.commitTreeAndSend()},[i,o,l]),d=(0,pe.useCallback)(()=>{i.set(Br({[o.id]:{type:"image",value:void 0}})),t.stores.projectStore.commitTreeAndSend()},[i,o]);return(0,Se.jsx)(Ss,{controlProp:a,onChange:s,onRemove:d,maxExtraImages:0})}function Df({node:r}){let o=x(),e=(0,pe.useMemo)(()=>{let m={...ls(),...fs()};return cs(r,m),ms(r,m),m},[r]),t=(0,pe.useCallback)(async m=>{let[f]=await m;f&&(Ja(r,f),o.stores.projectStore.commitTreeAndSend())},[r]),n=(0,pe.useCallback)(m=>{le(r.fillImage)&&(r.set({fillImage:Jn(r.fillImage,m)}),o.stores.projectStore.commitTreeAndSend())},[r]),i=(0,pe.useCallback)(m=>{Ni(r)&&(r.set({altAttribute:m}),o.stores.projectStore.commitTreeAndSend())},[r]),a=(0,pe.useCallback)(m=>{r.set({fillImageResize:m}),o.stores.projectStore.commitTreeAndSend()},[r]),l=(0,pe.useCallback)(m=>{r.set({fillImageTileSize:m}),o.stores.projectStore.commitTreeAndSend()},[r]),s=(0,pe.useCallback)((m,f)=>{r.set({fillImagePositionX:m,fillImagePositionY:f}),o.stores.projectStore.commitTreeAndSend()},[r]),d=(0,pe.useCallback)(()=>{r.set({fillImage:void 0}),o.stores.projectStore.commitTreeAndSend()},[r]);return(0,Se.jsx)(Is,{...e,imageReferences:e.fillImages,altText:e.altAttribute,onChangeImages:t,onChangeAssetSize:n,onChangeAltText:i,onChangeImageResize:a,onChangeFillImageSize:l,onChangeImagePosition:s,onRemoveImage:d})}var Jc=u(te());var Hc="warningButton_w1uyyr5z",Yc="warningButtonIcon_w1z0oe1i";var lo=u(h());function Qc({richTextNode:r,webPageNode:o}){let e=x(),t=v(()=>e.stores.treeStore.tree,[]);return(0,Jc.useMemo)(()=>{let i=t.getNodeWithTrait(r.originalid??r.id,N);return p(i,"originalNode must exist"),o.getTopLevelReplicaVariants().some(a=>{let l=no(a.id,i.id),s=t.get(l);return N(s)&&No(t,s,"html")&&s.getTextContent()!==i.getTextContent()})},[t,r,o])?(0,lo.jsxs)(Zi,{className:Hc,onClick:()=>{e.exitTool(),e.stores.modalStore.set({richTextNodeId:r.id,source:"on_page_hud",type:"OnPageRichTextVariantOverride"})},children:[(0,lo.jsx)(Qi,{viewBox:"0 0 12 12",className:Yc}),(0,lo.jsx)(Ye,{children:"Responsive Text"})]}):null}var $c="warningContainer_w1v62ead";var Xt=u(h());function ed({tool:r}){let{nodeId:o,renderId:e}=r,t=x(),n=v(()=>t.stores.treeStore.tree,[]),i=v(()=>t.stores.toolStore.editorOverlayClipPath,[]),a=v(()=>t.stores.toolStore.proseMirrorView,[]),l=n.getNodeWithTrait(o,N),s=fe();return!l||!s||!a?null:(0,Xt.jsxs)($,{tree:n,node:l,renderId:e,children:[(0,Xt.jsx)("div",{className:$c,children:(0,Xt.jsx)(Qc,{richTextNode:l,webPageNode:s})}),(0,Xt.jsx)(Ms,{tool:r,scopeNode:s,node:l,renderId:e,editorView:a,zoom:1,handleOutsideClick:d=>{d.target===d.currentTarget&&t.exitTool()},style:{clipPath:i}})]})}var co=u(h());function td({tool:r}){let{nodeId:o,renderId:e}=r,t=x(),n=v(()=>t.stores.treeStore.tree,[]),i=v(()=>t.stores.toolStore.validationWarning,[]),a=v(()=>t.stores.toolStore.editorOverlayClipPath,[]),l=n.getNodeWithTrait(o,N),s=fe();return!s||!l?null:(0,co.jsxs)($,{tree:n,node:l,renderId:e,children:[(0,co.jsx)(ir,{validationWarning:i}),(0,co.jsx)(_s,{tool:r,scopeNode:s,node:l,renderId:e,zoom:1,onClickOutside:d=>{d.target===d.currentTarget&&t.exitTool()},hasValidationWarning:!!i,style:{clipPath:a}})]})}var ce=u(h());function od(){let r=x(),{sandboxStore:o}=r.stores,{canvasHeight:e}=o.useState(),t=v(()=>r.stores.treeStore.tree.getPresetsListNode(),[]);return(0,ce.jsxs)("div",{className:Uc,style:{height:e??"initial"},children:[(0,ce.jsx)(wc,{}),(0,ce.jsx)(Gf,{}),(0,ce.jsx)(is,{presetsListNode:t})]})}function Gf(){let r=x(),{projectStore:o,modalStore:e}=r.stores,t=v(()=>r.stores.toolStore.tool,[]),n=v(()=>r.stores.canvasStore.finishedEditing,[]),{hasPermanentlyFailed:i}=o.useState(),a=e.useState(l=>l.active.type!=="None");if(!i&&!n&&!a){if(t instanceof Oe)return(0,ce.jsx)(Xc,{});if(t instanceof qe)return(0,ce.jsx)(jc,{tool:t});if(t instanceof he)return(0,ce.jsx)(ed,{tool:t});if(t instanceof Ee)return(0,ce.jsx)(Sc,{tool:t});if(t instanceof Ne)return(0,ce.jsx)(td,{tool:t});if(t instanceof ze)return(0,ce.jsx)(qc,{tool:t});if(t instanceof Ge)return(0,ce.jsx)(Fc,{tool:t});if(t instanceof We)return(0,ce.jsx)(Kc,{tool:t});if(t instanceof Ve)return(0,ce.jsx)(Wc,{tool:t})}}var Le=u(h());function rd(){Wt();let r=x(),o=v(()=>r.stores.canvasStore.isHidden,[]);return(0,cr.useEffect)(()=>{let e=({data:t})=>{if(nt(t)&&t.apiVersion===1){let{type:n,position:i}=t;n==="showCanvas"&&nt(i)&&$n(i.top)&&(window.scrollTo({behavior:"instant",top:i.top}),setTimeout(()=>{r.stores.canvasStore.isHidden=!1,r.startHighlightTool(),r.stores.editableNodeHighlightStore.highlight(r,{type:"start"})},0))}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[]),(0,cr.useEffect)(()=>{let{sandboxStore:e}=r.stores;o?e.hide():e.show()},[o]),Vf(o),cl({channel:Xn,toast:st}),(0,Le.jsx)(na,{children:(0,Le.jsxs)("div",{className:H(o&&hl),children:[(0,Le.jsx)(od,{}),(0,Le.jsxs)("div",{className:Cl,[Kr]:"true",children:[(0,Le.jsx)(uc,{}),(0,Le.jsx)(ic,{}),(0,Le.jsx)(Ua,{padding:80}),(0,Le.jsx)(sl,{ref:r.stores.projectStore.filePickerRef})]})]})})}function Vf(r){let o=x();(0,cr.useEffect)(()=>{if(r)return;let e=new xs;e.set("CommandOrControl+Z",o.undo.bind(o),"undo"),e.set("CommandOrControl+Shift+Z",o.redo.bind(o),"redo");function t(n){if(_o())return;let i=e.get(n);i&&(i.action(n),n.preventDefault(),n.stopPropagation())}return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[r])}var nd=u(te());function id(){(0,nd.useEffect)(()=>{let r=o=>{if(!nt(o.data))return;let{apiVersion:e,type:t}=o.data;e===1&&t==="enterOnPageEditing"&&Me("editor_bar_interaction",{page:"editor-bar-project-page",id:"editor-bar-enter-on-page-editing"})};return window.addEventListener("message",r),()=>window.removeEventListener("message",r)},[])}var hn=u(te());var Zt="https://app.framerstatic.com/framer-logo-blue-23OMXQLR.png";var fr="button_b9jl8lf",mr="editorBarButtonPrimary_eptse9g";var ad="backdrop_bzafg2a",sd="container_cnhgigm",ld="textContainer_t1ookr3o",cd="title_tyol4w7",dd="subtitle_s7fryoi",fd="button_by9jupw",md="buttonsContainer_b18g1n4a",pd="closeModal_c1gc3a0q";var jt=u(h());function ud({width:r=10,height:o=10,className:e}){return(0,jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:o,fill:"none",className:e,"aria-hidden":"true",children:(0,jt.jsxs)("g",{transform:"translate(2 2)",children:[(0,jt.jsx)("path",{d:"M 0 0 L 6 6",fill:"transparent",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,jt.jsx)("path",{d:"M 0 6 L 6 0",fill:"transparent",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})})}var ue=u(h());function qf({children:r,onClick:o,disabled:e,layoutId:t,duration:n}){return(0,ue.jsx)(Re.div,{layout:"position",layoutId:t,style:{width:"100%"},transition:{duration:n,type:"spring",bounce:.2,delay:0},children:(0,ue.jsx)(K,{type:"button",className:fd,onClick:o,enabled:!e,children:r})})}function Ht({logo:r,title:o,subtitle:e,buttons:t,showLearnMoreButton:n}){let i=()=>{window.open("https://www.framer.com/help/articles/on-page-editing","_blank")},a=()=>{window.parent.postMessage({apiVersion:1,type:"sandboxReadyState",data:{status:"ready"}},"*"),window.parent.postMessage({apiVersion:1,type:"exitFullscreen",position:{top:window.scrollY}},"*")};return(0,ue.jsx)(ye,{className:ad,onClick:a,children:(0,ue.jsxs)(ye,{className:sd,justifyContent:"center",alignItems:"center",onClick:l=>l.stopPropagation(),children:[(0,ue.jsx)(ye,{onClick:a,className:pd,children:(0,ue.jsx)(ud,{})}),(0,ue.jsxs)(ye,{className:ld,gap:15,alignItems:"center",justifyContent:"center",children:[r,(0,ue.jsxs)(ye,{gap:5,alignItems:"center",justifyContent:"center",children:[(0,ue.jsx)(Re.span,{layout:!0,className:cd,children:o}),(0,ue.jsx)(Re.p,{layout:!0,className:dd,children:e})]})]}),t||n?(0,ue.jsxs)(ye,{className:md,gap:10,children:[n?(0,ue.jsx)(qf,{onClick:i,children:"Learn More"}):null,t||null]}):null]})})}var pr=u(h());function gd(){let r=x();Vt("editor_bar_impression",{page:"editor-bar-cookie-prompt"});async function o(){Me("editor_bar_interaction",{page:"editor-bar-cookie-prompt",id:"editor-bar-allow-cookies"});try{await document.requestStorageAccess()}finally{await r.stores.accessStore.refresh()}}return(0,pr.jsx)(Ht,{logo:(0,pr.jsx)("img",{decoding:"async",width:36,src:Zt,alt:"Framer Logo"}),title:"Edit Page",subtitle:"Continuing may require granting permissions in a browser dialog.",buttons:(0,pr.jsx)(K,{className:H(fr,mr),onClick:o,variant:"primary",children:"Continue"}),showLearnMoreButton:!0})}var un=u(h());function yd({children:r,onClick:o,disabled:e,layoutId:t,duration:n,className:i}){return(0,un.jsx)(Re.div,{layout:"position",layoutId:t,style:{width:"100%"},transition:{duration:n,type:"spring",bounce:.2,delay:0},children:(0,un.jsx)(K,{type:"button",className:H(fr,i),onClick:o,enabled:!e,children:r})})}var hd="loginButtonLoading_l4nhz4u";var Yt=u(h());function Cd(){let r=x(),{isLoginInProgress:o}=r.stores.loginStore.useState();Vt("editor_bar_impression",{page:"editor-bar-guest-page"});async function e(){Me("editor_bar_interaction",{page:"editor-bar-guest-page",id:"editor-bar-login"}),await r.stores.loginStore.login()}return(0,Yt.jsx)(Ht,{logo:(0,Yt.jsx)("img",{decoding:"async",width:36,height:36,src:Zt,alt:"Framer Logo"}),title:"Edit Page",subtitle:"Edit the page directly in the browser, without opening the app.",buttons:(0,Yt.jsx)(yd,{onClick:e,disabled:o,className:mr,children:o?(0,Yt.jsx)("div",{className:hd,children:(0,Yt.jsx)(al,{})}):"Continue"}),showLearnMoreButton:!0})}var gn=u(h()),Kf="Page Edit",Xf="To edit, ask the site owner for access to the project",Zf="To edit, ask the site owner for content editing permissions";function yn({reason:r}){return Vt("editor_bar_impression",{page:"editor-bar-no-access-page"}),(0,gn.jsx)(Ht,{logo:(0,gn.jsx)("img",{decoding:"async",width:36,src:Zt,alt:"Framer Logo"}),title:Kf,subtitle:r==="no-permission"?Zf:Xf,showLearnMoreButton:!0})}var fo=u(h());function wd(){let r=x(),{access:o}=r.stores.accessStore.useState();switch(o.status){case"no-auth":return(0,fo.jsx)(Cd,{});case"unknown":return(0,fo.jsx)(gd,{});case"no-access":return(0,fo.jsx)(yn,{reason:"no-access"});case"no-permission":return(0,fo.jsx)(yn,{reason:"no-permission"});case"success":case"error":return null;default:oo(o)}}var Ut=u(h());function Ud(){let r=x(),{shouldRenderOnPageCanvas:o}=r.stores.accessStore.useState(),e=Je(()=>r.stores.routeStore.webPageNodeId,[],[r.stores.routeStore]);return(0,hn.useEffect)(()=>{e&&r.stores.sandboxStore.waitForInitialLoad(e).then(()=>{window.parent.postMessage({apiVersion:1,type:"sandboxReadyState",data:{status:"ready"}},"*")}).catch(ie)},[e]),(0,hn.useEffect)(()=>{r.performanceTracker.reportEditorBarReady()}),id(),(0,Ut.jsxs)(Ut.Fragment,{children:[(0,Ut.jsx)(wd,{}),o&&(0,Ut.jsx)(rd,{})]})}var ur=class{constructor(o){this.engine=o;y(this,"state",0);y(this,"changes",new Ca)}get inRendering(){return this.state===3}render(){if(this.state!==1)return;let o=this.changes,e=this.engine.stores;try{this.state=2,o.has(e.treeStore,e.routeStore)&&Mo(e.treeStore.tree,e.treeStore.layoutCache,e.treeStore.sandboxCollectionData,e.treeStore.sandboxVisibility,ee.activeBundleHash,e.routeStore.localeId,void 0,e.routeStore.webPageNodeId),e.toolStore.tool?.update?.(),e.undoRedoManager.processScheduledEndUndoGroup({}),this.state=3,e.sandboxStore.update(),o.signalAllObservers(),Ps()}finally{this.state=0}}signalChanges(o){if(this.changes.addChanges(o),this.state!==0)return;this.state=1;let e=this.render.bind(this);setTimeout(e,0),vs()}wrapHandler(o,e){let{projectStore:t}=this.engine.stores;return function(...n){let i=o.apply(this,n);return t.commitTreeAndSend(e!=="nonUserEvent"),i}}process(o,e){this.wrapHandler(o,e)()}processWhenReady(o,e){this.wrapHandler(o,e)()}async processWhenReadyAsync(o,e){return this.wrapHandler(o,e)()}runWhenIdle(o){requestIdleCallback(o)}runWithFullyLoadedTree(o,e){p(e.runInBackground,"Only background tasks are supported in the OnPageEngine for now.");let t=this.engine.tree.getService("loader"),n=()=>{o(),this.engine.stores.projectStore.commitTreeAndSend()};if(!t)return n(),lt;let i=t.prioritizeLoadingAllData({operationName:e.name,operationInBackground:!0,doNotTrack:e.doNotTrack}),a=t.afterAllDataLoaded(n);return()=>{i(),a()}}runBeforeNextFrame(o){requestAnimationFrame(o)}};var gr=class extends Fe{constructor(e,t,n){super();this.projectStore=e;this.hostnameStore=t;this.siteId=n;y(this,"_access")}get access(){return p(this._access,"Access not initialized"),this._access}get projectId(){return Id(this.access)}get canEditContent(){let e=this.access;return e.status!=="success"?!1:e.data.permissions?.canEditContent==="on"}get shouldRenderOnPageCanvas(){return Zr()&&this.canEditContent}async set(e){if(this._access=e,this.shouldRenderOnPageCanvas){let t=Id(e);e.userId&&t&&(this.projectStore.loadProject(e.userId,t),this.hostnameStore.loadHostnames(t).catch(ie))}Ti.setUserId(e.userId??"null")}async refresh(){let e=await ll(this.siteId);await this.set(e)}},jf=/^(?<name>.+--)?(?<id>[a-z0-9]{20})(?<hash>-[a-z0-9]+)?$/iu;function Id(r){if(r.status==="success")return jf.exec(r.data.projectSlug)?.groups?.id}var xd,Fd,It,Cn,wn;Fd=[M()],xd=[M()];var xt=class{constructor(o){this.scheduler=o;A(this,Cn,I(It,8,this,[])),I(It,11,this);A(this,wn,I(It,12,this)),I(It,15,this);y(this,"assetMap",new Hn)}get assets(){return this._assets}get assetService(){return this._assetService}setAssetService(o){this._assetService=o,Yn(o,e=>{e.assets&&(this._assets=e.assets,this.assetMap.set(e.assets),rt.importCustomFonts(e.assets,it.isOn("customFontGrouping")))})}};It=re(null),Cn=new WeakMap,wn=new WeakMap,k(It,4,"_assets",Fd,xt,Cn),k(It,4,"_assetService",xd,xt,wn),ne(It,xt);async function bd(r){return ya.post("/edit/notifications/page-edited",r)}var Sd,vd,Pd,Ed,we,Un,In,xn,Fn;Ed=[M()],Pd=[M()],vd=[M()],Sd=[M()];var et=class{constructor(o,e,t,n,i,a,l,s,d){this.scheduler=o;this.accessStore=e;this.routeStore=t;this.treeStore=n;this.projectStore=i;this.modalStore=a;this.undoRedoManager=l;this.exitTool=s;this.onChangeRoute=d;A(this,Un,I(we,8,this,!0)),I(we,11,this);A(this,In,I(we,12,this,null)),I(we,15,this);A(this,xn,I(we,16,this,window.innerWidth)),I(we,19,this);A(this,Fn,I(we,20,this)),I(we,23,this);window.addEventListener("resize",()=>{this._screenWidth=window.innerWidth})}get screenWidth(){return this._screenWidth}get temporaryCollectionItemNodeId(){return this._temporaryCollectionItemNodeId}set temporaryCollectionItemNodeId(o){this._temporaryCollectionItemNodeId=o,this.onChangeRoute()}async sendNotification(o){let e=this.accessStore.projectId;p(e,"Project ID must exist");let t=$e({tree:this.treeStore.tree,webPageNodeId:this.routeStore.webPageNodeId});p(t,"Web page node must exist");let n=_e(this.routeStore,this.treeStore,this),i;if(n){let a=qt(this.routeStore,this.treeStore,this);p(a,"Collection item exists, so its parent collection must exist"),p(a.name,"Collection node must have a name"),i={notificationType:o,projectId:e,webPageNodeId:t.id,collectionItemNodeId:n.id,collectionItemTitle:Hf(a,n),collectionTitle:a.name,pageType:"cms-detail"}}else i={notificationType:o,projectId:e,webPageNodeId:t.id,pageTitle:t.webMetadata?.title||Pa(this.treeStore.tree,t),pageType:"static"};await bd(i)}createTemporaryCollectionItem(){let o=qt(this.routeStore,this.treeStore,this);if(!o)return;let e=this.accessStore.access?.userId;p(e,"User must be logged in");let t=o.getPrivateItemForUser(e);if(t)this.temporaryCollectionItemNodeId=t.id;else{let n=Oo.create({isDraft:!0,privateToUserId:e});this.treeStore.tree.insertNode(n,o.id,0),this.temporaryCollectionItemNodeId=n.id,qo(o,n),this.projectStore.commitTreeAndSend()}}discardTemporaryCollectionItem(){let o=_e(this.routeStore,this.treeStore,this);p(o,"Collection item node must exist"),p(o.id===this.temporaryCollectionItemNodeId,"Collection item must be temporary"),this.treeStore.tree.remove(o.id),this.projectStore.commitTreeAndSend(),this.clearTemporaryItem(),this.exitFullscreen()}saveTemporaryCollectionItem(){let o=_e(this.routeStore,this.treeStore,this);p(o,"Collection item node must exist"),p(o.id===this.temporaryCollectionItemNodeId,"Collection item must be temporary"),o?.set({privateToUserId:void 0}),this.projectStore.commitTreeAndSend(),this.finishEditingWithChanges(o.id,!0)}handleFinishEditing(){this.exitTool();let o=_e(this.routeStore,this.treeStore,this);if(!!!o?.privateToUserId){if(!this.treeStore.hasChanged()){this.handleDismissFinishEditing();return}let s=this.routeStore.projectLinkNodeId;if(!s)return;this.finishEditingWithChanges(s,!1);return}let t=qt(this.routeStore,this.treeStore,this);if(p(t&&o,"Collection node and collection item node must exist"),!o.hasData()){this.discardTemporaryCollectionItem();return}let n=Go(t,o);Cs(t,o,n)&&this.projectStore.commitTreeAndSend();let l=hs(this.treeStore.tree,t,o,n).flatMap(s=>{let d=s.type;return ln[d]!==void 0?s.id:[]});l.length>0?this.modalStore.set({type:"OnPageCMSFieldsModal",fieldIdsToShow:l,requiredFieldsOnly:!0,source:"on_page_hud",collectionItemId:o.id,collectionNodeId:t.id}):this.saveTemporaryCollectionItem()}finishEditingWithChanges(o,e){this.finishedEditing={isNewItem:e,nodeId:o},Me("editor_bar_interaction",{page:"editor-bar-project-page",id:"editor-bar-finish-editing-with-changes"});let t=e?"page-created":"page-edited";this.sendNotification(t).catch(ie)}handleDismissFinishEditing(){this.clearTemporaryItem(),this.undoRedoManager.clearUndoStack(),this.exitFullscreen()}exitFullscreen(){window.parent.postMessage({apiVersion:1,type:"exitFullscreen",position:{top:window.scrollY}},"*"),this.isHidden=!0}clearTemporaryItem(){this.finishedEditing=null,this.temporaryCollectionItemNodeId=void 0}};we=re(null),Un=new WeakMap,In=new WeakMap,xn=new WeakMap,Fn=new WeakMap,k(we,4,"isHidden",Ed,et,Un),k(we,4,"finishedEditing",Pd,et,In),k(we,4,"_screenWidth",vd,et,xn),k(we,4,"_temporaryCollectionItemNodeId",Sd,et,Fn),ne(we,et);function Hf(r,o){let e=r.variables.find(ut);if(e?.associatedStringVariable){let t=o.getControlProp(e.associatedStringVariable);if(t&&t.type==="string"&&le(t.value)&&t.value.trim())return t.value.trim()}return"a new page"}var yr=class{updateComponentLoader(o,e){ee.setModuleRevision(e,0);for(let t of o)ee.updateEntity(t.identifier,t)}};var Yf=0,Nd,hr,bn,Qt;Nd=[M()];var Jt=class{constructor(o){this.scheduler=o;A(this,bn,I(hr,8,this)),I(hr,11,this);A(this,Qt);window.addEventListener("resize",()=>{this._editableNodesHighlight&&(this._editableNodesHighlight=void 0)})}get editableNodesHighlight(){return this._editableNodesHighlight}onChangeRoute(){this._editableNodesHighlight&&(this._editableNodesHighlight=void 0)}cleanupAnimationOnFinish(o){Nt(this,Qt)&&clearTimeout(Nt(this,Qt)),po(this,Qt,window.setTimeout(()=>{this._editableNodesHighlight=void 0},o+100))}highlight(o,{type:e}){let t=be({screenWidth:o.stores.canvasStore.screenWidth,tree:o.stores.treeStore.tree,webPageNodeId:o.stores.routeStore.webPageNodeId});if(!t)return;let n=[],i={x:0,y:window.scrollY,width:window.innerWidth,height:window.innerHeight},a=1/0,l=-1/0,s=!1;for(let d of t.walk())for(let[m]of d.cache.iterateRenderInstances()){if(!Oe.isSelectableNode(o,d,m))continue;s=!0;let f=o.tree.convertFrameToCanvas(d,void 0,m);if(!Jf(i,f))continue;a=Math.min(a,f.y),l=Math.max(l,f.y+f.height);let g=o.tree.getRect(d,void 0,void 0,void 0,m),c=o.tree.transformMatrixToNode(d,void 0,void 0,m);n.push({renderId:m,width:g.width,height:g.height,transform:c.toString(),centerX:f.x+f.width/2,centerY:f.y+f.height/2})}if(n.length===0)st({key:"editable-nodes-highlight-empty",type:"add",text:s?"Editable content is out of view, scroll to reveal it":"Content is not editable on this page",variant:"info"}),this._editableNodesHighlight=void 0;else{let d=e==="clickOnVoid",m=d?o.stores.mouseStore.windowMousePosition.x:i.width,f=d?o.stores.mouseStore.windowMousePosition.y:i.height/2,g=d?o.stores.mouseStore.canvasMousePosition.y:o.stores.mouseStore.scrollPosition.y,c=400,C=Math.max(m,window.innerWidth-m),w=Math.max(f,window.innerHeight-f),U=Math.sqrt(C**2+w**2)+c,B=Math.max(500,e==="clickOnVoid"?U:U*2),P=5,b=Math.max(0,Math.floor(a-P)),F=Math.ceil(l+P),S=Qf(n,U,m,g);this._editableNodesHighlight={animationId:`editable-nodes-highlight-${Yf++}`,minY:b,maxY:F,originX:m,originY:f-b+i.y,highlights:n,minRadius:S,maxRadius:U,gradientSize:c,animationDuration:B},this.cleanupAnimationOnFinish(B)}}};hr=re(null),bn=new WeakMap,Qt=new WeakMap,k(hr,4,"_editableNodesHighlight",Nd,Jt,bn),ne(hr,Jt);function Jf(r,o){return!(o.x>=Te.maxX(r)||Te.maxX(o)<=r.x||o.y>=Te.maxY(r)||Te.maxY(o)<=r.y)}function Qf(r,o,e,t){let n=1/0;for(let i of r){let a=Math.sqrt(i.width**2+i.height**2),l=Math.abs(i.centerX-e),s=Math.abs(i.centerY-t),d=Math.sqrt(l**2+s**2),m=Math.max(0,d-a/2);n=Math.min(n,m)}return Number.isFinite(n)&&n<o?n:0}var Cr=class extends Ya{constructor(){super(...arguments);y(this,"hostnames");y(this,"testing",{setHostnames:e=>{this.hostnames=e}})}get customHostnameString(){return this.hostnames?.find(e=>e.type==="custom")?.hostname}get defaultHostnameString(){return this.hostnames?.find(e=>e.type==="default")?.hostname}async loadHostnames(e){let{hostnames:t}=await Ha(e);this.hostnames=t}};var wr=class extends Fe{constructor(e){super();this.sandboxStore=e}async ensureModuleEvaluatedInSandbox(e){await(await this.sandboxStore.getModulesRuntime()).loadModule(e.value)}hasModuleForIdentifier(e){return!!ee.componentForIdentifier(e.value)}};var Ur=class extends Fe{constructor(e){super();this.accessStore=e;y(this,"isLoginInProgress",!1)}login(){let e=window.open(`${yo().login}?closeAfterSuccess=true`,"_blank");return e?this.startLoginWindowClosedPolling(e):Promise.resolve()}startLoginWindowClosedPolling(e){return this.isLoginInProgress=!0,new Promise(n=>{let i=setInterval(async()=>{e.closed&&(clearInterval(i),await this.accessStore.refresh(),this.isLoginInProgress=!1,n())},500)})}};var Od,kd,Bd,Ad,Td,Rd,oe,Sn,vn,Pn,En,Nn;Rd=[M()],Td=[M(je.isEqual)],Ad=[M(je.isEqual)],Bd=[yt(je.isEqual)],kd=[M()],Od=[M()];var ke=class{constructor(o){this.scheduler=o;I(oe,5,this);A(this,Sn,I(oe,8,this)),I(oe,11,this);A(this,vn,I(oe,12,this,je(0,0))),I(oe,15,this);A(this,Pn,I(oe,16,this,je(0,0))),I(oe,19,this);A(this,En,I(oe,20,this,!1)),I(oe,23,this);A(this,Nn,I(oe,24,this,!1)),I(oe,27,this);let e=this.onMouseMove.bind(this);document.addEventListener("mousemove",e);let t=this.onScroll.bind(this);document.addEventListener("scroll",t)}get lastUpdateType(){return this._lastUpdateType}get scrollPosition(){return this._scrollPosition}get windowMousePosition(){return this._windowMousePosition}get canvasMousePosition(){return je.add(this.windowMousePosition,this.scrollPosition)}get isHoveringChrome(){return this._isHoveringChrome}get isHoveringFloatingCanvasChrome(){return this._isHoveringFloatingCanvasChrome}onScroll(){this._scrollPosition=je(window.scrollX,window.scrollY),this._lastUpdateType="scroll"}onMouseMove(o){this._isHoveringChrome=ul(o.target),this._isHoveringFloatingCanvasChrome=gl(o.target),this._windowMousePosition=je(o.clientX,o.clientY),this._lastUpdateType="mouseMove"}};oe=re(null),Sn=new WeakMap,vn=new WeakMap,Pn=new WeakMap,En=new WeakMap,Nn=new WeakMap,k(oe,4,"_lastUpdateType",Rd,ke,Sn),k(oe,4,"_scrollPosition",Td,ke,vn),k(oe,4,"_windowMousePosition",Ad,ke,Pn),k(oe,2,"canvasMousePosition",Bd,ke),k(oe,4,"_isHoveringChrome",kd,ke,En),k(oe,4,"_isHoveringFloatingCanvasChrome",Od,ke,Nn),ne(oe,ke);var Ir=class extends Fe{constructor(){super(...arguments);y(this,"colorModel","HEX")}};var Dd=u(te());var xr=class extends Fe{constructor(e,t){super();this.assetStore=e;this.treeStore=t;y(this,"_hasPermanentlyFailed",!1);y(this,"project");y(this,"projectPromise",new Ot);y(this,"filePickerRef",(0,Dd.createRef)())}get hasPermanentlyFailed(){return this._hasPermanentlyFailed}getProject(){return this.projectPromise}get resourceLimits(){}get featureFlags(){}get projectLicenseType(){return"freeSite"}loadProject(e,t){Wt(),!this.project&&(this.project=new fl(this.treeStore.timeline,e,t),this.project.connect(),this.project.on("disconnect",this.onDisconnect,this),this.project.connection.on("disconnect",this.onDisconnect,this),this.project.on("update",n=>{this.treeStore.newTreeAfterRemoteUpdate(n)}),this.assetStore.setAssetService(this.project.assetService),this.projectPromise.resolve(this.project))}onDisconnect(e){es(e)||(this._hasPermanentlyFailed=!0,e==="ClientNeedsUpdate"?st({type:"add",variant:"warning",text:"A new version of Framer is available. Please reload the page to continue working.",key:"client-outdated",duration:1/0,icon:"warning",showCloseButton:"never"}):e==="Maintenance"?st({type:"add",variant:"warning",text:"Framer is undergoing maintenance. Please reload to continue once we\u2019re back.",key:"maintenance-mode",duration:1/0,icon:"warning",showCloseButton:"never",action:{title:"Reload",onClick:()=>window.location.reload()}}):st({type:"add",variant:"error",text:"Connection error: "+e,key:"connection-error",duration:1/0,icon:"error",showCloseButton:"never"}))}commitTreeAndSend(e=!0){p(this.project,"Project must be initialized"),p(!this.hasPermanentlyFailed,"Project is permanently failed");let t=this.treeStore.timeline.commitLocalTree();this.treeStore.newTreeAfterLocalUpdate(t,e),this.project.maybeSend()}};var Md,_d,Ft,On,kn;_d=[M()],Md=[M()];var bt=class{constructor(o,e){this.scheduler=o;this.onChangeRoute=e;y(this,"localeId",ni);A(this,On,I(Ft,8,this)),I(Ft,11,this);A(this,kn,I(Ft,12,this)),I(Ft,15,this);let t=({data:n})=>{if(nt(n)&&n.apiVersion===1){let{type:i,nodeIds:a}=n;if(i==="updateNodeIds"&&nt(a)&&le(a.webPageNodeId)){let{webPageNodeId:l,collectionItemNodeId:s}=a;this._webPageNodeId=l,this._collectionItemNodeId=le(s)?s:void 0,this.onChangeRoute()}}};window.addEventListener("message",t),window.parent.postMessage({apiVersion:1,type:"initializeComponent",component:"OnPageActiveRouteStore"},"*")}get collectionItemNodeId(){return this._collectionItemNodeId}get webPageNodeId(){return this._webPageNodeId}get projectLinkNodeId(){return this._collectionItemNodeId??this._webPageNodeId}};Ft=re(null),On=new WeakMap,kn=new WeakMap,k(Ft,4,"_collectionItemNodeId",_d,bt,On),k(Ft,4,"_webPageNodeId",Md,bt,kn),ne(Ft,bt);var Gd="iframe_icxp2h1";var Fr=class extends Fe{constructor(e,t,n,i){super();this.componentsStore=e;this.treeStore=t;this.performanceTracker=n;this.updateGenerator=i;y(this,"config",Ia.onPageCanvas);y(this,"iframe");y(this,"remoteSandbox");y(this,"remoteControlsVisibility",new Ot);y(this,"remoteModulesRuntime",new Ot);y(this,"_canvasHeight");y(this,"webPageNodeIdToInitialLoadPromise",new Map);window.addEventListener("scroll",()=>{this.remoteSandbox?.scrollTo({behavior:"instant",top:window.scrollY})})}getControlsVisibility(){return this.remoteControlsVisibility}getModulesRuntime(){return this.remoteModulesRuntime}get canvasHeight(){return this._canvasHeight}loadSandbox(){Wt(),p(!this.iframe,"Sandbox already loaded");let e=document.createElement("iframe");e.src=this.config.url,e.allow=Es,e.sandbox.add("allow-scripts","allow-same-origin"),e.tabIndex=-1,e.id="canvas_sandbox",e.className=Gd;let t=this.initializeSandbox.bind(this,e);e.addEventListener("load",t),this.iframe=e,this.hide(),document.body.append(e)}getInitialLoadPromise(e){let t=this.webPageNodeIdToInitialLoadPromise.get(e)??new Ot;return this.webPageNodeIdToInitialLoadPromise.set(e,t),t}async waitForInitialLoad(e){this.performanceTracker.reportCanvasLoaderViewed(),await this.getInitialLoadPromise(e)}async initializeSandbox(e){let t=e.contentWindow;p(t,"Sandbox didn't load correctly");let n=new xa(Qe);n.setLocal(Qe.channels.componentsStore,this.componentsStore),n.setLocal(Qe.channels.sandboxStore,this),n.setLocal(Qe.channels.treeStore,this.treeStore);let i=n.getRemote(Qe.channels.sandbox),a=n.getRemote(Qe.channels.controlsVisibility),l=n.getRemote(Qe.channels.modulesRuntime),s=n.getRemote(Qe.channels.flags);await n.connect({target:t,url:this.config.origin}),this.remoteSandbox=i,this.remoteControlsVisibility.resolve(a),this.remoteModulesRuntime.resolve(l),new Fa(s)}onHeightChange(e){this._canvasHeight=e}onInitialLoadComplete(e){this.performanceTracker.reportCanvasReady(),this.getInitialLoadPromise(e).resolve()}update(){let e=this.remoteSandbox;if(!e)return;let t=this.updateGenerator.getUpdate();go(t)||e.update(t)}hide(){p(this.iframe,"Sandbox not loaded"),this.iframe.setAttribute("aria-hidden","true")}show(){p(this.iframe,"Sandbox not loaded"),this.iframe.removeAttribute("aria-hidden")}};var Vd,Bn;Vd=[yt()];var $t=class{constructor(o,e,t){this.scheduler=o;this.routeStore=e;this.treeStore=t;I(Bn,5,this)}get active(){let o=$e({tree:this.treeStore.tree,webPageNodeId:this.routeStore.webPageNodeId});return V(o,"webPageNode must be defined"),o}};Bn=re(null),k(Bn,2,"active",Vd,$t),ne(Bn,$t);function zd({editorNode:r,screenWidth:o,tree:e,webPageNodeId:t,windowMousePositionOnToolEntry:n}){let i=be({screenWidth:o,tree:e,webPageNodeId:t});if(!i)return;let a=e.convertFrameToCanvas(r),l=e.getNodesInRect(i,a,!0),s=[],d=i.cache.layoutTemplateRects;if(d)for(let[P,b]of d)!b.canvasRect||!Te.intersects(b.canvasRect,a)||s.push(new Oi({zIndex:b.domRect.zIndex,id:P,parentid:i.id}));let m=l.concat(s),f=zi(m,e,{[i.id]:s}),g=f.findIndex(P=>P.id===r.id);if(g===-1)return;let c=f.slice(g+1);if(c.length===0)return;let w=e.transformMatrixToNode(r).inverse(),U=n?{x:n.x+window.scrollX,y:n.y+window.scrollY,width:1,height:1}:void 0,B=[];for(let P of c){let b=d?.get(P.id),F=e.convertFrameToCanvas(P);if(U&&Te.intersects(U,F))continue;let S;if(b?.canvasCorners?S=b.canvasCorners:S=e.convertCornerPointsToCanvas(P),S.length===0)continue;let E=[];for(let{x:Ie,y:Ke}of S){let Be=new DOMPoint(Ie,Ke).matrixTransform(w);E.push({x:Be.x,y:Be.y})}E.length!==0&&B.push(E)}if(B.length!==0)return{editorRect:a,polygons:B}}function Wd({editorRect:r,polygons:o}){let e=`M ${-ft},${-ft} L ${-ft},${r.height+ft} L ${r.width+ft},${r.height+ft} L ${r.width+ft},${-ft} Z`;for(let t of o){let n=t[0];if(!n)continue;let i=[...t,n];for(let a of i)e+=` L ${a.x},${a.y}`;e+=" Z"}return`path("${e}")`}function qd(r){let o=[];for(let e of r){if(e.length===0)continue;let[t,...n]=e;if(!t)continue;let i=`M ${t.x},${t.y}`;for(let a of n)i+=` L ${a.x},${a.y}`;i+=" Z",o.push(i)}if(o.length!==0)return`path("${o.join(" ")}")`}var ft=100;var Ld,Kd,Xd,Zd,jd,Hd,Yd,Jd,Z,An,Tn,Rn,Dn,Mn,eo,_n;Jd=[M()],Yd=[M()],Hd=[M()],jd=[M()],Zd=[M()],Xd=[M()],Kd=[yt()],Ld=[yt()];var Ue=class{constructor(o,e,t,n,i){this.scheduler=o;this.treeStore=e;this.routeStore=t;this.canvasStore=n;this.mouseStore=i;I(Z,5,this);A(this,An,I(Z,8,this)),I(Z,11,this);A(this,Tn,I(Z,12,this,Or)),I(Z,15,this);A(this,Rn,I(Z,16,this)),I(Z,19,this);A(this,Dn,I(Z,20,this,null)),I(Z,23,this);A(this,Mn,I(Z,24,this)),I(Z,27,this);A(this,eo);A(this,_n,I(Z,28,this)),I(Z,31,this)}get tool(){return this._tool}set tool(o){po(this,eo,this.mouseStore.windowMousePosition),this._tool!==o&&(this._tool?.stop?.(),this._tool=o)}get windowMousePositionOnToolEntry(){return Nt(this,eo)}get editorClipGeometryEntry(){let o=this.nodeInTextEditorId;if(!o||o===Or)return null;let e=gt(o),t=this.treeStore.tree.get(e);if(!t)return null;let n=zd({domLayoutUpdate:this.treeStore.domLayoutUpdate,editorNode:t,screenWidth:this.canvasStore.screenWidth,tree:this.treeStore.tree,webPageNodeId:this.routeStore.webPageNodeId,windowMousePositionOnToolEntry:Nt(this,eo)});return n?{nodeId:e,geometry:n}:null}get editorOverlayClipPath(){let o=this.editorClipGeometryEntry;if(o)return Wd(o.geometry)}get sandboxNodeInTextEditorClipPath(){let o=this.editorClipGeometryEntry;if(o)return qd(o.geometry.polygons)}validateCollectionControl(o){let e="required";if(!o)return;let{collectionItemNode:t,variableDefinition:n,collectionNode:i,controlDescription:a,controlProp:l}=o,s;(Io(n)||ut(n))&&(s=Vo(n,i.variables,t));let d=Go(i,t),m=n.type,f=zo(m,a,l,s,void 0,xo(n),d.get(n.id));this.validationWarning=f?.type===e?void 0:f}};Z=re(null),An=new WeakMap,Tn=new WeakMap,Rn=new WeakMap,Dn=new WeakMap,Mn=new WeakMap,eo=new WeakMap,_n=new WeakMap,k(Z,4,"highlightedRenderId",Jd,Ue,An),k(Z,4,"nodeInTextEditorId",Yd,Ue,Tn),k(Z,4,"proseMirror",Hd,Ue,Rn),k(Z,4,"proseMirrorView",jd,Ue,Dn),k(Z,4,"_tool",Zd,Ue,Mn),k(Z,4,"validationWarning",Xd,Ue,_n),k(Z,2,"editorClipGeometryEntry",Kd,Ue),k(Z,2,"editorOverlayClipPath",Ld,Ue),ne(Z,Ue);var Qd,$d,St,Gn,Vn;$d=[M()],Qd=[M()];var vt=class{constructor(o,e,t){this.scheduler=o;this.routeStore=e;this.undoRedoManager=t;y(this,"layoutCache",new Va);y(this,"sandboxCollectionData",new za("editor"));y(this,"sandboxVisibility",new Wa("editor"));A(this,Gn,I(St,8,this,qi.createEmpty())),I(St,11,this);A(this,Vn,I(St,12,this,0)),I(St,15,this);y(this,"timeline",new La(this.tree));y(this,"treeIndexes",new zn(this))}get tree(){return this._tree}get domLayoutUpdate(){return this._domLayoutUpdate}get remoteTreeVersion(){return this.timeline.remoteTreeVersion}getChangesForUndo(){let o=this.timeline.getLatestChangesForUndo();return o?o.filter(e=>!e.ignoreInUndo):[]}hasChanged(){return this.undoRedoManager.getUndoBufferSize()>0}getPartialIndexes(){return this.treeIndexes}getLoadedIndexes(){let o=this.tree.getService("loader");if(o){let e=o.numberOfScopesToLoad();throw new Error(`Some scopes are still loading: ${e} scopes left to load`)}return this.treeIndexes}onLayoutMeasure(o){let e=this.layoutCache.processLayoutMeasurements(o);e.size===0||Xa(this.tree,this.layoutCache,e).size===0||this._domLayoutUpdate++}onSandboxRendered(o){let e=new Set;if(o.collectionUpdates){let t=this.sandboxCollectionData.import(o.collectionUpdates);for(let n of t){let i=gt(n);e.add(i)}}if(o.visibilityUpdates){let t=this.sandboxVisibility.import(o.visibilityUpdates);for(let n of t){let i=gt(n);e.add(i)}}if(e.size>0){let t=Ka(this.tree,e);Mo(this.tree,this.layoutCache,this.sandboxCollectionData,this.sandboxVisibility,ee.activeBundleHash,this.routeStore.localeId,void 0,t)}o.layoutMeasurements&&this.onLayoutMeasure(o.layoutMeasurements)}newTreeAfterRemoteUpdate(o){o.inEditor=!0,this._tree!==o&&(this._tree=o)}newTreeAfterLocalUpdate(o,e){if(o.inEditor=!0,this._tree===o)return;this._tree=o;let t=this.getChangesForUndo();e&&t.length>0&&this.undoRedoManager.addUndoEntry({changes:t})}};St=re(null),Gn=new WeakMap,Vn=new WeakMap,k(St,4,"_tree",$d,vt,Gn),k(St,4,"_domLayoutUpdate",Qd,vt,Vn),ne(St,vt);var zn=class{constructor(o){this.treeStore=o;y(this,"codeComponentNodeCache");y(this,"richTextNodeCache")}get codeComponents(){let o=this.treeStore.tree;if(this.codeComponentNodeCache?.tree===o)return this.codeComponentNodeCache.codeComponentNodes;let e=[];for(let t of o.root.walk())Pe(t)&&e.push(t);return this.codeComponentNodeCache={tree:o,codeComponentNodes:e},e}get richTextNodes(){let o=this.treeStore.tree;if(this.richTextNodeCache?.tree===o)return this.richTextNodeCache.richTextNodes;let e=[];for(let t of o.root.walk())N(t)&&e.push(t);return this.richTextNodeCache={tree:o,richTextNodes:e},e}};var br=class extends Qa{};var Sr=class{constructor(o,e,t){y(this,"accessStore");y(this,"assetStore");y(this,"canvasStore");y(this,"componentsStore");y(this,"contextMenuStore");y(this,"editableNodeHighlightStore");y(this,"hostnameStore");y(this,"loadedExternalModulesStore");y(this,"loginStore");y(this,"modalStore");y(this,"modulesStore");y(this,"mouseStore");y(this,"persistedUserDefaults");y(this,"projectStore");y(this,"routeStore");y(this,"sandboxStore");y(this,"scopeStore");y(this,"toolStore");y(this,"treeStore");y(this,"undoRedoManager",new br);y(this,"vectorsStore");this.assetStore=new xt(e),this.editableNodeHighlightStore=new Jt(e),this.routeStore=new bt(e,()=>o.onChangeRoute()),this.componentsStore=new yr,this.contextMenuStore=ja.new(e,e),this.hostnameStore=Cr.new(e),this.modalStore=ha.new(e,e),this.treeStore=new vt(e,this.routeStore,this.undoRedoManager),this.projectStore=xr.new(e,this.assetStore,this.treeStore),this.accessStore=gr.new(e,this.projectStore,this.hostnameStore,t),this.loginStore=Ur.new(e,this.accessStore),this.mouseStore=new ke(e),this.canvasStore=new et(e,this.accessStore,this.routeStore,this.treeStore,this.projectStore,this.modalStore,this.undoRedoManager,()=>o.exitTool(),()=>o.onChangeRoute()),this.toolStore=new Ue(e,this.treeStore,this.routeStore,this.canvasStore,this.mouseStore),this.scopeStore=new $t(e,this.routeStore,this.treeStore),this.sandboxStore=Fr.new(e,this.componentsStore,this.treeStore,o.performanceTracker,o.sandboxUpdateGenerator),this.loadedExternalModulesStore=wr.new(e,this.sandboxStore),this.modulesStore=Ma.new(e,e,this.treeStore,this.loadedExternalModulesStore,{codeEditorPreviewVisible:!1,mainView:0},this.projectStore.getProject().then(n=>n.modulesAPI),()=>{throw new Error("Can't make document readonly")},async n=>{await(await this.sandboxStore.getModulesRuntime()).insertTemporaryImportMap(n)},async()=>{throw new Error("Can't load all local modules")}),this.persistedUserDefaults=Ir.new(e),this.vectorsStore=$a.new(e,this.modulesStore)}};var vr=class{constructor(){y(this,"editorBarReadyAt");y(this,"canvasReadyAt");y(this,"canvasLoaderViewedAt")}get editorBarReadyMs(){let o=em();if(!(xe(o)||xe(this.editorBarReadyAt)))return this.editorBarReadyAt-o}get canvasReadyMs(){if(!(xe(this.canvasReadyAt)||xe(this.editorBarReadyAt)))return this.canvasReadyAt-this.editorBarReadyAt}get perceivedCanvasLoadMs(){if(!xe(this.canvasReadyAt))return xe(this.canvasLoaderViewedAt)?0:Math.min(this.canvasReadyAt-this.canvasLoaderViewedAt,0)}reportEditorBarReady(){this.editorBarReadyAt=Date.now()}reportCanvasLoaderViewed(){this.canvasLoaderViewedAt=Date.now()}reportCanvasReady(){this.canvasReadyAt=Date.now(),this.sendCanvasLoadedEvent()}sendCanvasLoadedEvent(){let{canvasReadyMs:o,editorBarReadyMs:e,perceivedCanvasLoadMs:t}=this;xe(o)||xe(e)||xe(t)||Me("editor_bar_canvas_loaded",{editorBarReadyMs:e,canvasReadyMs:o,perceivedCanvasLoadMs:t})}};function em(){let r=new URLSearchParams(window.location.search).get("loadStart");if(!r)return;let o=Number(r);if(!Number.isNaN(o))return o}var Pr=class{constructor(o){this.engine=o;y(this,"partialTreeSender");y(this,"previousWebPageNodeId");y(this,"previousCollectionItemNodeId");y(this,"previousBreakpointNodeId");y(this,"previousTemporaryCollectionItemNodeId");y(this,"previousStylePresetBreakpointClassNames");y(this,"previousLocalModules");y(this,"previousDependenciesModule");y(this,"previousAssets");y(this,"previousNodeInTextEditor");y(this,"previousNodeInTextEditorClipPath")}getUpdate(){let{canvasStore:o,modulesStore:e,routeStore:t,assetStore:n,treeStore:i,toolStore:a}=this.engine.stores,l={},s=$e({tree:i.tree,webPageNodeId:t.webPageNodeId})?.id;s!==this.previousWebPageNodeId&&(this.previousWebPageNodeId=s,l.webPageNodeId=s);let d=_e(t,i,o)?.id;d!==this.previousCollectionItemNodeId&&(this.previousCollectionItemNodeId=d,l.collectionItemNodeId=d);let m=be({screenWidth:o.screenWidth,tree:i.tree,webPageNodeId:t.webPageNodeId})?.id;m!==this.previousBreakpointNodeId&&(this.previousBreakpointNodeId=m,l.breakpointNodeId=m);let f=o.temporaryCollectionItemNodeId??null;f!==this.previousTemporaryCollectionItemNodeId&&(this.previousTemporaryCollectionItemNodeId=f,l.temporaryCollectionItemNodeId=f);let g=i.tree.getPresetsListNode(),c=tm(g,o.screenWidth);c!==this.previousStylePresetBreakpointClassNames&&(this.previousStylePresetBreakpointClassNames=c,l.stylePresetBreakpointClassNames=c);let C=e.localModules;C!==this.previousLocalModules&&(this.previousLocalModules=C,l.localModules=new Map(C));let w=e.dependenciesModule;w!==this.previousDependenciesModule&&(this.previousDependenciesModule=w,l.dependenciesModule=w);let U=n.assets;U!==this.previousAssets&&(this.previousAssets=U,l.assets=U),this.partialTreeSender??=new ba(i.timeline,"canvas");let B=this.partialTreeSender.update(s);go(B)||(l.partialTreeUpdate=B);let P=a.nodeInTextEditorId??null;P!==this.previousNodeInTextEditor&&(this.previousNodeInTextEditor=P,l.nodeInTextEditorId=P);let b=a.sandboxNodeInTextEditorClipPath??null;return b!==this.previousNodeInTextEditorClipPath&&(this.previousNodeInTextEditorClipPath=b,l.nodeInTextEditorClipPath=b),l}},tm=ai((r,o)=>{let e=Ns(r);return Os(e,o)});var Er=class{constructor(o){this.siteId=o;y(this,"name","OnPageEngine");y(this,"sandboxUpdateGenerator",new Pr(this));y(this,"performanceTracker",new vr);y(this,"scheduler",new ur(this));y(this,"stores");this.stores=new Sr(this,this.scheduler,o),this.stores.projectStore.getProject().then(e=>{p(this.stores.assetStore.assetService,"assetsService must be initialized"),_a(this,this.stores.assetStore.assetService,this.stores.projectStore.filePickerRef),va(e.api,this.stores.assetStore.assetService),this.stores.modulesStore.initialize().catch(ie),e.connection.on("connect",t=>{t&&this.stores.modulesStore.refresh().catch(ie)})})}get tree(){return this.stores.treeStore.tree}startHighlightTool(){this.stores.toolStore.tool=new Oe(this)}startComponentInstanceEditTool(o,e){this.stores.toolStore.tool=new Ve(this,o,e)}startDateVariableEditTool(o,e,t){this.stores.toolStore.tool=new ze(this,o,e,t)}startCollectionReferenceVariableEditTool(o,e,t){this.stores.toolStore.tool=new Ge(this,o,e,t)}startEnumVariableEditTool(o,e,t){this.stores.toolStore.tool=new We(this,o,e,t)}startImageEditTool(o,e){this.stores.toolStore.tool=new qe(this,o,e)}startRichTextEditTool(o,e,t){this.stores.toolStore.tool=new he(this,o,e,t)}startRichTextVariableEditTool(o,e,t){this.stores.toolStore.tool=new Ee(this,o,e,t)}startStringVariableEditTool(o,e,t){this.stores.toolStore.tool=new Ne(this,o,e,t)}exitTool(){this.startHighlightTool()}onChangeRoute(){this.stores.editableNodeHighlightStore.onChangeRoute(),this.exitTool()}getStateToken(){return this.stores.undoRedoManager.getUndoBufferSize()}undo(){let{undoRedoManager:o,toolStore:e,projectStore:t}=this.stores;e.tool?.undo?e.tool.undo():o.peekUndo()&&(o.undo(this.tree),t.commitTreeAndSend(!1))}redo(){let{undoRedoManager:o,toolStore:e,projectStore:t}=this.stores;e.tool?.redo?e.tool.redo():o.peekRedo()&&(o.redo(this.tree),t.commitTreeAndSend(!1))}beginUndoGroup(){this.stores.undoRedoManager.beginUndoGroup()}endUndoGroup(){this.stores.undoRedoManager.scheduleEndUndoGroup()}};var mt=u(h());ri({enableFontStore:!0,fetchGoogleFontsList:ns,fetchFontshareFontsList:rs,fetchBuiltInFontsList:ts});async function zb(r,o){let e=new Er(o);await e.stores.accessStore.set(r),e.stores.sandboxStore.loadSandbox(),Za(e.stores.assetStore.assetMap),rt.importFramerFonts(wi),Da(),Object.assign(window,{engine:e,componentLoader:ee}),os((0,mt.jsx)(bi.Provider,{value:e,children:(0,mt.jsx)(Us,{forceDarkMode:!0,children:(0,mt.jsx)(ra,{mode:"onPageEditing",children:(0,mt.jsxs)(ml,{children:[(0,mt.jsx)(Ud,{}),(0,mt.jsx)(Zs,{})]})})})}),document.getElementById("root"))}export{zb as renderEditorBar};
//# sourceMappingURL=https://app.framerstatic.com/render-5JJOWHNW.mjs.map
