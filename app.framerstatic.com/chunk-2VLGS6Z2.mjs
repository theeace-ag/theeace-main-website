import{C as ue,a as J,m as Te}from"https://app.framerstatic.com/chunk-ZTJ4G3SJ.mjs";import{a as Me}from"https://app.framerstatic.com/chunk-MMCJFMN5.mjs";import{a as ae,e as de}from"https://app.framerstatic.com/chunk-VHY5GXEM.mjs";import{Kg as _,P as xe,Yf as Z,lg as ve,pg as Ie}from"https://app.framerstatic.com/chunk-NBGN6U2B.mjs";import{E as W,Pb as Ce,r as Re}from"https://app.framerstatic.com/chunk-Z44G2RQ4.mjs";import{B as b,I as x,Me as ie,Qc as re,Ze as pe,_e as ye,ip as ge,um as oe}from"https://app.framerstatic.com/chunk-L7L7BWTW.mjs";import{I as z}from"https://app.framerstatic.com/chunk-YYHHSCRK.mjs";import{Zd as se}from"https://app.framerstatic.com/chunk-NIDOI5EE.mjs";import{v as B}from"https://app.framerstatic.com/chunk-PNIOO2GU.mjs";import{a as O}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{j as l,k as ne,l as me}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var k=B("PartialTreeReceiver"),Se=class{constructor(){l(this,"name","uninitialized");l(this,"tree");l(this,"chunkBuffer",new Map);l(this,"currentChunkId");l(this,"expectedTotalChunks",0);l(this,"chunkTimeout");l(this,"chunkTimeoutMs",3e4);l(this,"chunkStartTime");this.tree=_.createEmpty()}clearChunkState(){this.chunkTimeout&&(clearTimeout(this.chunkTimeout),this.chunkTimeout=void 0),this.chunkBuffer.clear(),this.currentChunkId=void 0,this.expectedTotalChunks=0,this.chunkStartTime=void 0}update(e){if(Ie(xe),e.name&&(this.name=e.name),e.treeChunks)return this.handleChunkedUpdate(e.treeChunks);if(e.tree){k.debug(this.name,"received new tree",`took ${Date.now()-(e.timestamp||0)}ms to receive update`);let t=Z(e.tree.root);O(t,"error creating root from update message");let n=_.createByAdoptingRoot(t);n.loadReplicasAndCodeComponents(n.root),this.tree=n}if(e.changes&&(k.trace(this.name,"applying changes"),ve(this.tree,e.changes)),e.scopes){let t=this.tree.root.id;k.trace(this.name,"updating scopes:",e.scopes.length,`took ${Date.now()-(e.timestamp||0)}ms to receive update`);for(let n of e.scopes){let r=Z(n,t);O(r,"error creating scope from update message"),this.tree.remove(r.id),this.tree.insertNode(r,t),this.tree.loadReplicasAndCodeComponents(r)}}return this.tree.hasUncommittedChanges()&&(k.trace(this.name,"commit"),this.tree=this.tree.commitDiffs()),this.tree}handleChunkedUpdate(e){try{if(O(e.chunkIndex>=0&&e.chunkIndex<e.totalChunks,`Invalid chunk index: ${e.chunkIndex} not in range [0, ${e.totalChunks})`),(!this.currentChunkId||this.currentChunkId!==e.chunkId)&&(this.clearChunkState(),this.currentChunkId=e.chunkId,this.expectedTotalChunks=e.totalChunks,this.chunkStartTime=performance.now(),k.debug(this.name,`starting new chunked transfer: ${e.totalChunks} chunks expected`),this.chunkTimeout=setTimeout(()=>{k.warn(this.name,`chunk timeout: clearing incomplete transfer for ${e.chunkId}`),this.clearChunkState()},this.chunkTimeoutMs)),O(e.totalChunks===this.expectedTotalChunks,`Chunk count mismatch: expected ${this.expectedTotalChunks}, got ${e.totalChunks}`),this.chunkBuffer.has(e.chunkIndex))return k.warn(this.name,`duplicate chunk received: ${e.chunkIndex}`),null;this.chunkBuffer.set(e.chunkIndex,{chunkId:e.chunkId,chunkIndex:e.chunkIndex,totalChunks:e.totalChunks,nodes:e.nodes,childrenMap:e.childrenMap,rootId:e.rootId})}catch(t){return k.error(this.name,"chunk processing error:",t),this.clearChunkState(),null}if(k.debug(this.name,`received chunk ${e.chunkIndex+1}/${e.totalChunks}`),this.chunkBuffer.size===e.totalChunks){k.debug(this.name,"all chunks received, assembling tree");let t=this.assembleTreeFromChunks();return this.clearChunkState(),this.tree=t,t}return null}assembleTreeFromChunks(){let e=new Map,t=new Map,n;for(let c=0;c<this.expectedTotalChunks;c++){let f=this.chunkBuffer.get(c);if(!f)throw new Error(`Missing chunk ${c} in chunked tree transfer`);if(!f.nodes||f.nodes.size===0)throw new Error(`Chunk ${c} has no nodes`);if(f.nodes.forEach((h,m)=>{if(!h||!m)throw new Error(`Invalid node data in chunk ${c}`);e.set(m,h)}),f.childrenMap)for(let[h,m]of f.childrenMap)t.set(h,m);f.rootId&&(n=f.rootId)}if(!n)throw new Error("No root ID found in chunked tree transfer");if(e.size===0)throw new Error("No nodes found in chunked tree transfer");function r(c){let f=e.get(c);if(!f)throw new Error(`Node ${c} not found in chunks`);let h=t.get(c);return h&&h.length>0&&(f.children=h.map(r)),f}let o=r(n),s=Z(o);O(s,"error creating root from chunked tree");let u=_.createByAdoptingRoot(s);u.loadReplicasAndCodeComponents(u.root);let a=this.chunkStartTime?performance.now()-this.chunkStartTime:0,d=a>1e3?`${(a/1e3).toFixed(2)}s`:`${Math.round(a)}ms`;return k.debug(this.name,`successfully assembled tree from ${this.expectedTotalChunks} chunks with ${e.size} nodes in ${d}`),u}};var Oe="getFontsForLoading";function tt(i){return Oe in i}function rt(i){let e=[];for(let t of i){let{class:n,properties:r,...o}=t,s={...o,properties:JSON.parse(JSON.stringify(r))};e.push(s)}return e}var mt=B("MeasureContext"),ce=z.isChrome(),le=z.isFirefox(),ee=z.isEdge(),he=z.isWebKit(),L=Xe();function te(){return window?.devicePixelRatio||0}var F=new DOMMatrixReadOnly;var H,K=class{constructor(){l(this,"computedStyleCache",new Map);l(this,"sizeCache",new Map);l(this,"boundingClientRectCache",new Map);l(this,"matrixCache",new Map);l(this,"transformMatrixAndOffsetCache",new Map);l(this,"untransformedRectCache",new Map);me(this,H,new Map)}getComputedStyle(e){let t=this.computedStyleCache.get(e);return t||(t=getComputedStyle(e),this.computedStyleCache.set(e,{display:t.display,width:t.width,height:t.height,transform:t.transform,opacity:t.opacity,filter:t.filter,overflow:t.overflow,transformStyle:t.transformStyle,transformOrigin:t.transformOrigin,zIndex:t.zIndex}),t)}getCreates3dTransformContext(e){let t=this.getComputedStyle(e);return!(t.transformStyle!=="preserve-3d"||t.opacity!=="1"||t.filter!=="none"||t.overflow!=="visible"&&t.overflow!=="none")}transformOriginPoint(e,t=e/2){if(e===0)return 0;let n=Math.round(t/e*100)/100;return he?Ae(e)*n:e*n}getTransformOrigin(e){let t=ne(this,H).get(e);if(t)return t;let n=this.getComputedStyle(e),{width:r,height:o}=this.getSize(e),s=n.transformOrigin;if(!s)return{x:this.transformOriginPoint(r,.5),y:this.transformOriginPoint(o,.5)};let u=Ye(s),a={x:this.transformOriginPoint(r,u?.x),y:this.transformOriginPoint(o,u?.y)};return ne(this,H).set(e,a),a}getCachedSize(e){return e?this.sizeCache.get(e):void 0}getCachedAttributes(e){let t=this.computedStyleCache.get(e),n=t?.zIndex?parseInt(t.zIndex):void 0,r=this.getTransformOrigin(e),o=this.getMatrix(e);return{zIndex:n,originX:r.x,originY:r.y,matrix:o.toJSON()}}getSize(e){let t=this.sizeCache.get(e);if(t)return t;let n=this.getComputedStyle(e),r=()=>{let a=e instanceof HTMLElement?e.offsetWidth:e.clientWidth;return n.display.startsWith("inline")?a+1:a},o=()=>e instanceof HTMLElement?e.offsetHeight:e.clientHeight,s=n.width.endsWith("px")?parseFloat(n.width):r(),u=n.height.endsWith("px")?parseFloat(n.height):o();return t={width:s||0,height:u||0},this.sizeCache.set(e,t),t}getCSSTransform(e){return this.getComputedStyle(e).transform||"none"}hasTransforms(e){return le?this.getCSSTransform(e)!=="none":!this.getMatrix(e).isIdentity}getMatrix(e){let t=this.matrixCache.get(e);if(t)return t;let n=this.getCSSTransform(e);return t=n==="none"?F:new DOMMatrix(n),this.matrixCache.set(e,t),t}getBoundingClientRect(e){let t=this.boundingClientRectCache.get(e);return t||(t=e.getBoundingClientRect(),this.boundingClientRectCache.set(e,t),t)}getUntransformedRectInGroundNode(e,t,n=!0){let r=this.untransformedRectCache.get(e);if(r)return r;let o=this.getTransformAncestors(e),s={x:0,y:0,paintX:0,paintY:0,translationX:0,translationY:0},u=F,a={x:0,y:0,width:0,height:0};return[...o,e].forEach(c=>{let f=this.getSize(c),h=this.getBoundingClientRect(c),m=this.getMatrix(c),g=n?m.m41/m.m44:0,T=n?m.m42/m.m44:0,{x:R,y:p}=this.getTransformOrigin(c),v=F.translate(R,p).multiplySelf(m).translateSelf(-R,-p),C=x.pointsAtOrigin(f),y=x.fromPoints(x.points(h).map(E=>t.transformPoint(E))),{x:U,y:P,matrix:I}=Me(u,v,y,C),w=b(Y(U+g),Y(P+T)),V=b(S(w.x),S(w.y)),G=this.hasTransforms(c),$=W.hasNonTranslationTransform(m),N=$e(c),{rect:A,paintDelta:q,translation:D}=Ge(s,w,f,m,G,N),X=Pe(G,$,N,w,V);s.x+=X.x,s.y+=X.y,s.paintX+=q.x,s.paintY+=q.y,s.translationX+=D.x,s.translationY+=D.y,u=this.getCreates3dTransformContext(c)?I:W.flatProjectionMatrix(I),this.transformMatrixAndOffsetCache.set(c,{matrix:u,offset:{...s}}),this.untransformedRectCache.set(c,A),a=A}),a}getTransformAncestors(e){let t=[],n=e.parentElement;for(;n!=null&&!Ne(n)&&n!==e.ownerDocument?.documentElement;)this.hasTransforms(n)&&t.unshift(n),n=n.parentElement;return t}getOffsetParentBoundingRect(e){if(!(e instanceof HTMLElement&&e.dataset.framerOffsetParentId))return;let t=document.getElementById(e.dataset.framerOffsetParentId);if(t)return this.getBoundingClientRect(t)}getOffsetParent(e){let t=e instanceof HTMLElement?e.offsetParent??e.parentElement:e.parentElement;return t instanceof HTMLElement&&t.dataset.layoutTemplateRoot?this.getOffsetParent(t):t}getParentRelativeRect(e,t,n,r){let o=this.getUntransformedRectInGroundNode(e,t,r),s=o,u,a,d=this.getOffsetParentBoundingRect(e);if(d){let h=t.transformPoint(new DOMPoint(d.x,d.y));return{x:o.x-h.x,y:o.y-h.y,width:o.width,height:o.height}}let c=this.getOffsetParent(e);return c&&!Ne(c)?(s=this.getUntransformedRectInGroundNode(c,t),u=o.x-s.x,a=o.y-s.y):n?(u=n.x,a=n.y):(u=0,a=0),{x:u,y:a,width:o.width,height:o.height}}};H=new WeakMap;function Ne(i){return i.classList.contains(ue)||i.parentElement?.classList.contains(ue)}function Pe(i,e,t,n,r){return le&&i?r:(ce||ee)&&e?{x:t.includes(0)?n.x:r.x,y:t.includes(1)?n.y:r.y}:n}function qe(i){let e=te();if(e<2)return Math.round(Y(i));let t=be(i)/L;return J(t*e,0)/e}function De(i){return te()<2?Math.round(Y(i)):Math.round(Y(i)*2)/2}function Le(i){let e=be(i),t=0,n=e%L,r=Math.trunc(e/L)*L;return te()<=1?(n>=32&&(t=64),n<-32&&(t=-64)):(n>=16&&n<48&&(t=32),n>=48&&(t=64),n<-16&&n>=-24&&(t=-24),n<-24&&n>=-48&&(t=-32),n<-48&&n>=-56&&(t=-56),n<-56&&(t=-64)),(r+t)/L}function ze(){return ce||ee?De:he?Le:qe}var S=ze();function Q({x:i,y:e,width:t,height:n}){let r=S(i),o=S(e);return{x:r,y:o,width:S(i+t)-r,height:S(e+n)-o}}function Ae(i){let e=te();return J(i*e,0)/e}function Y(i){return J(i*L,0)/L}function be(i){return Math.trunc(i*L)}function Be({x:i,y:e,width:t,height:n},r){let{rotation:o,translation:s}=fe(r),u=b(i-s.x,e-s.y),a=Q({...u,width:t,height:n}),d=b(a.x+S(t)/2,a.y+S(n)/2),c=F.translate(d.x+s.x,d.y+s.y).rotateSelf(o).translateSelf(-d.x,-d.y),f=W.convertPoint(c,x.center(a)),h=f.x-a.width/2,m=f.y-a.height/2;return{paintedRect:{x:h,y:m,width:a.width,height:a.height},snappedLayoutRect:a,translation:s}}function We({x:i,y:e,width:t,height:n},r,o=[]){let{rotation:s,translation:u}=fe(r);o.includes(0)&&(u.x=-.5*t),o.includes(1)&&(u.y=-.5*n);let a=b(i-u.x,e-u.y),d=Q({...a,width:t,height:n}),c=Math.round(t),f=Math.round(n),h=s!==0?c:d.width,m=s!==0?f:d.height,g=b(d.x+t/2,d.y+n/2),T=F.translate(g.x+u.x,g.y+u.y).rotateSelf(s).translateSelf(-g.x,-g.y),R=b(d.x+h/2,d.y+m/2),p=W.convertPoint(T,R),v=p.x-h/2,C=p.y-m/2;return{paintedRect:{x:v,y:C,width:h,height:m},snappedLayoutRect:d,translation:u}}function Fe(i,e,{width:t,height:n},r){let{rotation:o,translation:s}=fe(r),u=b(e.x-s.x,e.y-s.y),a=i.x+S(u.x),d=i.y+S(u.y),c=b(a+t/2,d+n/2),f=F.translate(c.x+s.x,c.y+s.y).rotateSelf(o).translateSelf(-c.x,-c.y),h=W.convertPoint(f,b(a+t/2,d+n/2)),m=h.x-t/2,g=h.y-n/2;return{x:m,y:g,width:t,height:n}}function Ge(i,e,t,n,r,o){let s={x:0,y:0},u={x:-i.paintX,y:-i.paintY},a={x:i.translationX,y:i.translationY},d={x:i.x-a.x+e.x,y:i.y-a.y+e.y,...t};if(he){let g=Q(d),T=x.offset(g,{x:a.x+u.x,y:a.y+u.y});if(r){let{paintedRect:R,snappedLayoutRect:p,translation:v}=Be(d,n),C=x.offset(R,{x:a.x+u.x,y:a.y+u.y}),y=x.offset(p,v);return s={x:y.x-R.x,y:y.y-R.y},{rect:C,paintDelta:s,translation:v}}return{rect:T,paintDelta:s,translation:{x:0,y:0}}}if(ce||ee){let g=Q(d),T=x.offset(g,{x:a.x+u.x,y:a.y+u.y});if(r){let{paintedRect:R,snappedLayoutRect:p,translation:v}=We(d,n,o),C=x.offset(R,{x:a.x+u.x,y:a.y+u.y}),y=x.offset(p,v);return s={x:y.x-R.x,y:y.y-R.y},{rect:C,paintDelta:s,translation:v}}return{rect:T,paintDelta:s,translation:{x:0,y:0}}}let c=i.x+e.x,f=i.y+e.y,h={x:c,y:f,...t};if(r){let g=x.offset({x:i.x+S(e.x),y:i.y+S(e.y),width:h.width,height:h.height},u),T=x.offset(Fe(i,e,t,n),u);return s={x:g.x-T.x,y:g.y-T.y},{rect:T,paintDelta:s,translation:{x:0,y:0}}}return{rect:x.offset(h,u),paintDelta:s,translation:{x:0,y:0}}}function fe(i){let e=Math.atan2(i.b,i.a)*(180/Math.PI),t={x:i.e,y:i.f};return{rotation:e,translation:t}}function $e(i){let e=[];return i instanceof HTMLElement&&(i.dataset.framerLayoutHintCenterX&&e.push(0),i.dataset.framerLayoutHintCenterY&&e.push(1)),e}function Xe(){return le?60:ee?100:64}function Ye(i){let[e,t]=i.split(" ").map(n=>parseFloat(n));if(!(!se(e)||!se(t)))return{x:e,y:t}}var M=B("LayoutMeasureQueue"),He=new DOMMatrixReadOnly,ke=z.isFirefox()?1:0,we=class{constructor({shouldMeasureCallback:e,shouldMeasureCallbackDelayMs:t,renderingStateTracker:n}={}){l(this,"measureRequests",new Map);l(this,"measureRequestIds",new Set);l(this,"refinementRequests",new Map);l(this,"refinementRequestsByGroundNodeId",new Map);l(this,"richTextRenderIds",new Set);l(this,"previousScopeNodeId","");l(this,"previousZoomLevel");l(this,"previousGroundNodesInViewport");l(this,"resizeObserver",null);l(this,"shouldMeasureTimerStarted",!1);l(this,"shouldMeasureCallback");l(this,"shouldMeasureCallbackDelay");l(this,"renderingStateTracker");l(this,"runShouldMeasureCallback",()=>{this.shouldMeasureTimerStarted=!1,this.size()!==0&&this.shouldMeasureCallback&&this.shouldMeasureCallback()});l(this,"resized",(e,t)=>{if(this.resizeObserver===t)for(let n of e){let r=n.target;if(!r.isConnected||!r.id)return;let o=re(r.id);this.add(o,r)}});this.shouldMeasureCallback=e,this.shouldMeasureCallbackDelay=t??100,this.renderingStateTracker=n}getRequestId(e,t){return t?`${e}-${t}`:e}add(e,t,n,r){if(M.trace("layout measure queue:",e),r&&O(ae(e),"Layout templates should only have a primary rendering"),!n&&this.measureRequests.has(t))return;let o=de(e);this.measureRequests.set(t,{nodeId:o,renderId:e,layoutTemplateSelector:r,children:n});let s=this.getRequestId(e,r);this.measureRequestIds.add(s),this.shouldMeasureCallback&&!this.shouldMeasureTimerStarted&&(setTimeout(this.runShouldMeasureCallback,this.shouldMeasureCallbackDelay),this.shouldMeasureTimerStarted=!0)}stylePresetChanged(e){for(let t of this.richTextRenderIds){let n=e.get(t);this.remeasureNodeAndAncestors(e,n)}this.richTextRenderIds.clear()}remeasureNode(e){this.remeasureCachedElements(e,(t,n)=>{M.trace("remeasureNode:",t,n)})}remeasureCachedElements(e,t){if(e.cache.elementByRenderId)for(let[n,r]of e.cache.elementByRenderId){let o=this.getRequestId(n,void 0);this.measureRequestIds.has(o)||(this.add(n,r,void 0,void 0),t?.(n,void 0))}if(e.cache.elementByLayoutTemplateSelector)for(let[n,r]of e.cache.elementByLayoutTemplateSelector){let o=this.getRequestId(e.id,n);this.measureRequestIds.has(o)||(this.add(e.id,r,void 0,n),t?.(e.id,n))}}remeasureNodeAndAncestors(e,t){t&&(this.remeasureCachedElements(t),this.remeasureNodeAndAncestors(e,e.getNodeParent(t)))}remeasureChildrenWithDOMRects(e){if(M.trace("remeasureChildrenWithLayout:",e.id),!!e.children&&!ie(e))for(let t of e.children)ge(t)&&!t.usesDOMRectCached()||this.remeasureCachedElements(t,(n,r)=>{M.trace("remeasureChildrenWithLayout, child:",n,r)})}remeasureLayoutChildren(e){if(M.trace("remeasureLayoutChildren:",e.id),!!ie(e))for(let t of e.children)this.remeasureCachedElements(t,(n,r)=>{M.trace("remeasureLayoutChildren, child:",n,r)})}remeasureAutosizingAncestors(e,t){!t||!t.children||(M.trace("remeasureAutosizingAncestors:",t.id),this.remeasureLayoutChildren(t),oe(t)&&(t.widthType!==2&&t.heightType!==2||(this.remeasureCachedElements(t,(n,r)=>{M.trace("remeasureAutosizingAncestors, add:",n,r)}),this.remeasureAutosizingAncestors(e,e.getNodeParent(t)))))}process({scopeId:e,zoom:t,offsetX:n,offsetY:r,tree:o,groundNodesInViewport:s}){this.previousScopeNodeId!==e&&(M.debug("switching to a new page",this.previousScopeNodeId,e),this.richTextRenderIds.clear(),this.refinementRequests.clear(),this.refinementRequestsByGroundNodeId.clear(),Ee(o.get(this.previousScopeNodeId)),this.previousScopeNodeId=e,this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=new ResizeObserver(this.resized));let u=this.previousZoomLevel!==void 0&&t!==this.previousZoomLevel;this.previousZoomLevel=t;let a=this.previousGroundNodesInViewport!==void 0&&s!==this.previousGroundNodesInViewport,d=new Set([...s]),c=new Set;if(this.previousGroundNodesInViewport!==void 0)for(let p of s)this.previousGroundNodesInViewport.has(p)&&(d.delete(p),c.add(p));if(this.previousGroundNodesInViewport=s,a&&this.processRefinementRequests(d),(a||u)&&t>ke&&this.processRefinementRequests(c),M.trace("process:",this.size()),this.size()===0)return[];let f=He.scale(t).translateSelf(-n,-r),h=[],m=new Map,g=new K;for(let[p,v]of this.measureRequests){let C=o.getNode(v.nodeId);C&&(this.remeasureAutosizingAncestors(o,o.getNodeParent(C)),this.remeasureChildrenWithDOMRects(C),this.remeasureLayoutChildren(C))}let T=Ue(this.measureRequests.values(),o,f),R=new Set;for(let[p,v]of this.measureRequests){let{nodeId:C,renderId:y,children:U,layoutTemplateSelector:P}=v,I=o.getNode(C);if(!I)continue;if(!p.isConnected){M.trace("measureRequest: not connected",y);continue}P?(O(ae(y),"Layout templates should only have a primary rendering"),I.cache.elementByLayoutTemplateSelector??=new Map,I.cache.elementByLayoutTemplateSelector.set(P,p)):(I.cache.elementByRenderId??=new Map,I.cache.elementByRenderId.set(y,p));let w=T.get(C),V=w.matrix,G=w.rect;if(!s.has(w.id)){this.addRefinementRequest(y,{element:p,groundNodeId:w.id,measureRequest:v}),M.trace("measureRequest: refine",y);continue}let $;if(U){$=[];for(let q of U){if(Te(q))continue;let D=re(q.id),X=de(D),E=m.get(q);if(E||(E=g.getParentRelativeRect(q,V,G),m.set(q,E),D&&h.push({nodeId:X,renderId:D,layoutMetrics:E})),D){let j=o.getNode(X);if(j&&(x.equals(j.cache.getRawDOMRect(y),E)||R.add(D),j.cache.setRawDOMRect(y,E),!Re(j,I)))continue}$.push(E)}}let N=m.get(p);N?M.trace("measureRequest: cached",y,N):(N=g.getParentRelativeRect(p,V,G,!P),m.set(p,N),M.trace("measureRequest: getParentRelativeRect",y,N)),t<=ke&&this.addRefinementRequest(y,{element:p,groundNodeId:w.id,measureRequest:v});let A={...N};P?Object.assign(A,g.getCachedAttributes(p)):A.childrenRects=$,I&&(pe(I)?this.richTextRenderIds.add(I.id):ye(I)&&this.resizeObserver?.observe(p),!P&&!x.equals(I.cache.getRawDOMRect(y)??null,N)&&(R.add(y),I.cache.setRawDOMRect(y,N))),h.push({nodeId:C,renderId:y,layoutTemplateSelector:P,layoutMetrics:A})}return this.measureRequests.clear(),this.measureRequestIds.clear(),R.size>0&&this.renderingStateTracker?.processNodesWithChangedRects(R),h}size(){return this.measureRequests.size}addRefinementRequest(e,t){let n=this.refinementRequests.get(e);if(n&&n.groundNodeId&&this.refinementRequestsByGroundNodeId.get(n.groundNodeId)?.delete(n),this.refinementRequests.set(e,t),t.groundNodeId){let r=this.refinementRequestsByGroundNodeId.get(t.groundNodeId);r||(r=new Set,this.refinementRequestsByGroundNodeId.set(t.groundNodeId,r)),r.add(t)}}processRefinementRequests(e){for(let t of e){let n=this.refinementRequestsByGroundNodeId.get(t);if(!(!n||n.size===0)){for(let r of n){if(this.refinementRequests.delete(r.measureRequest.renderId),!r.element.isConnected)continue;let o=this.getRequestId(r.measureRequest.renderId,r.measureRequest.layoutTemplateSelector);this.measureRequestIds.has(o)||(M.trace("refine:",r.measureRequest.renderId),this.measureRequests.set(r.element,r.measureRequest))}n.clear()}}}};function Ue(i,e,t){let n=new Map,r=new Map;for(let{nodeId:o}of i){let s=t,u=e.get(o),a=[],d=u;for(;d&&e.getParent(d.id);){let c=r.get(d.id);if(c){d=e.get(c);break}d=e.getParent(d.id),d&&a.push(d.id)}if(d&&oe(d)){s=n.get(d.id)?.matrix||s.translate(d.left||0,d.top||0).inverse();for(let f of a)r.set(f,d.id)}else s=s.inverse();n.set(o,{id:d?.id,matrix:s,rect:d?Ce(d):null})}return n}function Ee(i){if(!i)return;i.cache.elementByRenderId=void 0,i.cache.elementByLayoutTemplateSelector=void 0;let e=i.children;if(e)for(let t of e)Ee(t)}export{Se as a,tt as b,rt as c,we as d};
//# sourceMappingURL=https://app.framerstatic.com/chunk-2VLGS6Z2.mjs.map
